"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[449,690],{4449:function(e,t,r){r.r(t),r.d(t,{default:function(){return O},useProductsTableSettings:function(){return A}});var o,n=r(168),a=r(1413),i=r(9439),l=r(3363),d=r(8495),s=r(8923),c=r(2360),u=r(2791),f=r(1199),p=r(7348),h=r(2913),v=function(){return[]},Z=r(5188),S=r(9663),b=r(2690),m=r(763),P=r(6559),g=r(7689),x=r(6551),y=r(6815),j=function(){var e=(0,x.xc)()[x.EJ.products],t=(0,g.s0)(),r=(0,p.nr)(),o=(0,Z.f9)();return(0,u.useCallback)((function(n){var a,i,l;return[{name:"reviewProduct",title:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0443",icon:"openInNew",disabled:!(null!==(a=n.selectedRow)&&void 0!==a&&a._id),type:"onlyIcon",onClick:function(){var e,r;(null===(e=n.selectedRow)||void 0===e?void 0:e._id)&&t(null===(r=n.selectedRow)||void 0===r?void 0:r._id)}},{name:"editProduct",title:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",icon:"edit",iconSize:"90%",type:"onlyIcon",disabled:!(null!==n&&void 0!==n&&null!==(i=n.selectedRow)&&void 0!==i&&i._id),onClick:function(){var t,a=r.products.find((function(e){var t;return e._id===(null===n||void 0===n||null===(t=n.selectedRow)||void 0===t?void 0:t._id)})),i=o.handleOpenModal({ModalChildren:b.default,modalChildrenProps:{title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438",_id:null===n||void 0===n||null===(t=n.selectedRow)||void 0===t?void 0:t._id,filterOptions:P.jI,defaultState:(0,m.omit)(a,["_id","createdAt","updatedAt"]),onSubmit:function(t,r){e.updateById({data:t,onSuccess:function(e){(null===r||void 0===r?void 0:r.closeAfterSave)&&(null===i||void 0===i||i.onClose()),y.k.success("Product updated")},onError:function(e){console.error("Product apdate action",e)}})},fillHeight:!0}})}},{name:"copyProduct",title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438",icon:"copy",iconSize:"90%",type:"onlyIcon",disabled:!(null!==n&&void 0!==n&&null!==(l=n.selectedRow)&&void 0!==l&&l._id),onClick:function(){var t=r.products.find((function(e){var t;return e._id===(null===n||void 0===n||null===(t=n.selectedRow)||void 0===t?void 0:t._id)})),a=o.handleOpenModal({ModalChildren:b.default,modalChildrenProps:{title:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",filterOptions:P.jI,defaultState:(0,m.omit)(t,["createdAt","updatedAt"]),onSubmit:function(t,r){e.updateById({data:t,onSuccess:function(e){(null===r||void 0===r?void 0:r.closeAfterSave)&&(null===a||void 0===a||a.onClose())}})},fillHeight:!0}})}},{name:"archiveProduct",title:"\u0410\u0440\u0445\u0456\u0432",icon:"archive",iconSize:"90%",type:"onlyIcon",disabled:!0},{separator:!0},{name:"createProduct",title:"\u041d\u043e\u0432\u0438\u0439",icon:"plus",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){var t=o.handleOpenModal({ModalChildren:b.default,modalChildrenProps:{title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",filterOptions:P.jI,defaultState:{type:S.C.GOODS},onSubmit:function(r,o){e.create({data:r,onSuccess:function(e){(null===o||void 0===o?void 0:o.closeAfterSave)&&(null===t||void 0===t||t.onClose())}})},fillHeight:!0}})}}]}),[o,t,e,r.products])},C=r(3329),A=function(){var e=(0,h.Z)(),t=(0,p.nr)(),r=e.getAll,o=v(),n=j(),a=(0,u.useState)(!1),l=(0,i.Z)(a,2),d=l[0],c=l[1],f=(0,u.useState)(),Z=(0,i.Z)(f,2),S=Z[0],b=Z[1],m=(0,u.useState)(),P=(0,i.Z)(m,2),g=P[0],x=P[1],y=(0,u.useMemo)((function(){return{tableData:t.products,tableTitles:s.By,tableSortParams:s.wo.filter((function(e){return e.sort})),filterSelectors:o,isFilter:!0,isSearch:!0,footer:!1,checkBoxes:!0,actionsCreator:n,onFilterSubmit:function(e){x(e),r({data:{refresh:!0,query:{filterParams:e,sortParams:S}},onLoading:c}).then()},handleTableSort:function(e,t){b({dataPath:e.dataPath,sortOrder:t}),r({data:{refresh:!0,query:{sortParams:{dataPath:e.dataPath,sortOrder:t},filterParams:g}},onLoading:c}).then()}}}),[n,g,o,r,S,t.products]);return(0,u.useEffect)((function(){S||g||S||g||0===t.products.length&&r({data:{refresh:!0},onLoading:c})}),[g,r,d,S,t.products.length,y]),{tableConfig:y,isLoading:d,sortParams:S,filterParams:g}},_=c.ZP.div(o||(o=(0,n.Z)(["\n  ","\n"])),d.VU),O=function(e){var t=(0,h.Z)().getAll,r=(0,p.nr)(),o=v(),n=j(),d=(0,u.useState)(!1),c=(0,i.Z)(d,2),Z=c[0],S=c[1],b=(0,u.useState)(),m=(0,i.Z)(b,2),P=m[0],g=m[1],x=(0,u.useState)(),y=(0,i.Z)(x,2),A=y[0],O=y[1],w=(0,u.useMemo)((function(){return{tableData:r.products,tableTitles:s.By,tableSortParams:s.wo.filter((function(e){return e.sort})),filterSelectors:o,isFilter:!0,isSearch:!0,footer:!1,checkBoxes:!0,actionsCreator:n,onFilterSubmit:function(e){O(e),t({data:{refresh:!0,query:{filterParams:e,sortParams:P}},onLoading:S}).then()},handleTableSort:function(e,r){g({dataPath:e.dataPath,sortOrder:r}),t({data:{refresh:!0,query:{sortParams:{dataPath:e.dataPath,sortOrder:r},filterParams:A}},onLoading:S}).then()}}}),[n,A,o,t,P,r.products]);return(0,u.useEffect)((function(){P||A||P||A||0===r.products.length&&t({data:{refresh:!0},onLoading:S})}),[A,t,P,r.products.length]),(0,C.jsx)(f.default,{path:e.path,children:(0,C.jsx)(_,{children:(0,C.jsx)(l.ZP,(0,a.Z)((0,a.Z)({},w),{},{isLoading:Z}))})})}},8495:function(e,t,r){r.d(t,{SI:function(){return s},VU:function(){return d}});var o,n,a,i=r(168),l=r(2360),d=(0,l.iv)(o||(o=(0,i.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),s=(0,l.iv)(n||(n=(0,i.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,l.iv)(a||(a=(0,i.Z)(["\n  outline: 1px solid tomato;\n"])))},2690:function(e,t,r){r.r(t);var o=r(1413),n=r(4925),a=r(2791),i=r(2242),l=r(4990),d=r(6681),s=r(4343),c=r(6785),u=r(256),f=r(8095),p=r(6522),h=r(870),v=r(7805),Z=r(6211),S=r(6757),b=r(3329),m=["edit","_id","onSubmit","copy","defaultState","addInputs"];t.default=function(e){e.edit;var t=e._id,r=e.onSubmit,P=(e.copy,e.defaultState),g=(e.addInputs,(0,n.Z)(e,m)),x=(0,u.CG)(),y=x.directories.directories,j=x.products.properties,C=(0,v.hN)({defaultValues:P}),A=C.formState.errors,_=C.formValues,O=C.register,w=C.setValue,k=C.registerSelect,I=C.handleSubmit,M=C.toggleAfterSubmitOption,R=C.closeAfterSave,B=C.clearAfterSave,L=(0,a.useMemo)((function(){return y[h.cA.CATEGORIES_PROD].filter((function(e){return e.type===_.type}))}),[y,_.type]);return(0,b.jsx)(i.Z,(0,o.Z)((0,o.Z)({},g),{},{onSubmit:I((function(e){var o=(0,Z.X$)(e,[]);r&&r({_id:t,data:o},{closeAfterSave:R,clearAfterSave:B})}),(function(e){return console.log(e)})),onOptSelect:function(e){var t=e.value;return t&&w("type",t)},extraFooter:(0,b.jsx)(S.Z,{toggleOption:M,closeAfterSave:R,clearAfterSave:B}),children:(0,b.jsxs)(f.ZP,{className:"inputs",flex:"1",fillWidth:!0,maxHeight:"100%",padding:"12px",overflow:"auto",children:[(0,b.jsx)(l.Z,{label:(0,p.Z)("label"),direction:"vertical",error:A.label,required:!0,children:(0,b.jsx)(d.ZP,(0,o.Z)((0,o.Z)({placeholder:(0,p.Z)("label")},O("label")),{},{required:!0,autoFocus:!0}))}),(0,b.jsx)(l.Z,{label:(0,p.Z)("sku"),direction:"vertical",error:A.sku,children:(0,b.jsx)(d.ZP,(0,o.Z)({placeholder:(0,p.Z)("sku")},O("sku",{max:120})))}),(0,b.jsx)(c.Z,(0,o.Z)({treeMode:!0},k("category",{label:(0,p.Z)("category"),placeholder:(0,p.Z)("category"),required:!0,options:L}))),(0,b.jsx)(c.Z,(0,o.Z)({},k("brand",{options:y[h.cA.BRANDS],label:(0,p.Z)("brand"),placeholder:(0,p.Z)("selectBrand")}))),(0,b.jsx)(c.Z,(0,o.Z)({},k("template",{options:j,label:(0,p.Z)("variationsTemplate"),placeholder:(0,p.Z)("selectVariationsTemplate")}))),(0,b.jsx)(l.Z,{label:(0,p.Z)("status"),direction:"vertical",error:A.status,disabled:!0,children:(0,b.jsx)(d.ZP,(0,o.Z)((0,o.Z)({placeholder:(0,p.Z)("status")},O("status")),{},{disabled:!0}))}),(0,b.jsx)(l.Z,{label:"\u0428\u0442\u0440\u0438\u0445-\u043a\u043e\u0434",direction:"vertical",error:A.barCode,children:(0,b.jsx)(d.ZP,(0,o.Z)({placeholder:"\u0428\u0442\u0440\u0438\u0445-\u043a\u043e\u0434"},O("barCode")))}),(0,b.jsx)(l.Z,{label:"\u041e\u0434\u0438\u043d\u0438\u0446\u0456 \u0432\u0438\u043c\u0456\u0440\u0443",direction:"vertical",error:A.unitsOfMeasurement,disabled:!0,children:(0,b.jsx)(d.ZP,(0,o.Z)((0,o.Z)({placeholder:"\u041e\u0434\u0438\u043d\u0438\u0446\u0456 \u0432\u0438\u043c\u0456\u0440\u0443"},O("unitsOfMeasurement")),{},{disabled:!0}))}),(0,b.jsx)(l.Z,{label:(0,p.Z)("description"),direction:"vertical",error:A.description,children:(0,b.jsx)(s.Z,(0,o.Z)({placeholder:(0,p.Z)("description")},O("description")))})]})}))}}}]);
//# sourceMappingURL=449.6adf513d.chunk.js.map