"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[450],{4450:function(n,e,i){i.r(e),i.d(e,{default:function(){return hn}});var t,r,o,l,d,a,s,u,c,v,f=i(168),x=i(9439),p=i(2791),h=i(2360),m=i(8495),g=i(6146),Z=i(163),j=i(4781),b=i(8095),C=i(7348),P=i(1819),S=i(2483),w=i(1251),y=i(7689),I=i(4109),O=i(6522),k=i(6272),V=i(9953),B=i(4925),A=i(119),_=[{title:(0,O.t)("Manager"),getValue:function(n){var e,i;return null===n||void 0===n||null===(e=n.manager)||void 0===e||null===(i=e.user)||void 0===i?void 0:i.email},tab:L.General},{title:(0,O.t)("Reference"),getValue:function(n){var e;return null===n||void 0===n||null===(e=n.reference)||void 0===e?void 0:e.internal},tab:L.General},{title:(0,O.t)("Group reference"),getValue:function(n){var e,i;return null===n||void 0===n||null===(e=n.group)||void 0===e||null===(i=e.reference)||void 0===i?void 0:i.internal},tab:L.General},{title:(0,O.t)("Group strategy"),getValue:function(n){var e;return null===n||void 0===n||null===(e=n.group)||void 0===e?void 0:e.strategy},tab:L.General},{title:(0,O.t)("Totals"),CellComponent:A.z4,tab:L.General},{title:(0,O.t)("Status"),getValue:function(n){return null===n||void 0===n?void 0:n.status},tab:L.General},{title:(0,O.t)("Additional"),tab:L.Additional}],z=i(3329),E=["CellComponent"],G=function(){var n={};return _.forEach((function(e){var i=e.tab;i&&(n[i]?n[i].push(e):n[i]=[e])})),n}(),D=(0,h.ZP)(b.ZP)(t||(t=(0,f.Z)([""]))),R=function(n){var e=(0,j.on)(),i=(0,C.xA)().currentOrder,t=(0,p.useState)(L.General),r=(0,x.Z)(t,2),o=r[0],l=r[1];console.log("OrderOverviewInfoTab",G);var d=(0,p.useMemo)((function(){return G[o].map((function(n){var t=n.CellComponent,r=(0,B.Z)(n,E);return t?(0,z.jsx)(t,{overlayHandler:e.open,cell:r,data:i},r.title):(0,z.jsx)(A.kQ,{overlayHandler:e.open,cell:r,data:i},r.title)}))}),[o,e.open,i]);return(0,z.jsxs)(D,{fillWidth:!0,flex:1,overflow:"auto",children:[(0,z.jsx)(V.Z,{optionProps:{fitContentH:!0},filterOptions:M,onOptSelect:function(n){l(null===n||void 0===n?void 0:n.value)}}),d]})},L=function(n){return n.General="General",n.Customer="Customer",n.Invoicing="Invoicing",n.Delivery="Delivery",n.Additional="Additional",n}({}),M=(0,k.Dl)(L),H=function(n){return n.info="Info",n.chat="Chat",n.statuses="Statuses",n.comments="Comments",n.tasks="tasks",n}({}),W=(0,k.H1)(H),F=(0,h.ZP)(b.ZP)(r||(r=(0,f.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(n){return n.theme.sideBarBackgroundColor})),T=(0,h.ZP)(b.ZP)(o||(o=(0,f.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),$=(0,h.ZP)(b.ZP)(l||(l=(0,f.Z)([""]))),Q=(0,h.ZP)(I.Z)(d||(d=(0,f.Z)(["\n  fill: ",";\n"])),(function(n){return n.theme.globals.colors.error})),U=(0,h.ZP)(I.Z)(a||(a=(0,f.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),X=function(n){var e,i=(0,p.useState)(0),t=(0,x.Z)(i,2),r=t[0],o=t[1],l=null===(e=(0,Z.Zx)())||void 0===e?void 0:e.orderId,d=(0,C.xA)().currentOrder,a=(0,y.s0)(),s=(0,y.TH)(),u=(0,p.useMemo)((function(){return W[r].value===H.info?(0,z.jsx)(R,{}):null}),[r]);return(0,z.jsxs)(F,{flex:1,fillWidth:!0,padding:"0 8px",children:[(0,z.jsx)(w.xB,{title:(0,O.t)("Order overview"),onBackPress:function(){if(null!==s&&void 0!==s&&s.pathname){var n,e=null===s||void 0===s||null===(n=s.pathname)||void 0===n?void 0:n.replace("/".concat((null===d||void 0===d?void 0:d._id)||l),"");e&&a(e)}}}),(0,z.jsxs)(T,{flex:1,fillWidth:!0,overflow:"auto",children:[(0,z.jsx)(V.Z,{filterOptions:W,optionProps:{fitContentH:!0},onOptSelect:function(n,e,i){return o(i)}}),u]}),(0,z.jsxs)($,{fxDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"8px 0",children:[(0,z.jsx)(I.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==n&&void 0!==n&&n.onEdit),onClick:null===n||void 0===n?void 0:n.onEdit}),(0,z.jsx)(Q,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==n&&void 0!==n&&n.onDelete),onClick:null===n||void 0===n?void 0:n.onDelete}),(0,z.jsxs)(b.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,z.jsx)(I.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",isLoading:null===n||void 0===n?void 0:n.isRefresh,disabled:!(null!==n&&void 0!==n&&n.onRefresh),onClick:null===n||void 0===n?void 0:n.onRefresh}),(0,z.jsx)(U,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==n&&void 0!==n&&n.onOpenRightSide),onClick:null===n||void 0===n?void 0:n.onOpenRightSide})]})]})]})},q=(0,h.ZP)(b.ZP)(s||(s=(0,f.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor})),J=function(n){var e=n.toggleRightSideVisibility,i=(0,C.xA)().currentOrder,t=(0,p.useState)(!1)[1],r=(0,P.xc)().orders;return(0,z.jsxs)(q,{children:[(0,z.jsx)(X,{order:i,onRefresh:function(){(null===i||void 0===i?void 0:i._id)&&r.getById({data:{_id:null===i||void 0===i?void 0:i._id,options:{refreshCurrent:!0}},onLoading:t})},onOpenRightSide:e}),(0,z.jsx)(S.j,{})]})},K=i(6492),N=i(1413),Y=i(400),nn=i(2517),en=i(3383),tn=i(7824),rn=function(n){var e=(0,P.xc)()[tn.d.orders],i=(0,p.useState)(!1),t=(0,x.Z)(i,2),r=t[0],o=t[1],l=(0,p.useState)(0),d=(0,x.Z)(l,2),a=d[0],s=d[1],u=(0,C.xA)().currentOrder,c=(0,p.useMemo)((function(){var n;return null===u||void 0===u||null===(n=u.slots)||void 0===n?void 0:n.filter((function(n){var e,i;return(null===(e=n.product)||void 0===e?void 0:e.type)===(null===(i=en.jI[a])||void 0===i?void 0:i.value)}))}),[null===u||void 0===u?void 0:u.slots,a]),v=(0,p.useMemo)((function(){return{actionsCreator:function(n){return[{icon:"refresh",name:"refresh",onClick:function(){null!==u&&void 0!==u&&u._id&&e.getSlots({data:{params:{order:(0,k.rE)(u)}},onLoading:o})}}]}}}),[u,e]);return(0,p.useEffect)((function(){null!==u&&void 0!==u&&u._id&&e.getSlots({data:{params:{order:(0,k.rE)(u)}}})}),[]),(0,z.jsxs)(b.ZP,{fillWidth:!0,overflow:"hidden",flex:1,children:[(0,z.jsx)(b.ZP,{fillWidth:!0,children:(0,z.jsx)(V.Z,{filterOptions:en.jI,currentIndex:a,onOptSelect:function(n,e,i){s(i)}})}),(0,z.jsx)(Y.ZP,(0,N.Z)((0,N.Z)({isSearch:!1,isFilter:!1},v),{},{tableData:c,isLoading:r,tableTitles:nn.$4}))]})},on=i(7946),ln=function(n){var e=n.order,i=(0,C.xA)(),t=null!==e&&void 0!==e?e:null===i||void 0===i?void 0:i.currentOrder,r=(0,P.xc)().get(tn.d.orders),o=(0,p.useState)(!1),l=(0,x.Z)(o,2),d=l[0],a=l[1],s=(0,p.useMemo)((function(){return{actionsCreator:function(n){return[{name:"refresh",icon:"refresh",onClick:function(){null!==t&&void 0!==t&&t._id&&r.getInvoicesByOrderId({data:{params:{order:(0,k.rE)(t)}}})}}]}}}),[t,r]);return(0,p.useEffect)((function(){null!==t&&void 0!==t&&t._id&&r.getInvoicesByOrderId({data:{params:{order:(0,k.rE)(t)}},onLoading:a})}),[]),(0,z.jsx)(Y.ZP,(0,N.Z)((0,N.Z)({},s),{},{isSearch:!1,isFilter:!1,isLoading:d,tableData:null===t||void 0===t?void 0:t.invoices,tableTitles:on.x}))},dn=function(){return(0,z.jsx)(Y.ZP,{isSearch:!1,isFilter:!1})},an=function(n){return n.Content="Content",n.Invoices="Invoices",n.Payments="Payments",n}(an||{}),sn=(0,k.H1)(an),un=(0,h.ZP)(b.ZP)(u||(u=(0,f.Z)(["\n  overflow: auto;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);\n  }\n"])),(function(n){return n.theme.globals.timingFunctionMain}),(function(n){return n.theme.backgroundColorLight}),(function(n){return n.isVisible?0:100})),cn=(0,h.ZP)(b.ZP)(c||(c=(0,f.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor})),vn=function(n){var e,i=n.toggleVisibility,t=n.isVisible,r=null===(e=(0,Z.Zx)())||void 0===e?void 0:e.orderId,o=(0,C.xA)().currentOrder,l=(0,p.useState)(an.Content),d=(0,x.Z)(l,2),a=d[0],s=d[1],u=(0,p.useMemo)((function(){return a===an.Content?(0,z.jsx)(rn,{}):a===an.Invoices?(0,z.jsx)(ln,{}):a===an.Payments?(0,z.jsx)(dn,{}):void 0}),[a]);return(0,z.jsxs)(un,{overflow:"hidden",fillHeight:!0,isVisible:t,children:[(0,z.jsxs)(cn,{fillWidth:!0,gap:4,isVisible:t,fxDirection:"row",justifyContent:"space-between",children:[(0,z.jsx)(I.Z,{variant:"textExtraSmall",icon:"SmallArrowLeft",style:{padding:6},onClick:i,children:"Back"}),(0,z.jsxs)(b.ZP,{padding:"0 8px",children:[(0,z.jsx)(K.x,{$weight:600,$size:14,children:null===o||void 0===o?void 0:o.code}),(0,z.jsx)(K.x,{$size:10,children:r})]})]}),(0,z.jsx)(b.ZP,{children:(0,z.jsx)(V.Z,{filterOptions:sn,defaultValue:a,onOptSelect:function(n,e,i){s(e)},preventFilter:!0})}),u]})},fn=(0,p.createContext)({}),xn=function(n){var e=n.children,i=(0,C.xA)().currentOrder,t=(0,p.useMemo)((function(){return{currentOrder:i}}),[i]);return(0,z.jsx)(fn.Provider,{value:t,children:e})},pn=h.ZP.div(v||(v=(0,f.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),m.VU),hn=function(n){var e=n.path,i=(0,P.xc)()[tn.d.orders],t=(0,p.useState)(!1),r=(0,x.Z)(t,2),o=r[0],l=r[1],d=(0,Z.Zx)().orderId,a=(0,p.useCallback)((function(){l((function(n){return!n}))}),[]);return(0,p.useEffect)((function(){d&&i.getById({data:{_id:d,options:{refreshCurrent:!0}}})}),[d,i]),(0,z.jsx)(g.vI,{path:e,children:(0,z.jsx)(xn,{children:(0,z.jsx)(j.ZP,{children:(0,z.jsxs)(pn,{children:[(0,z.jsx)(J,{toggleRightSideVisibility:a}),(0,z.jsx)(vn,{toggleVisibility:a,isVisible:o})]})})})})}}}]);
//# sourceMappingURL=450.11126722.chunk.js.map