"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[882,264],{882:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z},useOffersTableSettings:function(){return L}});var o,n=a(9439),i=a(168),r=a(1413),d=a(400),l=a(8495),f=a(2360),s=a(2791),c=a(6931),u=a(7348),h=function(){return[]},v=a(3665),p=a(1819),g=a(6522),m=a(7264),x=a(1494),y=a(2410),b=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).loaders,t=(0,p.xc)().get(p.EJ.offers),a=(0,y.x)(),o=(0,v.f9)(),n=(0,u.i7)().dataMap;return(0,s.useCallback)((function(i){var r,d=null===(r=i.selectedRow)||void 0===r?void 0:r._id,l=d?null===n||void 0===n?void 0:n[d]:void 0;return[{name:"refreshData",title:(0,g.t)("Refresh data"),icon:"refresh",type:"onlyIcon",onClick:function(){t.getAll({data:{refresh:!0},onLoading:e?e.onLoading("refresh"):i.onRefresh})}},{separator:!0},{name:"review",title:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0443",icon:"openInNew",disabled:!d,type:"onlyIcon",navTo:"/app/".concat(a.params.permissionId,"/offers/")+d},{name:"edit",title:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",icon:"edit",iconSize:"90%",type:"onlyIcon",disabled:!d,onClick:function(){l?o.create(m.default,{offer:l}):d&&t.getOne({data:{data:{params:{_id:d}}},onLoading:e?e.onLoading("offer"):i.onRefresh,onSuccess:function(e){var t=e.data;o.create(m.default,{offer:t})}})}},{name:"copy",title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438",icon:"copy",iconSize:"90%",type:"onlyIcon",disabled:!l,onClick:function(){l&&o.create(m.default,{offer:l,copy:!0})}},{name:"archiveProduct",title:"\u0410\u0440\u0445\u0456\u0432",icon:"archive",iconSize:"90%",type:"onlyIcon",disabled:!0},{separator:!0},{name:"createProduct",title:"\u041d\u043e\u0432\u0438\u0439",icon:"plus",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){o.create(x.default)}}]}),[e,o,a,t,n])},D=a(4897),_=a(9541),j=a(7824),S=a(1483),C=a(3329),P=f.ZP.div(o||(o=(0,i.Z)(["\n  ","\n"])),l.VU),Z=function(e){var t=L({}),a=t.tableConfig,o=t.isLoading;return(0,C.jsx)(c.default,{path:e.path,children:(0,C.jsx)(P,{children:(0,C.jsx)(d.ZP,(0,r.Z)((0,r.Z)({},a),{},{isLoading:null===o||void 0===o?void 0:o.offers}))})})},L=function(e){var t=e.searchState,a=e.sortState,o=(0,_.J)({offers:{content:"Refreshing..."},refresh:{content:"Refreshing..."},offer:{content:"Refreshing..."}}),i=o.onLoading,r=o.isLoading,d=(0,p.xc)().get(j.d.offers).getAll,l=(0,u.i7)(),f=h(),c=b({loaders:o}),v=(0,s.useState)(a),g=(0,n.Z)(v,2),m=g[0],x=g[1],y=(0,s.useState)(t),C=(0,n.Z)(y,2),P=C[0],Z=C[1],L=(0,s.useMemo)((function(){return{onSubmitSearch:function(e){if(e.search){var t,a,o=null!==(t=e.param)&&void 0!==t&&t.dataPath?(0,S.P_)(null===(a=e.param)||void 0===a?void 0:a.dataPath,e.search):void 0;Z(e),d({data:{refresh:!0,params:o},onLoading:i("offers")}).then()}else d({data:{refresh:!0},onLoading:i("offers")}).then()},tableData:l.list,tableTitles:D.Y5,searchParams:D.Dr,sortParams:D.Cs,filterSelectors:f,hasFilter:!0,hasSearch:!0,showFooter:!1,checkBoxes:!0,actionsCreator:c,onTableSortChange:function(e,t){x({param:e,order:t}),d({data:{refresh:!0,params:{sortOrder:t,dataKey:null===e||void 0===e?void 0:e.dataKey,dataPath:null===e||void 0===e?void 0:e.dataPath}},onLoading:i("offers")}).then()}}}),[c,f,d,i,l.list]);return(0,s.useEffect)((function(){0===l.list.length&&d({data:{refresh:!0},onLoading:i("offers")})}),[]),{tableConfig:L,isLoading:r,sortParams:m,searchParams:P}}},8495:function(e,t,a){a.d(t,{SI:function(){return f},VU:function(){return l}});var o,n,i,r=a(168),d=a(2360),l=(0,d.iv)(o||(o=(0,r.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),f=(0,d.iv)(n||(n=(0,r.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,d.iv)(i||(i=(0,r.Z)(["\n  outline: 1px solid tomato;\n"])))},7264:function(e,t,a){a.r(t);var o=a(1413),n=a(9420),i=a(8050),r=a(6522),d=a(1483),l=a(3691),f=a(9306),s=a(3007),c=a(8095),u=a(6653),h=a(6492),v=a(9541),p=a(7578),g=a(8782),m=a(5888),x=a(2989),y=a(7608),b=a(5248),D=a(3329);t.default=function(e){var t,a,_,j,S,C,P,Z,L,I,k=e.onClose,w=e.offer,R=e.copy,V=(0,x.G2)(w),O=(0,v.J)({offer_refresh:{content:"Refreshing..."},offer_update:{content:"Updating..."}},{formData:V?(0,d.xT)(V):{type:l.iv.GOODS}}),T=O.setData,z=O.state,A=R?null===(t=z.formData)||void 0===t?void 0:t._id:null===V||void 0===V?void 0:V._id;return V?(0,D.jsx)(i.Z,{fillHeight:!0,title:R?(0,r.t)("Copy offer"):(0,r.t)("Update offer"),onClose:k,children:(0,D.jsx)(p.f4,{value:O,children:null!==(a=O.isLoading)&&void 0!==a&&a.offer?(0,D.jsxs)(c.ZP,{fillWidth:!0,padding:"24px",alignItems:"center",gap:16,children:[(0,D.jsx)(u.$,{size:52}),(0,D.jsx)(h.x,{children:(0,r.t)("Loading info about offer...")})]}):(0,D.jsxs)(c.ZP,{padding:"0 8px 16px",children:[(0,D.jsx)(s.B,{_id:A,edit:!R,type:null===(_=z.formData)||void 0===_?void 0:_.type,defaultValues:null===z||void 0===z?void 0:z.formData,onSuccess:function(e){var t=e.data;T("formData",R?(0,o.Z)((0,o.Z)({},(0,d.xT)(t)),{},{_id:t._id}):(0,d.xT)(t))}}),(0,D.jsx)(y.A,{_id:A,offer:V,defaultValues:null===(j=z.formData)||void 0===j?void 0:j.categories,disabled:!z.formData}),(0,D.jsx)(g.R,{_id:A,offer:V,defaultValues:null===(S=z.formData)||void 0===S?void 0:S.properties,disabled:!z.formData}),(0,D.jsx)(b.L,{expandable:!0,isOpen:!1,offer:V,defaultState:null===V||void 0===V?void 0:V.price,price:null===V||void 0===V?void 0:V.price,title:(0,r.t)("Price")}),(0,D.jsx)(m.A,{offer:V,defaultValues:null===z||void 0===z||null===(C=z.formData)||void 0===C?void 0:C.images,disabled:!(null!==z&&void 0!==z&&z.formData),_id:A}),(0,D.jsx)(n.A,{offer:V,defaultValues:null===(P=z.formData)||void 0===P?void 0:P.dimensions,disabled:R?!(null!==(Z=z.formData)&&void 0!==Z&&Z._id&&z.formData):!A,_id:A}),(0,D.jsx)(f.n,{offer:V,defaultValues:null===(L=z.formData)||void 0===L?void 0:L.measurement,disabled:R?!(null!==(I=z.formData)&&void 0!==I&&I._id&&z.formData):!A,_id:A})]})})}):(0,D.jsx)(i.Z,{title:R?(0,r.t)("Copy offer"):(0,r.t)("Update offer"),fillHeight:!0,children:(0,D.jsx)(c.ZP,{fillWidth:!0,fillHeight:!0,padding:"26px",alignItems:"center",justifyContent:"center",children:(0,D.jsx)(h.x,{$size:16,$weight:600,children:(0,r.t)("Offer not found")})})})}}}]);
//# sourceMappingURL=882.e9e9845f.chunk.js.map