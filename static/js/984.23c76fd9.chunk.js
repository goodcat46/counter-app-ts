"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[984],{5984:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var o,i=n(168),a=n(1413),r=n(9439),l=n(3363),c=n(8495),d=n(8923),u=n(2360),s=n(319),f=n(2791),v=n(870),p=n(7348),S=function(){var e=(0,p.UL)(v.cA.CATEGORIES_TR),t=(0,p.UL)(v.cA.CATEGORIES_TR);return[{label:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a OUT",data:t.directory,selectorName:"countOut",dirType:v.cA.COUNTS},{label:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a IN",data:t.directory,selectorName:"countIn",dirType:v.cA.COUNTS},{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457",data:e.directory,selectorName:"category",dirType:v.cA.CATEGORIES_TR}]},m=n(4165),h=n(5861),y=n(5188),T=n(4961),C=n(9085),O=n(7553),M=function(e){var t,n=e.ctx,o=e.service,i=e.modalService,a=e.state;return{name:"editTr",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",icon:"edit",disabled:!(null!==(t=n.selectedRow)&&void 0!==t&&t._id),type:"onlyIcon",onClick:function(){var e=(0,h.Z)((0,m.Z)().mark((function e(){var t,r;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.transactions.find((function(e){var t;return e._id===(null===(t=n.selectedRow)||void 0===t?void 0:t._id)})),r=i.handleOpenModal({Modal:O.n.FormCreateTransaction,props:{title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",filterOptions:T.MN,defaultOption:T.MN.findIndex((function(e){return e.value===(null===t||void 0===t?void 0:t.type)})),defaultState:t,fillHeight:!0,onSubmit:function(e,t){o.updateById({data:e,onSuccess:function(e){(null===t||void 0===t?void 0:t.closeAfterSave)&&(null===r||void 0===r||r.onClose())}})}}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},b=function(e){var t,n=e.ctx,o=e.service,i=e.modalService,a=e.state;return{name:"copyTr",title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",icon:"copy",type:"onlyIcon",disabled:!(null!==(t=n.selectedRow)&&void 0!==t&&t._id),onClick:function(){var e=(0,h.Z)((0,m.Z)().mark((function e(){var t,r;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.transactions.find((function(e){var t;return e._id===(null===(t=n.selectedRow)||void 0===t?void 0:t._id)})),r=i.handleOpenModal({Modal:O.n.FormCreateTransaction,props:{title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",filterOptions:T.MN,defaultOption:T.MN.findIndex((function(e){return e.value===(null===t||void 0===t?void 0:t.type)})),defaultState:t,fillHeight:!0,onSubmit:function(e,t){o.create({data:e,onSuccess:function(e){C.Am.success("\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u044e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e"),(null===t||void 0===t?void 0:t.closeAfterSave)&&(null===r||void 0===r||r.onClose())}})}}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},I=function(e){var t,n=e.ctx,o=e.service;e.modalService,e.state;return{name:"deleteTr",title:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",icon:"delete",iconSize:"90%",type:"onlyIcon",disabled:!(null!==(t=n.selectedRow)&&void 0!==t&&t._id),onClick:function(){var e;o.deleteById({data:null===(e=n.selectedRow)||void 0===e?void 0:e._id})}}},N=function(e){e.ctx;var t=e.service,n=e.modalService;e.state;return{name:"createIncomeTr",title:"\u0414\u043e\u0445\u0456\u0434",icon:"INCOME",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){var e=n.handleOpenModal({Modal:O.n.FormCreateTransaction,props:{title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",filterOptions:T.MN,defaultOption:0,fillHeight:!0,defaultState:{type:"INCOME"},onSubmit:function(n,o){t.create({data:n,onSuccess:function(t){(null===o||void 0===o?void 0:o.closeAfterSave)&&(null===e||void 0===e||e.onClose())}})}}})}}},E=function(e){e.ctx;var t=e.service,n=e.modalService;e.state;return{name:"createTransferTr",title:"\u041f\u0435\u0440\u0435\u043a\u0430\u0437 \u043c\u0456\u0436 \u0440\u0430\u0445\u0443\u043d\u043a\u0430\u043c\u0438",icon:"TRANSFER",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){var e=n.handleOpenModal({Modal:O.n.FormCreateTransaction,props:{title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043d\u043e\u0432\u0443",filterOptions:T.MN,defaultOption:1,fillHeight:!0,defaultState:{type:"TRANSFER"},onSubmit:function(n,o){t.create({data:n,onSuccess:function(t){(null===o||void 0===o?void 0:o.closeAfterSave)&&(null===e||void 0===e||e.onClose())}})}}})}}},Z=function(e){e.ctx;var t=e.service,n=e.modalService;e.state;return{name:"createExpenseTr",title:"\u0412\u0438\u0442\u0440\u0430\u0442\u0430",icon:"EXPENSE",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){var e=n.handleOpenModal({Modal:O.n.FormCreateTransaction,props:{title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",filterOptions:T.MN,defaultOption:2,defaultState:{type:"EXPENSE"},onSubmit:function(n,o){t.create({data:n,onSuccess:function(t){(null===o||void 0===o?void 0:o.closeAfterSave)&&(null===e||void 0===e||e.onClose())}})},fillHeight:!0}})}}},x=n(1199),A=n(3329),g=u.ZP.div(o||(o=(0,i.Z)(["\n  ","\n"])),c.VU),R=function(e){var t=(0,s.Z)(),n=(0,p.cM)(),o=t.getAll,i=S(),c=function(e){var t=(0,p.cM)(),n=(0,y.f9)();return function(o){var i={state:t,service:e,modalService:n,ctx:o};return[M(i),b(i),I(i),{separator:!0},N(i),E(i),Z(i)]}}(t),u=(0,f.useState)(!1),v=(0,r.Z)(u,2),m=v[0],h=v[1],T=(0,f.useState)(),C=(0,r.Z)(T,2),O=C[0],R=C[1],w=(0,f.useState)(),_=(0,r.Z)(w,2),k=_[0],P=_[1],F=(0,f.useMemo)((function(){return{tableData:n.transactions,tableTitles:d.yV,tableSortParams:d.wo.filter((function(e){return e.sort})),filterSelectors:i,isFilter:!0,isSearch:!0,footer:!0,checkBoxes:!0,actionsCreator:c,onFilterSubmit:function(e){P(e),o({data:{refresh:!0,query:{filterParams:e,sortParams:O}},onLoading:h})},handleTableSort:function(e,t){R({dataPath:e.dataPath,sortOrder:t}),o({data:{refresh:!0,query:{sortParams:{dataPath:e.dataPath,sortOrder:t},filterParams:k}},onLoading:h})}}}),[c,k,i,o,O,n.transactions]);return(0,f.useEffect)((function(){O||k||O||k||0===n.transactions.length&&o({data:{refresh:!0},onLoading:h})}),[k,o,O,n.transactions.length]),(0,A.jsx)(x.default,{path:e.path,children:(0,A.jsx)(g,{children:(0,A.jsx)(l.ZP,(0,a.Z)((0,a.Z)({},F),{},{isLoading:m}))})})}},8495:function(e,t,n){n.d(t,{SI:function(){return d},VU:function(){return c}});var o,i,a,r=n(168),l=n(2360),c=(0,l.iv)(o||(o=(0,r.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),d=(0,l.iv)(i||(i=(0,r.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,l.iv)(a||(a=(0,r.Z)(["\n  outline: 1px solid tomato;\n"])))}}]);
//# sourceMappingURL=984.23c76fd9.chunk.js.map