"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[375],{5375:function(t,e,n){n.r(e),n.d(e,{default:function(){return S},useOrderTableConfigs:function(){return L}});var a,o=n(168),r=n(1413),i=n(9439),l=n(3772),d=n(8495),u=n(2360),c=n(2791),s=n(6931),v=n(7348),p=n(2517),h=n(2973),m=n(5188),f=n(8577),b=n(7689),g=n(387),P=n(6522),x=n(1819),D=n(7824),y=function(){var t=(0,m.f9)(),e=(0,b.s0)(),n=(0,x.xc)()[D.d.orders].getAll;return(0,c.useCallback)((function(a){var o=null===a||void 0===a?void 0:a.selectedRow,r=o?(0,g.Gg)(o):"";return[{icon:"refresh",onClick:function(){n({data:{refresh:!0},onLoading:a.onRefresh})}},{separator:!0},{name:"openOrderOverview",icon:"openInNew",disabled:!r,onClick:function(){r&&e(r)}},{name:"archiveOrder",icon:"archive",disabled:!r,onClick:function(){r&&window.confirm("\u0410\u0440\u0445\u0456\u0432\u0443\u0432\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u0435\u043d\u043d\u044f: ".concat(r))}},{name:"editOrder",icon:"edit",disabled:!r,onClick:function(){t.open({Modal:f.n.FormCreateOrder,props:{title:"Edit order"}})}},{name:"copyOrder",icon:"copy",disabled:!r,onClick:function(){t.open({Modal:f.n.FormCreateOrder,props:{title:"Copy order: ".concat(r)}})}},{separator:!0},{name:"createOrder",icon:"AddToList",type:"onlyIconFilled",onClick:function(){t.open({Modal:f.n.FormCreateOrdersGroup,props:{title:(0,P.t)("Create orders group")}})}},{name:"createOrder",icon:"plus",type:"onlyIconFilled",onClick:function(){t.open({Modal:f.n.FormCreateOrder,props:{title:(0,P.t)("Create order")}})}}]}),[n,t,e])},w=n(1185),C=n(9953),k=n(8095),B=n(6492),Z=n(3329),O=(0,w.H1)(h.D),j=(0,u.ZP)(k.ZP)(a||(a=(0,o.Z)(["\n  ","\n"])),d.VU),S=function(t){var e=L(),n=e.tableConfig,a=e.isLoading,o=(0,c.useState)({}),d=(0,i.Z)(o,1)[0],u=(0,c.useCallback)((function(t){var e,n,a,o;return(0,Z.jsxs)(k.ZP,{justifyContent:"space-between",fillHeight:!0,fillWidth:!0,overflow:"hidden",padding:"2px 4px",gap:6,style:{cursor:"inherit"},children:[(0,Z.jsx)(B.x,{$size:11,$weight:500,$textTransform:"none",children:null!==(e=null===t||void 0===t||null===(n=t.option)||void 0===n?void 0:n.label)&&void 0!==e?e:null}),(0,Z.jsx)(B.x,{$size:10,$ellipsisMode:!0,children:null!==t&&void 0!==t&&null!==(a=t.option)&&void 0!==a&&a.value?d[null===t||void 0===t||null===(o=t.option)||void 0===o?void 0:o.value]:0})]})}),[d]);return(0,Z.jsx)(s.default,{path:t.path,children:(0,Z.jsxs)(j,{children:[(0,Z.jsx)(C.Z,{style:{height:52},filterOptions:O,renderLabel:u,optionProps:{fitContentH:!1}}),(0,Z.jsx)(k.ZP,{fillWidth:!0,flex:1,overflow:"hidden",children:(0,Z.jsx)(l.ZP,(0,r.Z)((0,r.Z)({},n),{},{isLoading:a}))})]})})},L=function(){var t=(0,x.xc)()[D.d.orders].getAll,e=(0,v.xA)(),n=y(),a=(0,c.useState)(!1),o=(0,i.Z)(a,2),r=o[0],l=o[1],d=(0,c.useState)(),u=(0,i.Z)(d,2),s=u[0],h=u[1],m=(0,c.useState)(),f=(0,i.Z)(m,2),b=f[0],g=f[1],P=(0,c.useMemo)((function(){return{tableData:e.orders,tableTitles:p.ni,tableSortParams:p.qo.filter((function(t){return t.sort})),isFilter:!0,isSearch:!0,footer:!0,checkBoxes:!0,actionsCreator:n,onFilterSubmit:function(e){g(e),t({data:{refresh:!0,query:{filterParams:e,sortParams:s}},onLoading:l}).then()},handleTableSort:function(e,n){h({dataPath:e.dataPath,sortOrder:n}),t({data:{refresh:!0,query:{sortParams:{dataPath:e.dataPath,sortOrder:n},filterParams:b}},onLoading:l}).then()}}}),[n,b,t,s,e.orders]);return(0,c.useEffect)((function(){s||b||t({data:{refresh:!0},onLoading:l})}),[]),{tableConfig:P,isLoading:r,sortParams:s,filterParams:b}}},8495:function(t,e,n){n.d(e,{SI:function(){return u},VU:function(){return d}});var a,o,r,i=n(168),l=n(2360),d=(0,l.iv)(a||(a=(0,i.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,l.iv)(o||(o=(0,i.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,l.iv)(r||(r=(0,i.Z)(["\n  outline: 1px solid tomato;\n"])))},2517:function(t,e,n){n.d(e,{$4:function(){return v},ni:function(){return c},qo:function(){return s}});var a=n(3433),o=n(2973),r=n(6522),i=n(5481),l=n(1185),d=n(6981),u={top:{name:(0,r.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,r.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateDbl"},c=((0,i.Gg)(o.D),o.D.new,(0,r.t)(o.D.new),o.D.inWork,(0,r.t)(o.D.inWork),o.D.rejectedByCustomer,(0,r.t)(o.D.rejectedByCustomer),o.D.rejectedByManager,(0,r.t)(o.D.rejectedByManager),o.D.active,(0,r.t)(o.D.active),o.D.fulfilled,(0,r.t)(o.D.fulfilled),o.D.fulfilledWithRefund,(0,r.t)(o.D.fulfilledWithRefund),o.D.archived,(0,r.t)(o.D.archived),o.D.expired,(0,r.t)(o.D.expired),[{top:{name:"".concat((0,r.t)("Status")),getData:function(t){return t.status}},bottom:{name:(0,r.t)("Priority"),getData:function(t){return(0,r.t)("undefined")}},width:"150px",action:"status"},{top:{name:(0,r.t)("Total amount"),align:"end",getData:function(t){var e,n;return(0,l.__)(null!==(e=null===(n=t.total)||void 0===n?void 0:n.amount)&&void 0!==e?e:0)}},bottom:{name:(0,r.t)("Slots count"),align:"end",getData:function(t){var e;return null===(e=t.total)||void 0===e?void 0:e.items}},width:"120px",action:"numberWithSpaces"},{top:{name:(0,r.t)("Reference / Internal"),getData:function(t){var e;return null===t||void 0===t||null===(e=t.reference)||void 0===e?void 0:e.internal}},bottom:{name:(0,r.t)("Reference / External"),getData:function(t){var e;return null===t||void 0===t||null===(e=t.reference)||void 0===e?void 0:e.external}},width:"190px",action:"valueByPath"},{top:{name:(0,r.t)("Group"),getData:function(t){var e,n;return null===t||void 0===t||null===(e=t.group)||void 0===e||null===(n=e.reference)||void 0===n?void 0:n.internal}},bottom:{name:(0,r.t)("Strategy"),getData:function(t){var e;return null===t||void 0===t||null===(e=t.group)||void 0===e?void 0:e.strategy}},width:"180px",action:"valueByPath"},{top:{name:(0,r.t)("Customer"),getData:function(t){var e,n,a,o,r,i,l;return(null===(e=t.customer)||void 0===e?void 0:e.name)&&(null===(n=t.customer)||void 0===n||null===(a=n.name)||void 0===a?void 0:a.first)+" "+(null===(o=t.customer)||void 0===o||null===(r=o.name)||void 0===r?void 0:r.second)||(null===(i=t.customer)||void 0===i?void 0:i.label)&&(null===(l=t.customer)||void 0===l?void 0:l.label.base)||"--- ---"}},bottom:{name:(0,r.t)("Phone"),path:"customer.phone"},width:"180px",action:"valueByPath"},{top:{name:(0,r.t)("Receiver"),getData:function(t){var e,n,a,o,r,i,l;return(null===(e=t.receiver)||void 0===e?void 0:e.name)&&(null===(n=t.receiver)||void 0===n||null===(a=n.name)||void 0===a?void 0:a.first)+" "+(null===(o=t.receiver)||void 0===o||null===(r=o.name)||void 0===r?void 0:r.second)||(null===(i=t.receiver)||void 0===i?void 0:i.label)&&(null===(l=t.receiver)||void 0===l?void 0:l.label.base)||"--- ---"}},bottom:{name:(0,r.t)("Phone"),path:"receiver.phone"},width:"180px",action:"valueByPath"},{top:{name:(0,r.t)("Invoices")},width:"200px",action:"tags"},{top:{name:(0,r.t)("Payments")},width:"200px",action:"valueByPath"},{top:{name:(0,r.t)("Deliveries")},width:"200px",action:"valueByPath"},{top:{name:(0,r.t)("comment"),path:"comment"},width:"170px",action:"valueByPath"},{top:{name:(0,r.t)("Refunds")},width:"200px",action:"valueByPath"},{top:{name:(0,r.t)("Manager"),path:"manager.name"},bottom:{name:(0,r.t)("email"),path:"manager.email"},width:"180px",action:"valueByPath"},u]),s=[{label:"\u0414\u0430\u0442\u0430",dataPath:"eventDate",filter:!1,search:!1,sort:!0},{label:"\u041c\u0456\u0442\u043a\u0430",dataPath:"mark.label",filter:!1,search:!0,sort:!0},{label:"\u0421\u0442\u0430\u0442\u0443\u0441",dataPath:"status",filter:!1,search:!1,sort:!0},{label:(0,r.t)("type"),dataPath:"type",filter:!1,search:!0,sort:!0},{label:(0,r.t)("amount"),dataPath:"total",filter:!1,search:!0,sort:!0},{label:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",dataPath:"createdAt",filter:!1,search:!1,sort:!0},{label:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",dataPath:"updatedAt",filter:!1,search:!1,sort:!0}],v=[{top:{name:(0,r.t)("Variation label"),getData:function(t){var e;return null===(e=t.variation)||void 0===e?void 0:e.label}},action:"text",width:"210px"},{top:{name:(0,r.t)("Product sku"),getData:function(t){var e;return null===(e=t.product)||void 0===e?void 0:e.sku}},bottom:{name:(0,r.t)("Variation sku"),getData:function(t){var e;return null===(e=t.variation)||void 0===e?void 0:e.sku}},action:"valueByPath",width:"150px"},{top:{name:(0,r.t)("Product bar-code"),getData:function(t){var e;return null===(e=t.product)||void 0===e?void 0:e.barCode}},bottom:{name:(0,r.t)("Variation bar-code"),getData:function(t){var e;return null===(e=t.variation)||void 0===e?void 0:e.barCode}},action:"valueByPath",width:"150px"},{top:{name:(0,r.t)("Total amount"),getData:function(t){return t.total}},bottom:{name:(0,r.t)("Total q-ty"),getData:function(t){return t.quantity}},action:"valueByPath",width:"125px"}].concat((0,a.Z)((0,d.yL)()),[{top:{name:(0,r.t)("")},bottom:{name:(0,r.t)("")},action:"valueByPath",width:"125px"},{top:{name:(0,r.t)("")},bottom:{name:(0,r.t)("")},action:"valueByPath",width:"125px"},{top:{name:(0,r.t)("")},bottom:{name:(0,r.t)("")},action:"valueByPath",width:"125px"},u])}}]);
//# sourceMappingURL=375.aac86f51.chunk.js.map