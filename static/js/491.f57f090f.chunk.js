"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[491],{491:function(e,n,i){i.r(n),i.d(n,{FormCreateOrdersGroupStepsEnum:function(){return Fe},default:function(){return He}});var o,t,l,r,a,d,u,s,c=i(168),v=i(1413),f=i(9439),h=i(4942),m=i(7049),p=i(9953),x=i(2791),g=i(3350),b=i(8095),Z=i(1251),j=i(6522),C=i(4662),y=i(3433),S=i(7348),P=i(2928),w=i(1383),I=i(3185),k=i(3665),D=i(6606),q=i(763),B=i.n(q),M=i(3329),E=(0,g.ZP)(b.ZP)(o||(o=(0,c.Z)(["\n  //position: relative;\n  min-height: 32px;\n  //height: max-content;\n  max-height: 32px;\n  //overflow: hidden;\n\n  color: inherit;\n\n  border-top: 1px solid ",";\n  transition: all ",";\n  &:last-child {\n    border-bottom: 1px solid ",";\n  }\n"])),(function(e){return e.theme.trBorderClr}),(function(e){return e.theme.globals.timingFnMain}),(function(e){return e.theme.trBorderClr})),W=(0,g.ZP)(b.ZP)(t||(t=(0,c.Z)(["\n  min-height: 32px;\n\n  position: sticky;\n  top: 0;\n  left: 0;\n  z-index: 50;\n\n  color: inherit;\n  border-bottom: 1px solid ",";\n  background-color: ",";\n"])),(function(e){return e.theme.trBorderClr}),(function(e){return e.theme.modalBackgroundColor})),_=(0,g.ZP)(b.ZP)(l||(l=(0,c.Z)(["\n  height: max-content;\n\n  transition: all ",";\n"])),(function(e){return e.theme.globals.timingFnMain})),R=(0,g.ZP)(P.ZP)(r||(r=(0,c.Z)(["\n  justify-content: flex-start;\n\n  padding: 0 8px 0 0;\n\n  min-width: min-content;\n\n  flex: 1;\n\n  font-size: 14px;\n  font-weight: 500;\n  color: inherit;\n\n  fill: ",";\n\n  &:hover,\n  &:active,\n  &:focus {\n    background-color: inherit;\n  }\n"])),(function(e){return e.theme.accentColor.base})),A=function(e){var n=e.children,i=e.maxHeight,o=void 0===i?"32px":i,t=e.renderHeader,l=e.renderFooter,r=e.toggled,a=void 0===r||r,d=e.open,u=void 0!==d&&d,s=e.disabled,c=e.contentContainerStyle,h=e.activeBackgroundColor,m=void 0===h?"rgba(220, 220, 220, 1)":h,p=e.className,g=(0,x.useState)(!!s||u),b=(0,f.Z)(g,2),Z=b[0],C=b[1];return(0,x.useEffect)((function(){(0,q.isBoolean)(s)&&s&&C(!1)}),[s]),(0,M.jsxs)(E,{style:{maxHeight:Z?"100%":o},className:p,children:[(0,M.jsxs)(W,{fillWidth:!0,fxDirection:"row",className:"header",isOpen:Z,alignItems:"center",justifyContent:"space-between",activeBackgroundColor:m,children:[(0,M.jsx)(R,{icon:a?Z?"SmallArrowDown":"SmallArrowRight":void 0,iconSize:"24px",variant:"def",onClick:function(){a&&C((function(e){return!e}))},disabled:!a||s||!n,isOpen:Z,children:Z?(0,j.t)("Close"):(0,j.t)("Open")}),t]}),(0,M.jsx)(_,(0,v.Z)((0,v.Z)({padding:"0 8px",overflow:"hidden"},c),{},{className:"content",children:n})),l]})},F=i(6492),N=(0,g.ZP)(A)(a||(a=(0,c.Z)(["\n  & .header {\n  }\n  & .content {\n    padding: 0;\n  }\n"]))),V=function(e){var n=e.slots,i=e.onRemove,o=e.onUpdate,t=e.renderHeader,l=e.title,r=e.onAddSlotPress,a=e.renderFooter,d=(0,g.Fg)(),u=(0,x.useMemo)((function(){return n.map((function(e){return(0,M.jsx)(D.Z,{slot:e,editable:!0,onRemovePress:i?function(){return(null===e||void 0===e?void 0:e.tempId)&&i(null===e||void 0===e?void 0:e.tempId)}:void 0,onUpdate:o},"slot_".concat(null===e||void 0===e?void 0:e.tempId))}))}),[i,o,n]),s=(0,x.useMemo)((function(){return(0,M.jsxs)(b.ZP,{fxDirection:"row",fillHeight:!0,gap:8,alignItems:"center",padding:"2px 0",children:[t||(0,M.jsx)(F.x,{$weight:500,$size:15,children:l}),r&&(0,M.jsx)(b.ZP,{height:"80%",border:"1px solid ".concat(d.modalBorderColor)}),r&&(0,M.jsx)(P.ZP,{variant:"textExtraSmall",style:{minWidth:"fit-content",height:"100%",fontWeight:600},disabled:!r,onClick:r,children:(0,j.t)("Add")})]})}),[r,t,d.modalBorderColor,l]);return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(N,{open:!0,renderHeader:s,renderFooter:a,title:l,children:u})})},$=i(387),z=i(4805),T=i(1819),H=i(7824),L=(0,g.ZP)(b.ZP)(d||(d=(0,c.Z)(["\n  color: ",";\n"])),(function(e){return e.theme.fontColorSidebar})),O=(0,g.ZP)(b.ZP)(u||(u=(0,c.Z)([""]))),G=(0,g.ZP)(b.ZP)(s||(s=(0,c.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),U=function(e){var n=e.onChangeValidStatus,i=(0,k.kw)(),o=(0,T.xc)()[H.d.orders],t=(0,S.xA)().ordersGroupFormData.slots,l=(0,z.useMediaQuery)({maxWidth:480}),r=(0,x.useCallback)((function(e){o.addTempSlot(e)}),[o]),a=(0,x.useCallback)((function(e){o.removeTempSlot(e)}),[o]),d=(0,x.useCallback)((function(e){o.updateTempSlot(e)}),[o]),u=(0,x.useMemo)((function(){var e={};return null===t||void 0===t||t.map((function(n){var i,o,t;null!==(i=n.warehouse)&&void 0!==i&&i._id&&(e[n.warehouse._id]={warehouse:n.warehouse,slots:null!==(o=e[n.warehouse._id])&&void 0!==o&&o.slots?[].concat((0,y.Z)(null===(t=e[n.warehouse._id])||void 0===t?void 0:t.slots),[n]):[n]});return""})),e}),[t]);(0,x.useEffect)((function(){n&&n(!(null===t||void 0===t||!t.length)&&(null===t||void 0===t?void 0:t.length)>0)}),[n,null===t||void 0===t?void 0:t.length]);var s=(0,x.useMemo)((function(){return Object.keys(u).map((function(e,n){var o,t,l=u[e];return(0,M.jsx)(V,{slots:l.slots,title:null===l||void 0===l||null===(t=l.warehouse)||void 0===t?void 0:t.label,onRemove:a,onUpdate:d,onAddSlotPress:function(){var e=i.open({Modal:I.n.FormCreateOrderSlot,props:{params:null!==l&&void 0!==l&&l.warehouse?{warehouse:(0,$.rE)(null===l||void 0===l?void 0:l.warehouse)}:void 0,onSubmit:function(n){r(n),n&&null!==e&&void 0!==e&&e.onClose&&(null===e||void 0===e||e.onClose())}}})}},"pre-order_".concat((null===(o=l.warehouse)||void 0===o?void 0:o._id)||n))}))}),[u,r,a,d,i]);return(0,M.jsxs)(L,{flex:1,fillWidth:!0,overflow:"hidden",style:{position:"relative"},children:[(0,M.jsx)(O,{flex:1,overflow:"auto",children:(0,M.jsx)(b.ZP,{flex:1,fillWidth:!0,children:s})}),(0,M.jsxs)(G,{fxDirection:"row",gap:8,padding:"8px",children:[(0,M.jsx)(P.ZP,{variant:"defaultSmall",onClick:function(){window.confirm("Remove all items?")&&w.kl.info("All items will be remove")},children:(0,j.t)("Remove all")}),(0,M.jsx)(P.ZP,{variant:"outlinedSmall",flex:1,onClick:function(){var e=i.open({Modal:I.n.FormCreateOrderSlot,props:{onSubmit:function(n){r(n),n&&null!==e&&void 0!==e&&e.onClose&&(null===e||void 0===e||e.onClose())}}})},children:(0,j.t)(l?"Add":"Add position to group")})]})]})},J=i(4990),Q=i(4925),X=i(9656),K=i(1186),Y=i(8589),ee=i(7665),ne=["onSelect","onSubmit","onClose","asReceiver"],ie=function(e){var n=e.onSelect,i=(e.onSubmit,e.onClose),o=e.asReceiver,t=(0,Q.Z)(e,ne),l=(0,S.I6)().customers,r=(0,k.kw)(),a=(0,T.xc)()[T.EJ.customers],d=(0,x.useMemo)((function(){return{tableData:l,tableTitles:K.f,actionsCreator:function(e){return[{icon:"refresh",onClick:function(){return a.getAll()}},{separator:!0},{icon:"plus",onClick:function(){var e=r.open({ModalChildren:ee.Z,modalChildrenProps:{onSubmit:function(n){a.create({data:(0,$.vg)(n),onSuccess:null===e||void 0===e?void 0:e.onClose})}}})}}]},onRowClick:function(e){null!==e&&void 0!==e&&e.rowData&&n&&(n(e.rowData),i&&i())}}}),[a,l,i,r,n]);return(0,x.useEffect)((function(){a.getAll({data:{refresh:!0,params:{}}})}),[]),(0,M.jsx)(X.Z,(0,v.Z)((0,v.Z)({fillWidth:!0,fillHeight:!0,title:(0,j.t)(o?"Select receiver":"Select customer"),onClose:i},t),{},{children:(0,M.jsx)(Y.ZP,(0,v.Z)({},d))}))},oe=i(7802),te=i(9214),le=i(7666),re=["onSubmit","onSelect","onClose"],ae=function(e){e.onSubmit;var n,i=e.onSelect,o=e.onClose,t=((0,Q.Z)(e,re),(0,S.O5)()),l=t.users,r=t.permission,a=(0,T.xc)()[H.d.permissions],d=(0,x.useState)(!1),u=(0,f.Z)(d,1)[0],s=(0,x.useMemo)((function(){return{tableData:l.filter((function(e){return!e.integration})),onRowClick:function(e){var n=l.find((function(n){return n._id===(null===e||void 0===e?void 0:e.rowId)}));n&&i&&i(n)},actionsCreator:function(e){return[{name:"refresh",icon:"refresh",onClick:function(){var e,n;(null===(e=r.company)||void 0===e?void 0:e._id)&&a.getAllByCompanyId({data:{_id:null===(n=r.company)||void 0===n?void 0:n._id,params:{recipient:te.E.user}}})}}]}}}),[i,null===(n=r.company)||void 0===n?void 0:n._id,a,l]);return(0,M.jsx)(X.Z,{fillWidth:!0,fillHeight:!0,onClose:o,title:(0,j.t)("Select manager"),children:(0,M.jsx)(Y.ZP,(0,v.Z)((0,v.Z)({tableTitles:le.NT},s),{},{hasSearch:!1,isLoading:u}))})},de=i(1392),ue=i(2911),se=i(389),ce=i(6681),ve=i(1134),fe=function(e){var n=e.onSuccess,i=e.isReceiver,o=(0,T.xc)()[T.EJ.customers],t=(0,k.kw)();return(0,M.jsx)(P.ZP,{variant:"onlyIcon",icon:"plus",iconSize:"100%",size:"30px",onClick:function(){var e=t.open({ModalChildren:ee.Z,modalChildrenProps:{title:i?(0,j.t)("Create receiver"):void 0,onSubmit:function(i){o.create({data:(0,$.vg)(i),onSuccess:function(i){n&&n(i),null===e||void 0===e||e.onClose()}})}}})}})},he=function(e){var n=e.info,i=e.isReceiver,o=e.isManager,t=(0,g.Fg)(),l=(0,x.useMemo)((function(){if(n)return function(e){var n=e.isManager;return[{label:(0,j.t)("label"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.label)||void 0===n?void 0:n.base)||"---"},visible:!n},{label:(0,j.t)("name"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.first)||"---"},visible:!0},{label:(0,j.t)("Middle name"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.middle)||"---"},visible:!0},{label:(0,j.t)("secondName"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.second)||"---"},visible:!0},{label:(0,j.t)("email"),getValue:function(e){return(null===e||void 0===e?void 0:e.email)||"---"},visible:!0},{label:(0,j.t)("taxCode"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.taxCode)||void 0===n?void 0:n.corp)||"---"},visible:!n},{label:(0,j.t)("personalTaxCode"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.taxCode)||void 0===n?void 0:n.personal)||"---"},visible:!n},{label:(0,j.t)("tags"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.tags)||void 0===n?void 0:n.join(", "))||"---"},visible:!n}]}({info:warehouse,isReceiver:i,isManager:o}).map((function(e){var i=e.label,o=e.getValue;return e.visible&&(0,M.jsxs)(b.ZP,{gap:2,padding:"4px",flex:"1 1 50%",maxWidth:"50%",border:"1px solid ".concat(t.modalBorderColor),children:[(0,M.jsx)(F.x,{$size:10,children:i}),(0,M.jsx)(F.x,{$align:"right",$size:12,$weight:600,children:o(n)})]},i)}))}),[n,o,i,t.modalBorderColor]);return(0,M.jsx)(b.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",border:"1px solid ".concat(t.modalBorderColor),children:l})};var me=[{name:"country",label:(0,j.t)("Country"),required:!1},{name:"region",label:(0,j.t)("Region"),required:!1},{name:"area",label:(0,j.t)("Area"),required:!1},{name:"city",label:(0,j.t)("City"),required:!1},{name:"street",label:(0,j.t)("Street"),required:!1},{name:"house",label:(0,j.t)("House"),required:!1},{name:"office",label:(0,j.t)("Office"),required:!1},{name:"room",label:(0,j.t)("Room"),required:!1}],pe=(B().throttle((function(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];(e=console).log.apply(e,["Throttled Logger"].concat(i))}),5e3),B().throttle((function(e){console.log(pe.name),e()}),3e3)),xe=i(1604),ge=i(9297),be=i(8527),Ze=i(4522);function je(e,n){(0,Ze.Z)(2,arguments);var i=(0,be.Z)(e),o=(0,ge.Z)(n);return isNaN(o)?new Date(NaN):o?(i.setDate(i.getDate()+o),i):i}var Ce,ye,Se,Pe,we,Ie,ke,De=i(8251),qe=function(e){var n=e.title;return(0,M.jsx)(F.x,{$padding:"0 6px",$ellipsisMode:!0,$size:16,$weight:500,children:n})},Be=(0,g.ZP)(b.ZP)(Ce||(Ce=(0,c.Z)([""]))),Me=(0,g.ZP)(b.ZP)(ye||(ye=(0,c.Z)(["\n  padding-bottom: 8px;\n\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),Ee=(0,g.ZP)(A)(Se||(Se=(0,c.Z)(["\n  & .content {\n    max-width: 480px;\n    width: 100%;\n    margin: auto;\n  }\n"]))),We=function(e){var n,i,o,t,l,r,a,d,u,s,c,p,g=e.onChangeValidStatus,Z=(0,k.kw)(),C=(0,ve.Gc)(),y=C.formState,w=y.isValid,I=y.errors,D=C.register,q=C.setValue,B=C.unregister,E=C.watch,W=C.trigger,_=(0,x.useState)(De.oZ.externalService),R=(0,f.Z)(_,2),A=(R[0],R[1],E()),F=(0,ue.f)((0,S.ei)().methods,{withFullLabel:!0}),N=(0,ue.f)((0,S.$N)().methods,{withFullLabel:!0}),V=(0,ue.f)((0,S.A2)().methods,{withFullLabel:!0}),$=(0,x.useState)({hasDelivery:!!A.deliveryInfo,hasDeliveryInvoice:!(null===(n=A.deliveryInfo)||void 0===n||!n.invoiceInfo),hasReceiverInfo:!!A.receiver,hasExecuteDate:!(null===(i=A.shipmentInfo)||void 0===i||!i.executeAt)}),z=(0,f.Z)($,2),T=z[0],H=z[1],L=function(e,n){try{q(e,n,{shouldTouch:!0}),pe((function(){return W().then((function(e){e&&g&&g(e)})).catch((function(e){console.error("handleOnChangeValue trigger error",e)}))}))}catch(i){console.error("handleOnChangeValue: ",i)}},O=function(e){return function(n){if(H((function(i){return(0,v.Z)((0,v.Z)({},i),{},(0,h.Z)({},e,n))})),n){if("hasExecuteDate"===e)return q("shipmentInfo.executeAt",xe.Z(je(new Date,1),"yyyy-MM-dd"));if("hasDeliveryInvoice"===e)return q("deliveryInfo.invoiceInfo.expireAt",(0,m.w4)(je(new Date,1)))}else if(!n){if("hasReceiverInfo"===e)return B("receiver");if("hasDeliveryInvoice"===e)return B("deliveryInfo.invoiceInfo");if("hasDelivery"===e)return B("deliveryInfo")}}},G=function(e){return{name:e,onChange:O(e),value:T[e]}};return(0,x.useEffect)((function(){g&&g(w)}),[w,g]),(0,M.jsxs)(Be,{flex:1,overflow:"auto",children:[(0,M.jsxs)(b.ZP,{fillWidth:!0,gap:8,padding:"8px 2px",style:{maxWidth:480,width:"100%",margin:"0 auto"},children:[(null===A||void 0===A?void 0:A.manager)&&(0,M.jsx)(J.Z,{label:(0,j.t)("Manager"),children:(0,M.jsx)(he,{info:null===A||void 0===A||null===(o=A.manager)||void 0===o?void 0:o.user,isManager:!0})}),(0,M.jsx)(P.ZP,{variant:"outlinedSmall",onClick:function(){var e=Z.open({ModalChildren:ae,modalChildrenProps:{onSelect:function(n){L("manager",n),(null===e||void 0===e?void 0:e.onClose)&&(null===e||void 0===e||e.onClose())}}})},children:(0,j.t)(null!==A&&void 0!==A&&A.manager?"Change manager":"Select manager")})]}),(0,M.jsxs)(b.ZP,{padding:"0 2px",children:[(0,M.jsxs)(Ee,{contentContainerStyle:{padding:"8px 0",gap:8},open:!0,renderHeader:(0,M.jsx)(qe,{title:(0,j.t)("Customer")}),children:[(null===A||void 0===A?void 0:A.customer)&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(J.Z,{label:(0,j.t)("Customer information"),children:(0,M.jsx)(he,{info:null===A||void 0===A?void 0:A.customer})}),(0,M.jsx)(Me,{fillWidth:!0,overflow:"hidden",children:(0,M.jsx)(J.Z,{label:(0,j.t)("Communication methods"),children:(0,M.jsx)(oe.Z,{numColumns:2,value:[null!==(t=null===A||void 0===A||null===(l=A.communication)||void 0===l||null===(r=l.customer)||void 0===r?void 0:r._id)&&void 0!==t?t:""],resetButtonLabel:(0,j.t)("Not needed"),options:N,resetButtonPosition:"start",onSelect:function(e){var n=e.value;L("communication.customer",{_id:n})}})})})]}),(0,M.jsxs)(b.ZP,{fxDirection:"row",gap:8,fillWidth:!0,alignItems:"center",children:[(0,M.jsx)(fe,{onSuccess:function(e){L("customer",e)}}),(0,M.jsx)(P.ZP,{variant:"outlinedSmall",flex:1,onClick:function(){var e=Z.open({ModalChildren:ie,modalChildrenProps:{onSelect:function(n){L("customer",n),(null===e||void 0===e?void 0:e.onClose)&&(null===e||void 0===e||e.onClose())}}})},children:(0,j.t)(null!==A&&void 0!==A&&A.customer?"Change customer":"Select customer")})]}),(0,M.jsx)(Me,{fillWidth:!0,gap:4,children:(0,M.jsx)(J.Z,{label:(0,j.t)("Receiver"),children:(0,M.jsx)(se.Z,(0,v.Z)((0,v.Z)({},G("hasReceiverInfo")),{},{rejectLabel:(0,j.t)("The same"),acceptLabel:(0,j.t)("Another")}))})})]}),(null===T||void 0===T?void 0:T.hasReceiverInfo)&&(0,M.jsxs)(Ee,{contentContainerStyle:{padding:"8px 0",gap:8},open:!0,renderHeader:(0,M.jsx)(qe,{title:(0,j.t)("Receiver")}),children:[(null===A||void 0===A?void 0:A.receiver)&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(J.Z,{label:(0,j.t)("Receiver information"),children:[(0,M.jsx)(he,{info:null===A||void 0===A?void 0:A.receiver})," "]}),(0,M.jsx)(Me,{fillWidth:!0,children:(0,M.jsx)(J.Z,{label:(0,j.t)("Communication methods"),children:(0,M.jsx)(oe.Z,{numColumns:2,value:[null!==(a=null===A||void 0===A||null===(d=A.communication)||void 0===d||null===(u=d.receiver)||void 0===u?void 0:u._id)&&void 0!==a?a:""],resetButtonLabel:(0,j.t)("Without"),options:N.map((function(e){return(0,v.Z)((0,v.Z)({},e),{},{value:e._id})})),resetButtonPosition:"start",onSelect:function(e){var n=e.value;L("communication.receiver",{_id:n})}})})})]}),(0,M.jsxs)(b.ZP,{fxDirection:"row",gap:8,fillWidth:!0,alignItems:"center",children:[(0,M.jsx)(fe,{isReceiver:!0,onSuccess:function(e){L("receiver",e)}}),(0,M.jsx)(P.ZP,{variant:"outlinedSmall",flex:1,onClick:function(){var e=Z.open({ModalChildren:ie,modalChildrenProps:{onSelect:function(n){L("receiver",n),(null===e||void 0===e?void 0:e.onClose)&&(null===e||void 0===e||e.onClose())}}})},children:(0,j.t)(null!==A&&void 0!==A&&A.receiver?"Change receiver":"Select receiver")})]})]}),(0,M.jsxs)(Ee,{contentContainerStyle:{padding:"0 2px"},open:!0,renderHeader:(0,M.jsx)(qe,{title:(0,j.t)("Shipment")}),children:[(0,M.jsxs)(Me,{fillWidth:!0,gap:4,children:[(0,M.jsx)(J.Z,{label:(0,j.t)("Another execute date"),children:(0,M.jsx)(se.Z,(0,v.Z)({},G("hasExecuteDate")))}),(null===T||void 0===T?void 0:T.hasExecuteDate)&&(0,M.jsx)(J.Z,{label:(0,j.t)("Execute at"),required:null===T||void 0===T?void 0:T.hasExecuteDate,children:(0,M.jsx)(ce.ZP,(0,v.Z)({placeholder:(0,j.t)("Execute at"),type:"date",required:null===T||void 0===T?void 0:T.hasExecuteDate},D("shipmentInfo.executeAt",{required:null===T||void 0===T?void 0:T.hasExecuteDate})))})]}),(0,M.jsx)(Me,{fillWidth:!0,gap:4,children:(0,M.jsx)(J.Z,{label:(0,j.t)("Delivery"),children:(0,M.jsx)(se.Z,(0,v.Z)({},G("hasDelivery")))})})]}),(null===T||void 0===T?void 0:T.hasDelivery)&&(0,M.jsxs)(Ee,{contentContainerStyle:{padding:"0 2px"},open:!0,renderHeader:(0,M.jsx)(qe,{title:(0,j.t)("Delivery")}),children:[(0,M.jsx)(Me,{fillWidth:!0,gap:8,children:(0,M.jsx)(J.Z,{label:(0,j.t)("Delivery method"),required:!0,children:(0,M.jsx)(de.Z,{options:F,currentOption:null===A||void 0===A||null===(s=A.deliveryInfo)||void 0===s?void 0:s.method,onChangeIndex:function(e){L("deliveryInfo.method",F[e])}})})}),(0,M.jsx)(Me,{fillWidth:!0,style:{columnGap:8,display:"grid",gridTemplateColumns:"1fr 1fr"},children:me.map((function(e){var n,i,o=e.name,t=e.label,l=e.required;return(0,M.jsx)(J.Z,{label:t,error:null!==I&&void 0!==I&&null!==(n=I.deliveryInfo)&&void 0!==n&&n.destination?null===I||void 0===I||null===(i=I.deliveryInfo)||void 0===i?void 0:i.destination[o]:void 0,required:l,children:(0,M.jsx)(ce.ZP,(0,v.Z)({required:l,placeholder:t},D("deliveryInfo.destination.".concat(o),{required:l})))},"dest-addr-".concat(t))}))}),(0,M.jsx)(Me,{fillWidth:!0,gap:8,children:(0,M.jsx)(J.Z,{label:(0,j.t)("Has payment"),required:!0,children:(0,M.jsx)(se.Z,(0,v.Z)({},G("hasDeliveryInvoice")))})}),(0,M.jsx)(Me,{fillWidth:!0,gap:8,children:(null===T||void 0===T?void 0:T.hasDeliveryInvoice)&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(J.Z,{label:(0,j.t)("Payment method"),required:!0,children:(0,M.jsx)(de.Z,{options:V,currentOption:null===A||void 0===A||null===(c=A.deliveryInfo)||void 0===c||null===(p=c.invoiceInfo)||void 0===p?void 0:p.method,onChangeIndex:function(e){L("deliveryInfo.invoiceInfo.method",V[e])}})}),(0,M.jsx)(J.Z,{label:(0,j.t)("Expired at"),required:!0,children:(0,M.jsx)(ce.ZP,(0,v.Z)({placeholder:(0,j.t)("Expired at"),type:"datetime-local",required:!0},D("deliveryInfo.invoiceInfo.expireAt",{required:!0})))})]})})]}),(0,M.jsx)(Ee,{contentContainerStyle:{padding:"8px 2px"},open:!0,renderHeader:(0,M.jsx)(qe,{title:(0,j.t)("Invoicing")}),children:(0,M.jsx)(J.Z,{label:(0,j.t)("Expired at"),required:!0,children:(0,M.jsx)(ce.ZP,(0,v.Z)({placeholder:(0,j.t)("Expired at"),type:"datetime-local",required:!0},D("invoiceInfo.expireAt",{required:!0})))})})]})]})},_e=i(4695),Re=i(371),Ae=i(2092),Fe=function(e){return e.Stuffing="Stuffing",e.Info="Info",e}({}),Ne=(0,m.H1)(Fe),Ve=(Pe={},(0,h.Z)(Pe,Fe.Stuffing,!0),(0,h.Z)(Pe,Fe.Info,!1),Pe),$e=g.ZP.form(we||(we=(0,c.Z)(["\n  color: ",";\n\n  display: flex;\n  flex-direction: column;\n\n  width: 98vw;\n  height: 98vh;\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.modalBackgroundColor})),ze=(0,g.ZP)(b.ZP)(Ie||(Ie=(0,c.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),Te=(0,g.ZP)(b.ZP)(ke||(ke=(0,c.Z)([""]))),He=function(e){var n,i,o,t,l=e.onClose,r=(0,T.xc)()[T.EJ.orders],a=(0,S.xA)().ordersGroupFormData,d=(0,x.useState)(!1),u=(0,f.Z)(d,2),s=u[0],c=u[1],g=(0,m.dn)(Ne),b=g.stepsMap,y=g.stepIdx,P=g.setNextStep,I=g.setPrevStep,k=g.getCurrentStep,D=g.isLast,q=(0,x.useState)(Ve),E=(0,f.Z)(q,2),W=E[0],_=E[1],R=function(e){return function(n){_((function(i){return(0,v.Z)((0,v.Z)({},i),{},(0,h.Z)({},Fe[e],n))}))}},A=(0,ve.cI)({defaultValues:(0,v.Z)((0,v.Z)({},a.info),{},{invoiceInfo:(0,v.Z)((0,v.Z)({},null===(n=a.info)||void 0===n?void 0:n.invoiceInfo),{},{expireAt:null!==(i=null===(o=a.info)||void 0===o||null===(t=o.invoiceInfo)||void 0===t?void 0:t.expireAt)&&void 0!==i?i:(0,m.w4)(je(new Date,1))})}),resolver:(0,_e.X)(Re.Lr),reValidateMode:"onSubmit"}),F=A.watch,N=A.handleSubmit,V=F(),$=(0,x.useMemo)((function(){return null!==b&&void 0!==b&&b.Stuffing?(0,M.jsx)(U,{onChangeValidStatus:R("Stuffing")}):null!==b&&void 0!==b&&b.Info?(0,M.jsx)(We,{onChangeValidStatus:R("Info"),isGroup:!0}):void 0}),[null===b||void 0===b?void 0:b.Info,null===b||void 0===b?void 0:b.Stuffing]),z=(0,x.useMemo)((function(){return W[k().value]}),[k,W]);return(0,M.jsx)(ve.RV,(0,v.Z)((0,v.Z)({},A),{},{children:(0,M.jsxs)($e,{onSubmit:N((function(e){D?(0,Ae.k_)(Ae.p6.groups.createGroupedByWarehouse,{data:{info:r.toOrderInfoReqData(V,{omitPathArr:[]}),slots:r.toOrderSlotsReqData(a.slots)},onLoading:c,logError:!0,logResData:!0}):w.kl.error("Form data is not valid")}),(function e(n){console.log(e.name,n)})),children:[(0,M.jsx)(Z.xB,{title:(0,j.t)("Create orders group by warehouse"),onBackPress:l}),(0,M.jsxs)(ze,{fillWidth:!0,flex:1,overflow:"hidden",children:[(0,M.jsx)(p.Z,{options:Ne,asStepper:!0,currentIndex:y,optionProps:{fitContentH:!0}}),$]}),(0,M.jsx)(Te,{padding:"8px",children:(0,M.jsx)(C.Z,{steps:Ne,onNextPress:function(){"Info"===k().value&&r.updateCurrentGroupFormInfoData(B().cloneDeep(V)),z?P():w.kl.error("".concat((0,j.t)("Step is not finished"),': "').concat(k().value.toUpperCase(),'"'))},onPrevPress:function(){"Info"===k().value&&r.updateCurrentGroupFormInfoData(B().cloneDeep(V)),I()},currentIndex:y,canGoNext:!0,canSubmit:D,submitButton:!0,isLoading:s,onCancelPress:0===y?l:void 0})})]})}))}},7665:function(e,n,i){i.d(n,{Z:function(){return E}});var o,t=i(168),l=i(1413),r=i(4925),a=function(e){return e.facebook="facebook",e.instagram="instagram",e.referralSystem="referralSystem",e.another="another",e}({}),d=i(9656),u=i(6522),s=i(3350),c=i(8095),v=i(4990),f=i(6681),h=i(9964),m=i(457),p=i(1134),x=i(2928),g=i(1392),b=i(8553),Z=i(2791),j=i(1383),C=i(5611),y=i(763),S=i.n(y),P=i(3329),w=["defaultState","withReferer","onSubmit"],I=["register","setValue","handleSubmit","watch"],k=j.E4.isDevMode(),D=(0,b.H1)(a),q=(0,s.ZP)(c.ZP)(o||(o=(0,t.Z)([""]))),B=function(e){var n=e.form,i=[{name:"first",label:(0,u.t)("First name"),required:!0},{name:"second",label:(0,u.t)("Second name")},{name:"middle",label:(0,u.t)("Middle name")}];return(0,P.jsx)(P.Fragment,{children:i.map((function(e){var i=e.name,o=e.label,t=e.required;return(0,P.jsx)(v.Z,{label:o,required:t,children:(0,P.jsx)(f.ZP,(0,l.Z)((0,l.Z)({placeholder:o},n.register("name.".concat(i),{required:t})),{},{required:t}))},"name_".concat(i))}))})},M=function(e){var n=e.form,i=[{name:"base",label:(0,u.t)("Label"),required:!0},{name:"print",label:(0,u.t)("Print label")}];return(0,P.jsx)(P.Fragment,{children:i.map((function(e){var i=e.name,o=e.label,t=e.required;return(0,P.jsx)(v.Z,{label:o,required:t,children:(0,P.jsx)(f.ZP,(0,l.Z)((0,l.Z)({placeholder:o},n.register("label.".concat(i),{required:t})),{},{required:t}))},"name_".concat(i))}))})},E=function(e){var n=e.defaultState,i=e.withReferer,o=e.onSubmit,t=(0,r.Z)(e,w),s=(0,p.cI)({defaultValues:(0,l.Z)((0,l.Z)({},n),{},{businessType:C.GE.company})}),b=s.register,j=s.setValue,y=s.handleSubmit,E=s.watch,W=(0,r.Z)(s,I),_=E(),R=(0,Z.useMemo)((function(){return!(null===n||void 0===n||!n.email)}),[null===n||void 0===n?void 0:n.email]);return(0,P.jsx)(d.Z,(0,l.Z)((0,l.Z)({fillHeight:!0},t),{},{title:t.title?t.title:(0,u.t)("Create customer"),onSubmit:y((function(e){o&&o(S().omit(e,R?["engagementSource","email"]:["engagementSource"]))})),children:(0,P.jsxs)(q,{padding:"0 8px 8px",children:[(0,P.jsx)(v.Z,{label:(0,u.t)("type"),required:!0,children:(0,P.jsx)(h.Z,{options:m.Wk,onSelect:function(e){j("businessType",null===e||void 0===e?void 0:e.value)}})}),_.businessType!==C.GE.person&&(0,P.jsx)(M,{form:(0,l.Z)({register:b,setValue:j,handleSubmit:y,watch:E},W)}),_.businessType!==C.GE.company&&(0,P.jsx)(B,{form:(0,l.Z)({register:b,setValue:j,handleSubmit:y,watch:E},W)}),(0,P.jsx)(v.Z,{label:(0,u.t)("email"),disabled:R,required:!0,children:(0,P.jsx)(f.ZP,(0,l.Z)((0,l.Z)({placeholder:(0,u.t)("email"),type:"email"},b("email",{required:!0})),{},{disabled:R,required:!0}))}),(0,P.jsx)(v.Z,{label:(0,u.t)("phone"),children:(0,P.jsx)(f.ZP,(0,l.Z)({placeholder:(0,u.t)("phone")},b("phone")))}),_.businessType!==C.GE.company&&(0,P.jsx)(v.Z,{label:(0,u.t)("Birth date"),children:(0,P.jsx)(f.ZP,(0,l.Z)((0,l.Z)({placeholder:(0,u.t)("Birth date")},b("birthDate")),{},{type:"datetime-local"}))}),i&&k&&(0,P.jsx)(v.Z,{label:(0,u.t)("Referrer id"),children:(0,P.jsx)(f.ZP,(0,l.Z)({placeholder:(0,u.t)("Referrer id")},b("referrer._id")))}),(0,P.jsx)(v.Z,{label:(0,u.t)("Source"),children:(0,P.jsx)(g.Z,{disabled:!0,options:D,currentOption:{value:null===_||void 0===_?void 0:_.engagementSource},onChangeIndex:function(e){j("engagementSource",D[e].value)}})}),(null===_||void 0===_?void 0:_.engagementSource)===a.referralSystem&&(0,P.jsxs)(c.ZP,{gap:8,fillWidth:!0,children:[(0,P.jsx)(v.Z,{label:(0,u.t)("Referrer"),required:!0,children:(0,P.jsx)(f.ZP,{placeholder:(0,u.t)("Referrer"),type:"email",required:!0})}),(0,P.jsxs)(c.ZP,{fxDirection:"row",fillWidth:!0,gap:8,padding:"8px 0",children:[(0,P.jsx)(x.ZP,{variant:"defaultSmall",children:(0,u.t)("Clear referrer")}),(0,P.jsx)(x.ZP,{variant:"outlinedSmall",flex:1,children:(0,u.t)("Select referrer")})]})]})]})}))}},6606:function(e,n,i){i.d(n,{Z:function(){return W}});var o,t,l,r,a,d,u,s,c,v=i(168),f=i(9439),h=i(8095),m=i(3350),p=i(2928),x=i(2791),g=i(6492),b=i(6522),Z=i(6681),j=i(7049),C=i(3329),y=(0,m.ZP)(Z.ZP)(o||(o=(0,v.Z)(["\n  flex: 1;\n  width: 100%;\n  height: 100%;\n\n  padding: 0 6px;\n  font-size: 16px;\n  font-weight: 500;\n\n  text-align: center;\n\n  //border: 0;\n  //color: inherit;\n  //background: transparent;\n  //text-align: center;\n  //font-family: inherit;\n  //font-size: inherit;\n  //font-weight: inherit;\n"]))),S=function(e){var n=e.value,i=void 0===n?0:n,o=e.onChangeValue,t=e.width,l=e.height,r=void 0===l?"18px":l,a=e.disabled,d=e.className,u=e.autoFocus,s=(0,x.useState)(null!==i&&void 0!==i?i:0),c=(0,f.Z)(s,2),v=c[0],m=c[1],g=(0,x.useRef)(null),b=function(e){return function(){var n;o?o(v+e>0?v+e:v):m((function(n){return n+e?n+e:n})),null===(n=g.current)||void 0===n||n.focus()}};return(0,x.useEffect)((function(){j.sr.isNum(i)&&i>0&&m(i)}),[i]),(0,C.jsxs)(h.ZP,{fxDirection:"row",gap:4,width:t,alignItems:"center",height:"min-content",children:[(0,C.jsx)(p.ZP,{variant:"onlyIcon",size:r,icon:"minus",onClick:b(-1)}),(0,C.jsx)(y,{value:v,disabled:a,className:d,ref:g,onChange:function(e){var n=e.target.value;isNaN(Number(n))||(o?o(Number(n)):m(Number(n)))},onSubmit:function(e){e.preventDefault()},autoFocus:u}),(0,C.jsx)(p.ZP,{variant:"onlyIcon",size:r,icon:"plus",onClick:b(1)})]})},P=i(4990),w=(0,m.ZP)(h.ZP)(t||(t=(0,v.Z)(["\n  position: relative;\n  //height: fit-content;\n  padding: 4px;\n\n  //height: min-content;\n\n  //border-bottom: 2px solid ",";\n  color: ",";\n  cursor: default;\n\n  border: 1px solid ",";\n  border-left: 3px solid ",";\n\n  transition: all ",";\n\n  &:hover {\n    border-color: ",";\n  }\n"])),(function(e){return e.theme.fieldBackgroundColor}),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.globals.timingFunctionMain}),(function(e){var n=e.disabled,i=e.theme;return!n&&i.accentColor.base})),I=(0,m.ZP)(h.ZP)(l||(l=(0,v.Z)(["\n  width: min-content;\n  @media screen and (min-width: 768px) {\n    width: max-content;\n    flex-direction: row;\n    gap: 8px;\n  }\n"]))),k=(0,m.ZP)(h.ZP)(r||(r=(0,v.Z)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));\n  //grid-template-rows: repeat(5, min-content);\n  //grid-template-areas:\n  //  'label label label label sku sku'\n  //  'price bonus discount bonus cashback total';\n  //'category category brand brand type type'\n  //'atr_1 atr_1  atr_2  atr_2 qty qty'\n  //'warehouse warehouse warehouse warehouse warehouse warehouse';\n\n  //max-width: 270px;\n  height: max-content;\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),D=(0,m.ZP)(k)(a||(a=(0,v.Z)(["\n  grid-template-columns: repeat(auto-fill, minmax(125px, 1fr));\n"]))),q=(0,m.ZP)(h.ZP)(d||(d=(0,v.Z)(["\n  //height: fit-content;\n\n  //width: 100%;\n  object-position: center;\n  object-fit: contain;\n  overflow: hidden;\n  width: 100%;\n  max-width: 125px;\n  //max-height: 100px;\n  //height: 100px;\n\n  //@media screen and (max-width: 480px) {\n  //  width: 100px;\n  //  margin: auto;\n  //}\n"]))),B=(0,m.ZP)(g.x)(u||(u=(0,v.Z)(["\n  color: ",";\n"])),(function(e){var n=e.theme;return"secondary"===e.colorType?n.globals.inputPlaceholderColor:n.fontColorSidebar})),M=(0,m.ZP)(p.ZP)(s||(s=(0,v.Z)(["\n  padding: 6px 10px;\n"]))),E=(0,m.ZP)(h.ZP)(c||(c=(0,v.Z)(["\n  //border-top: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor})),W=function(e){var n,i,o,t,l,r,a,d,u,s,c,v=e.slot,p=e.onEditPress,Z=e.disabled,y=e.onSelectPress,W=e.onRemovePress,R=(e.onUpdate,e.editable),A=(0,x.useState)(v),F=(0,f.Z)(A,1)[0],N=(0,x.useMemo)((function(){var e,n,i,o,t,l,r,a,d,u,s,c,v,f,h,m,p,x,g,b=[];null!==F&&void 0!==F&&null!==(e=F.product)&&void 0!==e&&null!==(n=e.images)&&void 0!==n&&n.length&&(b=null===F||void 0===F||null===(v=F.product)||void 0===v?void 0:v.images);null!==F&&void 0!==F&&null!==(i=F.variation)&&void 0!==i&&null!==(o=i.offer)&&void 0!==o&&null!==(t=o.images)&&void 0!==t&&t.length&&(b=null===F||void 0===F||null===(f=F.variation)||void 0===f||null===(h=f.offer)||void 0===h?void 0:h.images);null!==F&&void 0!==F&&null!==(l=F.inventory)&&void 0!==l&&null!==(r=l.offer)&&void 0!==r&&null!==(a=r.images)&&void 0!==a&&a.length&&(b=null===F||void 0===F||null===(m=F.inventory)||void 0===m||null===(p=m.offer)||void 0===p?void 0:p.images);null!==F&&void 0!==F&&null!==(d=F.origin)&&void 0!==d&&null!==(u=d.offer)&&void 0!==u&&null!==(s=u.images)&&void 0!==s&&s.length&&(b=null===F||void 0===F||null===(x=F.origin)||void 0===x||null===(g=x.offer)||void 0===g?void 0:g.images);return(null===(c=b[0])||void 0===c?void 0:c.img_preview)||""}),[null===F||void 0===F||null===(n=F.product)||void 0===n?void 0:n.images,null===F||void 0===F||null===(i=F.variation)||void 0===i||null===(o=i.offer)||void 0===o?void 0:o.images,null===F||void 0===F||null===(t=F.origin)||void 0===t||null===(l=t.offer)||void 0===l?void 0:l.images,null===F||void 0===F||null===(r=F.inventory)||void 0===r||null===(a=r.offer)||void 0===a?void 0:a.images]),V=(0,x.useMemo)((function(){return _.map((function(e){var n=F&&e.name&&F[e.name],i=n&&"object"===typeof n&&"amount"in n?n.amount:n;return(0,C.jsxs)(h.ZP,{justifyContent:"flex-start",fillWidth:!0,padding:"4px",gap:4,children:[(0,C.jsx)(B,{colorType:"secondary",$size:10,children:e.label}),(0,C.jsx)(B,{$size:12,$align:"right",$weight:500,children:(0,j.__)(i||0)})]},e.name)}))}),[F]),$=(0,x.useMemo)((function(){var e,n;return null===v||void 0===v||null===(e=v.variation)||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.map((function(e){var n;return(0,C.jsxs)(h.ZP,{justifyContent:"flex-start",fillWidth:!0,padding:"4px",gap:4,children:[(0,C.jsx)(B,{colorType:"secondary",$size:10,children:null===e||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.label}),(0,C.jsx)(g.x,{$size:12,$align:"right",$weight:500,children:null===e||void 0===e?void 0:e.label})]},null===e||void 0===e?void 0:e._id)}))}),[null===v||void 0===v||null===(d=v.variation)||void 0===d?void 0:d.properties]),z=(0,m.Fg)();return(0,C.jsx)(w,{disabled:Z,children:(0,C.jsxs)(h.ZP,{fillWidth:!0,gap:8,fxDirection:"row",children:[(0,C.jsxs)(I,{style:{borderRight:"1px solid ".concat(z.modalBorderColor)},padding:"0 4px 0 0",children:[(0,C.jsx)(q,{justifyContent:"flex-start",children:(0,C.jsx)("img",{src:N,style:{objectFit:"cover",objectPosition:"center"},alt:"",width:"100%"})}),!Z&&(0,C.jsxs)(h.ZP,{maxWidth:"125px",justifyContent:"space-between",children:[R&&(0,C.jsx)(P.Z,{label:(0,b.t)("quantity"),style:{width:"100%",marginBottom:8},disabled:Z,children:(0,C.jsx)(S,{value:null===F||void 0===F?void 0:F.quantity,disabled:Z})}),(0,C.jsxs)(E,{children:[W&&(0,C.jsx)(M,{variant:"textExtraSmall",disabled:!W,onClick:W,children:(0,b.t)("Delete")}),y&&(0,C.jsx)(M,{variant:"textExtraSmall",disabled:!y,onClick:y,children:(0,b.t)("Select")}),p&&(0,C.jsx)(M,{variant:"textExtraSmall",disabled:!p,onClick:p,children:(0,b.t)("Edit")})]})]})]}),(0,C.jsxs)(h.ZP,{flex:1,gap:2,children:[(0,C.jsx)(h.ZP,{fxDirection:"row",gap:8,fillWidth:!0,alignItems:"flex-start",children:(0,C.jsxs)(h.ZP,{fxDirection:"row",flexWrap:"wrap",gap:8,flex:1,alignItems:"center",padding:"4px 8px",children:[(0,C.jsx)(B,{style:{flex:1},children:null===v||void 0===v||null===(u=v.variation)||void 0===u?void 0:u.label}),(0,C.jsx)(B,{$size:12,colorType:"secondary",children:null===v||void 0===v||null===(s=v.variation)||void 0===s?void 0:s.sku}),(0,C.jsx)(B,{$size:12,colorType:"secondary",children:null===v||void 0===v||null===(c=v.product)||void 0===c?void 0:c.type})]})}),(0,C.jsx)(g.x,{$size:12,$weight:600,children:(0,b.t)("Properties")}),(0,C.jsx)(D,{fillWidth:!0,alignItems:"flex-start",children:$}),(0,C.jsx)(g.x,{$size:12,$weight:600,children:(0,b.t)("Summary")}),(0,C.jsx)(k,{fillWidth:!0,alignItems:"flex-start",justifyContent:"space-between",children:V})]})]})})},_=[{label:(0,b.t)("Price"),name:"out"}]},1392:function(e,n,i){var o=i(3433),t=i(9439),l=i(2791),r=i(7049),a=i(8095),d=i(3855),u=i(6492),s=i(3329);n.Z=function(e){var n=e.options,i=e.onChangeIndex,c=e.currentIndex,v=e.currentOption,f=e.multiple,h=e.onChange,m=e.value,p=e.disabled,x=e.disabledCheck,g=e.renderLabel,b=(0,l.useState)(0),Z=(0,t.Z)(b,2),j=Z[0],C=Z[1],y=(0,l.useState)([]),S=(0,t.Z)(y,2),P=S[0],w=S[1],I=(0,l.useCallback)((function(e){f?w((function(n){var i=P.includes(e)?n.filter((function(n){return n!==e})):[].concat((0,o.Z)(n),[e]);return h&&h(i),i})):(w([e]),h&&h([e]))}),[f,h,P]),k=(0,l.useCallback)((function(e){i?i(e):C(e)}),[i]),D=(0,l.useMemo)((function(){return null===n||void 0===n?void 0:n.map((function(e,n){var i=x?x(e,n):p;return(0,s.jsxs)(a.ZP,{fxDirection:"row",gap:8,padding:"2px 4px",alignItems:"center",style:{opacity:i?.7:1,pointerEvents:i?"none":"all"},onClick:function(){i||(k(n),(null===e||void 0===e?void 0:e._id)&&I(null===e||void 0===e?void 0:e._id))},children:[(0,s.jsx)(d.Z,{checked:(null===e||void 0===e?void 0:e._id)&&P.includes(null===e||void 0===e?void 0:e._id)||n===j,size:"22px",disabled:i}),g?g({option:e,index:n,checked:(null===e||void 0===e?void 0:e._id)&&P.includes(null===e||void 0===e?void 0:e._id)||n===j}):(0,s.jsx)(u.x,{children:null===e||void 0===e?void 0:e.label})]},"m-opt_".concat(e.value))}))}),[j,p,x,I,k,n,g,P]);return(0,l.useEffect)((function(){r.sr.isUnd(c)||C(c)}),[c]),(0,l.useEffect)((function(){f||r.sr.isUnd(v)||r.sr.isUnd(n)||C(n.findIndex((function(e){return(null===e||void 0===e?void 0:e.value)===(null===v||void 0===v?void 0:v.value)||(null===e||void 0===e?void 0:e._id)===(null===v||void 0===v?void 0:v._id)})))}),[v,f,n]),(0,l.useEffect)((function(){f&&!r.sr.isUnd(m)&&r.sr.isArray(m)&&w(m)}),[f,m]),(0,s.jsx)(a.ZP,{fillWidth:!0,gap:8,children:D})}},4662:function(e,n,i){var o,t,l,r=i(168),a=i(9439),d=i(3350),u=i(8095),s=i(2928),c=i(2791),v=i(7049),f=i(6522),h=i(4805),m=i(3329),p=(0,d.ZP)(u.ZP)(o||(o=(0,r.Z)(["\n  //min-height: 44px;\n  // border-top: 1px solid ",";\n  // border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),x=(0,d.ZP)(s.ZP)(t||(t=(0,r.Z)(["\n  padding-top: 0;\n  padding-bottom: 0;\n\n  flex: 1;\n\n  min-width: min-content;\n  height: 100%;\n"]))),g=(0,d.ZP)(s.ZP)(l||(l=(0,r.Z)(["\n  min-width: 34px;\n  height: 100%;\n  // color: ",";\n  // fill: ",";\n  // background-color: ",";\n  @media screen and (min-width: 480px) {\n    flex: 1;\n  }\n"])),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.accentColor.light}));n.Z=function(e){var n=e.steps,i=e.currentIndex,o=void 0===i?0:i,t=e.onNextPress,l=e.onPrevPress,r=e.onCancelPress,d=e.onAcceptPress,u=e.canGoNext,s=void 0===u||u,b=e.canAccept,Z=e.canSubmit,j=e.cancelButton,C=void 0===j||j,y=e.submitButton,S=void 0!==y&&y,P=e.acceptButton,w=e.arrowButtons,I=void 0===w||w,k=e.isLoading,D=(0,h.useMediaQuery)({query:"(max-width: 768px)"}),q=(0,h.useMediaQuery)({query:"(max-width: 480px)"}),B=(0,c.useState)(o),M=(0,a.Z)(B,2),E=M[0],W=M[1],_=(0,c.useMemo)((function(){var e,i;return n&&n[E-1]?{label:null===(e=n[E-1])||void 0===e?void 0:e.label,value:null===(i=n[E-1])||void 0===i?void 0:i.value}:null}),[E,n]),R=(0,c.useMemo)((function(){var e,i;return n&&n[E+1]?{label:null===(e=n[E+1])||void 0===e?void 0:e.label,value:null===(i=n[E+1])||void 0===i?void 0:i.value}:null}),[E,n]),A=(0,c.useCallback)((function(){if(n)if(l){if(0===E)return void(r&&r());var e=E-1;l&&l({option:n[e],value:n[e].value,index:e})}else W((function(e){return 0===e?e:e-1}))}),[E,r,l,n]),F=(0,c.useCallback)((function(){if(n){if(t){var e=E+1;return e===n.length?d&&d():t({option:n[e],value:n[e].value,index:e})}W((function(e){return e+1===n.length?e+1:e}))}}),[E,d,t,n]);return(0,c.useEffect)((function(){v.sr.isNotUnd(o)&&W(o)}),[o]),(0,m.jsxs)(p,{fxDirection:"row",gap:8,fillWidth:!0,children:[C&&!D&&(0,m.jsx)(x,{variant:"defaultSmall",isLoading:k,onClick:r,children:(0,f.t)("Cancel")}),I&&(0,m.jsx)(g,{variant:q?"onlyIconFilled":"filledSmall",icon:"SmallArrowLeft",onClick:A,disabled:k||!_,children:null===_||void 0===_?void 0:_.label}),I&&(0,m.jsx)(g,{variant:q?"onlyIconFilled":"filledSmall",endIcon:"SmallArrowRight",onClick:F,disabled:k||!s||!R,children:null===R||void 0===R?void 0:R.label}),(S||P)&&(0,m.jsx)(x,{variant:"filledSmall",type:Z&&S?"submit":"button",onClick:d,isLoading:k,disabled:Z&&S?!Z:!b,children:(0,f.t)("Accept")})]})}},1186:function(e,n,i){i.d(n,{f:function(){return t}});var o=i(6522),t=[{top:{name:"".concat((0,o.t)("label"),"/").concat((0,o.t)("name")),getData:function(e){var n,i=null!==(n=e.label)&&void 0!==n?n:e.name;return i?Object.values(i).map((function(e){return null!==e&&void 0!==e?e:""})).join(" "):"---"}},bottom:{name:"\u0406\u041f\u041d/\u0404\u0414\u0420\u041f\u041e\u0423",getData:function(e){var n,i;return((null===(n=e.taxCode)||void 0===n?void 0:n.personal)||"---")+"/"+((null===(i=e.taxCode)||void 0===i?void 0:i.corp)||"---")}},width:"240px",action:"doubleDataWithAvatar"},{top:{name:"\u0422\u0438\u043f",getData:function(e){return null===e||void 0===e?void 0:e.type}},bottom:{name:"\u0421\u0442\u0430\u0442\u0443\u0441",path:"status"},width:"120px",action:"valueByPath"},{top:{name:"\u0415\u043c\u0435\u0439\u043b",path:"email",uppercase:!1},bottom:{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",path:"phone"},width:"170px",action:"contacts"},{top:{name:"\u041b\u043e\u043a\u0430\u0446\u0456\u044f"},width:"170px",action:"valueByPath"},{top:{name:"\u0422\u0435\u0433\u0438",path:"tags"},width:"200px",action:"tags"},{top:{name:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",path:"description"},width:"170px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}]}}]);
//# sourceMappingURL=491.f57f090f.chunk.js.map