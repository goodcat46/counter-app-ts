"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[984],{5984:function(t,a,e){e.r(a),e.d(a,{default:function(){return M}});var n,o=e(168),r=e(1413),i=e(9439),l=e(3363),c=e(8495),u=e(2360),s=e(319),d=e(2791),p=e(870),h=e(7348),f=function(){var t=(0,h.UL)(p.cA.CATEGORIES_TR),a=(0,h.UL)(p.cA.CATEGORIES_TR);return[{label:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a OUT",data:a.directory,selectorName:"countOut",dirType:p.cA.COUNTS},{label:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a IN",data:a.directory,selectorName:"countIn",dirType:p.cA.COUNTS},{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457",data:t.directory,selectorName:"category",dirType:p.cA.CATEGORIES_TR}]},v=e(4165),m=e(5861),b=e(5188),y=e(4961),S=e(9085),g=e(825),C=function(t){var a,e=t.ctx,n=t.service,o=t.modalService,r=t.state;return{name:"editTr",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",icon:"edit",disabled:!(null!==(a=e.selectedRow)&&void 0!==a&&a._id),type:"onlyIcon",onClick:function(){var t=(0,m.Z)((0,v.Z)().mark((function t(){var a,i;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.transactions.find((function(t){var a;return t._id===(null===(a=e.selectedRow)||void 0===a?void 0:a._id)})),i=o.handleOpenModal({Modal:g.n.FormCreateTransaction,props:{title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",filterOptions:y.MN,defaultOption:y.MN.findIndex((function(t){return t.value===(null===a||void 0===a?void 0:a.type)})),defaultState:a,fillHeight:!0,onSubmit:function(t,a){n.updateById({data:t,onSuccess:function(t){(null===a||void 0===a?void 0:a.closeAfterSave)&&(null===i||void 0===i||i.onClose())}})}}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}},P=function(t){var a,e=t.ctx,n=t.service,o=t.modalService,r=t.state;return{name:"copyTr",title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",icon:"copy",type:"onlyIcon",disabled:!(null!==(a=e.selectedRow)&&void 0!==a&&a._id),onClick:function(){var t=(0,m.Z)((0,v.Z)().mark((function t(){var a,i;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.transactions.find((function(t){var a;return t._id===(null===(a=e.selectedRow)||void 0===a?void 0:a._id)})),i=o.handleOpenModal({Modal:g.n.FormCreateTransaction,props:{title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",filterOptions:y.MN,defaultOption:y.MN.findIndex((function(t){return t.value===(null===a||void 0===a?void 0:a.type)})),defaultState:a,fillHeight:!0,onSubmit:function(t,a){n.create({data:t,onSuccess:function(t){S.Am.success("\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u044e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e"),(null===a||void 0===a?void 0:a.closeAfterSave)&&(null===i||void 0===i||i.onClose())}})}}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}},O=function(t){var a,e=t.ctx,n=t.service;t.modalService,t.state;return{name:"deleteTr",title:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",icon:"delete",iconSize:"90%",type:"onlyIcon",disabled:!(null!==(a=e.selectedRow)&&void 0!==a&&a._id),onClick:function(){var t;n.deleteById({data:null===(t=e.selectedRow)||void 0===t?void 0:t._id})}}},x=function(t){t.ctx;var a=t.service,e=t.modalService;t.state;return{name:"createIncomeTr",title:"\u0414\u043e\u0445\u0456\u0434",icon:"INCOME",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){var t=e.handleOpenModal({Modal:g.n.FormCreateTransaction,props:{title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",filterOptions:y.MN,defaultOption:0,fillHeight:!0,defaultState:{type:"INCOME"},onSubmit:function(e,n){a.create({data:e,onSuccess:function(a){(null===n||void 0===n?void 0:n.closeAfterSave)&&(null===t||void 0===t||t.onClose())}})}}})}}},I=function(t){t.ctx;var a=t.service,e=t.modalService;t.state;return{name:"createTransferTr",title:"\u041f\u0435\u0440\u0435\u043a\u0430\u0437 \u043c\u0456\u0436 \u0440\u0430\u0445\u0443\u043d\u043a\u0430\u043c\u0438",icon:"TRANSFER",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){var t=e.handleOpenModal({Modal:g.n.FormCreateTransaction,props:{title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043d\u043e\u0432\u0443",filterOptions:y.MN,defaultOption:1,fillHeight:!0,defaultState:{type:"TRANSFER"},onSubmit:function(e,n){a.create({data:e,onSuccess:function(a){(null===n||void 0===n?void 0:n.closeAfterSave)&&(null===t||void 0===t||t.onClose())}})}}})}}},w=function(t){t.ctx;var a=t.service,e=t.modalService;t.state;return{name:"createExpenseTr",title:"\u0412\u0438\u0442\u0440\u0430\u0442\u0430",icon:"EXPENSE",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){var t=e.handleOpenModal({Modal:g.n.FormCreateTransaction,props:{title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",filterOptions:y.MN,defaultOption:2,defaultState:{type:"EXPENSE"},onSubmit:function(e,n){a.create({data:e,onSuccess:function(a){(null===n||void 0===n?void 0:n.closeAfterSave)&&(null===t||void 0===t||t.onClose())}})},fillHeight:!0}})}}},T=e(9322),E=e(3329),N=u.ZP.div(n||(n=(0,o.Z)(["\n  ","\n"])),c.VU),M=function(t){var a=(0,s.Z)(),e=(0,h.cM)(),n=a.getAll,o=f(),c=function(t){var a=(0,h.cM)(),e=(0,b.f9)();return function(n){var o={state:a,service:t,modalService:e,ctx:n};return[C(o),P(o),O(o),{separator:!0},x(o),I(o),w(o)]}}(a),u=(0,d.useState)(!1),p=(0,i.Z)(u,2),v=p[0],m=p[1],S=(0,d.useState)(),g=(0,i.Z)(S,2),M=g[0],A=g[1],R=(0,d.useState)(),Z=(0,i.Z)(R,2),_=Z[0],k=Z[1],F=(0,d.useMemo)((function(){return{tableData:e.transactions,tableTitles:y.yV,tableSortParams:y.wo.filter((function(t){return t.sort})),filterSelectors:o,isFilter:!0,isSearch:!0,footer:!0,checkBoxes:!0,actionsCreator:c,onFilterSubmit:function(t){k(t),n({data:{refresh:!0,query:{filterParams:t,sortParams:M}},onLoading:m})},handleTableSort:function(t,a){A({dataPath:t.dataPath,sortOrder:a}),n({data:{refresh:!0,query:{sortParams:{dataPath:t.dataPath,sortOrder:a},filterParams:_}},onLoading:m})}}}),[c,_,o,n,M,e.transactions]);return(0,d.useEffect)((function(){M||_||M||_||0===e.transactions.length&&n({data:{refresh:!0},onLoading:m})}),[_,n,M,e.transactions.length]),(0,E.jsx)(T.default,{path:t.path,children:(0,E.jsx)(N,{children:(0,E.jsx)(l.ZP,(0,r.Z)((0,r.Z)({},F),{},{isLoading:v}))})})}},8495:function(t,a,e){e.d(a,{SI:function(){return u},VU:function(){return c}});var n,o,r,i=e(168),l=e(2360),c=(0,l.iv)(n||(n=(0,i.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,l.iv)(o||(o=(0,i.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,l.iv)(r||(r=(0,i.Z)(["\n  outline: 1px solid tomato;\n"])))},4961:function(t,a,e){e.d(a,{MN:function(){return i},wo:function(){return r},yV:function(){return o}});var n=e(6522),o=((0,n.t)("date"),(0,n.t)("time"),(0,n.t)("type"),(0,n.t)("status"),(0,n.t)("amount"),(0,n.t)("countIn"),(0,n.t)("subCountIn"),(0,n.t)("countOut"),(0,n.t)("subCountOut"),(0,n.t)("category"),(0,n.t)("subCategory"),[{top:{name:"\u0414\u0430\u0442\u0430",align:"center",path:"eventDate"},bottom:{name:"\u0427\u0430\u0441",align:"center"},width:"90px",action:"dateSimple"},{top:{name:"\u0422\u0438\u043f",align:"start",path:"type"},bottom:{name:"\u0421\u0442\u0430\u0442\u0443\u0441",align:"start",path:"status"},width:"100px",action:"status"},{top:{name:(0,n.t)("amount"),align:"end",path:"amount"},bottom:{name:"\u0412\u0430\u043b\u044e\u0442\u0430",align:"end",path:"currency"},width:"120px",action:"numberWithSpaces"},{top:{name:(0,n.t)("countOut"),align:"start",path:"countOut.label"},bottom:{name:(0,n.t)("subCountOut"),align:"start",path:"subCountOut.label"},width:"190px",action:"valueByPath"},{top:{name:(0,n.t)("countIn"),align:"start",path:"countIn.label"},bottom:{name:(0,n.t)("subCountIn"),align:"start",path:"subCountIn.label"},width:"190px",action:"valueByPath"},{top:{name:(0,n.t)("category"),align:"start",path:"category.label"},bottom:{name:(0,n.t)("subCategory"),align:"start",path:"subCategory.label"},width:"190px",action:"valueByPath"},{top:{name:"\u0406\u043d\u0432\u043e\u0439\u0441",align:"start",path:"invoice.label"},bottom:{name:"\u041d\u043e\u043c\u0435\u0440",align:"start",path:"invoice.number"},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043f\u043b\u0430\u0442\u0430",align:"start",path:"payment.label"},bottom:{name:"\u041d\u043e\u043c\u0435\u0440",align:"start",path:"payment.number"},width:"150px",action:"valueByPath"},{top:{name:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442",align:"start",path:"contractor.name"},bottom:{name:"\u0422\u0438\u043f",align:"start",path:"contractor.type"},width:"150px",action:"valueByPath"},{top:{name:"\u0414\u0456\u044f\u043b\u044c\u043d\u0456\u0441\u0442\u044c",align:"start",path:"activity.label"},width:"150px",action:"valueByPath"},{top:{name:"\u041f\u0440\u043e\u0435\u043a\u0442",align:"start",path:"project.label"},width:"150px",action:"valueByPath"},{top:{name:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",align:"start",path:"comment"},width:"150px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0438\u0432",align:"start",path:"author.email"},bottom:{name:"\u041e\u043d\u043e\u0432\u0438\u0432",align:"start",path:"editor.email"},width:"150px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateDbl"}]),r=[{label:"\u0414\u0430\u0442\u0430",dataPath:"eventDate",filter:!1,search:!1,sort:!0},{label:(0,n.t)("type"),dataPath:"type",filter:!1,search:!0,sort:!0},{label:(0,n.t)("amount"),dataPath:"amount",filter:!1,search:!0,sort:!0},{label:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",dataPath:"createdAt",filter:!1,search:!1,sort:!0},{label:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",dataPath:"updatedAt",filter:!1,search:!1,sort:!0},{label:(0,n.t)("countIn"),dataPath:"countIn.label",filter:!1,search:!0,sort:!0},{label:(0,n.t)("subCountIn"),dataPath:"subCountIn.label",filter:!1,search:!0,sort:!0},{label:(0,n.t)("countOut"),dataPath:"countOut.label",filter:!1,search:!0,sort:!0},{label:(0,n.t)("subCountOut"),dataPath:"subCountOut.label",filter:!1,search:!0,sort:!0},{label:(0,n.t)("category"),dataPath:"category.label",filter:!1,search:!0,sort:!0},{label:(0,n.t)("subCategory"),dataPath:"subCategory.label",filter:!1,search:!0,sort:!0},{label:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442",dataPath:"contractor.name",filter:!1,search:!0,sort:!0},{label:(0,n.t)("project"),dataPath:"project.label",filter:!1,search:!0,sort:!0},{label:"\u041c\u0456\u0442\u043a\u0430",dataPath:"mark.label",filter:!1,search:!0,sort:!0},{label:"\u0421\u0442\u0430\u0442\u0443\u0441",dataPath:"status",filter:!1,search:!0,sort:!0}],i=[{label:(0,n.t)("INCOME"),value:"INCOME"},{label:(0,n.t)("TRANSFER"),value:"TRANSFER"},{label:(0,n.t)("EXPENSE"),value:"EXPENSE"}]}}]);
//# sourceMappingURL=984.16840f42.chunk.js.map