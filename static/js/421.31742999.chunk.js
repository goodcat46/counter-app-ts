"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[421],{2421:function(n,e,t){t.r(e);var i,o,r,l,d=t(168),u=t(1413),a=t(3433),c=t(9439),s=t(4925),p=t(2360),x=t(8095),f=t(4109),h=t(7348),v=t(8332),m=t(2791),g=t(6492),Z=t(1383),b=t(4838),S=t(3329),w=["onClose","title","defaultState","onSubmit","update","product","template","onSelect","onChange"],j=(0,p.ZP)(x.ZP)(i||(i=(0,d.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n  padding-bottom: 8px;\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),C=(0,p.ZP)(x.ZP)(o||(o=(0,d.Z)(["\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(n){return n.theme.sideBarBorderColor})),_=(0,p.ZP)(x.ZP)(r||(r=(0,d.Z)(["\n  //display: grid;\n  //grid-template-columns: repeat(auto-fill, 25%);\n  //\n  //@media screen and (max-width: 480px) {\n  //  grid-template-columns: repeat(auto-fill, 50%);\n  //}\n"]))),P=(0,p.ZP)(f.Z)(l||(l=(0,d.Z)(["\n  flex-basis: 100px;\n  min-width: max-content;\n\n  //width: 100%;\n  //min-width: unset;\n\n  // border-radius: 2px;\n  // border: 2px solid ",";\n  //\n  // &:hover {\n  //   border: 2px solid ",";\n  // }\n"])),(function(n){return n.theme.accentColor.light}),(function(n){return n.theme.accentColor.base}));e.default=function(n){var e,t=n.onClose,i=n.title,o=(n.defaultState,n.onSubmit),r=n.update,l=(n.product,n.template),d=n.onSelect,p=n.onChange,x=(0,s.Z)(n,w),f=(0,h.nr)().currentProduct,y=(0,v.xc)()[v.EJ.products],k=(0,h.WS)(),B=(0,m.useState)(!1),I=(0,c.Z)(B,2),W=I[0],z=I[1],L=(0,m.useState)([]),T=(0,c.Z)(L,2),A=T[0],D=T[1],E=(0,m.useMemo)((function(){return k.find((function(n){var e;return n._id===((null===l||void 0===l?void 0:l._id)||(null===f||void 0===f||null===(e=f.template)||void 0===e?void 0:e._id))}))}),[null===f||void 0===f||null===(e=f.template)||void 0===e?void 0:e._id,null===l||void 0===l?void 0:l._id,k]),F=(0,m.useMemo)((function(){var n;return(null===f||void 0===f||null===(n=f.properties)||void 0===n?void 0:n.map((function(n){return n._id})).join(","))!==A.join(",")}),[null===f||void 0===f?void 0:f.properties,A]),M=(0,m.useCallback)((function(n){n.preventDefault();var e=null!==r&&void 0!==r?r:null===f||void 0===f?void 0:f._id;e?y.updateById({data:{_id:e,data:{properties:A}},onLoading:z,onSuccess:function(n,e){Z.kl.success("Product updated"),t&&t()}}):console.debug("selectedIds",A),o&&o(A)}),[null===f||void 0===f?void 0:f._id,t,o,A,y,r]),$=(0,m.useCallback)((function(n,e){D((function(e){var t=e.includes(n)?e.filter((function(e){return e!==n})):[].concat((0,a.Z)(e),[n]);return p&&p(t),d&&d(n),t}))}),[p,d]),H=(0,m.useMemo)((function(){var n;return null===E||void 0===E||null===(n=E.childrenList)||void 0===n?void 0:n.filter((function(n){return!(null!==n&&void 0!==n&&n.isSelectable)})).map((function(n){var e;return(0,S.jsxs)(C,{gap:8,fillWidth:!0,padding:"8px 0 0",children:[(0,S.jsx)(g.x,{style:{flex:1,paddingLeft:12},$weight:500,children:n.label}),(0,S.jsx)(_,{fillWidth:!0,padding:"8px 0",gap:6,flexWrap:"wrap",fxDirection:"row",children:null===(e=n.childrenList)||void 0===e?void 0:e.map((function(e){var t=A.includes(e._id);return(0,S.jsx)(P,{variant:t?"filledSmall":"outlinedSmall",padding:"6px 8px",fontWeight:500,onClick:function(){return $(e._id,n._id)},children:e.label},"prop-value-".concat(e._id))}))})]},"property-".concat(n._id))}))}),[$,A,null===E||void 0===E?void 0:E.childrenList]);return(0,m.useEffect)((function(){null!==f&&void 0!==f&&f.properties&&D(null===f||void 0===f?void 0:f.properties.map((function(n){return n._id})))}),[null===f||void 0===f?void 0:f.properties]),(0,S.jsxs)(b.dF,(0,u.Z)((0,u.Z)({onSubmit:M},x),{},{children:[(0,S.jsx)(b.iw,{onClose:t,canSubmit:F,title:i||(null===E||void 0===E?void 0:E.label),showSubmitButton:!0}),(0,S.jsx)(j,{flex:1,overflow:"auto",children:H}),(0,S.jsx)(b.AT,{canSubmit:F,loading:W,submitButtonText:W?"Loading...":"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]}))}},4838:function(n,e,t){t.d(e,{AT:function(){return m},dF:function(){return Z},iw:function(){return h}});var i,o,r,l=t(1413),d=t(4925),u=t(168),a=t(8095),c=t(4109),s=t(6492),p=t(2360),x=(t(2791),t(3329)),f=["children"],h=function(n){var e=n.onClose,t=n.title,i=n.showSubmitButton,o=n.canSubmit;return(0,x.jsx)(v,{padding:"4px 0",children:(0,x.jsxs)(a.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"space-between",alignItems:"stretch",height:"32px",children:[(0,x.jsx)(c.Z,{variant:"textExtraSmall",icon:"SmallArrowLeft",iconSize:"22px",padding:"0 6px",style:{minWidth:"max-content",minHeight:"100%"},onClick:e,children:"Back"}),(0,x.jsx)(a.ZP,{justifyContent:"center",overflow:"hidden",children:(0,x.jsx)(s.x,{$weight:600,$size:14,style:{textTransform:"uppercase",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:t})}),i&&(0,x.jsx)(c.Z,{variant:"textExtraSmall",gap:"6px",type:"submit",padding:"0 6px",endIcon:"done",endIconSize:"22px",style:{minWidth:"max-content",minHeight:"100%"},disabled:!o,children:"Ok"})]})})},v=(0,p.ZP)(a.ZP)(i||(i=(0,u.Z)(["\n  height: 32px;\n"]))),m=function(n){var e=n.submitButtonText,t=void 0===e?"\u041f\u0440\u0438\u0439\u043d\u044f\u0442\u0438":e,i=n.loading,o=n.extraFooter,r=n.canSubmit,l=n.onCreatePress,d=n.resetButtonShown;return(0,x.jsxs)(g,{fillWidth:!0,children:[o,(0,x.jsxs)(a.ZP,{padding:"8px 8px",fxDirection:"row",gap:8,alignItems:"center",children:[d&&(0,x.jsx)(c.Z,{variant:"onlyIcon",icon:"clear",size:"36px",iconSize:"80%",type:"reset"}),l&&(0,x.jsx)(c.Z,{variant:"onlyIcon",icon:"plus",size:"36px",iconSize:"80%",onClick:l}),(0,x.jsx)(c.Z,{variant:"filledLarge",flex:1,type:"submit",style:{padding:"0 12px"},textTransform:"uppercase",fontWeight:600,endIcon:"SmallArrowRight",endIconSize:"24px",disabled:i||!r,children:t})]})]})},g=(0,p.ZP)(a.ZP)(o||(o=(0,u.Z)([""]))),Z=function(n){var e=n.children,t=(0,d.Z)(n,f);return(0,x.jsx)(b,(0,l.Z)((0,l.Z)({},t),{},{children:e}))},b=p.ZP.form(r||(r=(0,u.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  max-width: 480px;\n\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(n){return n.theme.modalBackgroundColor}))}}]);
//# sourceMappingURL=421.31742999.chunk.js.map