"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[672],{672:function(n,e,t){t.r(e),t.d(e,{default:function(){return Zn}});var i,o,r,l,d,a,s,u,c,v,f,x,p=t(168),m=t(9439),h=t(2791),g=t(2360),Z=t(8495),C=t(6146),b=t(163),j=t(4781),y=t(1413),P=t(8095),S=t(1251),I=t(7348),O=t(7689),w=t(4109),k=t(6522),V=t(1185),A=t(9953),B=t(4925),z=t(7739),D=t(3329),R=["CellComponent"],_=function(n){return n.General="General",n.Customer="Customer",n.Invoicing="Invoicing",n.Delivery="Delivery",n.Additional="Additional",n}(_||{}),N=(0,V.Dl)(_),T=(0,g.ZP)(P.ZP)(i||(i=(0,p.Z)([""]))),E=function(n){var e=(0,j.on)(),t=(0,I.xA)().currentOrder,i=(0,h.useState)(_.General),o=(0,m.Z)(i,2),r=o[0],l=o[1],d=(0,h.useMemo)((function(){return G.filter((function(n){return n.tab===r})).map((function(n){var i=n.CellComponent,o=(0,B.Z)(n,R);return i?(0,D.jsx)(i,{setOverlayContent:e.open,cell:o,data:t},o.title):(0,D.jsx)(z.N.Text,{overlayHandler:e.open,cell:o,data:t},o.title)}))}),[r,e.open,t]);return(0,D.jsxs)(T,{fillWidth:!0,flex:1,overflow:"auto",children:[(0,D.jsx)(A.Z,{optionProps:{fitContentH:!0},filterOptions:N,onOptSelect:function(n){l(null===n||void 0===n?void 0:n.value)}}),d]})},G=[{title:(0,k.t)("Manager"),CellComponent:z.N.Text,getValue:function(n){var e,t;return null===n||void 0===n||null===(e=n.manager)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email},tab:_.General},{title:(0,k.t)("Reference"),CellComponent:z.N.Text,getValue:function(n){var e;return null===n||void 0===n||null===(e=n.reference)||void 0===e?void 0:e.internal},tab:_.General},{title:(0,k.t)("Group reference"),CellComponent:z.N.Text,getValue:function(n){var e,t;return null===n||void 0===n||null===(e=n.group)||void 0===e||null===(t=e.reference)||void 0===t?void 0:t.internal},tab:_.General},{title:(0,k.t)("Group strategy"),CellComponent:z.N.Text,getValue:function(n){var e;return null===n||void 0===n||null===(e=n.group)||void 0===e?void 0:e.strategy},tab:_.General},{title:(0,k.t)("Totals"),CellComponent:z.N.OrderTotals,tab:_.General},{title:(0,k.t)("Status"),CellComponent:z.N.Text,getValue:function(n){return null===n||void 0===n?void 0:n.status},tab:_.General},{CellComponent:z.N.OrderCustomerInfo,tab:_.Customer},{title:(0,k.t)("Invoicing"),CellComponent:z.N.OrderInvoicing,tab:_.Invoicing},{title:(0,k.t)("Delivery"),CellComponent:z.N.OrderDelivery,tab:_.Delivery},{title:(0,k.t)("Receiver"),CellComponent:z.N.OrderCustomerInfo,tab:_.Delivery},{title:(0,k.t)("Additional"),tab:_.Additional}],M=function(n){return n.info="Info",n.chat="Chat",n.statuses="Statuses",n.comments="Comments",n.tasks="tasks",n}({}),H=(0,V.H1)(M),L=(0,g.ZP)(P.ZP)(o||(o=(0,p.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(n){return n.theme.sideBarBackgroundColor})),F=(0,g.ZP)(P.ZP)(r||(r=(0,p.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),W=(0,g.ZP)(P.ZP)(l||(l=(0,p.Z)([""]))),$=(0,g.ZP)(w.Z)(d||(d=(0,p.Z)(["\n  fill: ",";\n"])),(function(n){return n.theme.globals.colors.error})),U=(0,g.ZP)(w.Z)(a||(a=(0,p.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),X=function(n){var e,t=(0,h.useState)(0),i=(0,m.Z)(t,2),o=i[0],r=i[1],l=null===(e=(0,b.Zx)())||void 0===e?void 0:e.orderId,d=(0,I.xA)().currentOrder,a=(0,O.s0)(),s=(0,O.TH)(),u=(0,h.useMemo)((function(){return H[o].value===M.info||H[o].value===M.chat||H[o].value===M.statuses?(0,D.jsx)(E,{}):void 0}),[o]);return(0,D.jsxs)(L,{flex:1,fillWidth:!0,padding:"0 8px",children:[(0,D.jsx)(S.xB,{title:(0,k.t)("Order overview"),onBackPress:function(){if(null!==s&&void 0!==s&&s.pathname){var n,e=null===s||void 0===s||null===(n=s.pathname)||void 0===n?void 0:n.replace("/".concat((null===d||void 0===d?void 0:d._id)||l),"");e&&a(e)}}}),(0,D.jsxs)(F,{flex:1,fillWidth:!0,overflow:"auto",children:[(0,D.jsx)(A.Z,{filterOptions:H,optionProps:{fitContentH:!0},onOptSelect:function(n,e,t){return r(t)}}),u]}),(0,D.jsxs)(W,{fxDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"8px 0",children:[(0,D.jsx)(w.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==n&&void 0!==n&&n.onEdit),onClick:null===n||void 0===n?void 0:n.onEdit}),(0,D.jsx)($,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==n&&void 0!==n&&n.onDelete),onClick:null===n||void 0===n?void 0:n.onDelete}),(0,D.jsxs)(P.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,D.jsx)(w.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",isLoading:null===n||void 0===n?void 0:n.isRefresh,disabled:!(null!==n&&void 0!==n&&n.onRefresh),onClick:null===n||void 0===n?void 0:n.onRefresh}),(0,D.jsx)(U,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==n&&void 0!==n&&n.onOpenRightSide),onClick:null===n||void 0===n?void 0:n.onOpenRightSide})]})]})]})},q=t(1819),J=(0,g.ZP)(P.ZP)(s||(s=(0,p.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor})),K=(0,g.ZP)(P.ZP)(u||(u=(0,p.Z)(["\n  position: absolute;\n\n  top: 0;\n  left: ",";\n  z-index: 20;\n\n  background-color: ",";\n\n  transition: all ",";\n"])),(function(n){return n.isActive?0:"100%"}),(function(n){return n.theme.backdropColor}),(function(n){return n.theme.globals.timingFunctionMain})),Q=(0,g.ZP)(P.ZP)(c||(c=(0,p.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 20;\n\n  animation: 'OverlayFromRight';\n"]))),Y=function(n){var e=n.toggleRightSideVisibility,t=(0,I.xA)().currentOrder,i=(0,j.on)(),o=(0,h.useState)(!1)[1],r=(0,q.xc)().orders,l=(0,h.useCallback)((function(n){return function(e){e.target===e.currentTarget&&i.remove(n)}}),[i]),d=(0,h.useMemo)((function(){return i.getOverlayStack().map((function(n,e){var t=n.RenderComponent,o=n.props,r=n.id;return(0,D.jsx)(Q,{className:"overlay-".concat(r),style:{zIndex:20+e},fillHeight:!0,fillWidth:!0,alignItems:"flex-end",onClick:l(r),children:(0,D.jsx)(t,(0,y.Z)((0,y.Z)({},o),{},{onClose:function(){i.remove(r)},overlayId:r,index:e}),"overlay-".concat(r))},"overlay-".concat(r))}))}),[l,i]);return(0,D.jsxs)(J,{children:[(0,D.jsx)(X,{order:t,onEdit:t?function(){}:void 0,onRefresh:function(){(null===t||void 0===t?void 0:t._id)&&r.getById({data:{_id:null===t||void 0===t?void 0:t._id,options:{refreshCurrent:!0}},onLoading:o})},onOpenRightSide:e}),(0,D.jsx)(K,{fillWidth:!0,fillHeight:!0,isActive:d.length>0,overflow:"hidden",children:d})]})},nn=t(6492),en=t(3772),tn=t(2517),on=t(3383),rn=t(7824),ln=function(n){var e=(0,q.xc)()[rn.d.orders],t=(0,h.useState)(!1),i=(0,m.Z)(t,2),o=i[0],r=i[1],l=(0,h.useState)(0),d=(0,m.Z)(l,2),a=d[0],s=d[1],u=(0,I.xA)().currentOrder,c=(0,h.useMemo)((function(){var n;return null===u||void 0===u||null===(n=u.slots)||void 0===n?void 0:n.filter((function(n){var e,t;return(null===(e=n.product)||void 0===e?void 0:e.type)===(null===(t=on.jI[a])||void 0===t?void 0:t.value)}))}),[null===u||void 0===u?void 0:u.slots,a]),v=(0,h.useMemo)((function(){return{actionsCreator:function(n){return[{icon:"refresh",name:"refresh",onClick:function(){null!==u&&void 0!==u&&u._id&&e.getSlots({data:{params:{order:(0,V.rE)(u)}},onLoading:r})}}]}}}),[u,e]);return(0,h.useEffect)((function(){null!==u&&void 0!==u&&u._id&&e.getSlots({data:{params:{order:(0,V.rE)(u)}}})}),[]),(0,D.jsxs)(P.ZP,{fillWidth:!0,overflow:"hidden",flex:1,children:[(0,D.jsx)(P.ZP,{fillWidth:!0,children:(0,D.jsx)(A.Z,{filterOptions:on.jI,currentIndex:a,onOptSelect:function(n,e,t){s(t)}})}),(0,D.jsx)(en.ZP,(0,y.Z)((0,y.Z)({isSearch:!1,isFilter:!1},v),{},{tableData:c,isLoading:o,tableTitles:tn.$4}))]})},dn=t(7946),an=function(n){var e=n.order,t=(0,I.xA)(),i=null!==e&&void 0!==e?e:null===t||void 0===t?void 0:t.currentOrder,o=(0,q.xc)().get(rn.d.orders),r=(0,h.useState)(!1),l=(0,m.Z)(r,2),d=l[0],a=l[1],s=(0,h.useMemo)((function(){return{actionsCreator:function(n){return[{name:"refresh",icon:"refresh",onClick:function(){null!==i&&void 0!==i&&i._id&&o.getInvoicesByOrderId({data:{params:{order:(0,V.rE)(i)}}})}}]}}}),[i,o]);return(0,h.useEffect)((function(){null!==i&&void 0!==i&&i._id&&o.getInvoicesByOrderId({data:{params:{order:(0,V.rE)(i)}},onLoading:a})}),[]),(0,D.jsx)(en.ZP,(0,y.Z)((0,y.Z)({},s),{},{isSearch:!1,isFilter:!1,isLoading:d,tableData:null===i||void 0===i?void 0:i.invoices,tableTitles:dn.x}))},sn=function(){return(0,D.jsx)(en.ZP,{isSearch:!1,isFilter:!1})},un=function(){return(0,D.jsx)(en.ZP,{isSearch:!1,isFilter:!1})},cn=function(n){return n.Content="Content",n.Invoices="Invoices",n.Payments="Payments",n.Shipments="Shipments",n}(cn||{}),vn=(0,V.H1)(cn),fn=(0,g.ZP)(P.ZP)(v||(v=(0,p.Z)(["\n  overflow: auto;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);\n  }\n"])),(function(n){return n.theme.globals.timingFunctionMain}),(function(n){return n.theme.backgroundColorLight}),(function(n){return n.isVisible?0:100})),xn=(0,g.ZP)(P.ZP)(f||(f=(0,p.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor})),pn=function(n){var e,t=n.toggleVisibility,i=n.isVisible,o=null===(e=(0,b.Zx)())||void 0===e?void 0:e.orderId,r=(0,I.xA)().currentOrder,l=(0,h.useState)(cn.Content),d=(0,m.Z)(l,2),a=d[0],s=d[1],u=(0,h.useMemo)((function(){return a===cn.Content?(0,D.jsx)(ln,{}):a===cn.Invoices?(0,D.jsx)(an,{}):a===cn.Payments?(0,D.jsx)(sn,{}):a===cn.Shipments?(0,D.jsx)(un,{}):void 0}),[a]);return(0,D.jsxs)(fn,{overflow:"hidden",fillHeight:!0,isVisible:i,children:[(0,D.jsxs)(xn,{fillWidth:!0,gap:4,isVisible:i,fxDirection:"row",justifyContent:"space-between",children:[(0,D.jsx)(w.Z,{variant:"textExtraSmall",icon:"SmallArrowLeft",style:{padding:6},onClick:t,children:"Back"}),(0,D.jsxs)(P.ZP,{padding:"0 8px",children:[(0,D.jsx)(nn.x,{$weight:600,$size:14,children:null===r||void 0===r?void 0:r.code}),(0,D.jsx)(nn.x,{$size:10,children:o})]})]}),(0,D.jsx)(P.ZP,{children:(0,D.jsx)(A.Z,{filterOptions:vn,defaultValue:a,onOptSelect:function(n,e,t){s(e)},preventFilter:!0})}),u]})},mn=(0,h.createContext)({}),hn=function(n){var e=n.children,t=(0,I.xA)().currentOrder,i=(0,h.useCallback)((function(){console.log("clear current order")}),[]),o=(0,h.useMemo)((function(){return{currentOrder:t,clearCurrent:i}}),[t,i]);return(0,D.jsx)(mn.Provider,{value:o,children:e})},gn=g.ZP.div(x||(x=(0,p.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),Z.VU),Zn=function(n){var e=n.path,t=(0,q.xc)()[rn.d.orders],i=(0,h.useState)(!1),o=(0,m.Z)(i,2),r=o[0],l=o[1],d=(0,b.Zx)().orderId,a=(0,h.useCallback)((function(){l((function(n){return!n}))}),[]);return(0,h.useEffect)((function(){d&&t.getById({data:{_id:d,options:{refreshCurrent:!0}}})}),[d,t]),(0,D.jsx)(C.vI,{path:e,children:(0,D.jsx)(hn,{children:(0,D.jsx)(j.ZP,{children:(0,D.jsxs)(gn,{children:[(0,D.jsx)(Y,{toggleRightSideVisibility:a}),(0,D.jsx)(pn,{toggleVisibility:a,isVisible:r})]})})})})}}}]);
//# sourceMappingURL=672.e0e9db69.chunk.js.map