"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[283],{6283:function(e,t,n){n.r(t);var o,u=n(168),l=n(1413),i=n(9439),r=n(4925),d=n(2791),a=n(9656),c=n(2360),s=n(4990),Z=n(6681),p=n(6727),v=n(4343),b=n(6785),h=n(4538),m=n(9872),y=n(8095),C=n(6522),x=n(870),P=n(7426),f=n(4695),g=n(6757),O=n(3329),_=["edit","onSubmit","copy","defaultState","addInputs"],j=p.Ry().shape({_id:p.Z_(),label:p.Z_()}).nullable().optional(),S=p.Ry().shape({_id:p.Z_(),label:p.Z_()}).required(),I=c.ZP.div(o||(o=(0,u.Z)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 8px;\n"])),(function(e){return e.gridTemplateColumns||"1fr 120px"}));t.default=function(e){e.edit;var t,n,o,u,c=e.onSubmit,N=(e.copy,e.defaultState),E=(e.addInputs,(0,r.Z)(e,_)),R=(0,m.CG)().directories.directories,A=(0,d.useState)(null===N||void 0===N?void 0:N.type),T=(0,i.Z)(A,2),F=T[0],q=T[1],M=(0,P.hN)({defaultValues:(0,l.Z)((0,l.Z)({currency:"UAH"},N),{},{eventDate:(0,h.w4)(null===N||void 0===N?void 0:N.eventDate)}),resolver:(0,f.X)((u=F,p.Ry().shape({amount:p.Rx().required(),type:p.Z_().required(),eventDate:p.Z_().required(),comment:p.Z_().optional(),countIn:u&&["INCOME","TRANSFER"].includes(u)?S:j,subCountIn:j,countOut:u&&["EXPENSE","TRANSFER"].includes(u)?S:j,subCountOut:j,category:S,subCategory:j}))),reValidateMode:"onSubmit"}),V=M.formState,L=V.errors,k=V.isValid,w=M.formValues,D=M.register,X=M.setValue,G=M.registerSelect,U=M.handleSubmit,H=(0,g.d)();var W=(0,d.useMemo)((function(){var e,t=R[x.cA.COUNTS],n=t.find((function(e){var t;return e._id===(null===(t=w.countIn)||void 0===t?void 0:t._id)}));return w.type&&["INCOME","TRANSFER"].includes(w.type)?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(b.Z,(0,l.Z)({},G("countIn",{label:(0,C.ZP)("countIn"),placeholder:(0,C.ZP)("countIn"),required:!0,options:t},{childName:"subCountIn"}))),(null===n||void 0===n?void 0:n.childrenList)&&(null===n||void 0===n||null===(e=n.childrenList)||void 0===e?void 0:e.length)>0&&(0,O.jsx)(b.Z,(0,l.Z)({label:(0,C.ZP)("subCountIn"),placeholder:(0,C.ZP)("subCountIn")},G("subCountIn",{options:null===n||void 0===n?void 0:n.childrenList})))]}):null}),[R,null===(t=w.countIn)||void 0===t?void 0:t._id,w.type,G]),z=(0,d.useMemo)((function(){var e,t=R[x.cA.COUNTS],n=null===(e=t.find((function(e){var t;return e._id===(null===(t=w.countOut)||void 0===t?void 0:t._id)})))||void 0===e?void 0:e.childrenList;return w.type&&["EXPENSE","TRANSFER"].includes(w.type)?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(b.Z,(0,l.Z)({},G("countOut",{label:(0,C.ZP)("countOut"),placeholder:(0,C.ZP)("countOut"),required:!0,options:t,error:L.countOut},{childName:"subCountOut"}))),n&&n.length>0&&(0,O.jsx)(b.Z,(0,l.Z)({label:(0,C.ZP)("subCountOut"),placeholder:(0,C.ZP)("subCountOut")},G("subCountOut",{options:n,error:L.subCountOut})))]}):null}),[R,L.countOut,L.subCountOut,null===(n=w.countOut)||void 0===n?void 0:n._id,w.type,G]),B=(0,d.useMemo)((function(){var e,t=R[x.cA.CATEGORIES_TR].filter((function(e){return e.type===w.type})),n=null===(e=t.find((function(e){var t;return e._id===(null===(t=w.category)||void 0===t?void 0:t._id)})))||void 0===e?void 0:e.childrenList;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(b.Z,(0,l.Z)({},G("category",{label:(0,C.ZP)("category"),placeholder:(0,C.ZP)("category"),required:!0,options:t},{childName:"subCategory"}))),n&&n.length>0&&(0,O.jsx)(b.Z,(0,l.Z)({label:(0,C.ZP)("subCategory"),placeholder:(0,C.ZP)("subCategory")},G("subCategory",{options:n})))]})}),[R,null===(o=w.category)||void 0===o?void 0:o._id,w.type,G]);return(0,O.jsx)(a.Z,(0,l.Z)((0,l.Z)({isValid:k,onSubmit:U((function(e){var t="INCOME"===w.type&&["countOut","subCountOut"]||"EXPENSE"===w.type&&["countIn","subCountIn"]||[],n=(0,h.G9)(e,t,"","amount");c&&c({_id:"",data:n},(0,l.Z)({},H.state))}),(function(e){return console.log(e)})),onOptSelect:function(e){var t=e.value;t&&(q(t),X("type",t))}},E),{},{extraFooter:(0,O.jsx)(g.Z,(0,l.Z)({},H)),children:(0,O.jsxs)(y.ZP,{className:"inputs",flex:"1",fillWidth:!0,maxHeight:"100%",padding:"0 8px 8px",overflow:"auto",children:[(0,O.jsx)(s.Z,{label:(0,C.ZP)("dateAndTime"),direction:"vertical",children:(0,O.jsx)(Z.ZP,(0,l.Z)({placeholder:(0,C.ZP)("dateAndTime"),type:"datetime-local"},D("eventDate")))}),(0,O.jsxs)(I,{children:[(0,O.jsx)(s.Z,{label:(0,C.ZP)("amount"),direction:"vertical",children:(0,O.jsx)(Z.ZP,(0,l.Z)({placeholder:(0,C.ZP)("amount"),type:"number"},D("amount",{valueAsNumber:!0})))}),(0,O.jsx)(s.Z,{label:(0,C.ZP)("currency"),direction:"vertical",children:(0,O.jsx)(Z.ZP,(0,l.Z)((0,l.Z)({placeholder:(0,C.ZP)("currency")},D("currency")),{},{disabled:!0}))})]}),z,W,B,(0,O.jsx)(b.Z,(0,l.Z)({label:(0,C.ZP)("contractor"),placeholder:(0,C.ZP)("contractor")},G("contractor",{options:R[x.cA.CONTRACTORS]}))),(0,O.jsx)(s.Z,{label:(0,C.ZP)("comment"),direction:"vertical",children:(0,O.jsx)(v.Z,(0,l.Z)({placeholder:(0,C.ZP)("comment")},D("comment")))})]})}))}}}]);
//# sourceMappingURL=283.478e0c1d.chunk.js.map