"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[265],{3265:function(e,n,o){o.r(n),o.d(n,{FormCreateOrdersGroupStepsEnum:function(){return ke},default:function(){return Be}});var i,t,l,r,d=o(168),a=o(1413),u=o(9439),c=o(4942),s=o(8553),v=o(7506),f=o(853),h=o(2791),p=o(2360),m=o(8095),x=o(1251),g=o(6522),Z=o(7606),b=o(3433),j=o(7348),C=o(4109),S=o(1383),y=o(825),I=o(5188),P=o(6201),w=o(4636),D=o(6492),k=o(3329),q=(0,p.ZP)(w.Z)(i||(i=(0,d.Z)(["\n  & .header {\n  }\n  & .content {\n    padding: 0;\n  }\n"]))),M=function(e){var n=e.slots,o=e.onRemove,i=e.onUpdate,t=e.renderHeader,l=e.title,r=e.onAddSlotPress,d=e.renderFooter,a=(0,p.Fg)(),u=(0,h.useMemo)((function(){return n.map((function(e){return(0,k.jsx)(P.Z,{slot:e,editable:!0,onRemovePress:o?function(){return(null===e||void 0===e?void 0:e.tempId)&&o(null===e||void 0===e?void 0:e.tempId)}:void 0,onUpdate:i},"slot_".concat(null===e||void 0===e?void 0:e.tempId))}))}),[o,i,n]),c=(0,h.useMemo)((function(){return(0,k.jsxs)(m.ZP,{fxDirection:"row",fillHeight:!0,gap:8,alignItems:"center",padding:"2px 0",children:[t||(0,k.jsx)(D.x,{$weight:500,$size:15,children:l}),r&&(0,k.jsx)(m.ZP,{height:"80%",border:"1px solid ".concat(a.modalBorderColor)}),r&&(0,k.jsx)(C.Z,{variant:"textExtraSmall",style:{minWidth:"fit-content",height:"100%",fontWeight:600},disabled:!r,onClick:r,children:(0,g.t)("Add")})]})}),[r,t,a.modalBorderColor,l]);return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(q,{open:!0,renderHeader:c,renderFooter:d,title:l,children:u})})},W=o(6211),A=o(4805),R=o(8332),B=o(7824),E=(0,p.ZP)(m.ZP)(t||(t=(0,d.Z)(["\n  color: ",";\n"])),(function(e){return e.theme.fontColorSidebar})),_=(0,p.ZP)(m.ZP)(l||(l=(0,d.Z)([""]))),$=(0,p.ZP)(m.ZP)(r||(r=(0,d.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),F=function(e){var n=e.onChangeValidStatus,o=(0,I.kw)(),i=(0,R.xc)()[B.d.orders],t=(0,j.xA)().ordersGroupFormData.slots,l=(0,A.useMediaQuery)({maxWidth:480}),r=(0,h.useCallback)((function(e){i.addTempSlot(e)}),[i]),d=(0,h.useCallback)((function(e){i.removeTempSlot(e)}),[i]),a=(0,h.useCallback)((function(e){i.updateTempSlot(e)}),[i]),u=(0,h.useMemo)((function(){var e={};return null===t||void 0===t||t.map((function(n){var o,i,t;null!==(o=n.warehouse)&&void 0!==o&&o._id&&(e[n.warehouse._id]={warehouse:n.warehouse,slots:null!==(i=e[n.warehouse._id])&&void 0!==i&&i.slots?[].concat((0,b.Z)(null===(t=e[n.warehouse._id])||void 0===t?void 0:t.slots),[n]):[n]});return""})),e}),[t]);(0,h.useEffect)((function(){n&&n(!(null===t||void 0===t||!t.length)&&(null===t||void 0===t?void 0:t.length)>0)}),[n,null===t||void 0===t?void 0:t.length]);var c=(0,h.useMemo)((function(){return Object.keys(u).map((function(e,n){var i,t,l=u[e];return(0,k.jsx)(M,{slots:l.slots,title:null===l||void 0===l||null===(t=l.warehouse)||void 0===t?void 0:t.label,onRemove:d,onUpdate:a,onAddSlotPress:function(){var e=o.open({Modal:y.n.FormCreateOrderSlot,props:{params:null!==l&&void 0!==l&&l.warehouse?{warehouse:(0,W.rE)(null===l||void 0===l?void 0:l.warehouse)}:void 0,onSubmit:function(n){r(n),n&&null!==e&&void 0!==e&&e.onClose&&(null===e||void 0===e||e.onClose())}}})}},"pre-order_".concat((null===(i=l.warehouse)||void 0===i?void 0:i._id)||n))}))}),[u,r,d,a,o]);return(0,k.jsxs)(E,{flex:1,fillWidth:!0,overflow:"hidden",style:{position:"relative"},children:[(0,k.jsx)(_,{flex:1,overflow:"auto",children:(0,k.jsx)(m.ZP,{flex:1,fillWidth:!0,children:c})}),(0,k.jsxs)($,{fxDirection:"row",gap:8,padding:"8px",children:[(0,k.jsx)(C.Z,{variant:"defOutlinedSmall",onClick:function(){window.confirm("Remove all items?")&&S.kl.info("All items will be remove")},children:(0,g.t)("Remove all")}),(0,k.jsx)(C.Z,{variant:"outlinedSmall",flex:1,onClick:function(){var e=o.open({Modal:y.n.FormCreateOrderSlot,props:{onSubmit:function(n){r(n),n&&null!==e&&void 0!==e&&e.onClose&&(null===e||void 0===e||e.onClose())}}})},children:(0,g.t)(l?"Add":"Add position to group")})]})]})},V=o(4990),N=o(4925),O=o(9656),H=o(1186),T=o(3363),G=o(4646),L=["onSelect","onSubmit","onClose","asReceiver"],z=function(e){var n=e.onSelect,o=(e.onSubmit,e.onClose),i=e.asReceiver,t=(0,N.Z)(e,L),l=(0,j.I6)().customers,r=(0,I.kw)(),d=(0,R.xc)()[R.EJ.customers],u=(0,h.useMemo)((function(){return{tableData:l,tableTitles:H.f,actionsCreator:function(e){return[{icon:"refresh",onClick:function(){return d.getAll()}},{separator:!0},{icon:"plus",onClick:function(){var e=r.open({ModalChildren:G.Z,modalChildrenProps:{onSubmit:function(n){d.create({data:(0,W.X$)(n),onSuccess:null===e||void 0===e?void 0:e.onClose})}}})}}]},onRowClick:function(e){null!==e&&void 0!==e&&e.rowData&&n&&(n(e.rowData),o&&o())}}}),[d,l,o,r,n]);return(0,h.useEffect)((function(){d.getAll({data:{refresh:!0,params:{}}})}),[]),(0,k.jsx)(O.Z,(0,a.Z)((0,a.Z)({fillWidth:!0,fillHeight:!0,title:(0,g.t)(i?"Select receiver":"Select customer"),onClose:o},t),{},{children:(0,k.jsx)(T.ZP,(0,a.Z)({},u))}))},U=o(6074),J=o(7666),Q=["onSubmit","onSelect","onClose"],X=function(e){e.onSubmit;var n=e.onSelect,o=e.onClose,i=((0,N.Z)(e,Q),(0,j.O5)().users),t=(0,h.useMemo)((function(){return{tableData:i,onRowClick:function(e){var o=i.find((function(n){return n._id===(null===e||void 0===e?void 0:e._id)}));o&&n&&n(o)}}}),[n,i]);return(0,k.jsx)(O.Z,{fillWidth:!0,fillHeight:!0,onClose:o,title:(0,g.t)("Select manager"),children:(0,k.jsx)(T.ZP,(0,a.Z)((0,a.Z)({tableTitles:J.NT},t),{},{isSearch:!1}))})},K=o(1392),Y=o(2911),ee=o(389),ne=o(6681),oe=o(1134),ie=function(e){e.onSuccess;var n=e.isReceiver,o=(0,R.xc)()[R.EJ.customers],i=(0,I.kw)();return(0,k.jsx)(C.Z,{variant:"onlyIcon",icon:"plus",iconSize:"100%",size:"30px",onClick:function(){var e=i.open({ModalChildren:G.Z,modalChildrenProps:{title:n?(0,g.t)("Create receiver"):void 0,onSubmit:function(n){o.create({data:(0,W.X$)(n),onSuccess:null===e||void 0===e?void 0:e.onClose})}}})}})},te=function(e){var n=e.info,o=e.isReceiver,i=e.isManager,t=(0,p.Fg)(),l=(0,h.useMemo)((function(){if(n)return function(e){var n=e.isManager;return[{label:(0,g.t)("label"),getValue:function(e){return(null===e||void 0===e?void 0:e.label)||"---"},visible:!n},{label:(0,g.t)("name"),getValue:function(e){return(null===e||void 0===e?void 0:e.name)||"---"},visible:!0},{label:(0,g.t)("secondName"),getValue:function(e){return(null===e||void 0===e?void 0:e.secondName)||"---"},visible:!0},{label:(0,g.t)("email"),getValue:function(e){return(null===e||void 0===e?void 0:e.email)||"---"},visible:!0},{label:(0,g.t)("taxCode"),getValue:function(e){return(null===e||void 0===e?void 0:e.taxCode)||"---"},visible:!n},{label:(0,g.t)("personalTaxCode"),getValue:function(e){return(null===e||void 0===e?void 0:e.personalTaxCode)||"---"},visible:!n},{label:(0,g.t)("tags"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.tags)||void 0===n?void 0:n.join(", "))||"---"},visible:!n}]}({info:n,isReceiver:o,isManager:i}).map((function(e){var o=e.label,i=e.getValue;return e.visible&&(0,k.jsxs)(m.ZP,{gap:4,padding:"4px",flex:"1 1 50%",maxWidth:"50%",border:"1px solid ".concat(t.modalBorderColor),children:[(0,k.jsx)(D.x,{$size:12,children:o}),(0,k.jsx)(D.x,{$align:"right",children:i(n)})]},o)}))}),[n,i,o,t.modalBorderColor]);return(0,k.jsx)(m.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",border:"1px solid ".concat(t.modalBorderColor),children:l})};var le,re,de,ae=[{name:"country",label:(0,g.t)("Country"),required:!1},{name:"region",label:(0,g.t)("Region"),required:!1},{name:"area",label:(0,g.t)("Area"),required:!1},{name:"city",label:(0,g.t)("City"),required:!1},{name:"street",label:(0,g.t)("Street"),required:!1},{name:"house",label:(0,g.t)("House"),required:!1},{name:"office",label:(0,g.t)("Office"),required:!1},{name:"room",label:(0,g.t)("Room"),required:!1}],ue=o(763),ce=o.n(ue),se=(ce().throttle((function(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];(e=console).log.apply(e,["Throttled Logger"].concat(o))}),5e3),ce().throttle((function(e){console.log(se.name),e()}),3e3)),ve=o(6666),fe=o(9297),he=o(8527),pe=o(4522);function me(e,n){(0,pe.Z)(2,arguments);var o=(0,he.Z)(e),i=(0,fe.Z)(n);return isNaN(i)?new Date(NaN):i?(o.setDate(o.getDate()+i),o):o}var xe,ge,Ze,be,je=function(e){var n=e.title;return(0,k.jsx)(D.x,{$padding:"0 6px",$ellipsisMode:!0,$size:16,$weight:500,children:n})},Ce=(0,p.ZP)(m.ZP)(le||(le=(0,d.Z)([""]))),Se=(0,p.ZP)(m.ZP)(re||(re=(0,d.Z)(["\n  padding-bottom: 8px;\n\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),ye=(0,p.ZP)(w.Z)(de||(de=(0,d.Z)(["\n  & .content {\n    max-width: 480px;\n    width: 100%;\n    margin: auto;\n  }\n"]))),Ie=function(e){var n,o,i,t,l,r,d,s,v,f,p=e.onChangeValidStatus,x=(0,I.kw)(),Z=(0,h.useState)({}),b=(0,u.Z)(Z,2),S=b[0],y=b[1],P=(0,Y.f)((0,j.eD)().methods,{withFullLabel:!0}),w=(0,Y.f)((0,j.$N)().methods,{withFullLabel:!0}),q=(0,Y.f)((0,j.A2)().methods,{withFullLabel:!0}),M=(0,oe.Gc)(),W=M.formState,A=W.isValid,R=W.errors,B=M.register,E=M.setValue,_=M.unregister,$=M.watch,F=M.trigger,N=$(),O=function(e,n){try{E(e,n),se((function(){return F().then((function(e){e&&p&&p(e)})).catch((function(e){console.error("handleOnChangeValue trigger error",e)}))}))}catch(o){console.error("handleOnChangeValue: ",o)}},H=function(e){return function(n){if(y((function(o){return(0,a.Z)((0,a.Z)({},o),{},(0,c.Z)({},e,n))})),n&&"hasDeliveryInvoice"===e)return E("deliveryInfo.invoiceInfo.expiredAt",(0,ve._1)(me(new Date,1)));if(!n){if("hasReceiverInfo"===e)return _("receiver");if("hasDeliveryInvoice"===e)return _("deliveryInfo.invoiceInfo");if("hasDelivery"===e)return _("deliveryInfo")}}};return(0,h.useEffect)((function(){p&&p(A)}),[A,p]),(0,k.jsxs)(Ce,{flex:1,overflow:"auto",children:[(0,k.jsxs)(m.ZP,{fillWidth:!0,gap:8,padding:"8px 2px",style:{maxWidth:480,width:"100%",margin:"0 auto"},children:[(null===N||void 0===N?void 0:N.manager)&&(0,k.jsx)(V.Z,{label:(0,g.t)("manager"),children:(0,k.jsx)(te,{info:null===N||void 0===N||null===(n=N.manager)||void 0===n?void 0:n.user,isManager:!0})}),(0,k.jsx)(C.Z,{variant:"outlinedSmall",onClick:function(){var e=x.open({ModalChildren:X,modalChildrenProps:{onSelect:function(n){O("manager",n),(null===e||void 0===e?void 0:e.onClose)&&(null===e||void 0===e||e.onClose())}}})},children:(0,g.t)(null!==N&&void 0!==N&&N.manager?"Change manager":"Select manager")})]}),(0,k.jsxs)(m.ZP,{padding:"0 2px",children:[(0,k.jsxs)(ye,{contentContainerStyle:{padding:"8px 0",gap:8},open:!0,renderHeader:(0,k.jsx)(D.x,{$padding:"0 6px",$ellipsisMode:!0,$size:16,$weight:500,children:"".concat((0,g.t)("Customer")," | ").concat((0,g.t)("Receiver"))}),children:[(null===N||void 0===N?void 0:N.customer)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(V.Z,{label:(0,g.t)("Customer information"),children:(0,k.jsx)(te,{info:null===N||void 0===N?void 0:N.customer})}),(0,k.jsx)(Se,{fillWidth:!0,overflow:"hidden",children:(0,k.jsx)(V.Z,{label:(0,g.t)("Communication methods"),children:(0,k.jsx)(U.Z,{multiple:!0,numColumns:2,values:null===N||void 0===N||null===(o=N.communication)||void 0===o?void 0:o.customer,resetButtonLabel:(0,g.t)("Not needed"),options:w,resetButtonPosition:"start",onChange:function(e){O("communication.customer",e)}})})})]}),(0,k.jsxs)(m.ZP,{fxDirection:"row",gap:8,fillWidth:!0,alignItems:"center",children:[(0,k.jsx)(ie,{onSuccess:function(e){O("customer",e)}}),(0,k.jsx)(C.Z,{variant:"outlinedSmall",flex:1,onClick:function(){var e=x.open({ModalChildren:z,modalChildrenProps:{onSelect:function(n){O("customer",n),(null===e||void 0===e?void 0:e.onClose)&&(null===e||void 0===e||e.onClose())}}})},children:(0,g.t)(null!==N&&void 0!==N&&N.customer?"Change customer":"Select customer")})]}),(0,k.jsx)(Se,{fillWidth:!0,gap:4,children:(0,k.jsx)(V.Z,{label:(0,g.t)("Receiver"),children:(0,k.jsx)(ee.Z,{onChange:H("hasReceiverInfo"),value:(null===S||void 0===S?void 0:S.hasReceiverInfo)||!(null===N||void 0===N||!N.receiver),rejectLabel:"The same",acceptLabel:"Another"})})}),(null===S||void 0===S?void 0:S.hasReceiverInfo)&&(null===N||void 0===N?void 0:N.receiver)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(V.Z,{label:(0,g.t)("Receiver information"),children:[(0,k.jsx)(te,{info:null===N||void 0===N?void 0:N.receiver})," "]}),(0,k.jsx)(Se,{fillWidth:!0,children:(0,k.jsx)(V.Z,{label:(0,g.t)("Communication methods"),children:(0,k.jsx)(U.Z,{multiple:!0,numColumns:2,values:null===N||void 0===N||null===(i=N.communication)||void 0===i?void 0:i.receiver,resetButtonLabel:(0,g.t)("Without"),options:w.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{value:e._id})})),resetButtonPosition:"start",onChange:function(e){O("communication.receiver",e)}})})})]}),(null===S||void 0===S?void 0:S.hasReceiverInfo)&&(0,k.jsxs)(m.ZP,{fxDirection:"row",gap:8,fillWidth:!0,alignItems:"center",children:[(0,k.jsx)(ie,{isReceiver:!0,onSuccess:function(e){O("receiver",e)}}),(0,k.jsx)(C.Z,{variant:"outlinedSmall",flex:1,onClick:function(){var e=x.open({ModalChildren:z,modalChildrenProps:{onSelect:function(n){O("receiver",n),(null===e||void 0===e?void 0:e.onClose)&&(null===e||void 0===e||e.onClose())}}})},children:(0,g.t)(null!==N&&void 0!==N&&N.receiver?"Change receiver":"Select receiver")})]})]}),(0,k.jsxs)(ye,{contentContainerStyle:{padding:"8px 2px"},open:!0,renderHeader:(0,k.jsx)(D.x,{$padding:"0 6px",$ellipsisMode:!0,$size:16,$weight:500,children:(0,g.t)("Invoicing")}),children:[(0,k.jsx)(V.Z,{label:(0,g.t)("Payment method"),required:!0,children:(0,k.jsx)(K.Z,{options:q,currentOption:null===N||void 0===N||null===(t=N.invoiceInfo)||void 0===t?void 0:t.method,onChangeIndex:function(e){O("invoiceInfo.method",q[e])}})}),(0,k.jsx)(V.Z,{label:(0,g.t)("Expired at"),required:!0,children:(0,k.jsx)(ne.ZP,(0,a.Z)({placeholder:(0,g.t)("Expired at"),type:"datetime-local",required:!0},B("invoiceInfo.expiredAt",{required:!0})))})]}),(0,k.jsxs)(ye,{contentContainerStyle:{padding:"0 2px"},open:!0,renderHeader:(0,k.jsx)(je,{title:(0,g.t)("Shipment")}),children:[(0,k.jsx)(Se,{fillWidth:!0,gap:4,children:(0,k.jsx)(V.Z,{label:(0,g.t)("Another execute date"),children:(0,k.jsx)(ee.Z,{onChange:H("hasExecuteDate"),value:null===S||void 0===S?void 0:S.hasExecuteDate})})}),(null===S||void 0===S?void 0:S.hasExecuteDate)&&(0,k.jsx)(V.Z,{label:(0,g.t)("Execute at"),required:null===S||void 0===S?void 0:S.hasExecuteDate,children:(0,k.jsx)(ne.ZP,(0,a.Z)({placeholder:(0,g.t)("Execute at"),type:"date",required:null===S||void 0===S?void 0:S.hasExecuteDate},B("shipmentInfo.executeAt",{required:null===S||void 0===S?void 0:S.hasExecuteDate})))}),(0,k.jsx)(Se,{fillWidth:!0,gap:4,children:(0,k.jsx)(V.Z,{label:(0,g.t)("Delivery"),children:(0,k.jsx)(ee.Z,{onChange:H("hasDelivery"),value:(null===S||void 0===S?void 0:S.hasDelivery)||!(null===N||void 0===N||!N.deliveryInfo)})})})]}),((null===S||void 0===S?void 0:S.hasDelivery)||!(null===N||void 0===N||!N.deliveryInfo))&&(0,k.jsxs)(ye,{contentContainerStyle:{padding:"0 2px"},open:!0,renderHeader:(0,k.jsx)(D.x,{$padding:"0 6px",$ellipsisMode:!0,$size:16,$weight:500,children:(0,g.t)("Delivery")}),children:[(0,k.jsx)(Se,{fillWidth:!0,gap:8,children:(0,k.jsx)(V.Z,{label:(0,g.t)("Delivery method"),required:!0,children:(0,k.jsx)(K.Z,{options:P,currentOption:null===N||void 0===N||null===(l=N.deliveryInfo)||void 0===l?void 0:l.method,onChangeIndex:function(e){O("deliveryInfo.method",P[e])}})})}),(0,k.jsx)(Se,{fillWidth:!0,style:{columnGap:8,display:"grid",gridTemplateColumns:"1fr 1fr"},children:ae.map((function(e){var n,o,i=e.name,t=e.label,l=e.required;return(0,k.jsx)(V.Z,{label:t,error:null!==R&&void 0!==R&&null!==(n=R.deliveryInfo)&&void 0!==n&&n.destination?null===R||void 0===R||null===(o=R.deliveryInfo)||void 0===o?void 0:o.destination[i]:void 0,required:l,children:(0,k.jsx)(ne.ZP,(0,a.Z)({required:l,placeholder:t},B("deliveryInfo.destination.".concat(i),{required:l})))},"dest-addr-".concat(t))}))}),(0,k.jsx)(Se,{fillWidth:!0,gap:8,children:(0,k.jsx)(V.Z,{label:(0,g.t)("Has payment"),required:!0,children:(0,k.jsx)(ee.Z,{onChange:H("hasDeliveryInvoice"),value:(null===S||void 0===S?void 0:S.hasDeliveryInvoice)||!(null===N||void 0===N||null===(r=N.deliveryInfo)||void 0===r||!r.invoiceInfo)})})}),(0,k.jsx)(Se,{fillWidth:!0,gap:8,children:((null===S||void 0===S?void 0:S.hasDeliveryInvoice)||!(null===N||void 0===N||null===(d=N.deliveryInfo)||void 0===d||null===(s=d.invoiceInfo)||void 0===s||!s.method))&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(V.Z,{label:(0,g.t)("Payment method"),required:!0,children:(0,k.jsx)(K.Z,{options:q,currentOption:null===N||void 0===N||null===(v=N.deliveryInfo)||void 0===v||null===(f=v.invoiceInfo)||void 0===f?void 0:f.method,onChangeIndex:function(e){O("deliveryInfo.invoiceInfo.method",q[e])}})}),(0,k.jsx)(V.Z,{label:(0,g.t)("Expired at"),required:!0,children:(0,k.jsx)(ne.ZP,(0,a.Z)({placeholder:(0,g.t)("Expired at"),type:"datetime-local",required:!0},B("deliveryInfo.invoiceInfo.expiredAt",{required:!0})))})]})})]})]})]})},Pe=o(4695),we=o(371),De=o(9941),ke=function(e){return e.Stuffing="Stuffing",e.Info="Info",e}({}),qe=(0,s.H1)(ke),Me=(xe={},(0,c.Z)(xe,ke.Stuffing,!0),(0,c.Z)(xe,ke.Info,!1),xe),We=p.ZP.div(ge||(ge=(0,d.Z)(["\n  color: ",";\n\n  display: flex;\n  flex-direction: column;\n\n  width: 98vw;\n  height: 98vh;\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.modalBackgroundColor})),Ae=(0,p.ZP)(m.ZP)(Ze||(Ze=(0,d.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),Re=(0,p.ZP)(m.ZP)(be||(be=(0,d.Z)([""]))),Be=function(e){e.onSubmit;var n,o=e.onClose,i=(0,R.xc)()[R.EJ.orders],t=(0,j.xA)().ordersGroupFormData,l=(0,f.dn)(qe),r=l.stepsMap,d=l.stepIdx,s=l.setNextStep,p=l.setPrevStep,m=l.getCurrentStep,b=l.isLast,C=(0,h.useState)(Me),y=(0,u.Z)(C,2),I=y[0],P=y[1],w=function(e){return function(n){P((function(o){return(0,a.Z)((0,a.Z)({},o),{},(0,c.Z)({},ke[e],n))}))}},D=(0,oe.cI)({defaultValues:(0,a.Z)((0,a.Z)({},t.info),{},{invoiceInfo:(0,a.Z)({expiredAt:(0,ve._1)(me(new Date,1))},null===(n=t.info)||void 0===n?void 0:n.invoiceInfo)}),resolver:(0,Pe.X)(we.Lr),reValidateMode:"onChange"}),q=D.watch(),M=(0,h.useMemo)((function(){return null!==r&&void 0!==r&&r.Stuffing?(0,k.jsx)(F,{onChangeValidStatus:w("Stuffing")}):null!==r&&void 0!==r&&r.Info?(0,k.jsx)(Ie,{onChangeValidStatus:w("Info"),isGroup:!0}):void 0}),[null===r||void 0===r?void 0:r.Info,null===r||void 0===r?void 0:r.Stuffing]),W=(0,h.useMemo)((function(){return I[m().value]}),[m,I]),A=(0,h.useMemo)((function(){return r.Stuffing?I.Stuffing:!!r.Info&&I.Info}),[I.Info,I.Stuffing,r.Info,r.Stuffing]);return(0,k.jsx)(oe.RV,(0,a.Z)((0,a.Z)({},D),{},{children:(0,k.jsxs)(We,{children:[(0,k.jsx)(x.xB,{title:(0,g.t)("Create orders group by warehouse"),onBackPress:o}),(0,k.jsxs)(Ae,{fillWidth:!0,flex:1,overflow:"hidden",children:[(0,k.jsx)(v.Z,{filterOptions:qe,asStepper:!0,currentIndex:d,optionProps:{fitContentH:!0}}),M]}),(0,k.jsx)(Re,{padding:"8px",children:(0,k.jsx)(Z.Z,{steps:qe,onNextPress:function(){"Info"===m().value&&i.updateCurrentGroupFormInfoData(ce().cloneDeep(q)),W?s():S.kl.error("".concat((0,g.t)("Step is not finished"),': "').concat(m().value.toUpperCase(),'"'))},onPrevPress:function(){"Info"===m().value&&i.updateCurrentGroupFormInfoData(ce().cloneDeep(q)),p()},currentIndex:d,canGoNext:!0,canAccept:b,onAcceptPress:function(){A?(0,De.Eh)({data:{data:{info:q,slots:t.slots}},onSuccess:function(e){console.log(e)},onError:function(e){console.log(e)},onLoading:function(e){}},De.p6.createManyOrdersGroupedByWarehouse,De.p6):S.kl.error("Form is not valid")},onCancelPress:0===d?o:void 0})})]})}))}},7606:function(e,n,o){var i,t,l,r=o(168),d=o(9439),a=o(2360),u=o(8095),c=o(4109),s=o(2791),v=o(6666),f=o(6522),h=o(4805),p=o(3329),m=(0,a.ZP)(u.ZP)(i||(i=(0,r.Z)(["\n  //min-height: 44px;\n  // border-top: 1px solid ",";\n  // border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),x=(0,a.ZP)(c.Z)(t||(t=(0,r.Z)(["\n  flex: 1;\n  min-width: min-content;\n  height: 100%;\n"]))),g=(0,a.ZP)(c.Z)(l||(l=(0,r.Z)(["\n  min-width: 34px;\n  height: 100%;\n  color: ",";\n  fill: ",";\n  background-color: ",";\n  @media screen and (min-width: 480px) {\n    flex: 1;\n  }\n"])),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.accentColor.light}));n.Z=function(e){var n=e.steps,o=e.currentIndex,i=void 0===o?0:o,t=e.onNextPress,l=e.onPrevPress,r=e.onCancelPress,a=e.onAcceptPress,u=e.canGoNext,c=void 0===u||u,Z=e.canAccept,b=e.canSubmit,j=e.cancelButton,C=void 0===j||j,S=e.submitButton,y=void 0===S||S,I=e.acceptButton,P=e.arrowButtons,w=void 0===P||P,D=(0,h.useMediaQuery)({query:"(max-width: 768px)"}),k=(0,h.useMediaQuery)({query:"(max-width: 480px)"}),q=(0,s.useState)(i),M=(0,d.Z)(q,2),W=M[0],A=M[1],R=(0,s.useMemo)((function(){var e,o;return n&&n[W-1]?{label:null===(e=n[W-1])||void 0===e?void 0:e.label,value:null===(o=n[W-1])||void 0===o?void 0:o.value}:null}),[W,n]),B=(0,s.useMemo)((function(){var e,o;return n&&n[W+1]?{label:null===(e=n[W+1])||void 0===e?void 0:e.label,value:null===(o=n[W+1])||void 0===o?void 0:o.value}:null}),[W,n]),E=(0,s.useCallback)((function(){if(n)if(l){if(0===W)return void(r&&r());var e=W-1;l&&l({option:n[e],value:n[e].value,index:e})}else A((function(e){return 0===e?e:e-1}))}),[W,r,l,n]),_=(0,s.useCallback)((function(){if(n){if(t){var e=W+1;return e===n.length?a&&a():t({option:n[e],value:n[e].value,index:e})}A((function(e){return e+1===n.length?e+1:e}))}}),[W,a,t,n]);return(0,s.useEffect)((function(){v.sr.isNotUnd(i)&&A(i)}),[i]),(0,p.jsxs)(m,{fxDirection:"row",gap:8,fillWidth:!0,children:[C&&!D&&(0,p.jsx)(x,{variant:"defOutlinedSmall",onClick:r,children:(0,f.t)("Cancel")}),w&&(0,p.jsx)(g,{variant:k?"onlyIconFilled":"filledSmall",icon:"SmallArrowLeft",onClick:E,disabled:!R,children:null===R||void 0===R?void 0:R.label}),w&&(0,p.jsx)(g,{variant:k?"onlyIconFilled":"filledSmall",endIcon:"SmallArrowRight",onClick:_,disabled:!c||!B,children:null===B||void 0===B?void 0:B.label}),(y||I)&&(0,p.jsx)(x,{variant:"filledSmall",type:b&&y?"submit":"button",onClick:a,disabled:b&&y?!b:!Z,children:(0,f.t)("Accept")})]})}},4646:function(e,n,o){o.d(n,{Z:function(){return q}});var i,t=o(168),l=o(1413),r=o(4925),d=function(e){return e.facebook="facebook",e.instagram="instagram",e.referralSystem="referralSystem",e.another="another",e}({}),a=o(9656),u=o(6522),c=o(2360),s=o(8095),v=o(4990),f=o(6681),h=o(9964),p=o(457),m=o(1134),x=o(4109),g=o(1392),Z=o(8553),b=o(2791),j=o(1383),C=o(7038),S=o(763),y=o.n(S),I=o(3329),P=["defaultState","withReferer","onSubmit","onClose"],w=j.E4.isDevMode(),D=(0,Z.H1)(d),k=(0,c.ZP)(s.ZP)(i||(i=(0,t.Z)([""]))),q=function(e){var n=e.defaultState,o=e.withReferer,i=e.onSubmit,t=(e.onClose,(0,r.Z)(e,P)),c=(0,m.cI)({defaultValues:(0,l.Z)((0,l.Z)({},n),{},{businessType:C.G.company})}),Z=c.register,j=c.setValue,S=c.handleSubmit,q=(0,c.watch)(),M=(0,b.useMemo)((function(){return!(null===n||void 0===n||!n.email)}),[null===n||void 0===n?void 0:n.email]);return(0,I.jsx)(a.Z,(0,l.Z)((0,l.Z)({},t),{},{title:t.title?t.title:(0,u.t)("Create customer"),onSubmit:S((function(e){i&&i(y().omit(e,M?["engagementSource","email"]:["engagementSource"]))})),children:(0,I.jsxs)(k,{padding:"0 8px 8px",children:[(0,I.jsx)(v.Z,{label:(0,u.t)("type"),required:!0,children:(0,I.jsx)(h.Z,{options:p.Wk,onSelect:function(e){j("businessType",null===e||void 0===e?void 0:e.value)}})}),(0,I.jsx)(v.Z,{label:(0,u.t)("name"),required:!0,children:(0,I.jsx)(f.ZP,(0,l.Z)((0,l.Z)({placeholder:(0,u.t)("name")},Z("name")),{},{required:!0}))}),(0,I.jsx)(v.Z,{label:(0,u.t)("secondName"),children:(0,I.jsx)(f.ZP,(0,l.Z)({placeholder:(0,u.t)("secondName")},Z("secondName")))}),(0,I.jsx)(v.Z,{label:(0,u.t)("email"),disabled:M,required:!0,children:(0,I.jsx)(f.ZP,(0,l.Z)((0,l.Z)({placeholder:(0,u.t)("email"),type:"email"},Z("email",{required:!0})),{},{disabled:M,required:!0}))}),(0,I.jsx)(v.Z,{label:(0,u.t)("phone"),children:(0,I.jsx)(f.ZP,(0,l.Z)({placeholder:(0,u.t)("phone")},Z("phone")))}),(0,I.jsx)(v.Z,{label:(0,u.t)("Birth date"),children:(0,I.jsx)(f.ZP,(0,l.Z)((0,l.Z)({placeholder:(0,u.t)("Birth date")},Z("birthDate")),{},{type:"datetime-local"}))}),o&&w&&(0,I.jsx)(v.Z,{label:(0,u.t)("Referrer id"),children:(0,I.jsx)(f.ZP,(0,l.Z)({placeholder:(0,u.t)("Referrer id")},Z("referrer._id")))}),(0,I.jsx)(v.Z,{label:(0,u.t)("Source"),children:(0,I.jsx)(g.Z,{disabled:!0,options:D,currentOption:{value:null===q||void 0===q?void 0:q.engagementSource},onChangeIndex:function(e){j("engagementSource",D[e].value)}})}),(null===q||void 0===q?void 0:q.engagementSource)===d.referralSystem&&(0,I.jsxs)(s.ZP,{gap:8,fillWidth:!0,children:[(0,I.jsx)(v.Z,{label:(0,u.t)("Referrer"),required:!0,children:(0,I.jsx)(f.ZP,{placeholder:(0,u.t)("Referrer"),type:"email",required:!0})}),(0,I.jsxs)(s.ZP,{fxDirection:"row",fillWidth:!0,gap:8,padding:"8px 0",children:[(0,I.jsx)(x.Z,{variant:"defOutlinedSmall",children:(0,u.t)("Clear referrer")}),(0,I.jsx)(x.Z,{variant:"outlinedSmall",flex:1,children:(0,u.t)("Select referrer")})]})]})]})}))}},1392:function(e,n,o){var i=o(3433),t=o(9439),l=o(2791),r=o(6666),d=o(8095),a=o(3855),u=o(6492),c=o(3329);n.Z=function(e){var n=e.options,o=e.onChangeIndex,s=e.currentIndex,v=e.currentOption,f=e.multiple,h=e.onChange,p=e.value,m=e.disabled,x=e.disabledCheck,g=(0,l.useState)(0),Z=(0,t.Z)(g,2),b=Z[0],j=Z[1],C=(0,l.useState)([]),S=(0,t.Z)(C,2),y=S[0],I=S[1];return(0,l.useEffect)((function(){r.sr.isUnd(s)||j(s)}),[s]),(0,l.useEffect)((function(){f||r.sr.isUnd(v)||r.sr.isUnd(n)||j(n.findIndex((function(e){return(null===e||void 0===e?void 0:e.value)===(null===v||void 0===v?void 0:v.value)||(null===e||void 0===e?void 0:e._id)===(null===v||void 0===v?void 0:v._id)})))}),[v,f,n]),(0,l.useEffect)((function(){f&&!r.sr.isUnd(p)&&r.sr.isArray(p)&&I(p)}),[f,p]),(0,c.jsx)(d.ZP,{fillWidth:!0,gap:8,children:null===n||void 0===n?void 0:n.map((function(e,n){var t=x?x(e,n):m;return(0,c.jsxs)(d.ZP,{fxDirection:"row",gap:8,padding:"2px 4px",alignItems:"center",style:{opacity:t?.7:1,pointerEvents:t?"none":"all"},onClick:function(){var l;t||(!function(e){j(e),o&&o(e)}(n),(null===e||void 0===e?void 0:e._id)&&(l=null===e||void 0===e?void 0:e._id,f?I((function(e){var n=y.includes(l)?e.filter((function(e){return e!==l})):[].concat((0,i.Z)(e),[l]);return h&&h(n),n})):(I([l]),h&&h([l]))))},children:[(0,c.jsx)(a.Z,{checked:(null===e||void 0===e?void 0:e._id)&&y.includes(null===e||void 0===e?void 0:e._id)||n===b,size:"22px",disabled:t}),(0,c.jsx)(u.x,{children:null===e||void 0===e?void 0:e.label})]},"m-opt_".concat(e.value))}))})}},1186:function(e,n,o){o.d(n,{f:function(){return t}});var i=o(6522),t=[{top:{name:"".concat((0,i.t)("label"),"/").concat((0,i.t)("name")),getData:function(e){return(null===e||void 0===e?void 0:e.label)||"".concat((null===e||void 0===e?void 0:e.name)||"---"," ").concat((null===e||void 0===e?void 0:e.secondName)||"---")}},bottom:{name:"\u0406\u041f\u041d/\u0404\u0414\u0420\u041f\u041e\u0423",getData:function(e){return(e.personalTaxCode||"---")+"/"+(e.taxCode||"---")}},width:"240px",action:"doubleDataWithAvatar"},{top:{name:"\u0422\u0438\u043f",path:"type",getData:function(e){return null===e||void 0===e?void 0:e.type}},bottom:{name:"\u0421\u0442\u0430\u0442\u0443\u0441",path:"status"},width:"120px",action:"valueByPath"},{top:{name:"\u0415\u043c\u0435\u0439\u043b",path:"email",uppercase:!1},bottom:{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",path:"phone"},width:"170px",action:"contacts"},{top:{name:"\u041b\u043e\u043a\u0430\u0446\u0456\u044f"},width:"170px",action:"valueByPath"},{top:{name:"\u0422\u0435\u0433\u0438",path:"tags"},width:"200px",action:"tags"},{top:{name:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",path:"description"},width:"170px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}]}}]);
//# sourceMappingURL=265.b325db38.chunk.js.map