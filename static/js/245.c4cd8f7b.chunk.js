"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[245],{5245:function(t,e,n){n.r(e),n.d(e,{default:function(){return xt}});var i,o,a,r,l,c,d,u,s,m,p,h,f=n(168),v=n(9439),x=n(2791),b=n(2360),g=n(8495),Z=n(6146),y=n(7426),P=n(1413),C=n(3433),j=n(6382),w=n(3329),S=(0,x.createContext)({}),k=function(){return(0,x.useContext)(S)},B=function(t){var e=t.children,n=(0,x.useState)([]),i=(0,v.Z)(n,2),o=i[0],a=i[1],r=(0,x.useCallback)((function(t){a((function(e){return e.filter((function(e){return e.id!==t}))}))}),[]),l=(0,x.useCallback)((function(){a([])}),[]),c=(0,x.useCallback)((function(t){var e="".concat(t.RenderComponent.name,"_").concat((0,j.x0)(8));return"function"===typeof t.RenderComponent&&a((function(n){var i=n.find((function(e){return e.id.includes(t.RenderComponent.name)}));if(i){var o=n.filter((function(t){return t.id!==i.id}));return[].concat((0,C.Z)(o),[(0,P.Z)((0,P.Z)({},t),{},{id:e})])}return[].concat((0,C.Z)(n),[(0,P.Z)((0,P.Z)({},t),{},{id:e})])})),{onClose:function(){return r(e)},overlayId:e}}),[r]),d={getOverlayStack:(0,x.useCallback)((function(){return o}),[o]),removeStackItem:r,clearStack:l,createOverlayComponent:c,overlayStack:o};return(0,w.jsx)(S.Provider,{value:d,children:e})},D=n(8095),O=n(1251),I=n(7348),R=n(7689),A=n(4109),z=n(6522),W=n(8553),M=n(7506),V=n(4925),F=n(3728),H=["CellComponent"],_=(0,b.ZP)(D.ZP)(i||(i=(0,f.Z)([""]))),E=function(t){var e=k(),n=(0,I.xA)().currentOrder,i=(0,x.useMemo)((function(){return T.map((function(t){var i=t.CellComponent,o=(0,V.Z)(t,H);return i?(0,w.jsx)(i,{setOverlayContent:e.createOverlayComponent,cell:o,data:n},o.title):(0,w.jsx)(F.kQ,{setOverlayContent:e.createOverlayComponent,cell:o,data:n},o.title)}))}),[e.createOverlayComponent,n]);return(0,w.jsx)(_,{fillWidth:!0,flex:1,overflow:"auto",children:i})},T=[{title:(0,z.t)("Manager")},{title:(0,z.t)("Group")},{title:(0,z.t)("Status")},{title:(0,z.t)("Client")},{title:(0,z.t)("Receiver")},{title:(0,z.t)("Delivery")},{title:(0,z.t)("Payment")},{title:(0,z.t)("Additional")}],G=function(t){return t.info="Info",t.chat="Chat",t.statuses="Statuses",t.comments="Comments",t.tasks="tasks",t}({}),L=(0,W.H1)(G),Q=(0,b.ZP)(D.ZP)(o||(o=(0,f.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(t){return t.theme.sideBarBackgroundColor})),$=(0,b.ZP)(D.ZP)(a||(a=(0,f.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(t){return t.theme.sideBarBorderColor}),(function(t){return t.theme.sideBarBorderColor})),q=(0,b.ZP)(D.ZP)(r||(r=(0,f.Z)([""]))),N=(0,b.ZP)(A.Z)(l||(l=(0,f.Z)(["\n  fill: ",";\n"])),(function(t){return t.theme.globals.colors.error})),U=(0,b.ZP)(A.Z)(c||(c=(0,f.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),X=function(t){var e,n=(0,x.useState)(0),i=(0,v.Z)(n,2),o=i[0],a=i[1],r=null===(e=(0,y.Zx)())||void 0===e?void 0:e.orderId,l=(0,I.xA)().currentOrder,c=(0,R.s0)(),d=(0,R.TH)(),u=(0,x.useMemo)((function(){return L[o].value===G.info||L[o].value===G.chat||L[o].value===G.statuses?(0,w.jsx)(E,{}):void 0}),[o]);return(0,w.jsxs)(Q,{flex:1,fillWidth:!0,padding:"0 8px",children:[(0,w.jsx)(O.xB,{title:(0,z.t)("Order overview"),onBackPress:function(){if(null!==d&&void 0!==d&&d.pathname){var t,e=null===d||void 0===d||null===(t=d.pathname)||void 0===t?void 0:t.replace("/".concat((null===l||void 0===l?void 0:l._id)||r),"");e&&c(e)}}}),(0,w.jsxs)($,{flex:1,fillWidth:!0,overflow:"auto",children:[(0,w.jsx)(M.Z,{filterOptions:L,optionProps:{fitContentH:!0},onOptSelect:function(t,e,n){return a(n)}}),u]}),(0,w.jsxs)(q,{fxDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"8px 0",children:[(0,w.jsx)(A.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==t&&void 0!==t&&t.onEdit),onClick:null===t||void 0===t?void 0:t.onEdit}),(0,w.jsx)(N,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==t&&void 0!==t&&t.onDelete),onClick:null===t||void 0===t?void 0:t.onDelete}),(0,w.jsxs)(D.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,w.jsx)(A.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",disabled:!(null!==t&&void 0!==t&&t.onRefresh),onClick:null===t||void 0===t?void 0:t.onRefresh}),(0,w.jsx)(U,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==t&&void 0!==t&&t.onOpenRightSide),onClick:null===t||void 0===t?void 0:t.onOpenRightSide})]})]})]})},J=(0,b.ZP)(D.ZP)(d||(d=(0,f.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(t){return t.theme.modalBorderColor})),K=(0,b.ZP)(D.ZP)(u||(u=(0,f.Z)(["\n  position: absolute;\n\n  top: 0;\n  left: ",";\n  z-index: 20;\n\n  background-color: ",";\n\n  transition: all ",";\n"])),(function(t){return t.isActive?0:"100%"}),(function(t){return t.theme.backdropColor}),(function(t){return t.theme.globals.timingFunctionMain})),Y=(0,b.ZP)(D.ZP)(s||(s=(0,f.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 20;\n\n  animation: 'OverlayFromRight';\n"]))),tt=function(t){var e=t.toggleRightSideVisibility,n=(0,I.xA)().currentOrder,i=k(),o=(0,x.useCallback)((function(t){return function(e){e.target===e.currentTarget&&i.removeStackItem(t)}}),[i]),a=(0,x.useMemo)((function(){return i.getOverlayStack().map((function(t,e){var n=t.RenderComponent,a=t.props,r=t.id;return(0,w.jsx)(Y,{className:"overlay-".concat(r),style:{zIndex:20+e},fillHeight:!0,fillWidth:!0,alignItems:"flex-end",onClick:o(r),children:(0,w.jsx)(n,(0,P.Z)((0,P.Z)({},a),{},{onClose:function(){i.removeStackItem(r)},overlayId:r,index:e}),"overlay-".concat(r))},"overlay-".concat(r))}))}),[o,i]);return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(J,{children:[(0,w.jsx)(X,{order:n,onEdit:n?function(){}:void 0,onOpenRightSide:e}),(0,w.jsx)(K,{fillWidth:!0,fillHeight:!0,isActive:a.length>0,overflow:"hidden",children:a})]})})},et=n(6492),nt=n(7585),it=n(2517),ot=n(3383),at=function(t){var e=(0,x.useState)(0),n=(0,v.Z)(e,2),i=n[0],o=n[1],a=(0,I.xA)().currentOrder,r=(0,x.useMemo)((function(){var t;return null===a||void 0===a||null===(t=a.slots)||void 0===t?void 0:t.filter((function(t){var e,n;return(null===(e=t.product)||void 0===e?void 0:e.type)===(null===(n=ot.jI[i])||void 0===n?void 0:n.value)}))}),[null===a||void 0===a?void 0:a.slots,i]);return(0,w.jsxs)(D.ZP,{fillWidth:!0,overflow:"hidden",flex:1,children:[(0,w.jsx)(M.Z,{filterOptions:ot.jI,currentIndex:i,onOptSelect:function(t,e,n){o(n)}}),(0,w.jsx)(nt.ZP,{isSearch:!1,isFilter:!1,tableData:r,tableTitles:it.Qt})]})},rt=function(){return(0,w.jsx)(nt.ZP,{isSearch:!1,isFilter:!1})},lt=function(){return(0,w.jsx)(nt.ZP,{isSearch:!1,isFilter:!1})},ct=function(){return(0,w.jsx)(nt.ZP,{isSearch:!1,isFilter:!1})},dt=function(t){return t.Content="Content",t.Invoices="Invoices",t.Payments="Payments",t.Shipments="Shipments",t}(dt||{}),ut=(0,W.H1)(dt),st=(0,b.ZP)(D.ZP)(m||(m=(0,f.Z)(["\n  overflow: auto;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);\n  }\n"])),(function(t){return t.theme.globals.timingFunctionMain}),(function(t){return t.theme.backgroundColorLight}),(function(t){return t.isVisible?0:100})),mt=(0,b.ZP)(D.ZP)(p||(p=(0,f.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n  border-bottom: 1px solid ",";\n"])),(function(t){return t.theme.modalBorderColor})),pt=function(t){var e,n=t.toggleVisibility,i=t.isVisible,o=null===(e=(0,y.Zx)())||void 0===e?void 0:e.orderId,a=(0,I.xA)().currentOrder,r=(0,x.useState)(dt.Content),l=(0,v.Z)(r,2),c=l[0],d=l[1],u=(0,x.useMemo)((function(){return c===dt.Content?(0,w.jsx)(at,{}):c===dt.Invoices?(0,w.jsx)(rt,{}):c===dt.Payments?(0,w.jsx)(lt,{}):c===dt.Shipments?(0,w.jsx)(ct,{}):void 0}),[c]);return(0,w.jsxs)(st,{overflow:"hidden",fillHeight:!0,isVisible:i,children:[(0,w.jsxs)(mt,{fillWidth:!0,gap:4,isVisible:i,fxDirection:"row",justifyContent:"space-between",children:[(0,w.jsx)(A.Z,{variant:"textExtraSmall",icon:"SmallArrowLeft",style:{padding:6},onClick:n,children:"Back"}),(0,w.jsxs)(D.ZP,{padding:"0 8px",children:[(0,w.jsx)(et.x,{$weight:600,$size:14,children:null===a||void 0===a?void 0:a.code}),(0,w.jsx)(et.x,{$size:10,children:o})]})]}),(0,w.jsx)(M.Z,{filterOptions:ut,defaultValue:c,onOptSelect:function(t,e,n){d(e)},preventFilter:!0}),u]})},ht=(0,x.createContext)({}),ft=function(t){var e=t.children,n=(0,I.xA)().currentOrder,i=(0,x.useCallback)((function(){console.log("clear current order")}),[]),o=(0,x.useMemo)((function(){return{currentOrder:n,clearCurrent:i}}),[n,i]);return(0,w.jsx)(ht.Provider,{value:o,children:e})},vt=b.ZP.div(h||(h=(0,f.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),g.VU),xt=function(t){var e=t.path,n=(0,x.useState)(!1),i=(0,v.Z)(n,2),o=i[0],a=i[1],r=(0,y.Zx)().orderId,l=(0,x.useCallback)((function(){a((function(t){return!t}))}),[]);return(0,x.useEffect)((function(){r&&console.log("PageOrderOverview",r)}),[r]),(0,w.jsx)(Z.vI,{path:e,children:(0,w.jsx)(ft,{children:(0,w.jsx)(B,{children:(0,w.jsxs)(vt,{children:[(0,w.jsx)(tt,{toggleRightSideVisibility:l}),(0,w.jsx)(pt,{toggleVisibility:l,isVisible:o})]})})})})}},2517:function(t,e,n){n.d(e,{Qt:function(){return l},ni:function(){return a},qo:function(){return r}});var i=n(6469),o=n(6522),a=((0,n(5481).Gg)(i.D),i.D.new,(0,o.t)(i.D.new),i.D.inWork,(0,o.t)(i.D.inWork),i.D.rejectedByCustomer,(0,o.t)(i.D.rejectedByCustomer),i.D.rejectedByManager,(0,o.t)(i.D.rejectedByManager),i.D.active,(0,o.t)(i.D.active),i.D.fulfilled,(0,o.t)(i.D.fulfilled),i.D.fulfilledWithRefund,(0,o.t)(i.D.fulfilledWithRefund),i.D.archived,(0,o.t)(i.D.archived),i.D.expired,(0,o.t)(i.D.expired),[{top:{name:(0,o.t)("date"),align:"center",path:"eventDate"},bottom:{name:(0,o.t)("time"),align:"center"},width:"90px",action:"dateSimple"},{top:{name:(0,o.t)("status"),path:"status"},bottom:{name:(0,o.t)("type"),path:"type"},width:"100px",action:"status"},{top:{name:(0,o.t)("Priority")},width:"100px",action:"status"},{top:{name:(0,o.t)("Total amount"),align:"end",path:"total"},bottom:{name:(0,o.t)("Total q-ty"),align:"end"},width:"120px",action:"numberWithSpaces"},{top:{name:(0,o.t)("Group")},bottom:{name:(0,o.t)("Number"),path:"manager.email"},width:"180px",action:"valueByPath"},{top:{name:"\u0417\u0430\u043c\u043e\u0432\u043d\u0438\u043a",path:"customer.name"},bottom:{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",path:"customer.phone"},width:"180px",action:"valueByPath"},{top:{name:"\u041e\u0442\u0440\u0438\u043c\u0443\u0432\u0430\u0447",path:"receiver.name"},bottom:{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",path:"receiver.phone"},width:"180px",action:"valueByPath"},{top:{name:(0,o.t)("Invoices")},width:"200px",action:"tags"},{top:{name:(0,o.t)("Payments")},width:"200px",action:"valueByPath"},{top:{name:(0,o.t)("Shipments")},width:"200px",action:"valueByPath"},{top:{name:(0,o.t)("comment"),path:"comment"},width:"170px",action:"valueByPath"},{top:{name:(0,o.t)("Refunds")},width:"200px",action:"valueByPath"},{top:{name:(0,o.t)("manager"),path:"manager.name"},bottom:{name:(0,o.t)("email"),path:"manager.email"},width:"180px",action:"valueByPath"},{top:{name:(0,o.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,o.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateDbl"}]),r=[{label:"\u0414\u0430\u0442\u0430",dataPath:"eventDate",filter:!1,search:!1,sort:!0},{label:"\u041c\u0456\u0442\u043a\u0430",dataPath:"mark.label",filter:!1,search:!0,sort:!0},{label:"\u0421\u0442\u0430\u0442\u0443\u0441",dataPath:"status",filter:!1,search:!1,sort:!0},{label:(0,o.t)("type"),dataPath:"type",filter:!1,search:!0,sort:!0},{label:(0,o.t)("amount"),dataPath:"total",filter:!1,search:!0,sort:!0},{label:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",dataPath:"createdAt",filter:!1,search:!1,sort:!0},{label:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",dataPath:"updatedAt",filter:!1,search:!1,sort:!0}],l=[{top:{name:""},bottom:{name:""},action:"valueByPath",width:"125px"},{top:{name:""},bottom:{name:""},action:"valueByPath",width:"125px"},{top:{name:""},bottom:{name:""},action:"valueByPath",width:"125px"},{top:{name:""},bottom:{name:""},action:"valueByPath",width:"125px"},{top:{name:""},bottom:{name:""},action:"valueByPath",width:"125px"},{top:{name:""},bottom:{name:""},action:"valueByPath",width:"125px"},{top:{name:""},bottom:{name:""},action:"valueByPath",width:"125px"}]}}]);
//# sourceMappingURL=245.c4cd8f7b.chunk.js.map