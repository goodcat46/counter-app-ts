"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[226,495],{2483:function(e,n,t){t.d(n,{j:function(){return f}});var i,o,r=t(168),l=t(1413),a=t(4781),d=t(2791),u=t(2360),c=t(8095),s=t(3329),v=(0,d.createContext)({}),f=function(e){var n=(0,a.on)(),t=(0,d.useCallback)((function(e){return function(t){t.target===t.currentTarget&&n.remove(e)}}),[n]),i=(0,d.useMemo)((function(){return n.getStack().map((function(e,i){var o=e.RenderComponent,r=e.props,a=e.id;return(0,s.jsx)(h,{className:"overlay-".concat(a),style:{zIndex:20+i},fillHeight:!0,fillWidth:!0,alignItems:"flex-end",onClick:t(a),children:(0,s.jsx)(v.Provider,{value:{onClose:function(){n.remove(a)},compId:a,index:i},children:(0,s.jsx)(o,(0,l.Z)((0,l.Z)({},r),{},{onClose:function(){n.remove(a)},compId:a,index:i}),"overlay-".concat(a))})},"overlay-".concat(a))}))}),[t,n]);return(0,s.jsx)(p,{fillWidth:!0,fillHeight:!0,isActive:i.length>0,overflow:"hidden",children:i})},p=(0,u.ZP)(c.ZP)(i||(i=(0,r.Z)(["\n  position: absolute;\n\n  top: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 200;\n\n  left: ",";\n\n  opacity: ",";\n  visibility: ",";\n  pointer-events: ",";\n\n  background-color: ",";\n\n  transition: all ",";\n"])),(function(e){return e.isActive?0:"100%"}),(function(e){return e.isActive?1:0}),(function(e){return e.isActive?"visible":"hidden"}),(function(e){return e.isActive?"all":"none"}),(function(e){return e.theme.backdropColorDark}),(function(e){return e.theme.globals.timingFunctionMain})),h=(0,u.ZP)(c.ZP)(o||(o=(0,r.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 20;\n\n  max-width: 360px;\n\n  height: 100%;\n\n  animation: TransformFromRight;\n\n  @media screen and (max-width: 768px) {\n    max-width: 400px;\n  }\n"])))},4781:function(e,n,t){t.d(n,{on:function(){return c}});var i=t(1413),o=t(3433),r=t(9439),l=t(2791),a=t(6382),d=t(3329),u=(0,l.createContext)({}),c=function(){return(0,l.useContext)(u)};n.ZP=function(e){var n=e.children,t=(0,l.useState)([]),c=(0,r.Z)(t,2),s=c[0],v=c[1],f=(0,l.useCallback)((function(e){v((function(n){return n.filter((function(n){return n.id!==e}))}))}),[]),p=(0,l.useCallback)((function(){v([])}),[]),h=(0,l.useCallback)((function(e){var n="".concat(e.RenderComponent.name,"_").concat((0,a.x0)(8));return"function"===typeof e.RenderComponent&&v((function(t){var r=t.find((function(n){return n.id.includes(e.RenderComponent.name)}));if(r){var l=t.filter((function(e){var n,t;return(null===(n=e.RenderComponent)||void 0===n?void 0:n.name)!==(null===(t=r.RenderComponent)||void 0===t?void 0:t.name)}));return[].concat((0,o.Z)(l),[(0,i.Z)((0,i.Z)({},e),{},{id:n})])}return[].concat((0,o.Z)(t),[(0,i.Z)((0,i.Z)({},e),{},{id:n})])})),{onClose:function(){return f(n)},compId:n}}),[f]),m={getStack:function(){return s},remove:f,clearStack:p,open:h,create:function(e,n){return h({RenderComponent:e,props:n})}};return(0,d.jsx)(u.Provider,{value:m,children:n})}},8809:function(e,n,t){t.r(n),t.d(n,{default:function(){return dn},useOfferOverviewLoaders:function(){return ln}});var i,o,r,l,a,d,u=t(168),c=t(9439),s=t(2360),v=t(8495),f=t(6931),p=t(2791),h=t(3226),m=t(4942),x=t(959),g=t(6492),b=t(9953),C=t(8095),Z=t(8189),w=t(1413),j=t(4165),P=t(5861),y=t(1819),S=t(8589),k=t(3665),_=t(2989),I=t(7578),B=t(8767),O=t(6981),A=t(4066),D=t(9978),M=t(3329),L=function(e){var n,t=e.onSelect,i=e.selected,o=e.withActions,r=void 0===o||o,l=(0,k.f9)(),a=(0,y.xc)()[y.EJ.offers],d=(0,_.Zx)().offerId,u=(0,_.G2)({_id:d}),s=(0,p.useState)(),v=(0,c.Z)(s,2),f=v[0],h=v[1],m=(0,I.un)(),x=(0,A.TL)(),g=(0,p.useCallback)(function(){var e=(0,P.Z)((0,j.Z)().mark((function e(n){var t,i;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.refresh,i=n.update,u){e.next=3;break}return e.abrupt("return");case 3:a.getAllPrices({data:{params:{offerId:null===u||void 0===u?void 0:u._id},refreshCurrent:t,updateCurrent:i},onLoading:null===m||void 0===m?void 0:m.onLoading("prices")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[u,m,a]),b=(0,p.useMemo)((function(){return{onRowClick:function(e){var n;(h(null===e||void 0===e?void 0:e.rowData),t)&&t({_id:(null===e||void 0===e?void 0:e.rowId)||(null===e||void 0===e||null===(n=e.rowData)||void 0===n?void 0:n._id)||""})},actionsCreator:r?function(e){var n,t=(null===(n=e.selectedRow)||void 0===n?void 0:n._id)||(null===f||void 0===f?void 0:f._id);return[{icon:"refresh",type:"onlyIcon",onClick:function(){return g({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!0},{icon:"copy",type:"onlyIcon",disabled:!0},{icon:"edit",type:"onlyIcon",disabled:!t,onClick:function(){x((0,D.SN)({data:{params:{_id:t}},onLoading:m.onLoading("price",void 0,{content:"Refreshing price info..."}),onSuccess:function(){l.open({ModalChildren:B.Z,modalChildrenProps:{offer:u,updateId:t}})}}))}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){l.open({ModalChildren:B.Z,modalChildrenProps:{offer:u}})}}]}:void 0}}),[r,t,null===f||void 0===f?void 0:f._id,g,x,m,l,u]);return(0,p.useEffect)((function(){g({refresh:!0})}),[]),(0,M.jsx)(S.ZP,(0,w.Z)((0,w.Z)({},b),{},{hasSearch:!1,hasFilter:!1,isLoading:null===m||void 0===m||null===(n=m.isLoading)||void 0===n?void 0:n.prices,selectedRow:i,tableData:null===u||void 0===u?void 0:u.prices,tableTitles:O.po}))},R=t(758),T=t(3664),E=t(7348),V=t(387),U=function(e){var n=e.onSelect,t=e.selected,i=e.withActions,o=(0,E.i7)().currentOffer,r=(0,k.f9)(),l=(0,y.xc)()[y.EJ.offers],a=(0,p.useState)(!1),d=(0,c.Z)(a,2),u=d[0],s=d[1],v=(0,p.useCallback)((function(e){var n=e.refresh;e.update;if(o){var t=(0,V.rE)(o);l.getAllInventories({data:{refreshCurrent:n,params:{offer:t}},onLoading:s})}}),[o,l]),f=(0,p.useMemo)((function(){return{tableData:null===o||void 0===o?void 0:o.inventories,tableTitles:R.QX,onRowClick:function(e){if(n){if(null!==e&&void 0!==e&&e.rowData)return void n((0,V.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e.rowId&&n({_id:null===e||void 0===e?void 0:e.rowId})}},actionsCreator:i?function(e){return[{icon:"refresh",type:"onlyIcon",onClick:function(){return v({refresh:!0})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){r.open({ModalChildren:T.Z.CreateWarehouseDocument,modalChildrenProps:{}})}}]}:void 0}}),[null===o||void 0===o?void 0:o.inventories,v,r,n,i]);return(0,p.useEffect)((function(){v({refresh:!0})}),[]),(0,M.jsx)(S.ZP,(0,w.Z)((0,w.Z)({},f),{},{hasSearch:!1,hasFilter:!1,isLoading:u,selectedRow:t}))},N=function(e){return(0,M.jsx)(C.ZP,{padding:"16px",children:(0,M.jsx)(g.x,{$size:16,$weight:600,children:"In work"})})},H=t(9541),W=t(7121),$=function(e){return e.Prices="Prices",e.Variations="Variations",e.Warehousing="Warehousing",e.Sales="Sales",e}($||{}),G=(0,x.H1)($),F=(0,s.ZP)(C.ZP)(i||(i=(0,u.Z)(["\n  overflow: auto;\n\n  padding: 0 8px;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);\n  }\n"])),(function(e){return e.theme.globals.timingFunctionMain}),(function(e){return e.theme.backgroundColorLight}),(function(e){return e.isVisible?0:100})),z=(0,s.ZP)(C.ZP)(o||(o=(0,u.Z)(["\n  //border-top: 1px solid ",";\n  //border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),K=function(e){var n,t,i=e.isVisible,o=e.toggleVisibility,r=(0,h.rh)(),l=(0,H.J)(),a=(0,p.useState)(G[0].value),d=(0,c.Z)(a,2),u=d[0],s=d[1],v=(0,p.useMemo)((function(){var e,n;if(!r.currentOffer)return null;var t=(e={},(0,m.Z)(e,$.Variations,(0,M.jsx)(Z.Z,{withActions:!0})),(0,m.Z)(e,$.Warehousing,(0,M.jsx)(U,{withActions:!0})),(0,m.Z)(e,$.Prices,(0,M.jsx)(L,{withActions:!0})),(0,m.Z)(e,$.Sales,(0,M.jsx)(N,{withActions:!0})),e);return u&&null!==(n=null===t||void 0===t?void 0:t[u])&&void 0!==n?n:null}),[u,r.currentOffer]);return(0,M.jsx)(I.f4,{value:l,children:(0,M.jsxs)(F,{overflow:"hidden",fillHeight:!0,isVisible:i,children:[i&&(0,M.jsx)(W.OX,{onBackPress:o,renderTitle:(0,M.jsxs)(C.ZP,{padding:"0 8px",fxDirection:"row",alignItems:"center",justifyContent:"center",gap:8,children:[(0,M.jsx)(g.x,{$weight:600,$size:14,children:null===r||void 0===r||null===(n=r.currentOffer)||void 0===n?void 0:n.label}),(0,M.jsx)(g.x,{$size:14,$weight:400,children:null===r||void 0===r||null===(t=r.currentOffer)||void 0===t?void 0:t.sku})]})}),(0,M.jsxs)(z,{overflow:"hidden",fillWidth:!0,flex:1,children:[(0,M.jsx)(b.Z,{options:G,onOptSelect:function(e,n,t){n&&s(n)},preventDefault:!0}),v]})]})})},J=t(2483),q=t(4925),X=t(2928),Y=t(6522),Q=t(4781),ee=t(5227),ne=t(763),te=t.n(ne),ie=t(870),oe=t(6753),re=t(6493),le=t(9184),ae=(0,s.ZP)(C.ZP)(r||(r=(0,u.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),de=function(e){var n,t,i,o=e.onClose,r=(0,y.xc)()[y.EJ.offers],l=(0,_.G2)(),a=(0,E.q$)(ie.cA.CATEGORIES_PROD).directory,d=(0,H.J)({update:{content:"Loadings..."}}),u=(0,x.sK)(null===l||void 0===l||null===(n=l.categories)||void 0===n?void 0:n.map((function(e){return e._id}))),s=(0,p.useState)(u),v=(0,c.Z)(s,2),f=v[0],h=v[1],m=(0,p.useMemo)((function(){return(null===u||void 0===u?void 0:u.join(","))!==(0,x.sK)(f).join(",")}),[u,f]);return(0,p.useEffect)((function(){null!==l&&void 0!==l&&l.categories&&h(null===l||void 0===l?void 0:l.categories.map((function(e){return e._id})))}),[]),(0,M.jsxs)(W.dF,{onSubmit:function(e){e.preventDefault(),l&&r.updateById({onLoading:d.onLoading("update"),data:(0,w.Z)((0,w.Z)({},(0,x.rE)(l)),{},{data:{categories:f},refreshCurrent:!0}),onSuccess:function(e,n){o&&o()}})},children:[(0,M.jsx)(W.OX,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457",onBackPress:o,canSubmit:m,okButton:!0,isLoading:null===(t=d.isLoading)||void 0===t?void 0:t.update}),(0,M.jsx)(ae,{padding:"0 0 8px 0",flex:1,overflow:"auto",children:(0,M.jsx)(le.Z,{onChangeIds:h,options:a,defaultData:f,offer:l})}),(0,M.jsx)(W.AT,{canSubmit:m,loading:null===(i=d.isLoading)||void 0===i?void 0:i.update})]})},ue=function e(n){var t,i,o=n.item,r=n.lvl,l=void 0===r?0:r,a=n.selectedIds,d=(0,p.useMemo)((function(){var n;return null===o||void 0===o||null===(n=o.childrenList)||void 0===n?void 0:n.map((function(n,t){return(0,M.jsx)(e,{item:n,index:t,lvl:l+1,selectedIds:a},"item_lvl_".concat(l,"_").concat(n._id))}))}),[null===o||void 0===o?void 0:o.childrenList,l,a]),u=(0,p.useMemo)((function(){return a.includes(o._id)}),[o._id,a]);return(0,M.jsxs)(M.Fragment,{children:[u&&(0,M.jsxs)(oe.U.CategoryItem,{fxDirection:"row",alignItems:"center",padding:"0 2px 0 12px",gap:2,children:[(null===o||void 0===o||null===(t=o.parent)||void 0===t?void 0:t.label)&&"".concat(null===o||void 0===o||null===(i=o.parent)||void 0===i?void 0:i.label,"/"),"".concat(null===o||void 0===o?void 0:o.label)]}),d]})},ce=t(7762),se=t(3433),ve=t(1383),fe=t(4809),pe=t(2825),he=["onClose","title","defaultState","onSubmit","updateId","offer","template","onSelect","onChange"],me=(0,s.ZP)(C.ZP)(l||(l=(0,u.Z)(["\n  padding-bottom: 8px;\n"]))),xe=function(e){var n,t=e.onClose,i=e.title,o=(e.defaultState,e.onSubmit),r=e.updateId,l=e.offer,a=(e.template,e.onSelect,e.onChange,(0,q.Z)(e,he)),d=(0,_.G2)(l),u=(0,E.i7)(),s=(0,y.xc)()[y.EJ.offers],v=(0,p.useState)(),f=(0,c.Z)(v,2),h=f[0],m=f[1],g=(0,p.useState)(!1),b=(0,c.Z)(g,2),C=b[0],Z=b[1],j=(0,p.useState)([]),P=(0,c.Z)(j,2),S=P[0],k=P[1],I=(0,p.useMemo)((function(){var e;return(0,x.sK)(null===d||void 0===d||null===(e=d.properties)||void 0===e?void 0:e.map((function(e){return e._id})))}),[null===d||void 0===d?void 0:d.properties]);(0,p.useEffect)((function(){null!==I&&void 0!==I&&I.length&&k(I)}),[]);var B=(0,p.useMemo)((function(){var e,n,t,i=null===h||void 0===h?void 0:h._id,o=[],r=null!==(e=null===(n=u.propertiesKeysMap)||void 0===n?void 0:n[null!==i&&void 0!==i?i:"def"])&&void 0!==e?e:[],l=(0,ce.Z)(r);try{for(l.s();!(t=l.n()).done;){var a,d=t.value,c=null===(a=u.propertiesDataMap)||void 0===a?void 0:a[d];if(c&&(null===c||void 0===c||!c.isSelectable)){var s=u.propertiesKeysMap[null===c||void 0===c?void 0:c._id];null!==s&&void 0!==s&&s.length&&o.push(c)}}}catch(v){l.e(v)}finally{l.f()}return o}),[null===h||void 0===h?void 0:h._id,u.propertiesDataMap,u.propertiesKeysMap]),O=(0,p.useMemo)((function(){var e;return(null===(e=(0,x.sK)(I))||void 0===e?void 0:e.join(","))!==(0,x.sK)(S).join(",")}),[I,S]),A=(0,p.useCallback)((function(e){e.preventDefault();var n=null!==r&&void 0!==r?r:null===d||void 0===d?void 0:d._id;n?s.updateById({data:{data:{_id:n,data:{properties:S}}},onLoading:Z,onSuccess:function(e,n){ve.kl.success("Product updated"),t&&t()}}):console.debug("selectedIds",S),o&&o(S)}),[null===d||void 0===d?void 0:d._id,t,o,S,s,r]),D=(0,p.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";k((function(e){return e.includes(n)?e.filter((function(e){return e!==n})):[].concat((0,se.Z)(e),[n])}))}),[]),L=(0,p.useMemo)((function(){return null===B||void 0===B?void 0:B.map((function(e){return(0,M.jsx)(fe.Z,{item:e,selectedIds:S,onSelect:D},"prop_".concat(e._id))}))}),[B,S,D]);return(0,p.useEffect)((function(){null!==d&&void 0!==d&&d.properties&&k(null===d||void 0===d?void 0:d.properties.map((function(e){return e._id})))}),[null===d||void 0===d?void 0:d.properties]),(0,M.jsxs)(W.dF,(0,w.Z)((0,w.Z)({onSubmit:A},a),{},{children:[(0,M.jsx)(W.OX,{onBackPress:t,canSubmit:O,title:null!==(n=i||(null===h||void 0===h?void 0:h.label))&&void 0!==n?n:"",okButton:!0}),(0,M.jsx)(pe.c,{onSelect:m,selected:h}),(0,M.jsx)(me,{flex:1,overflow:"auto",children:L}),(0,M.jsx)(W.AT,{canSubmit:O,loading:C,submitButtonText:C?"Loading...":"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]}))},ge=function(e){var n=e.item,t=e.selectedIds,i=e.items,o=(0,p.useMemo)((function(){var e,o=null!==i&&void 0!==i&&i.length?i:null===(e=n.childrenList)||void 0===e?void 0:e.filter((function(e){return null===t||void 0===t?void 0:t.includes(e._id)}));return null===o||void 0===o?void 0:o.map((function(e,n){return(0,M.jsx)(oe.U.CategoryItem,{className:"PROP_VALUE",maxWidth:"130px",children:e.label},"prop-v-".concat(e._id))}))}),[n.childrenList,t,i]);return(0,M.jsxs)(C.ZP,{className:"PROPERTY",gap:8,alignItems:"flex-end",children:[(0,M.jsx)(C.ZP,{alignItems:"center",fxDirection:"row",fillWidth:!0,gap:8,children:(0,M.jsx)(oe.U.CellText,{$size:13,$weight:600,children:null===n||void 0===n?void 0:n.label})}),(0,M.jsx)(C.ZP,{fxDirection:"row",flexWrap:"wrap",fillWidth:!0,gap:6,children:o&&(null===o||void 0===o?void 0:o.length)>0?o:(0,M.jsx)(g.x,{$size:12,children:"---"})})]})},be=["propertiesList","valuesListMap"],Ce=t(1251),Ze=t(9069),we=function(e){var n=e.onSelect,t=e.withActions,i=(e.selected,e.types),o=(0,p.useState)(!1),r=(0,c.Z)(o,1)[0],l=(0,E.q$)(ie.cA.CONTRACTORS).directory,a=(0,p.useMemo)((function(){return l.filter((function(e){return i&&i.includes(e.type)}))}),[l,i]),d=(0,p.useMemo)((function(){return{tableData:a,tableTitles:Ze.PU,onRowClick:function(e){if(n){if(null!==e&&void 0!==e&&e.rowData)return void n((0,V.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e.rowId&&n({_id:null===e||void 0===e?void 0:e.rowId})}},actionsCreator:t?function(e){return[]}:void 0}}),[a,n,t]);return(0,M.jsx)(S.ZP,(0,w.Z)({hasSearch:!1,isLoading:r},d))},je=function(e){return e.CUSTOMER="CUSTOMER",e.SUPPLIER="SUPPLIER",e.EMPLOYEE="EMPLOYEE",e.CONTRACTOR="CONTRACTOR",e.SUB_CONTRACTOR="SUB_CONTRACTOR",e.COMMISSION_AGENT="COMMISSION_AGENT",e.CONSIGNOR="CONSIGNOR",e.TRANSPORTER="TRANSPORTER",e.DELIVER="DELIVER",e}({}),Pe=function(e){var n,t=e.onSelect,i=e.selected,o=(e.withActions,(0,y.xc)().warehouses),r=(0,I.un)(),l=(0,E.eO)().warehouses,a=(0,p.useCallback)((function(){o.getAll({onLoading:r.onLoading("warehouses"),data:{refresh:!0}})}),[r,o]);(0,p.useEffect)((function(){a()}),[]);var d=(0,p.useMemo)((function(){return{tableData:l,tableTitles:R.A7,onRowClick:function(e){if(t){if(null!==e&&void 0!==e&&e.rowData)return void t((0,x.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e.rowId&&t({_id:null===e||void 0===e?void 0:e.rowId})}},actionsCreator:function(e){return[{icon:"refresh",onClick:a}]}}}),[a,t,l]);return(0,M.jsx)(S.ZP,(0,w.Z)((0,w.Z)({hasSearch:!1},d),{},{isLoading:null===(n=r.isLoading)||void 0===n?void 0:n.warehouses,selectedRow:i}))},ye=function(e){return e.price="price",e.variation="variation",e.warehouse="warehouse",e.inventory="inventory",e.supplier="supplier",e}({}),Se=(0,x.H1)(ye);function ke(e){var n=new Map;return Se.forEach((function(t){var i=t.value;if(i){var o=i?null===e||void 0===e?void 0:e[i]:void 0;o&&n.set(i,(0,x.rE)(o))}})),(0,x.$i)(n.entries())}var _e=s.ZP.form(a||(a=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  flex: 1;\n\n  padding: 0 8px;\n\n  width: 480px;\n  max-width: 100%;\n\n  height: 100%;\n\n  background-color: ",";\n"])),(function(e){return e.theme.modalBackgroundColor})),Ie=(0,s.ZP)(C.ZP)(d||(d=(0,u.Z)(["\n  border-top: 1px solid ",";\n\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),Be=function(e){var n,t=e.onClose,i=(e.onSubmit,(0,H.J)()),o=null===(n=(0,_.Zx)())||void 0===n?void 0:n.offerId,r=(0,_.G2)({_id:o}),l=(0,y.xc)()[y.EJ.offers],a=(0,p.useState)(0),d=(0,c.Z)(a,2),u=d[0],s=d[1],v=(0,_.hN)({defaultValues:r?ke(r):void 0}),f=v.setValue,h=v.getValues,g=v.formValues,C=v.handleSubmit,w=(0,p.useCallback)((function(e){var n=Se[u].value;n&&f(n,e)}),[u,f]),j=(0,p.useMemo)((function(){var e;return e={},(0,m.Z)(e,ye.warehouse,(function(){return(0,M.jsx)(Pe,{withActions:!0,onSelect:w,selected:h("warehouse")})})),(0,m.Z)(e,ye.price,(function(){return console.log("getValues('price')",h("price")),(0,M.jsx)(L,{withActions:!0,onSelect:w,selected:h("price")})})),(0,m.Z)(e,ye.variation,(function(){return(0,M.jsx)(Z.Z,{withActions:!0,onSelect:w,selected:h("variation")})})),(0,m.Z)(e,ye.inventory,(function(){return(0,M.jsx)(U,{withActions:!0,onSelect:w,selected:h("inventory")})})),(0,m.Z)(e,ye.supplier,(function(){return(0,M.jsx)(we,{withActions:!0,types:[je.SUPPLIER],onSelect:w,selected:h("supplier")})})),e}),[h,w]),P=(0,p.useMemo)((function(){var e,n,t=null===Se||void 0===Se||null===(e=Se[u])||void 0===e?void 0:e.value,i=t&&null!==(n=j[t])&&void 0!==n?n:null;return i?(0,M.jsx)(i,{}):null}),[u,j]),S=(0,p.useMemo)((function(){var e,n=null===Se||void 0===Se||null===(e=Se[u])||void 0===e?void 0:e.value;return!!n&&function(e){var n="".concat(e,"._id"),t=te().get(g,n);return!!t&&t!==te().get(r,n)}(n)}),[u,g,r]);return(0,M.jsx)(I.f4,{value:i,children:(0,M.jsxs)(_e,{onSubmit:C((function(e){(null===r||void 0===r?void 0:r._id)&&l.setDefaults({data:{data:{_id:null===r||void 0===r?void 0:r._id,defaults:(0,x.vg)(e)}},onSuccess:function(e,n){console.log(e,n)},onLoading:i.onLoading("submiting")})})),children:[(0,M.jsx)(Ce.xB,{onBackPress:t,title:(0,Y.t)("Default values"),canSubmit:S}),(0,M.jsx)(b.Z,{options:Se,currentIndex:u,onChangeIndex:s}),(0,M.jsx)(Ie,{flex:1,fillWidth:!0,overflow:"hidden",children:P}),(0,M.jsx)(Ce.AT,{loading:i.hasLoading,canSubmit:S})]})})},Oe=t(3299);var Ae,De,Me,Le,Re,Te,Ee=t(4717),Ve=t(713),Ue=(0,s.ZP)(C._0)(Ae||(Ae=(0,u.Z)(["\n  flex: 1;\n\n  width: 100%;\n  max-width: 480px;\n\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.sideBarBackgroundColor})),Ne=function(e){var n=e.onClose,t=e.offer,i=(0,_.G2)(t),o=(0,y.xc)()[y.EJ.offers],r=(0,p.useState)((null===i||void 0===i?void 0:i.images)||[]),l=(0,c.Z)(r,2),a=l[0],d=l[1],u=(0,p.useState)(!1),v=(0,c.Z)(u,2),f=v[0],h=v[1],m=(0,s.Fg)();return(0,M.jsx)(Ue,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),i&&o.updateById({data:{data:(0,w.Z)((0,w.Z)({},(0,x.rE)(i)),{},{data:{images:a}})},onSuccess:function(){n&&n()},onLoading:h})},children:(0,M.jsx)(Ve.Z,{initialData:a,onClose:n,onlyPreviews:!1,onChangeState:d,contentContainerStyle:{flex:1,borderTop:"1px solid ".concat(m.sideBarBorderColor),borderBottom:"1px solid ".concat(m.sideBarBorderColor)},renderHeader:(0,M.jsx)(W.OX,{title:"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",onBackPress:n,okButton:!0,canSubmit:a.length>0}),FooterComponent:function(e){return(0,M.jsx)(W.AT,{onCreatePress:e.onAddNewImageSetPress,loading:f,canSubmit:a.length>0})}})})},He=t(4897),We=["className"],$e=["CellComponent"],Ge=function(e){return e.General="General",e.Properties="Properties",e.Defaults="Defaults",e.Images="Images",e.Futures="Futures",e.Cms="Cms",e}({}),Fe=(0,x.H1)(Ge),ze=(0,s.ZP)(C.ZP)(De||(De=(0,u.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(e){return e.theme.sideBarBackgroundColor})),Ke=(0,s.ZP)(C.ZP)(Me||(Me=(0,u.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),Je=(0,s.ZP)(C.ZP)(Le||(Le=(0,u.Z)([""]))),qe=(0,s.ZP)(X.ZP)(Re||(Re=(0,u.Z)(["\n  fill: ",";\n"])),(function(e){return e.theme.globals.colors.error})),Xe=(0,s.ZP)(X.ZP)(Te||(Te=(0,u.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),Ye=[{title:(0,Y.t)("Label"),getValue:function(e){return null===e||void 0===e?void 0:e.label},gridArea:"label",tab:Ge.General},{title:(0,Y.t)("status"),getValue:function(e){return null===e||void 0===e?void 0:e.approved},gridArea:"approved",tab:Ge.General},{title:(0,Y.t)("Type"),getValue:function(e){return null===e||void 0===e?void 0:e.type},gridArea:"type",tab:Ge.General},{title:(0,Y.t)("SKU"),getValue:function(e){return null===e||void 0===e?void 0:e.sku},gridArea:"sku",tab:Ge.General},{title:(0,Y.t)("Bar-code"),getValue:function(e){return null===e||void 0===e?void 0:e.barCode},gridArea:"barCode",tab:Ge.General},{title:(0,Y.t)("Categories"),CellComponent:function(e){var n=e.cell,t=e.overlayHandler,i=e.data,o=(0,E.q$)(ie.cA.CATEGORIES_PROD).directory,r=(0,p.useMemo)((function(){var e,n;return null!==(e=null===i||void 0===i||null===(n=i.categories)||void 0===n?void 0:n.map((function(e){return e._id})))&&void 0!==e?e:[]}),[null===i||void 0===i?void 0:i.categories]),l=(0,p.useMemo)((function(){return o.map((function(e,n){return(0,M.jsx)(ue,{selectedIds:r,item:e},"cat_".concat(e._id))}))}),[o,r]);return(0,M.jsxs)(oe.U.Cell,{style:{minHeight:"max-content"},children:[(0,M.jsx)(re.p,{title:null===n||void 0===n?void 0:n.title,openOverlayButtonTitle:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",onOpenOverlayPress:function(){t({RenderComponent:de})}}),(0,M.jsx)(C.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"flex-end",flexWrap:"wrap",gap:8,style:{height:"max-content",minHeight:26},children:l})]})},gridArea:"categories",tab:Ge.Properties},{title:(0,Y.t)("Properties"),CellComponent:function(e){var n,t=e.cell,i=e.overlayHandler,o=e.data,r=(0,E.i7)(),l=(0,_.G2)(o),a=(0,p.useMemo)((function(){var e,n,t={},i=new Set([]),o={},a=new Set([]),d=(0,ce.Z)(null!==(e=null===l||void 0===l?void 0:l.properties)&&void 0!==e?e:[]);try{for(d.s();!(n=d.n()).done;){var u,c=n.value,s=null===(u=c.parent)||void 0===u?void 0:u._id;if(s){var v,f,p=s?null===(v=r.propertiesDataMap)||void 0===v?void 0:v[s]:void 0;i.add(s),p&&(t[s]=p);var h=c._id;a.add(h);var m=h&&(null===(f=r.propertiesDataMap)||void 0===f?void 0:f[h])||c;o[s]||(o[s]=[]),o[s].push(m)}}}catch(x){d.e(x)}finally{d.f()}return{properties:i,values:a,propertiesList:Object.values(t),valuesListMap:o}}),[null===l||void 0===l?void 0:l.properties,r.propertiesDataMap]),d=a.propertiesList,u=a.valuesListMap,c=(0,q.Z)(a,be),s=(0,p.useMemo)((function(){return null===d||void 0===d?void 0:d.map((function(e,n){var t=u[e._id];return(0,M.jsx)(ge,{index:n,overlayHandler:i,item:e,items:t,data:o},"prop-".concat(null===e||void 0===e?void 0:e._id))}))}),[d,i,u,o]);return(0,M.jsxs)(oe.U.Cell,{padding:"4px 4px 8px",gap:8,className:"PROPERTIES_LIST_CELL",style:{minHeight:s&&(null===s||void 0===s?void 0:s.length)>0?"max-content":50},children:[(0,M.jsx)(re.p,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:xe,props:{offer:o}})}}),(0,M.jsx)(C.ZP,{fillWidth:!0,gap:8,alignItems:s&&(null===s||void 0===s?void 0:s.length)>0?"stretch":"flex-end",children:null!==(n=c.properties)&&void 0!==n&&n.size?s:(0,M.jsx)(oe.U.CellText,{$weight:500,children:(0,Y.t)("undefined")})})]})},gridArea:"properties",tab:Ge.Properties},{title:(0,Y.t)("Tags"),CellComponent:function(e){var n,t=e.cell,i=e.overlayHandler,o=e.data,r=(0,_.G2)(o),l=(0,p.useMemo)((function(){var e;return null===r||void 0===r||null===(e=r.tags)||void 0===e?void 0:e.map((function(e,n){return(0,M.jsx)(oe.U.CategoryItem,{className:"PROP_VALUE",maxWidth:"130px",children:e.label},"prop-v-".concat(e._id))}))}),[null===r||void 0===r?void 0:r.tags]);return(0,M.jsxs)(oe.U.Cell,{padding:"4px 4px 8px",gap:8,className:"TAGS_LIST_CELL",style:{minHeight:"max-content"},children:[(0,M.jsx)(re.p,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:xe,props:{offer:o}})}}),(0,M.jsx)(C.ZP,{fillWidth:!0,gap:8,alignItems:"stretch",children:null!==r&&void 0!==r&&null!==(n=r.tags)&&void 0!==n&&n.length?l:(0,M.jsx)(oe.U.CellText,{$weight:500,children:(0,Y.t)("undefined")})})]})},gridArea:"tagss",tab:Ge.Properties},{title:(0,Y.t)("Brand"),getValue:function(e){var n;return null===e||void 0===e||null===(n=e.brand)||void 0===n?void 0:n.label},gridArea:"brand",tab:Ge.General},{title:(0,Y.t)("Measurement"),gridArea:"measurement",getValue:function(e){try{var n=null!==e&&void 0!==e&&e.measurement?JSON.parse(null===e||void 0===e?void 0:e.measurement):{};return["".concat((0,Y.t)("unit"),": ").concat((null===n||void 0===n?void 0:n.unit)||0),"".concat((0,Y.t)("min"),": ").concat((null===n||void 0===n?void 0:n.min)||0),"".concat((0,Y.t)("max"),": ").concat((null===n||void 0===n?void 0:n.max)||0),"".concat((0,Y.t)("step"),": ").concat((null===n||void 0===n?void 0:n.step)||0)].join(" | ")}catch(t){return""}},tab:Ge.General},{title:(0,Y.t)("Description"),getValue:function(e){return null===e||void 0===e?void 0:e.description},gridArea:"description",tab:Ge.General},{title:(0,Y.t)("Negative sales"),getValue:function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&n.negativeSale?"Yes":"No"},gridArea:"reservation",tab:Ge.Futures},{title:(0,Y.t)("Reservation"),getValue:function(e){var n,t;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(t=n.reservation)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"reservation",tab:Ge.Futures},{title:(0,Y.t)("Custom production"),getValue:function(e){var n,t;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(t=n.customProduction)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"customProduction",tab:Ge.Futures},{title:(0,Y.t)("Custom order"),getValue:function(e){var n,t;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(t=n.customOrder)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"customOrder",tab:Ge.Futures},{title:(0,Y.t)("Pre-order"),getValue:function(e){var n,t;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(t=n.preOrder)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"preOrder",tab:Ge.Futures},{title:(0,Y.t)("Is promo"),getValue:function(e){var n;return null===e||void 0===e||null===(n=e.futures)||void 0===n?void 0:n.isPromo},gridArea:"isPromo",tab:Ge.Futures},{title:(0,Y.t)("Default values"),CellComponent:function(e){var n=e.data,t=e.cell,i=e.overlayHandler,o=(0,s.Fg)(),r=null===n||void 0===n?void 0:n.warehouse,l=null===n||void 0===n?void 0:n.supplier,a=null===n||void 0===n?void 0:n.price,d=(0,p.useMemo)((function(){var e,t=null===n||void 0===n?void 0:n.variation;return[{title:(0,Y.t)("Label"),value:null===t||void 0===t?void 0:t.label},{title:(0,Y.t)("Bar-code"),value:null===t||void 0===t?void 0:t.barCode},{title:(0,Y.t)("SKU"),value:null===t||void 0===t?void 0:t.sku},{title:(0,Y.t)("Props q-ty"),value:null===t||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.length}].map((function(e,n){var t;return(0,M.jsxs)(C.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{$size:14,children:"".concat(null===e||void 0===e?void 0:e.title,": ")}),(0,M.jsx)(g.x,{$size:14,$weight:600,$align:"right",children:null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:"---"})]},null===e||void 0===e?void 0:e.title)}))}),[null===n||void 0===n?void 0:n.variation]),u=(0,p.useMemo)((function(){return function(e){var n,t,i,o,r,l;return[{title:(0,Y.t)("Input"),amount:(0,Oe.pU)(null===e||void 0===e?void 0:e.in)},{title:(0,Y.t)("Output"),amount:(0,Oe.pU)(null===e||void 0===e?void 0:e.out)},{title:(0,Y.t)("Commission"),amount:(0,Oe.pU)(null===e||void 0===e||null===(n=e.commission)||void 0===n?void 0:n.amount),percentage:null!==e&&void 0!==e&&null!==(t=e.commission)&&void 0!==t&&t.percentage?(0,Oe.pU)(null===e||void 0===e||null===(i=e.commission)||void 0===i?void 0:i.percentage):void 0},{title:(0,Y.t)("Markup"),amount:(0,Oe.pU)(null===e||void 0===e||null===(o=e.markup)||void 0===o?void 0:o.amount),percentage:null!==e&&void 0!==e&&null!==(r=e.markup)&&void 0!==r&&r.percentage?(0,Oe.pU)(null===e||void 0===e||null===(l=e.markup)||void 0===l?void 0:l.percentage):void 0}]}(a).map((function(e,n){return(0,M.jsxs)(C.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{children:"".concat(null===e||void 0===e?void 0:e.title,": ")}),(0,M.jsxs)(g.x,{$weight:600,children:[null===e||void 0===e?void 0:e.amount,(null===e||void 0===e?void 0:e.percentage)&&" | ".concat(null===e||void 0===e?void 0:e.percentage,"%")]})]},null===e||void 0===e?void 0:e.title)}))}),[a]);return(0,M.jsxs)(oe.U.Cell,{style:{minHeight:"max-content"},children:[(0,M.jsx)(re.p,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:Be})}}),(0,M.jsxs)(C.ZP,{fillWidth:!0,children:[(0,M.jsx)(oe.U.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,Y.t)("warehouse")}),(0,M.jsx)(C.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",children:[{label:(0,Y.t)("Label"),value:null===r||void 0===r?void 0:r.label},{label:(0,Y.t)("Code"),value:null===r||void 0===r?void 0:r.code}].map((function(e){return(0,M.jsxs)(C.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{children:"".concat(e.label)}),(0,M.jsx)(g.x,{$weight:600,children:(null===e||void 0===e?void 0:e.value)||"---"})]},e.label)}))})]}),(0,M.jsxs)(C.ZP,{fillWidth:!0,children:[(0,M.jsx)(oe.U.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,Y.t)("supplier")}),[{label:(0,Y.t)("Label"),value:null===l||void 0===l?void 0:l.label},{label:(0,Y.t)("Code"),value:null===l||void 0===l?void 0:l.code}].map((function(e){return(0,M.jsxs)(C.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{children:"".concat(e.label)}),(0,M.jsx)(g.x,{$weight:600,children:(null===e||void 0===e?void 0:e.value)||"---"})]},e.label)}))]}),(0,M.jsxs)(C.ZP,{fillWidth:!0,gap:6,children:[(0,M.jsx)(oe.U.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,Y.t)("variation")}),(0,M.jsx)(C.ZP,{fillWidth:!0,children:d})]}),(0,M.jsxs)(C.ZP,{fillWidth:!0,gap:6,children:[(0,M.jsx)(oe.U.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,Y.t)("price")}),(0,M.jsx)(C.ZP,{fillWidth:!0,children:u})]})]})},gridArea:"defaults",tab:Ge.Defaults},{title:(0,Y.t)("Created by / Date / Time"),getValue:function(e){var n,t;return[{title:"Created by",value:null===e||void 0===e||null===(n=e.author)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.email},{title:"Created at",value:null!==e&&void 0!==e&&e.createdAt&&(0,ne.isString)(null===e||void 0===e?void 0:e.createdAt)?(0,x.M7)(Date.parse(null===e||void 0===e?void 0:e.createdAt)):""}].map((function(e){var n,t;return(0,M.jsxs)(C.ZP,{gap:4,fillWidth:!0,justifyContent:"space-between",fxDirection:"row",children:[(0,M.jsx)(g.x,{children:null!==(n=e.title)&&void 0!==n?n:(0,Y.t)("undefined")}),(0,M.jsx)(g.x,{children:null!==(t=e.value)&&void 0!==t?t:(0,Y.t)("undefined")})]},e.title)}))},gridArea:"created",tab:Ge.General},{title:(0,Y.t)("Updated by / Date / Time"),getValue:function(e){var n,t;return[{title:"Updated by",value:null===e||void 0===e||null===(n=e.editor)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.email},{title:"Updated at",value:null!==e&&void 0!==e&&e.updatedAt&&(0,ne.isString)(null===e||void 0===e?void 0:e.updatedAt)?(0,x.M7)(Date.parse(null===e||void 0===e?void 0:e.updatedAt)):""}].map((function(e){var n,t;return(0,M.jsxs)(C.ZP,{gap:4,fillWidth:!0,justifyContent:"space-between",fxDirection:"row",children:[(0,M.jsx)(g.x,{children:null!==(n=e.title)&&void 0!==n?n:(0,Y.t)("undefined")}),(0,M.jsx)(g.x,{children:null!==(t=e.value)&&void 0!==t?t:(0,Y.t)("undefined")})]},e.title)}))},gridArea:"updated",tab:Ge.General},{title:(0,Y.t)("Images"),CellComponent:function(e){var n=e.data,t=e.cell,i=e.overlayHandler,o=(0,p.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.images)||void 0===e?void 0:e.map((function(e,n){return(0,M.jsx)(oe.U.ImagesSetBox,{fxDirection:"row",gap:2,overflow:"auto",children:He.E_.map((function(n){return n.value&&(0,M.jsx)(Ee.Z,{src:e[n.value]||"",disabled:!0},"img_".concat(n.value))}))},"set_".concat((null===e||void 0===e?void 0:e._id)||n))}))}),[null===n||void 0===n?void 0:n.images]);return(0,M.jsxs)(oe.U.Cell,{style:{minHeight:"max-content",padding:"4px 0"},children:[(0,M.jsx)(re.p,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:Ne,props:{offer:n}})}}),(0,M.jsx)(C.ZP,{gap:2,height:"max-content",padding:"8px 0",style:{minHeight:26},children:o})]})},gridArea:"images",tab:Ge.Images}];var Qe,en,nn=function(e){var n,t=e.className,i=(0,q.Z)(e,We),o=(0,_.xj)(),r=(0,h.rh)().currentOffer,l=(0,Q.on)(),a=function(){var e={};return Ye.forEach((function(n){var t,i=n.tab;i&&(e[i]?null===(t=e[i])||void 0===t||t.push(n):e[i]=[n])})),e}(),d=(0,p.useState)(Ge.General),u=(0,c.Z)(d,2),s=u[0],v=u[1],f=(0,p.useMemo)((function(){var e;return a[s]?null===(e=a[s])||void 0===e?void 0:e.map((function(e){var n=e.CellComponent,t=(0,q.Z)(e,$e);return n?(0,M.jsx)(n,{overlayHandler:l.open,cell:t,data:r},t.title):(0,M.jsx)(ee.k,{overlayHandler:l.open,cell:t,data:r},t.title)})):null}),[a,s,l.open,r]);return(0,M.jsxs)(ze,{fillWidth:!0,flex:1,className:t,padding:"0 8px",children:[(0,M.jsx)(W.OX,{title:(0,Y.t)("Offer overview"),onBackPress:o.goBack}),(0,M.jsx)(b.Z,{optionProps:{fitContentH:!0},options:Fe,onOptSelect:function(e){o.replace({hash:null===e||void 0===e?void 0:e.value}),(null===e||void 0===e?void 0:e.value)&&v(null===e||void 0===e?void 0:e.value)}}),(0,M.jsx)(Ke,{fillWidth:!0,flex:1,overflow:"auto",children:f}),(0,M.jsxs)(Je,{fillWidth:!0,fxDirection:"row",gap:6,padding:"6px 0",children:[(0,M.jsx)(X.ZP,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==i&&void 0!==i&&i.onEdit),onClick:null===i||void 0===i?void 0:i.onEdit}),(0,M.jsx)(X.ZP,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:null!==i&&void 0!==i&&null!==(n=i.product)&&void 0!==n&&n.visible?"visibilityOn":"visibilityOff",disabled:!(null!==i&&void 0!==i&&i.onHide),onClick:null===i||void 0===i?void 0:i.onHide}),(0,M.jsx)(qe,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==i&&void 0!==i&&i.onDelete),onClick:null===i||void 0===i?void 0:i.onDelete}),(0,M.jsxs)(C.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,M.jsx)(X.ZP,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",disabled:!(null!==i&&void 0!==i&&i.onRefresh),onClick:null===i||void 0===i?void 0:i.onRefresh}),(0,M.jsx)(Xe,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==i&&void 0!==i&&i.onOpenRightSide),onClick:null===i||void 0===i?void 0:i.onOpenRightSide})]})]})]})},tn=t(3185),on=(0,s.ZP)(C.ZP)(Qe||(Qe=(0,u.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor})),rn=function(e){var n=e.toggleRightSideVisibility,t=(0,h.rh)(),i=ln(),o=(0,k.f9)(),r=(0,y.xc)().offers;return(0,M.jsxs)(on,{children:[(0,M.jsx)(nn,{product:null===t||void 0===t?void 0:t.currentOffer,onEdit:function(){t.currentOffer&&o.openModal({Modal:tn.n.EditOffer,props:{offer:null===t||void 0===t?void 0:t.currentOffer,title:(0,Y.t)("Edit offer")}})},onRefresh:function(){var e,n;null!==(e=t.currentOffer)&&void 0!==e&&e._id&&r.getOne({data:{params:{_id:null===(n=t.currentOffer)||void 0===n?void 0:n._id,getPrices:!1,getVariations:!1}},onLoading:i.onLoading("offer")})},onOpenRightSide:n}),(0,M.jsx)(J.j,{})]})},ln=function(){return(0,I.un)()},an=s.ZP.div(en||(en=(0,u.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),v.VU),dn=function(e){var n=e.path,t=(0,H.J)({offer:{content:(0,Y.t)("Loading product info")},prices:{content:"Loading prices"},variations:{content:"Loading variations"}}),i=(0,p.useState)(!1),o=(0,c.Z)(i,2),r=o[0],l=o[1],a=(0,p.useCallback)((function(){l((function(e){return!e}))}),[]);return(0,M.jsx)(I.f4,{value:t,children:(0,M.jsx)(h.ZP,{children:(0,M.jsx)(Q.ZP,{children:(0,M.jsx)(f.default,{path:n,children:(0,M.jsxs)(an,{children:[(0,M.jsx)(rn,{toggleRightSideVisibility:a}),(0,M.jsx)(K,{isVisible:r,toggleVisibility:a})]})})})})})}},3226:function(e,n,t){t.d(n,{rh:function(){return u}});var i=t(2791),o=t(1819),r=t(2989),l=t(8809),a=t(3329),d=(0,i.createContext)({}),u=function(){return(0,i.useContext)(d)};n.ZP=function(e){var n=e.children,t=(0,o.xc)()[o.EJ.offers],u=(0,l.useOfferOverviewLoaders)(),c=(0,r.Zx)(),s=null===c||void 0===c?void 0:c.offerId,v=(0,r.G2)({_id:s});(0,i.useEffect)((function(){var e;null!==u&&void 0!==u&&null!==(e=u.isLoading)&&void 0!==e&&e.offer||s&&t.getOne({data:{params:{_id:s,getVariations:!1,getPrices:!1}},onLoading:u.onLoading("offer")}).catch()}),[s]);return(0,i.useEffect)((function(){return function(){t.clearCurrent(void 0)}}),[]),(0,a.jsx)(d.Provider,{value:{clearCurrent:function(){t.clearCurrent(void 0)},currentOffer:v},children:n})}},8189:function(e,n,t){t.d(n,{Z:function(){return J}});var i,o,r,l=t(1413),a=t(7762),d=t(3226),u=t(3665),c=t(1819),s=t(8589),v=t(2791),f=t(401),p=t(168),h=t(4942),m=t(9439),x=t(4925),g=t(2360),b=t(8095),C=t(7348),Z=t(959),w=t(1383),j=t(3719),P=t(7121),y=t(6727),S=t(4695),k=t(2989),_=t(4990),I=t(6681),B=t(6522),O=t(4809),A=t(9541),D=t(7294),M=t(2825),L=t(9006),R=t(7578),T=t(763),E=t.n(T),V=t(6382),U=t(6492),N=t(3329),H=["onClose","title","onSubmit","updateId","create","offerId","offer"],W=y.Ry().shape({label:y.Z_().required().min(5).max(128),sku:y.Z_().required().min(8).max(32),barCode:y.Z_().max(32),cms:y.Ry().shape({labels:y.Ry().shape({ua:y.Z_().min(5).max(64),en:y.Z_().min(5).max(64)})}),propertiesMap:y.Ry().shape({}).nonNullable().required(),offer:y.Ry().shape({_id:y.Z_().required(),label:y.Z_(),labels:y.Ry().shape({ua:y.Z_().min(5).max(64),en:y.Z_().min(5).max(64)})}),timeFrom:y.hT(),timeTo:y.hT(),price:y.Ry().shape({out:y.Z_()})}),$=[{title:(0,B.t)("Offer label"),name:"label",required:!0,flex:"2 0 100%"},{title:(0,B.t)("SKU"),name:"sku",required:!0,flex:"1 1 40%"},{title:(0,B.t)("Bar-code"),name:"barCode",required:!1,flex:"1 1 40%"}],G=(0,g.ZP)(b._0)(i||(i=(0,p.Z)(["\n  flex: 1;\n  max-height: 100%;\n  height: 100vh;\n\n  width: 100%;\n  //padding: 0 12px;\n\n  overflow: hidden;\n\n  //max-width: 380px;\n  color: ",";\n  background-color: ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.tableBackgroundColor})),F=(0,g.ZP)(b.ZP)(o||(o=(0,p.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),z=(0,g.ZP)(b.ZP)(r||(r=(0,p.Z)(["\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor})),K=function(e){var n,t,i=e.onClose,o=e.title,r=(e.onSubmit,e.updateId),d=(e.create,e.offerId),u=e.offer,s=(0,x.Z)(e,H),f=(0,C.i7)(),p=(0,c.xc)()[c.EJ.offers],g=(0,A.J)(),y=(0,k.EV)({_id:r}),T=(0,k.G2)({_id:(null===y||void 0===y||null===(n=y.offer)||void 0===n?void 0:n._id)||d||(null===u||void 0===u?void 0:u._id)}),K=(0,j.d)(),J=(0,v.useState)(y.template),q=(0,m.Z)(J,2),X=q[0],Y=q[1],Q=(0,k.hN)({defaultValues:(0,Z.Ls)(y?(0,l.Z)((0,l.Z)({},y),{},{offer:T,template:X}):{offer:T,template:X},T),resolver:(0,S.X)(W),reValidateMode:"onSubmit"}),ee=Q.setValue,ne=Q.handleSubmit,te=Q.register,ie=Q.formState.errors,oe=Q.formValues,re=Q.reset,le=(0,v.useMemo)((function(){var e,n,t;if(null!==X&&void 0!==X&&null!==(e=X.childrenList)&&void 0!==e&&e.length)return null===X||void 0===X?void 0:X.childrenList.filter((function(e){var n;return e.isSelectable&&(null===e||void 0===e||null===(n=e.childrenList)||void 0===n?void 0:n.length)}));var i,o=null===X||void 0===X?void 0:X._id,r=[],l=null!==(n=null===(t=f.propertiesKeysMap)||void 0===t?void 0:t[null!==o&&void 0!==o?o:"def"])&&void 0!==n?n:[],d=(0,a.Z)(l);try{for(d.s();!(i=d.n()).done;){var u,c=i.value,s=null===(u=f.propertiesDataMap)||void 0===u?void 0:u[c];if(null!==s&&void 0!==s&&s.isSelectable){var v=f.propertiesKeysMap[null===s||void 0===s?void 0:s._id];null!==v&&void 0!==v&&v.length&&r.push(s)}}}catch(p){d.e(p)}finally{d.f()}return r}),[null===X||void 0===X?void 0:X._id,null===X||void 0===X?void 0:X.childrenList,f.propertiesDataMap,f.propertiesKeysMap]),ae=(0,v.useCallback)((function(e){if(!e)return"".concat(null===T||void 0===T?void 0:T.label,". {{VARIATION_LABEL}}");var n,t=e?(0,Z.sK)(Object.keys(e)):[],i=null!==T&&void 0!==T&&T.label?[null===T||void 0===T?void 0:T.label]:[],o=(0,a.Z)(t);try{for(o.s();!(n=o.n()).done;){var r=e[n.value];(null===r||void 0===r?void 0:r.label)&&i.push(null===r||void 0===r?void 0:r.label)}}catch(d){o.e(d)}finally{o.f()}var l=null!==i&&void 0!==i&&i.length?i.join(". "):(null===y||void 0===y?void 0:y.label)||"".concat(null===T||void 0===T?void 0:T.label,". {{VARIATION_LABEL}}");return ee("label",l),l}),[null===T||void 0===T?void 0:T.label,null===y||void 0===y?void 0:y.label,ee]),de=(0,v.useCallback)((function(e){r?p.updateVariationById({onSuccess:g.onSuccess("update",i),onLoading:g.onLoading("update"),onError:w.kl.toastAxiosError,data:{data:(0,Z.Ts)(e)}}):p.createVariation({onError:w.kl.toastAxiosError,onLoading:g.onLoading("create"),onSuccess:function(e){var n;K.state.close?i&&i():(K.state.clear&&re(),ee("sku",(null!==(n=null===T||void 0===T?void 0:T.sku)&&void 0!==n?n:"")+(0,V.x0)(12)))},data:{data:(0,Z.Ts)(e)}})}),[null===T||void 0===T?void 0:T.sku,g,i,re,p,ee,K.state.clear,K.state.close,r]),ue=(0,v.useCallback)((function(e,n){var t,i=null===(t=oe.propertiesMap)||void 0===t?void 0:t[e];if(i&&i._id===n){var o=E().omit(oe.propertiesMap,e);ee("propertiesMap",o),ae(o)}else{var r,a=null===(r=f.propertiesDataMap)||void 0===r?void 0:r[n];if(a){var d=(0,l.Z)((0,l.Z)({},oe.propertiesMap),{},(0,h.Z)({},e,a));ee("propertiesMap",d),ae(d)}}}),[ae,oe.propertiesMap,ee,f.propertiesDataMap]),ce=(0,v.useMemo)((function(){return null!==oe&&void 0!==oe&&oe.propertiesMap?Object.values(null===oe||void 0===oe?void 0:oe.propertiesMap).map((function(e){return e._id})):[]}),[oe]),se=(0,v.useMemo)((function(){var e,n,t=y.propValuesIdsSet?null===(e=(0,Z.sK)(y.propValuesIdsSet))||void 0===e?void 0:e.join("."):void 0,i=ce?null===(n=(0,Z.sK)(ce))||void 0===n?void 0:n.join("."):void 0;return!!i&&i!==t}),[y.propValuesIdsSet,ce]),ve=(0,v.useMemo)((function(){return null!==oe&&void 0!==oe&&oe.propertiesMap?Object.fromEntries(Object.entries(null===oe||void 0===oe?void 0:oe.propertiesMap).map((function(e){var n=(0,m.Z)(e,2),t=n[0],i=n[1];return[t,null===i||void 0===i?void 0:i._id]}))):{}}),[null===oe||void 0===oe?void 0:oe.propertiesMap]),fe=(0,v.useMemo)((function(){return null===le||void 0===le?void 0:le.map((function(e){var n=ve[e._id];return(0,N.jsx)(O.Z,{item:e,selectedIds:n?[n]:[],onSelect:ue},"prop_".concat(e._id))}))}),[le,ve,ue]);return(0,N.jsx)(D.Z,{fillHeight:!0,onBackPress:i,okButton:!1,title:o||"Create variation",children:(0,N.jsx)(R.f4,{value:g,children:(0,N.jsxs)(G,(0,l.Z)((0,l.Z)({onSubmit:ne(de,(function(e){console.error("[SUBMIT ERROR]",e)}))},s),{},{children:[(0,N.jsxs)(F,{flex:1,fillWidth:!0,overflow:"auto",children:[(0,N.jsx)(L.y,{label:"Offer",hideFooter:!0,isOpen:!1,children:(0,N.jsx)(b.ZP,{className:"Variation_Main_Offer_Info",flexWrap:"wrap",fxDirection:"row",alignItems:"flex-end",style:{columnGap:12},children:$.map((function(e){var n,t=e.name,i=e.title,o=e.flex;return(0,N.jsx)(_.Z,{className:t,flex:o,label:i,disabled:!0,children:(0,N.jsx)(b.ZP,{padding:"4px 8px",minHeight:"32px",children:(0,N.jsx)(U.x,{$weight:600,$size:14,children:null!==(n=null===T||void 0===T?void 0:T[t])&&void 0!==n?n:void 0})})},t)}))})}),(0,N.jsx)(L.y,{label:"Main info",expandable:!1,hideFooter:!0,children:(0,N.jsx)(b.ZP,{className:"Variation_Main_info",flexWrap:"wrap",fxDirection:"row",alignItems:"flex-end",style:{columnGap:12},children:$.map((function(e){var n=e.name,t=e.title,i=e.flex,o=e.required;return(0,N.jsx)(_.Z,{className:n,label:t,error:null===ie||void 0===ie?void 0:ie[n],required:o,flex:i,children:(0,N.jsx)(I.ZP,(0,l.Z)((0,l.Z)({},te(n,{required:o})),{},{placeholder:(0,B.t)("label")}))},n)}))})}),(0,N.jsxs)(L.y,{label:(0,B.t)("Properties"),expandable:!1,hideFooter:!0,children:[(0,N.jsx)(M.c,{onSelect:function(e){ee("template",e),Y(e)},selected:X}),(0,N.jsx)(b.ZP,{padding:"0 8px",children:fe})]})]}),(0,N.jsx)(P.AT,{loading:null===(t=g.isLoading)||void 0===t?void 0:t.create,onGoBackPress:i,submitButtonText:(0,B.t)("Accept"),canSubmit:se,extraFooter:(0,N.jsx)(z,{children:(0,N.jsx)(j.Z,(0,l.Z)({},K))})})]}))})})},J=function(e){var n,t=e.onSelect,i=e.selected,o=e.withActions,r=void 0===o||o,p=e.offer,h=(0,A.J)(),m=(0,d.rh)(),x=(0,k.G2)(p||(null===m||void 0===m?void 0:m.currentOffer)),g=(0,u.f9)(),b=(0,c.xc)()[c.EJ.offers],C=(0,v.useCallback)((function(e){var n=e.refresh,t=e.update;x&&b.getAllVariations({data:{},params:{offerId:x._id},update:t,refresh:n,onLoading:h.onLoading("variations")})}),[x,h,b]),Z=(0,v.useMemo)((function(){var e,n,t={},i=(0,a.Z)(null!==(e=null===x||void 0===x?void 0:x.variations)&&void 0!==e?e:[]);try{for(i.s();!(n=i.n()).done;){var o,r=n.value.properties,l=(0,a.Z)(null!==r&&void 0!==r?r:[]);try{for(l.s();!(o=l.n()).done;){var d,u=o.value,c=null===u||void 0===u||null===(d=u.parent)||void 0===d?void 0:d._id;c&&u.parent&&(t[c]=u.parent)}}catch(s){l.e(s)}finally{l.f()}}}catch(s){i.e(s)}finally{i.f()}return(0,f.F9)(Object.values(t))}),[null===x||void 0===x?void 0:x.variations]),w=(0,v.useMemo)((function(){return{onRowClick:function(e){t&&null!==e&&void 0!==e&&e.rowData&&t(null===e||void 0===e?void 0:e.rowData)},actionsCreator:r?function(e){var n,t=null===(n=e.selectedRow)||void 0===n?void 0:n._id;return[{icon:"refresh",type:"onlyIcon",onClick:function(){return C({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!t,onClick:function(){window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0430\u0440\u0456\u0430\u0446\u0456\u044e:\n ".concat(t))}},{icon:"copy",type:"onlyIcon",disabled:!t},{icon:"edit",type:"onlyIcon",disabled:!t,onClick:function(){t&&e.selectedRow&&g.create(K,{updateId:t})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){g.create(K,{offer:x})}}]}:void 0}}),[x,C,g,t,r]);return(0,v.useEffect)((function(){x&&C({refresh:!0})}),[]),(0,N.jsx)(s.ZP,(0,l.Z)((0,l.Z)({},w),{},{hasSearch:!1,hasFilter:!1,isLoading:null===h||void 0===h||null===(n=h.isLoading)||void 0===n?void 0:n.variations,selectedRow:i,tableData:null===x||void 0===x?void 0:x.variations,tableTitles:Z,transformData:f.m$}))}},8495:function(e,n,t){t.d(n,{SI:function(){return u},VU:function(){return d}});var i,o,r,l=t(168),a=t(2360),d=(0,a.iv)(i||(i=(0,l.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,a.iv)(o||(o=(0,l.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,a.iv)(r||(r=(0,l.Z)(["\n  outline: 1px solid tomato;\n"])))},7294:function(e,n,t){var i,o,r=t(168),l=t(1413),a=t(4925),d=t(2360),u=t(2791),c=t(7121),s=t(3329),v=["title","footer","children","extraFooter","extraHeader","isLoading","onClosePress","onBackPress","okButton","canSubmit"],f=function(e){var n=e.title,t=(e.footer,e.children),i=(e.extraFooter,e.extraHeader),o=(e.isLoading,e.onClosePress),r=e.onBackPress,d=e.okButton,u=e.canSubmit,f=(0,a.Z)(e,v);return(0,s.jsxs)(p,(0,l.Z)((0,l.Z)({className:"modal_base"},f),{},{children:[(0,s.jsx)(c.OX,{onBackPress:r,onClosePress:o,title:n,canSubmit:u,okButton:d,children:i}),(0,s.jsx)(h,{className:"main",children:t})]}))},p=d.ZP.div(i||(i=(0,r.Z)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: min-content 1fr max-content;\n\n  position: relative;\n  padding: 0 8px;\n\n  min-height: 200px;\n  max-height: 90vh;\n\n  color: ",";\n  width: ",";\n  height: ",";\n\n  min-width: 250px;\n  max-width: 100%;\n\n  //overflow: hidden;\n\n  box-shadow: ",";\n  fill: ",";\n  color: ",";\n  background-color: ",";\n\n  border-radius: 2px;\n  border-bottom: 1px solid ",";\n  /* resize: both; */\n\n  @media screen and (max-width: 480px) {\n    width: 98vw;\n  }\n\n  @media screen and (min-width: 480px) {\n    width: ",";\n  }\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){var n=e.width,t=void 0===n?"480px":n,i=e.fillWidth,o=e.fitContentH;return(i?"100vw":o&&"max-content")||t}),(function(e){var n=e.height,t=void 0===n?"":n,i=e.fillHeight,o=e.fitContentV;return(i?"90vh":o&&"max-content")||t}),(function(e){return e.theme.globals.shadowMain}),(function(e){return e.theme.fillColor}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.modalBackgroundColor}),(function(e){return e.theme.modalBorderColor}),(function(e){return e.fillWidth?"98vw":"450px"})),h=d.ZP.main(o||(o=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  overflow: auto;\n  position: relative;\n  height: 100%;\n  max-width: 100%;\n  max-height: 100%;\n  width: 100%;\n\n  background-color: ",";\n\n  ::-webkit-scrollbar {\n    width: 4px;\n    height: 4px;\n  }\n  //border-right: 1px solid ",";\n  //border-left: 1px solid ",";\n"])),(function(e){return e.theme.modalBackgroundColor}),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor}));n.Z=(0,u.memo)(f)},6753:function(e,n,t){t.d(n,{U:function(){return C}});var i,o,r,l,a,d,u,c=t(168),s=t(2360),v=t(8095),f=t(6492),p=s.ZP.button(i||(i=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n\n  border: 0;\n  background-color: transparent;\n\n  font-family: inherit;\n  font-weight: 600;\n  font-size: 13px;\n  padding: 6px 10px;\n  color: ",";\n\n  cursor: pointer;\n\n  &[disabled] {\n    pointer-events: none;\n    color: ",";\n  }\n"])),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.modalBorderColor})),h=(0,s.ZP)(v.ZP)(o||(o=(0,c.Z)(["\n  //min-height: 70px;\n  height: max-content;\n  min-height: max-content;\n\n  padding: 0 8px 8px;\n  gap: 4px;\n\n  //overflow: hidden;\n\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(e){return e.theme.sideBarBorderColor})),m=(0,s.ZP)(v.ZP)(r||(r=(0,c.Z)(["\n  justify-content: center;\n  align-items: center;\n\n  padding: 4px 8px;\n  min-height: 28px;\n  color: #fcfcfc;\n\n  background-color: ",";\n\n  //background-color: #f1f1f1;\n\n  border-radius: 4px;\n  border: 1px solid ",";\n"])),(function(e){return e.theme.fieldBackgroundColor}),(function(e){return e.theme.modalBorderColor})),x=(0,s.ZP)(f.x)(l||(l=(0,c.Z)(["\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 100%;\n\n  color: ",";\n"])),(function(e){return e.$isTitle||e.$disabled?e.theme.globals.inputPlaceholderColor:void 0})),g=(0,s.ZP)(v.ZP)(a||(a=(0,c.Z)(["\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n"]))),b=(0,s.ZP)(v.ZP)(d||(d=(0,c.Z)(["\n  justify-content: center;\n\n  border-radius: 2px;\n  padding: 4px 12px;\n  height: 28px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.fieldBackgroundColor})),C={CategoryItem:(0,s.ZP)(v.ZP)(u||(u=(0,c.Z)(["\n  align-items: center;\n  justify-content: center;\n\n  flex-direction: row;\n\n  padding: 4px 8px;\n\n  font-weight: 500;\n  font-size: 13px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  //background-color: ",";\n  border: 1px solid ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.field.backgroundColor}),(function(e){return e.theme.accentColor.base})),ImagesSetBox:g,CellText:x,Tag:m,HeaderButton:p,Cell:h,DefaultTag:b}},6493:function(e,n,t){t.d(n,{p:function(){return a}});var i=t(6522),o=t(8095),r=(t(2791),t(6753)),l=t(3329),a=function(e){var n=e.title,t=void 0===n?"Title":n,a=e.openOverlayButtonTitle,d=void 0===a?(0,i.t)("Change"):a,u=e.onOpenOverlayPress,c=e.editButtonText,s=void 0===c?(0,i.t)("Change"):c,v=e.onEditPress,f=e.acceptButtonText,p=void 0===f?(0,i.t)("Ok"):f,h=e.onAcceptPress,m=e.editMode,x=void 0!==m&&m,g=e.canAccept,b=void 0!==g&&g,C=e.cancelButtonText,Z=void 0===C?(0,i.t)("Cancel"):C,w=e.onCancelPress;return(0,l.jsxs)(o.ZP,{fxDirection:"row",justifyContent:"space-between",height:"max-content",alignItems:"center",minHeight:"36px",padding:"4px 0",children:[(0,l.jsx)(r.U.CellText,{$isTitle:!0,$size:13,style:{marginRight:"auto"},children:t}),u&&(0,l.jsx)(r.U.HeaderButton,{type:"button",onClick:u,children:d}),!x&&v&&(0,l.jsx)(r.U.HeaderButton,{type:"button",onClick:v,children:s}),x&&w&&(0,l.jsx)(r.U.HeaderButton,{type:"button",onClick:w,children:Z}),x&&h&&(0,l.jsx)(r.U.HeaderButton,{type:"button",disabled:!b,onClick:h,children:p})]})}},5227:function(e,n,t){t.d(n,{k:function(){return d}});var i=t(8095),o=t(6522),r=t(2791),l=t(6753),a=t(3329),d=function(e){var n=e.cell,t=e.data,d=(0,r.useMemo)((function(){return n.getValue?n.getValue(t):null}),[n,t]);return(0,a.jsxs)(l.U.Cell,{children:[(0,a.jsx)(l.U.CellText,{$isTitle:!0,$size:13,$padding:"6px 8px",children:null===n||void 0===n?void 0:n.title}),(0,a.jsx)(i.ZP,{fillWidth:!0,flex:1,fxDirection:"column",gap:8,justifyContent:"flex-end",alignItems:"flex-end",overflow:"hidden",style:{minHeight:32},children:!d||["string","number"].includes(typeof d)?(0,a.jsx)(l.U.CellText,{$isTitle:!d,$weight:500,children:d||(0,o.t)("undefined")}):d})]})}},758:function(e,n,t){t.d(n,{A7:function(){return r},QX:function(){return l},fK:function(){return d}});var i=t(6522),o=t(959),r=[{top:{name:(0,i.t)("label"),getData:function(e){return e.label}},bottom:{name:(0,i.t)("code"),getData:function(e){return e.code}},width:"220px",action:"valueByPath"},{top:{name:(0,i.t)("type"),getData:function(e){return null===e||void 0===e?void 0:e.type}},width:"125px",action:"valueByPath"},{top:{name:(0,i.t)("email"),path:"email"},bottom:{name:(0,i.t)("phone"),path:"phone"},width:"180px",action:"contacts"},{top:{name:(0,i.t)("Address"),getData:function(e){return e.address||"\u043d\u0435 \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"}},bottom:{name:"".concat((0,i.t)("longitude"),"/").concat((0,i.t)("latitude")),getData:function(e){var n,t;return"".concat(((null===(n=e.location)||void 0===n?void 0:n.longitude)||"---")+", "+((null===(t=e.location)||void 0===t?void 0:t.latitude)||"---"))}},width:"175px",action:"valueByPath"},{top:{name:(0,i.t)("Manager"),getData:function(e){var n,t;return"".concat((null===(n=e.manager)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.name)||"---")}},bottom:{name:(0,i.t)("email"),getData:function(e){var n,t;return"".concat((null===(n=e.manager)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.email)||"---")}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,i.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}],l=[{top:{name:(0,i.t)("variationLabel"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.label}},getImgPreview:function(e){var n,t,i;return null!==(n=e.offer)&&void 0!==n&&n.images?null===(t=e.offer)||void 0===t||null===(i=t.images[0])||void 0===i?void 0:i.img_preview:""},width:"270px",action:"doubleDataWithAvatar"},{top:{name:(0,i.t)("sku"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.sku}},bottom:{name:(0,i.t)("barCode"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,i.t)("type"),path:"type"},bottom:{name:(0,i.t)("status"),path:"status"},width:"120px",action:"status"},{top:{name:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c",align:"end",getData:function(e){return e.stock||0}},bottom:{name:"\u0420\u0435\u0437\u0435\u0440\u0432",align:"end",getData:function(e){return e.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f",align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.awaiting)||0}},bottom:{name:"\u0412\u0442\u0440\u0430\u0447\u0435\u043d\u043e",align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("warehouse"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,i.t)("code"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",path:"description"},width:"190px",action:"valueByPath"},{top:{name:"\u0410\u0432\u0442\u043e\u0440",path:"author.name"},bottom:{name:"\u0415\u043c\u0435\u0439\u043b",path:"author.email"},width:"190px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}],a=[{top:{name:(0,i.t)("Price OUT"),align:"end",getData:function(e){var n;return(0,o.__)(Number((null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.in)||0))}},bottom:{name:(0,i.t)("Price IN"),align:"end",getData:function(e){var n;return(0,o.__)(Number((null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.out)||0))}},width:"170px",action:"valueByPath"},{top:{name:(0,i.t)("comment"),align:"start",path:"description"},width:"150px",action:"valueByPath"}],d=[{top:{name:(0,i.t)("batch")},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("warehouse"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,i.t)("code"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:(0,i.t)("Stock"),align:"end",getData:function(e){return e.stock||0}},bottom:{name:(0,i.t)("Reserved"),align:"end",getData:function(e){return e.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("Awaiting"),align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.awaiting)||0}},bottom:{name:(0,i.t)("Lost"),align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,i.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}].concat(a)}}]);
//# sourceMappingURL=226.7065fe15.chunk.js.map