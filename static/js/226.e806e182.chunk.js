"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[226],{2483:function(e,n,o){o.d(n,{j:function(){return f}});var i,t,r=o(168),l=o(1413),a=o(4781),d=o(2791),u=o(2360),c=o(8095),s=o(3329),v=(0,d.createContext)({}),f=function(e){var n=(0,a.on)(),o=(0,d.useCallback)((function(e){return function(o){o.target===o.currentTarget&&n.remove(e)}}),[n]),i=(0,d.useMemo)((function(){return n.getStack().map((function(e,i){var t=e.RenderComponent,r=e.props,a=e.id;return(0,s.jsx)(h,{className:"overlay-".concat(a),style:{zIndex:20+i},fillHeight:!0,fillWidth:!0,alignItems:"flex-end",onClick:o(a),children:(0,s.jsx)(v.Provider,{value:{onClose:function(){n.remove(a)},compId:a,index:i},children:(0,s.jsx)(t,(0,l.Z)((0,l.Z)({},r),{},{onClose:function(){n.remove(a)},compId:a,index:i}),"overlay-".concat(a))})},"overlay-".concat(a))}))}),[o,n]);return(0,s.jsx)(p,{fillWidth:!0,fillHeight:!0,isActive:i.length>0,overflow:"hidden",children:i})},p=(0,u.ZP)(c.ZP)(i||(i=(0,r.Z)(["\n  position: absolute;\n\n  top: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 200;\n\n  left: ",";\n\n  opacity: ",";\n  visibility: ",";\n  pointer-events: ",";\n\n  background-color: ",";\n\n  transition: all ",";\n"])),(function(e){return e.isActive?0:"100%"}),(function(e){return e.isActive?1:0}),(function(e){return e.isActive?"visible":"hidden"}),(function(e){return e.isActive?"all":"none"}),(function(e){return e.theme.backdropColorDark}),(function(e){return e.theme.globals.timingFunctionMain})),h=(0,u.ZP)(c.ZP)(t||(t=(0,r.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 20;\n\n  max-width: 360px;\n\n  height: 100%;\n\n  animation: TransformFromRight;\n\n  @media screen and (max-width: 768px) {\n    max-width: 400px;\n  }\n"])))},4781:function(e,n,o){o.d(n,{on:function(){return c}});var i=o(1413),t=o(3433),r=o(9439),l=o(2791),a=o(6382),d=o(3329),u=(0,l.createContext)({}),c=function(){return(0,l.useContext)(u)};n.ZP=function(e){var n=e.children,o=(0,l.useState)([]),c=(0,r.Z)(o,2),s=c[0],v=c[1],f=(0,l.useCallback)((function(e){v((function(n){return n.filter((function(n){return n.id!==e}))}))}),[]),p=(0,l.useCallback)((function(){v([])}),[]),h=(0,l.useCallback)((function(e){var n="".concat(e.RenderComponent.name,"_").concat((0,a.x0)(8));return"function"===typeof e.RenderComponent&&v((function(o){var r=o.find((function(n){return n.id.includes(e.RenderComponent.name)}));if(r){var l=o.filter((function(e){var n,o;return(null===(n=e.RenderComponent)||void 0===n?void 0:n.name)!==(null===(o=r.RenderComponent)||void 0===o?void 0:o.name)}));return[].concat((0,t.Z)(l),[(0,i.Z)((0,i.Z)({},e),{},{id:n})])}return[].concat((0,t.Z)(o),[(0,i.Z)((0,i.Z)({},e),{},{id:n})])})),{onClose:function(){return f(n)},compId:n}}),[f]),m={getStack:function(){return s},remove:f,clearStack:p,open:h,create:function(e,n){return h({RenderComponent:e,props:n})}};return(0,d.jsx)(u.Provider,{value:m,children:n})}},9663:function(e,n,o){o.r(n),o.d(n,{default:function(){return ln},useOfferOverviewLoaders:function(){return tn}});var i,t,r,l,a,d,u=o(168),c=o(9439),s=o(2360),v=o(8495),f=o(6931),p=o(2791),h=o(3226),m=o(4942),x=o(8553),g=o(6492),b=o(9953),Z=o(8095),C=o(8189),w=o(1413),j=o(4165),P=o(5861),y=o(1819),S=o(8589),k=o(3665),_=o(2989),B=o(7578),I=o(8767),A=o(6981),D=o(4293),O=o(9978),M=o(3329),L=function(e){var n,o=e.onSelect,i=e.selected,t=e.withActions,r=void 0===t||t,l=(0,k.f9)(),a=(0,y.xc)()[y.EJ.offers],d=(0,_.Zx)().offerId,u=(0,_.G2)({_id:d}),s=(0,p.useState)(),v=(0,c.Z)(s,2),f=v[0],h=v[1],m=(0,B.un)(),x=(0,D.TL)(),g=(0,p.useCallback)(function(){var e=(0,P.Z)((0,j.Z)().mark((function e(n){var o,i;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.refresh,i=n.update,u){e.next=3;break}return e.abrupt("return");case 3:a.getAllPrices({data:{params:{offerId:null===u||void 0===u?void 0:u._id},refreshCurrent:o,updateCurrent:i},onLoading:null===m||void 0===m?void 0:m.onLoading("prices")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[u,m,a]),b=(0,p.useMemo)((function(){return{onRowClick:function(e){var n;(h(null===e||void 0===e?void 0:e.rowData),o)&&o({_id:(null===e||void 0===e?void 0:e.rowId)||(null===e||void 0===e||null===(n=e.rowData)||void 0===n?void 0:n._id)||""})},actionsCreator:r?function(e){var n,o=(null===(n=e.selectedRow)||void 0===n?void 0:n._id)||(null===f||void 0===f?void 0:f._id);return[{icon:"refresh",type:"onlyIcon",onClick:function(){return g({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!0},{icon:"copy",type:"onlyIcon",disabled:!0},{icon:"edit",type:"onlyIcon",disabled:!o,onClick:function(){x((0,O.SN)({data:{params:{_id:o}},onLoading:m.onLoading("price",void 0,{content:"Refreshing price info..."}),onSuccess:function(){l.open({ModalChildren:I.Z,modalChildrenProps:{offer:u,updateId:o}})}}))}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){l.open({ModalChildren:I.Z,modalChildrenProps:{offer:u}})}}]}:void 0}}),[r,o,null===f||void 0===f?void 0:f._id,g,x,m,l,u]);return(0,p.useEffect)((function(){g({refresh:!0})}),[]),(0,M.jsx)(S.ZP,(0,w.Z)((0,w.Z)({},b),{},{hasSearch:!1,hasFilter:!1,isLoading:null===m||void 0===m||null===(n=m.isLoading)||void 0===n?void 0:n.prices,selectedRow:i,tableData:null===u||void 0===u?void 0:u.prices,tableTitles:A.po}))},R=o(758),T=o(3664),E=o(7348),V=o(5761),U=function(e){var n=e.onSelect,o=e.selected,i=e.withActions,t=(0,E.i7)().currentOffer,r=(0,k.f9)(),l=(0,y.xc)()[y.EJ.offers],a=(0,p.useState)(!1),d=(0,c.Z)(a,2),u=d[0],s=d[1],v=(0,p.useCallback)((function(e){var n=e.refresh;e.update;if(t){var o=(0,V.rE)(t);l.getAllInventories({data:{refreshCurrent:n,params:{offer:o}},onLoading:s})}}),[t,l]),f=(0,p.useMemo)((function(){return{tableData:null===t||void 0===t?void 0:t.inventories,tableTitles:R.QX,onRowClick:function(e){if(n){if(null!==e&&void 0!==e&&e.rowData)return void n((0,V.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e.rowId&&n({_id:null===e||void 0===e?void 0:e.rowId})}},actionsCreator:i?function(e){return[{icon:"refresh",type:"onlyIcon",onClick:function(){return v({refresh:!0})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){r.open({ModalChildren:T.Z.CreateWarehouseDocument,modalChildrenProps:{}})}}]}:void 0}}),[null===t||void 0===t?void 0:t.inventories,v,r,n,i]);return(0,p.useEffect)((function(){v({refresh:!0})}),[]),(0,M.jsx)(S.ZP,(0,w.Z)((0,w.Z)({},f),{},{hasSearch:!1,hasFilter:!1,isLoading:u,selectedRow:o}))},N=o(1251),H=function(e){return(0,M.jsx)(Z.ZP,{padding:"16px",children:(0,M.jsx)(g.x,{$size:16,$weight:600,children:"In work"})})},W=o(9541),$=function(e){return e.Prices="Prices",e.Variations="Variations",e.Warehousing="Warehousing",e.Sales="Sales",e}($||{}),F=(0,x.H1)($),G=(0,s.ZP)(Z.ZP)(i||(i=(0,u.Z)(["\n  overflow: auto;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);\n  }\n"])),(function(e){return e.theme.globals.timingFunctionMain}),(function(e){return e.theme.backgroundColorLight}),(function(e){return e.isVisible?0:100})),z=(0,s.ZP)(Z.ZP)(t||(t=(0,u.Z)(["\n  border-top: 1px solid ",";\n  //border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),J=function(e){var n,o,i=e.isVisible,t=e.toggleVisibility,r=(0,h.rh)(),l=(0,W.J)(),a=(0,p.useState)(F[0].value),d=(0,c.Z)(a,2),u=d[0],s=d[1],v=(0,p.useMemo)((function(){var e,n;if(!r.currentOffer)return null;var o=(e={},(0,m.Z)(e,$.Variations,(0,M.jsx)(C.Z,{withActions:!0})),(0,m.Z)(e,$.Warehousing,(0,M.jsx)(U,{withActions:!0})),(0,m.Z)(e,$.Prices,(0,M.jsx)(L,{withActions:!0})),(0,m.Z)(e,$.Sales,(0,M.jsx)(H,{withActions:!0})),e);return null!==(n=null===o||void 0===o?void 0:o[u])&&void 0!==n?n:null}),[u,r.currentOffer]);return(0,M.jsx)(B.f4,{value:l,children:(0,M.jsxs)(G,{overflow:"hidden",fillHeight:!0,isVisible:i,children:[i&&(0,M.jsx)(N.xB,{onBackPress:t,renderTitle:(0,M.jsxs)(Z.ZP,{padding:"0 8px",fxDirection:"row",alignItems:"center",justifyContent:"center",gap:8,children:[(0,M.jsx)(g.x,{$weight:600,$size:14,children:null===r||void 0===r||null===(n=r.currentOffer)||void 0===n?void 0:n.label}),(0,M.jsx)(g.x,{$size:14,children:null===r||void 0===r||null===(o=r.currentOffer)||void 0===o?void 0:o.sku})]})}),(0,M.jsxs)(z,{overflow:"hidden",fillWidth:!0,flex:1,children:[(0,M.jsx)(b.Z,{options:F,onOptSelect:function(e,n,o){s(n)},preventDefault:!0}),v]})]})})},q=o(2483),K=o(4925),Y=o(2928),X=o(6522),Q=o(7121),ee=o(4781),ne=o(5227),oe=o(959),ie=o(763),te=o(870),re=o(6753),le=o(6493),ae=o(9184),de=(0,s.ZP)(Z.ZP)(r||(r=(0,u.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),ue=function(e){var n,o,i,t=e.onClose,r=(0,y.xc)()[y.EJ.offers],l=(0,_.G2)(),a=(0,E.q$)(te.cA.CATEGORIES_PROD).directory,d=(0,W.J)({update:{content:"Loadings..."}}),u=(0,oe.sK)(null===l||void 0===l||null===(n=l.categories)||void 0===n?void 0:n.map((function(e){return e._id}))),s=(0,p.useState)(u),v=(0,c.Z)(s,2),f=v[0],h=v[1],m=(0,p.useMemo)((function(){return(null===u||void 0===u?void 0:u.join(","))!==(0,oe.sK)(f).join(",")}),[u,f]);return(0,p.useEffect)((function(){null!==l&&void 0!==l&&l.categories&&h(null===l||void 0===l?void 0:l.categories.map((function(e){return e._id})))}),[]),(0,M.jsxs)(Q.dF,{onSubmit:function(e){e.preventDefault(),l&&r.updateById({onLoading:d.onLoading("update"),data:(0,w.Z)((0,w.Z)({},(0,oe.rE)(l)),{},{data:{categories:f},refreshCurrent:!0}),onSuccess:function(e,n){t&&t()}})},children:[(0,M.jsx)(Q.iw,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457",onBackPress:t,canSubmit:m,okButton:!0,isLoading:null===(o=d.isLoading)||void 0===o?void 0:o.update}),(0,M.jsx)(de,{padding:"0 0 8px 0",flex:1,overflow:"auto",children:(0,M.jsx)(ae.Z,{onChangeIds:h,options:a,defaultData:f,offer:l})}),(0,M.jsx)(Q.AT,{canSubmit:m,loading:null===(i=d.isLoading)||void 0===i?void 0:i.update})]})},ce=function e(n){var o,i,t=n.item,r=n.lvl,l=void 0===r?0:r,a=n.selectedIds,d=(0,p.useMemo)((function(){var n;return null===t||void 0===t||null===(n=t.childrenList)||void 0===n?void 0:n.map((function(n,o){return(0,M.jsx)(e,{item:n,index:o,lvl:l+1,selectedIds:a},"item_lvl_".concat(l,"_").concat(n._id))}))}),[null===t||void 0===t?void 0:t.childrenList,l,a]),u=(0,p.useMemo)((function(){return a.includes(t._id)}),[t._id,a]);return(0,M.jsxs)(M.Fragment,{children:[u&&(0,M.jsxs)(re.U.CategoryItem,{fxDirection:"row",alignItems:"center",padding:"0 2px 0 12px",gap:2,children:[(null===t||void 0===t||null===(o=t.parent)||void 0===o?void 0:o.label)&&"".concat(null===t||void 0===t||null===(i=t.parent)||void 0===i?void 0:i.label,"/"),"".concat(null===t||void 0===t?void 0:t.label)]}),d]})},se=o(3433),ve=o(7762),fe=o(1383),pe=o(4809),he=o(2825),me=["onClose","title","defaultState","onSubmit","updateId","offer","template","onSelect","onChange"],xe=(0,s.ZP)(Z.ZP)(l||(l=(0,u.Z)(["\n  padding-bottom: 8px;\n"]))),ge=function(e){var n,o=e.onClose,i=e.title,t=(e.defaultState,e.onSubmit),r=e.updateId,l=e.offer,a=(e.template,e.onSelect,e.onChange,(0,K.Z)(e,me)),d=(0,_.G2)(l),u=(0,E.i7)(),s=(0,y.xc)()[y.EJ.offers],v=(0,p.useState)(),f=(0,c.Z)(v,2),h=f[0],m=f[1],x=(0,p.useState)(!1),g=(0,c.Z)(x,2),b=g[0],Z=g[1],C=(0,p.useState)([]),j=(0,c.Z)(C,2),P=j[0],S=j[1],k=(0,p.useMemo)((function(){var e;return(0,oe.sK)(null===d||void 0===d||null===(e=d.properties)||void 0===e?void 0:e.map((function(e){return e._id})))}),[null===d||void 0===d?void 0:d.properties]);(0,p.useEffect)((function(){null!==k&&void 0!==k&&k.length&&S(k)}),[]);var B=(0,p.useMemo)((function(){var e,n,o,i=null===h||void 0===h?void 0:h._id,t=[],r=null!==(e=null===(n=u.propertiesKeysMap)||void 0===n?void 0:n[null!==i&&void 0!==i?i:"def"])&&void 0!==e?e:[],l=(0,ve.Z)(r);try{for(l.s();!(o=l.n()).done;){var a,d=o.value,c=null===(a=u.propertiesDataMap)||void 0===a?void 0:a[d];if(c&&(null===c||void 0===c||!c.isSelectable)){var s=u.propertiesKeysMap[null===c||void 0===c?void 0:c._id];null!==s&&void 0!==s&&s.length&&t.push(c)}}}catch(v){l.e(v)}finally{l.f()}return t}),[null===h||void 0===h?void 0:h._id,u.propertiesDataMap,u.propertiesKeysMap]),I=(0,p.useMemo)((function(){var e;return(null===(e=(0,oe.sK)(k))||void 0===e?void 0:e.join(","))!==(0,oe.sK)(P).join(",")}),[k,P]),A=(0,p.useCallback)((function(e){e.preventDefault();var n=null!==r&&void 0!==r?r:null===d||void 0===d?void 0:d._id;n?s.updateById({data:{_id:n,data:{properties:P}},onLoading:Z,onSuccess:function(e,n){fe.kl.success("Product updated"),o&&o()}}):console.debug("selectedIds",P),t&&t(P)}),[null===d||void 0===d?void 0:d._id,o,t,P,s,r]),D=(0,p.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";S((function(e){return e.includes(n)?e.filter((function(e){return e!==n})):[].concat((0,se.Z)(e),[n])}))}),[]),O=(0,p.useMemo)((function(){return null===B||void 0===B?void 0:B.map((function(e){return(0,M.jsx)(pe.Z,{item:e,selectedIds:P,onSelect:D},"prop_".concat(e._id))}))}),[B,P,D]);return(0,p.useEffect)((function(){null!==d&&void 0!==d&&d.properties&&S(null===d||void 0===d?void 0:d.properties.map((function(e){return e._id})))}),[null===d||void 0===d?void 0:d.properties]),(0,M.jsxs)(Q.dF,(0,w.Z)((0,w.Z)({onSubmit:A},a),{},{children:[(0,M.jsx)(Q.iw,{onBackPress:o,canSubmit:I,title:null!==(n=i||(null===h||void 0===h?void 0:h.label))&&void 0!==n?n:"",okButton:!0}),(0,M.jsx)(he.c,{onSelect:m,selected:h}),(0,M.jsx)(xe,{flex:1,overflow:"auto",children:O}),(0,M.jsx)(Q.AT,{canSubmit:I,loading:b,submitButtonText:b?"Loading...":"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]}))},be=function(e){var n=e.item,o=e.selectedIds,i=e.selectedItems,t=(0,p.useMemo)((function(){var e,t=null!==i&&void 0!==i&&i.length?i:null===(e=n.childrenList)||void 0===e?void 0:e.filter((function(e){return null===o||void 0===o?void 0:o.includes(e._id)}));return null===t||void 0===t?void 0:t.map((function(e,n){return(0,M.jsx)(re.U.CategoryItem,{className:"PROP_VALUE",maxWidth:"130px",children:e.label},"prop-v-".concat(e._id))}))}),[n.childrenList,o,i]);return(0,M.jsxs)(Z.ZP,{className:"PROPERTY",gap:8,alignItems:"flex-end",children:[(0,M.jsx)(Z.ZP,{alignItems:"center",fxDirection:"row",fillWidth:!0,gap:8,children:(0,M.jsx)(re.U.CellText,{$size:13,$weight:600,children:null===n||void 0===n?void 0:n.label})}),(0,M.jsx)(Z.ZP,{fxDirection:"row",flexWrap:"wrap",fillWidth:!0,gap:6,children:t&&(null===t||void 0===t?void 0:t.length)>0?t:(0,M.jsx)(g.x,{$size:12,children:"---"})})]})},Ze=o(9069),Ce=function(e){var n=e.onSelect,o=e.withActions,i=(e.selected,e.types),t=(0,p.useState)(!1),r=(0,c.Z)(t,1)[0],l=(0,E.q$)(te.cA.CONTRACTORS).directory,a=(0,p.useMemo)((function(){return l.filter((function(e){return i&&i.includes(e.type)}))}),[l,i]),d=(0,p.useMemo)((function(){return{tableData:a,tableTitles:Ze.PU,onRowClick:function(e){if(n){if(null!==e&&void 0!==e&&e.rowData)return void n((0,V.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e.rowId&&n({_id:null===e||void 0===e?void 0:e.rowId})}},actionsCreator:o?function(e){return[]}:void 0}}),[a,n,o]);return(0,M.jsx)(S.ZP,(0,w.Z)({hasSearch:!1,isLoading:r},d))},we=function(e){return e.CUSTOMER="CUSTOMER",e.SUPPLIER="SUPPLIER",e.EMPLOYEE="EMPLOYEE",e.CONTRACTOR="CONTRACTOR",e.SUB_CONTRACTOR="SUB_CONTRACTOR",e.COMMISSION_AGENT="COMMISSION_AGENT",e.CONSIGNOR="CONSIGNOR",e.TRANSPORTER="TRANSPORTER",e.DELIVER="DELIVER",e}({}),je=function(e){var n,o=e.onSelect,i=e.selected,t=(e.withActions,(0,y.xc)().warehouses),r=(0,B.un)(),l=(0,E.eO)().warehouses,a=(0,p.useCallback)((function(){t.getAll({onLoading:r.onLoading("warehouses"),data:{refresh:!0}})}),[r,t]);(0,p.useEffect)((function(){a()}),[]);var d=(0,p.useMemo)((function(){return{tableData:l,tableTitles:R.A7,onRowClick:function(e){if(o){if(null!==e&&void 0!==e&&e.rowData)return void o((0,oe.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e.rowId&&o({_id:null===e||void 0===e?void 0:e.rowId})}},actionsCreator:function(e){return[{icon:"refresh",onClick:a}]}}}),[a,o,l]);return(0,M.jsx)(S.ZP,(0,w.Z)((0,w.Z)({hasSearch:!1},d),{},{isLoading:null===(n=r.isLoading)||void 0===n?void 0:n.warehouses,selectedRow:i}))},Pe=function(e){return e.price="price",e.variation="variation",e.warehouse="warehouse",e.inventory="inventory",e.supplier="supplier",e}({}),ye=(0,oe.H1)(Pe),Se=s.ZP.form(a||(a=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  flex: 1;\n\n  padding: 0 8px;\n\n  width: 480px;\n  max-width: 100%;\n\n  height: 100%;\n\n  background-color: ",";\n"])),(function(e){return e.theme.modalBackgroundColor})),ke=(0,s.ZP)(Z.ZP)(d||(d=(0,u.Z)(["\n  border-top: 1px solid ",";\n\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),_e=function(e){var n,o=e.onClose,i=(e.onSubmit,(0,W.J)()),t=null===(n=(0,_.Zx)())||void 0===n?void 0:n.offerId,r=(0,_.G2)({_id:t}),l=(0,y.xc)()[y.EJ.offers],a=(0,p.useState)(0),d=(0,c.Z)(a,2),u=d[0],s=d[1],v=(0,_.hN)(),f=v.setValue,h=v.formValues,x=v.handleSubmit,g=(0,p.useCallback)((function(e){f(ye[u].value,e)}),[u,f]),Z=(0,p.useMemo)((function(){var e,n,o;return null!==(n=(e={},(0,m.Z)(e,Pe.warehouse,(0,M.jsx)(je,{withActions:!0,onSelect:g,selected:null===h||void 0===h?void 0:h.warehouse})),(0,m.Z)(e,Pe.price,(0,M.jsx)(L,{withActions:!0,onSelect:g,selected:null===h||void 0===h?void 0:h.price})),(0,m.Z)(e,Pe.variation,(0,M.jsx)(C.Z,{withActions:!0,onSelect:g,selected:null===h||void 0===h?void 0:h.variation})),(0,m.Z)(e,Pe.inventory,(0,M.jsx)(U,{withActions:!0,onSelect:g,selected:null===h||void 0===h?void 0:h.inventory})),(0,m.Z)(e,Pe.supplier,(0,M.jsx)(Ce,{withActions:!0,types:[we.SUPPLIER],onSelect:g,selected:null===h||void 0===h?void 0:h.supplier})),e)[null===(o=ye[u])||void 0===o?void 0:o.value])&&void 0!==n?n:null}),[u,null===h||void 0===h?void 0:h.inventory,null===h||void 0===h?void 0:h.price,null===h||void 0===h?void 0:h.supplier,null===h||void 0===h?void 0:h.variation,null===h||void 0===h?void 0:h.warehouse,g]),w=(0,p.useMemo)((function(){var e,n,o,i,t,l,a,d=null===r||void 0===r?void 0:r.defaults,c=(0,m.Z)({},null!==(e=null===ye||void 0===ye||null===(n=ye[u])||void 0===n?void 0:n.value)&&void 0!==e?e:"",!0);return c.variation?h.variation&&h.variation._id!==(null===d||void 0===d||null===(o=d.variation)||void 0===o?void 0:o._id):c.price?h.price&&h.price._id!==(null===d||void 0===d||null===(i=d.price)||void 0===i?void 0:i._id):c.warehouse?h.warehouse&&h.warehouse._id!==(null===d||void 0===d||null===(t=d.warehouse)||void 0===t?void 0:t._id):c.inventory?h.inventory&&h.inventory._id!==(null===d||void 0===d||null===(l=d.inventory)||void 0===l?void 0:l._id):c.supplier?h.supplier&&h.supplier._id!==(null===d||void 0===d||null===(a=d.supplier)||void 0===a?void 0:a._id):void 0}),[null===r||void 0===r?void 0:r.defaults,u,h.inventory,h.price,h.supplier,h.variation,h.warehouse]);return(0,M.jsx)(B.f4,{value:i,children:(0,M.jsxs)(Se,{onSubmit:x((function(e){(null===r||void 0===r?void 0:r._id)&&l.setDefaults({data:{_id:null===r||void 0===r?void 0:r._id,defaults:(0,oe.vg)(e),updateCurrent:!0},onSuccess:function(e,n){console.log(e,n)},onLoading:i.onLoading("submiting")})})),children:[(0,M.jsx)(N.xB,{onBackPress:o,title:(0,X.t)("Default values"),canSubmit:w}),(0,M.jsx)(b.Z,{options:ye,currentIndex:u,onChangeIndex:s}),(0,M.jsx)(ke,{flex:1,fillWidth:!0,overflow:"hidden",children:Z}),(0,M.jsx)(N.AT,{loading:i.hasLoading,onCreatePress:function(){},canSubmit:w})]})})},Be=o(3299);var Ie,Ae,De,Oe,Me,Le,Re=o(4717),Te=o(713),Ee=s.ZP.form(Ie||(Ie=(0,u.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  max-width: 480px;\n\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.sideBarBackgroundColor})),Ve=function(e){var n=e.onClose,o=(0,E.i7)().currentOffer,i=(0,y.xc)()[y.EJ.offers],t=(0,p.useState)((null===o||void 0===o?void 0:o.images)||[]),r=(0,c.Z)(t,2),l=r[0],a=r[1],d=(0,p.useState)(!1),u=(0,c.Z)(d,2),v=u[0],f=u[1],h=(0,s.Fg)();return(0,M.jsx)(Ee,{onSubmit:function(e){e.preventDefault(),o&&i.updateById({data:(0,w.Z)((0,w.Z)({},(0,V.rE)(o)),{},{data:{images:l},refreshCurrent:!0}),onSuccess:function(){n&&n()},onLoading:f})},children:(0,M.jsx)(Te.Z,{initialData:l,onClose:n,onChangeState:a,contentContainerStyle:{flex:1,borderTop:"1px solid ".concat(h.sideBarBorderColor),borderBottom:"1px solid ".concat(h.sideBarBorderColor)},renderHeader:(0,M.jsx)(Q.iw,{title:"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",onBackPress:n,okButton:!0,canSubmit:l.length>0}),FooterComponent:function(e){return(0,M.jsx)(Q.AT,{onCreatePress:e.onAddNewImageSetPress,loading:v,canSubmit:l.length>0})}})})},Ue=o(4897),Ne=["className"],He=["CellComponent"],We=function(e){return e.General="General",e.Properties="Properties",e.Defaults="Defaults",e.Images="Images",e.Futures="Futures",e.Cms="Cms",e}({}),$e=(0,oe.H1)(We),Fe=(0,s.ZP)(Z.ZP)(Ae||(Ae=(0,u.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(e){return e.theme.sideBarBackgroundColor})),Ge=(0,s.ZP)(Z.ZP)(De||(De=(0,u.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),ze=(0,s.ZP)(Z.ZP)(Oe||(Oe=(0,u.Z)([""]))),Je=(0,s.ZP)(Y.ZP)(Me||(Me=(0,u.Z)(["\n  fill: ",";\n"])),(function(e){return e.theme.globals.colors.error})),qe=(0,s.ZP)(Y.ZP)(Le||(Le=(0,u.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),Ke=[{title:(0,X.t)("Label"),getValue:function(e){return null===e||void 0===e?void 0:e.label},gridArea:"label",tab:We.General},{title:(0,X.t)("status"),getValue:function(e){return null===e||void 0===e?void 0:e.approved},gridArea:"approved",tab:We.General},{title:(0,X.t)("Type"),getValue:function(e){return null===e||void 0===e?void 0:e.type},gridArea:"type",tab:We.General},{title:(0,X.t)("SKU"),getValue:function(e){return null===e||void 0===e?void 0:e.sku},gridArea:"sku",tab:We.General},{title:(0,X.t)("Bar-code"),getValue:function(e){return null===e||void 0===e?void 0:e.barCode},gridArea:"barCode",tab:We.General},{title:(0,X.t)("Categories"),CellComponent:function(e){var n=e.cell,o=e.overlayHandler,i=e.data,t=(0,E.q$)(te.cA.CATEGORIES_PROD).directory,r=(0,p.useMemo)((function(){var e,n;return null!==(e=null===i||void 0===i||null===(n=i.categories)||void 0===n?void 0:n.map((function(e){return e._id})))&&void 0!==e?e:[]}),[null===i||void 0===i?void 0:i.categories]),l=(0,p.useMemo)((function(){return t.map((function(e,n){return(0,M.jsx)(ce,{selectedIds:r,item:e},"cat_".concat(e._id))}))}),[t,r]);return(0,M.jsxs)(re.U.Cell,{style:{minHeight:"max-content"},children:[(0,M.jsx)(le.p,{title:null===n||void 0===n?void 0:n.title,openOverlayButtonTitle:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",onOpenOverlayPress:function(){o({RenderComponent:ue})}}),(0,M.jsx)(Z.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"flex-end",flexWrap:"wrap",gap:8,style:{height:"max-content",minHeight:26},children:l})]})},gridArea:"categories",tab:We.Properties},{title:(0,X.t)("Brand"),getValue:function(e){var n;return null===e||void 0===e||null===(n=e.brand)||void 0===n?void 0:n.label},gridArea:"brand",tab:We.General},{title:(0,X.t)("Measurement"),gridArea:"measurement",getValue:function(e){try{var n=null!==e&&void 0!==e&&e.measurement?JSON.parse(null===e||void 0===e?void 0:e.measurement):{};return["".concat((0,X.t)("unit"),": ").concat((null===n||void 0===n?void 0:n.unit)||0),"".concat((0,X.t)("min"),": ").concat((null===n||void 0===n?void 0:n.min)||0),"".concat((0,X.t)("max"),": ").concat((null===n||void 0===n?void 0:n.max)||0),"".concat((0,X.t)("step"),": ").concat((null===n||void 0===n?void 0:n.step)||0)].join(" | ")}catch(o){return""}},tab:We.General},{title:(0,X.t)("Description"),getValue:function(e){return null===e||void 0===e?void 0:e.description},gridArea:"description",tab:We.General},{title:(0,X.t)("Negative sales"),getValue:function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&n.negativeSale?"Yes":"No"},gridArea:"reservation",tab:We.Futures},{title:(0,X.t)("Reservation"),getValue:function(e){var n,o;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(o=n.reservation)&&void 0!==o&&o.isAvailable?"Yes":"No"},gridArea:"reservation",tab:We.Futures},{title:(0,X.t)("Custom production"),getValue:function(e){var n,o;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(o=n.customProduction)&&void 0!==o&&o.isAvailable?"Yes":"No"},gridArea:"customProduction",tab:We.Futures},{title:(0,X.t)("Custom order"),getValue:function(e){var n,o;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(o=n.customOrder)&&void 0!==o&&o.isAvailable?"Yes":"No"},gridArea:"customOrder",tab:We.Futures},{title:(0,X.t)("Pre-order"),getValue:function(e){var n,o;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(o=n.preOrder)&&void 0!==o&&o.isAvailable?"Yes":"No"},gridArea:"preOrder",tab:We.Futures},{title:(0,X.t)("Is promo"),getValue:function(e){var n;return null===e||void 0===e||null===(n=e.futures)||void 0===n?void 0:n.isPromo},gridArea:"isPromo",tab:We.Futures},{title:(0,X.t)("Properties"),CellComponent:function(e){var n,o,i,t,r=e.cell,l=e.overlayHandler,a=e.data,d=(0,E.i7)(),u=(0,_.G2)(a),c=(0,p.useRef)(new Set(null!==(n=null===u||void 0===u||null===(o=u.properties)||void 0===o?void 0:o.map((function(e){return e._id})))&&void 0!==n?n:[])),s=(0,p.useRef)(new Set(null!==(i=null===u||void 0===u||null===(t=u.properties)||void 0===t?void 0:t.map((function(e){var n;return null===e||void 0===e||null===(n=e.parent)||void 0===n?void 0:n._id})))&&void 0!==i?i:[])),v=(0,p.useMemo)((function(){for(var e=[],n={},o=0,i=Array.from(s.current);o<i.length;o++){var t,r=i[o],l=r?null===(t=d.propertiesDataMap)||void 0===t?void 0:t[r]:void 0;l&&(e.push(l),n[l._id]=[])}for(var a=0,u=Array.from(c.current);a<u.length;a++){var v,f,p,h=u[a],m=h?null===(v=d.propertiesDataMap)||void 0===v?void 0:v[h]:void 0;if(m&&null!==(f=m.parent)&&void 0!==f&&f._id)n[null===(p=m.parent)||void 0===p?void 0:p._id].push(m)}return{propertiesList:e,valuesListMap:n}}),[d.propertiesDataMap]),f=v.propertiesList,h=v.valuesListMap,m=(0,p.useMemo)((function(){return null===f||void 0===f?void 0:f.map((function(e,n){return(0,M.jsx)(be,{index:n,overlayHandler:l,item:e,selectedItems:h[e._id],data:a},"prop-".concat(null===e||void 0===e?void 0:e._id))}))}),[f,l,h,a]);return(0,M.jsxs)(re.U.Cell,{padding:"4px 4px 8px",gap:8,className:"PROPERTIES_LIST_CELL",style:{minHeight:m&&(null===m||void 0===m?void 0:m.length)>0?"max-content":50},children:[(0,M.jsx)(le.p,{title:null===r||void 0===r?void 0:r.title,onOpenOverlayPress:function(){l({RenderComponent:ge,props:{offer:a}})}}),(0,M.jsx)(Z.ZP,{fillWidth:!0,gap:8,alignItems:m&&(null===m||void 0===m?void 0:m.length)>0?"stretch":"flex-end",children:(null===f||void 0===f?void 0:f.length)>0?m:(0,M.jsx)(re.U.CellText,{$weight:500,children:(0,X.t)("undefined")})})]})},gridArea:"properties",tab:We.Properties},{title:(0,X.t)("Default values"),CellComponent:function(e){var n=e.data,o=e.cell,i=e.overlayHandler,t=(0,s.Fg)(),r=null===n||void 0===n?void 0:n.warehouse,l=null===n||void 0===n?void 0:n.supplier,a=null===n||void 0===n?void 0:n.price;console.log("OfferOverviewDefaultsCell",{price:a,data:n});var d=(0,p.useMemo)((function(){var e,o=null===n||void 0===n?void 0:n.variation;return[{title:(0,X.t)("Label"),value:null===o||void 0===o?void 0:o.label},{title:(0,X.t)("Bar-code"),value:null===o||void 0===o?void 0:o.barCode},{title:(0,X.t)("SKU"),value:null===o||void 0===o?void 0:o.sku},{title:(0,X.t)("Props q-ty"),value:null===o||void 0===o||null===(e=o.properties)||void 0===e?void 0:e.length}].map((function(e,n){var o;return(0,M.jsxs)(Z.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{$size:14,children:"".concat(null===e||void 0===e?void 0:e.title,": ")}),(0,M.jsx)(g.x,{$size:14,$weight:600,$align:"right",children:null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:"---"})]},null===e||void 0===e?void 0:e.title)}))}),[null===n||void 0===n?void 0:n.variation]),u=(0,p.useMemo)((function(){return function(e){var n,o,i,t,r,l;return[{title:(0,X.t)("Input"),amount:(0,Be.pU)(null===e||void 0===e?void 0:e.in)},{title:(0,X.t)("Output"),amount:(0,Be.pU)(null===e||void 0===e?void 0:e.out)},{title:(0,X.t)("Commission"),amount:(0,Be.pU)(null===e||void 0===e||null===(n=e.commission)||void 0===n?void 0:n.amount),percentage:null!==e&&void 0!==e&&null!==(o=e.commission)&&void 0!==o&&o.percentage?(0,Be.pU)(null===e||void 0===e||null===(i=e.commission)||void 0===i?void 0:i.percentage):void 0},{title:(0,X.t)("Markup"),amount:(0,Be.pU)(null===e||void 0===e||null===(t=e.markup)||void 0===t?void 0:t.amount),percentage:null!==e&&void 0!==e&&null!==(r=e.markup)&&void 0!==r&&r.percentage?(0,Be.pU)(null===e||void 0===e||null===(l=e.markup)||void 0===l?void 0:l.percentage):void 0}]}(a).map((function(e,n){return(0,M.jsxs)(Z.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{children:"".concat(null===e||void 0===e?void 0:e.title,": ")}),(0,M.jsxs)(g.x,{$weight:600,children:[null===e||void 0===e?void 0:e.amount,(null===e||void 0===e?void 0:e.percentage)&&" | ".concat(null===e||void 0===e?void 0:e.percentage,"%")]})]},null===e||void 0===e?void 0:e.title)}))}),[a]);return(0,M.jsxs)(re.U.Cell,{style:{minHeight:"max-content"},children:[(0,M.jsx)(le.p,{title:null===o||void 0===o?void 0:o.title,onOpenOverlayPress:function(){i({RenderComponent:_e})}}),(0,M.jsxs)(Z.ZP,{fillWidth:!0,children:[(0,M.jsx)(re.U.CellText,{$weight:600,style:{color:null===t||void 0===t?void 0:t.fontColorHeader},children:(0,X.t)("warehouse")}),(0,M.jsx)(Z.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",children:[{label:(0,X.t)("Label"),value:null===r||void 0===r?void 0:r.label},{label:(0,X.t)("Code"),value:null===r||void 0===r?void 0:r.code}].map((function(e){return(0,M.jsxs)(Z.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{children:"".concat(e.label)}),(0,M.jsx)(g.x,{$weight:600,children:(null===e||void 0===e?void 0:e.value)||"---"})]},e.label)}))})]}),(0,M.jsxs)(Z.ZP,{fillWidth:!0,children:[(0,M.jsx)(re.U.CellText,{$weight:600,style:{color:null===t||void 0===t?void 0:t.fontColorHeader},children:(0,X.t)("supplier")}),[{label:(0,X.t)("Label"),value:null===l||void 0===l?void 0:l.label},{label:(0,X.t)("Code"),value:null===l||void 0===l?void 0:l.code}].map((function(e){return(0,M.jsxs)(Z.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{children:"".concat(e.label)}),(0,M.jsx)(g.x,{$weight:600,children:(null===e||void 0===e?void 0:e.value)||"---"})]},e.label)}))]}),(0,M.jsxs)(Z.ZP,{fillWidth:!0,gap:6,children:[(0,M.jsx)(re.U.CellText,{$weight:600,style:{color:null===t||void 0===t?void 0:t.fontColorHeader},children:(0,X.t)("variation")}),(0,M.jsx)(Z.ZP,{fillWidth:!0,children:d})]}),(0,M.jsxs)(Z.ZP,{fillWidth:!0,gap:6,children:[(0,M.jsx)(re.U.CellText,{$weight:600,style:{color:null===t||void 0===t?void 0:t.fontColorHeader},children:(0,X.t)("price")}),(0,M.jsx)(Z.ZP,{fillWidth:!0,children:u})]})]})},gridArea:"defaults",tab:We.Defaults},{title:(0,X.t)("Created by / Date / Time"),getValue:function(e){var n,o;return null!==e&&void 0!==e&&e.author?"".concat(null===e||void 0===e||null===(n=e.author)||void 0===n||null===(o=n.user)||void 0===o?void 0:o.email," / ").concat(null!==e&&void 0!==e&&e.createdAt&&(0,ie.isString)(null===e||void 0===e?void 0:e.createdAt)?(0,oe.M7)(Date.parse(null===e||void 0===e?void 0:e.createdAt)):""):null},gridArea:"created",tab:We.General},{title:(0,X.t)("Updated by / Date / Time"),getValue:function(e){var n,o;return null!==e&&void 0!==e&&e.editor?"".concat(null===e||void 0===e||null===(n=e.editor)||void 0===n||null===(o=n.user)||void 0===o?void 0:o.email," / ").concat(null!==e&&void 0!==e&&e.updatedAt&&(0,ie.isString)(null===e||void 0===e?void 0:e.updatedAt)?(0,oe.M7)(Date.parse(null===e||void 0===e?void 0:e.updatedAt)):""):null},gridArea:"updated",tab:We.General},{title:(0,X.t)("Images"),CellComponent:function(e){var n=e.data,o=e.cell,i=e.overlayHandler,t=(0,p.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.images)||void 0===e?void 0:e.map((function(e,n){return(0,M.jsx)(re.U.ImagesSetBox,{fxDirection:"row",gap:2,overflow:"auto",children:Ue.E_.map((function(n){return(0,M.jsx)(Re.Z,{src:e[n.value]||"",disabled:!0},"img_".concat(n.value))}))},"set_".concat((null===e||void 0===e?void 0:e._id)||n))}))}),[null===n||void 0===n?void 0:n.images]);return(0,M.jsxs)(re.U.Cell,{style:{minHeight:"max-content",padding:"4px 0"},children:[(0,M.jsx)(le.p,{title:null===o||void 0===o?void 0:o.title,onOpenOverlayPress:function(){i({RenderComponent:Ve})}}),(0,M.jsx)(Z.ZP,{gap:2,height:"max-content",padding:"8px 0",style:{minHeight:26},children:t})]})},gridArea:"images",tab:We.Images}];var Ye,Xe,Qe=function(e){var n,o=e.className,i=(0,K.Z)(e,Ne),t=(0,_.xj)(),r=(0,h.rh)().currentOffer,l=(0,ee.on)(),a=function(){var e={};return Ke.forEach((function(n){var o,i=n.tab;i&&(e[i]?null===(o=e[i])||void 0===o||o.push(n):e[i]=[n])})),e}(),d=(0,p.useState)(We.General),u=(0,c.Z)(d,2),s=u[0],v=u[1],f=(0,p.useMemo)((function(){var e;return a[s]?null===(e=a[s])||void 0===e?void 0:e.map((function(e){var n=e.CellComponent,o=(0,K.Z)(e,He);return n?(0,M.jsx)(n,{overlayHandler:l.open,cell:o,data:r},o.title):(0,M.jsx)(ne.k,{overlayHandler:l.open,cell:o,data:r},o.title)})):null}),[a,s,l.open,r]);return(0,M.jsxs)(Fe,{fillWidth:!0,flex:1,className:o,padding:"0 8px",children:[(0,M.jsx)(Q.iw,{title:(0,X.t)("Offer overview"),onBackPress:t.goBack}),(0,M.jsx)(b.Z,{optionProps:{fitContentH:!0},options:$e,onOptSelect:function(e){t.replace({hash:null===e||void 0===e?void 0:e.value}),v(null===e||void 0===e?void 0:e.value)}}),(0,M.jsx)(Ge,{fillWidth:!0,flex:1,overflow:"auto",children:f}),(0,M.jsxs)(ze,{fillWidth:!0,fxDirection:"row",gap:6,padding:"6px 0",children:[(0,M.jsx)(Y.ZP,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==i&&void 0!==i&&i.onEdit),onClick:null===i||void 0===i?void 0:i.onEdit}),(0,M.jsx)(Y.ZP,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:null!==i&&void 0!==i&&null!==(n=i.product)&&void 0!==n&&n.visible?"visibilityOn":"visibilityOff",disabled:!(null!==i&&void 0!==i&&i.onHide),onClick:null===i||void 0===i?void 0:i.onHide}),(0,M.jsx)(Je,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==i&&void 0!==i&&i.onDelete),onClick:null===i||void 0===i?void 0:i.onDelete}),(0,M.jsxs)(Z.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,M.jsx)(Y.ZP,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",disabled:!(null!==i&&void 0!==i&&i.onRefresh),onClick:null===i||void 0===i?void 0:i.onRefresh}),(0,M.jsx)(qe,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==i&&void 0!==i&&i.onOpenRightSide),onClick:null===i||void 0===i?void 0:i.onOpenRightSide})]})]})]})},en=o(3185),nn=(0,s.ZP)(Z.ZP)(Ye||(Ye=(0,u.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor})),on=function(e){var n=e.toggleRightSideVisibility,o=(0,h.rh)(),i=tn(),t=(0,k.f9)(),r=(0,y.xc)().offers;return(0,M.jsxs)(nn,{children:[(0,M.jsx)(Qe,{product:null===o||void 0===o?void 0:o.currentOffer,onEdit:function(){o.currentOffer&&t.openModal({Modal:en.n.EditOffer,props:{offer:null===o||void 0===o?void 0:o.currentOffer,title:(0,X.t)("Edit offer")}})},onRefresh:function(){var e,n;null!==(e=o.currentOffer)&&void 0!==e&&e._id&&r.getOne({data:{params:{_id:null===(n=o.currentOffer)||void 0===n?void 0:n._id,getPrices:!1,getVariations:!1}},onLoading:i.onLoading("offer")})},onOpenRightSide:n}),(0,M.jsx)(q.j,{})]})},tn=function(){return(0,B.un)()},rn=s.ZP.div(Xe||(Xe=(0,u.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),v.VU),ln=function(e){var n=e.path,o=(0,W.J)({offer:{content:(0,X.t)("Loading product info")},prices:{content:"Loading prices"},variations:{content:"Loading variations"}}),i=(0,p.useState)(!1),t=(0,c.Z)(i,2),r=t[0],l=t[1],a=(0,p.useCallback)((function(){l((function(e){return!e}))}),[]);return(0,M.jsx)(B.f4,{value:o,children:(0,M.jsx)(h.ZP,{children:(0,M.jsx)(ee.ZP,{children:(0,M.jsx)(f.default,{path:n,children:(0,M.jsxs)(rn,{children:[(0,M.jsx)(on,{toggleRightSideVisibility:a}),(0,M.jsx)(J,{isVisible:r,toggleVisibility:a})]})})})})})}},3226:function(e,n,o){o.d(n,{rh:function(){return u}});var i=o(2791),t=o(1819),r=o(2989),l=o(9663),a=o(3329),d=(0,i.createContext)({}),u=function(){return(0,i.useContext)(d)};n.ZP=function(e){var n=e.children,o=(0,t.xc)()[t.EJ.offers],u=(0,l.useOfferOverviewLoaders)(),c=(0,r.Zx)(),s=null===c||void 0===c?void 0:c.offerId,v=(0,r.G2)({_id:s});(0,i.useEffect)((function(){var e;null!==u&&void 0!==u&&null!==(e=u.isLoading)&&void 0!==e&&e.offer||s&&o.getOne({data:{params:{_id:s,getVariations:!1,getPrices:!1}},onLoading:u.onLoading("offer")}).catch()}),[s]);return(0,i.useEffect)((function(){return function(){o.clearCurrent(void 0)}}),[]),(0,a.jsx)(d.Provider,{value:{clearCurrent:function(){o.clearCurrent(void 0)},currentOffer:v},children:n})}},8189:function(e,n,o){o.d(n,{Z:function(){return ee}});var i,t,r,l,a,d,u,c=o(1413),s=o(7762),v=o(3226),f=o(3665),p=o(1819),h=o(8589),m=o(2791),x=o(401),g=o(168),b=o(4942),Z=o(9439),C=o(4925),w=o(2360),j=o(8095),P=o(7348),y=o(6492),S=o(959),k=o(1383),_=o(3719),B=o(7121),I=o(6727),A=o(4695),D=o(2989),O=o(4990),M=o(6681),L=o(6522),R=o(4235),T=o(4809),E=o(9541),V=o(7294),U=o(2825),N=o(9006),H=o(763),W=o(3329),$=["onClose","title","onSubmit","updateId","create","offerId","offer"],F=I.Ry().shape({label:I.Z_().required().min(5).max(128),sku:I.Z_().required().min(8).max(32),barCode:I.Z_().max(32),cms:I.Ry().shape({labels:I.Ry().shape({ua:I.Z_().min(5).max(64),en:I.Z_().min(5).max(64)})}),propertiesMap:I.Ry().shape({}).nonNullable().required(),offer:I.Ry().shape({_id:I.Z_().required(),label:I.Z_(),labels:I.Ry().shape({ua:I.Z_().min(5).max(64),en:I.Z_().min(5).max(64)})}),timeFrom:I.hT(),timeTo:I.hT(),price:I.Ry().shape({out:I.Z_()})}),G=(0,w.ZP)(j._0)(i||(i=(0,g.Z)(["\n  flex: 1;\n  max-height: 100%;\n  height: 100vh;\n\n  width: 100%;\n  //padding: 0 12px;\n\n  overflow: hidden;\n\n  //max-width: 380px;\n  color: ",";\n  background-color: ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.tableBackgroundColor})),z=(0,w.ZP)(j.ZP)(t||(t=(0,g.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),J=(0,w.ZP)(j.ZP)(r||(r=(0,g.Z)(["\n  padding-bottom: 8px;\n"]))),q=(0,w.ZP)(j.ZP)(l||(l=(0,g.Z)(["\n  padding: 0 4px;\n"]))),K=(0,w.ZP)(j.ZP)(a||(a=(0,g.Z)(["\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor})),Y=(0,w.ZP)(j.ZP)(d||(d=(0,g.Z)([""]))),X=(0,w.ZP)(j.ZP)(u||(u=(0,g.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),Q=function(e){var n,o,i,t,r,l,a,d,u,v=e.onClose,f=e.title,h=(e.onSubmit,e.updateId),x=(e.create,e.offerId),g=e.offer,w=(0,C.Z)(e,$),I=(0,P.i7)(),Q=(0,p.xc)()[p.EJ.offers],ee=(0,E.J)(),ne=(0,D.EV)({id:h}).variation,oe=(0,D.G2)({_id:(null===ne||void 0===ne||null===(n=ne.offer)||void 0===n?void 0:n._id)||x||(null===g||void 0===g?void 0:g._id)}),ie=(0,_.d)(),te=(0,m.useState)(),re=(0,Z.Z)(te,2),le=re[0],ae=re[1],de=(0,D.hN)({defaultValues:(0,S.Ls)(ne?(0,c.Z)((0,c.Z)({},ne),{},{offer:oe,template:le}):{offer:oe,template:le},oe),resolver:(0,A.X)(F),reValidateMode:"onSubmit"}),ue=de.setValue,ce=de.handleSubmit,se=de.register,ve=de.formState.errors,fe=de.formValues,pe=de.reset,he=(0,m.useState)((function(){var e,n,o={},i=(0,s.Z)((0,S.gQ)(null!==(e=fe.propertiesMap)&&void 0!==e?e:{}));try{for(i.s();!(n=i.n()).done;){var t,r=(0,Z.Z)(n.value,2),l=r[0],a=r[1],d=null===(t=I.propertiesDataMap)||void 0===t?void 0:t[a];d&&(o[l]=d)}}catch(u){i.e(u)}finally{i.f()}return o})),me=(0,Z.Z)(he,2),xe=me[0],ge=me[1],be=(0,m.useMemo)((function(){var e,n,o;if(null!==le&&void 0!==le&&null!==(e=le.childrenList)&&void 0!==e&&e.length)return null===le||void 0===le?void 0:le.childrenList.filter((function(e){var n;return e.isSelectable&&(null===e||void 0===e||null===(n=e.childrenList)||void 0===n?void 0:n.length)}));var i,t=null===le||void 0===le?void 0:le._id,r=[],l=null!==(n=null===(o=I.propertiesKeysMap)||void 0===o?void 0:o[null!==t&&void 0!==t?t:"def"])&&void 0!==n?n:[],a=(0,s.Z)(l);try{for(a.s();!(i=a.n()).done;){var d,u=i.value,c=null===(d=I.propertiesDataMap)||void 0===d?void 0:d[u];if(null!==c&&void 0!==c&&c.isSelectable){var v=I.propertiesKeysMap[null===c||void 0===c?void 0:c._id];null!==v&&void 0!==v&&v.length&&r.push(c)}}}catch(f){a.e(f)}finally{a.f()}return r}),[null===le||void 0===le?void 0:le._id,null===le||void 0===le?void 0:le.childrenList,I.propertiesDataMap,I.propertiesKeysMap]),Ze=(0,m.useMemo)((function(){var e,n,o=Object.entries(xe).sort((function(e,n){return e[0].localeCompare(n[0])})),i=null!==oe&&void 0!==oe&&oe.label?[null===oe||void 0===oe?void 0:oe.label]:[],t=(0,s.Z)(o);try{for(t.s();!(n=t.n()).done;){var r=n.value[1];(null===r||void 0===r?void 0:r.label)&&i.push(null===r||void 0===r?void 0:r.label)}}catch(l){t.e(l)}finally{t.f()}return{label:null!==o&&void 0!==o&&o.length?i.join(". "):null!==(e=null===ne||void 0===ne?void 0:ne.label)&&void 0!==e?e:"".concat(null===oe||void 0===oe?void 0:oe.label,". {{VARIATION_LABEL}}")}}),[null===oe||void 0===oe?void 0:oe.label,xe,null===ne||void 0===ne?void 0:ne.label]).label;(0,m.useEffect)((function(){ue("label",Ze)}),[Ze,ue,ne]);var Ce=(0,m.useCallback)((function(e){h?Q.updateVariationById({data:{data:(0,S.Ts)(e)},onSuccess:function(e){console.log("updateVariationById onSuccess",e),v&&v()},onError:k.kl.toastAxiosError,onLoading:ee.onLoading("update")}):Q.createVariation({data:{data:(0,S.Ts)(e)},onSuccess:function(e){ie.state.close&&v&&v(),ie.state.clear&&pe()},onError:k.kl.toastAxiosError,onLoading:ee.onLoading("create")})}),[ee,v,pe,Q,ie.state.clear,ie.state.close,h]),we=(0,m.useCallback)((function(e,n){var o,i=null===(o=fe.propertiesMap)||void 0===o?void 0:o[e];if(i&&i===n)ue("propertiesMap.".concat(e),""),ge((function(n){return(0,H.omit)(n,e)}));else{var t;ue("propertiesMap.".concat(e),n);var r=null===(t=I.propertiesDataMap)||void 0===t?void 0:t[n];r&&ge((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,b.Z)({},e,r))}))}}),[fe.propertiesMap,ue,I.propertiesDataMap]),je=(0,m.useCallback)((function(){ue("propertiesMap",{}),ge({})}),[ue]),Pe=(0,m.useMemo)((function(){return null!==fe&&void 0!==fe&&fe.propertiesMap?Object.values(null===fe||void 0===fe?void 0:fe.propertiesMap):[]}),[null===fe||void 0===fe?void 0:fe.propertiesMap,fe]),ye=(0,m.useMemo)((function(){return Pe.length>0}),[Pe.length]),Se=(0,m.useMemo)((function(){return null===be||void 0===be?void 0:be.map((function(e){var n,o=null===fe||void 0===fe||null===(n=fe.propertiesMap)||void 0===n?void 0:n[e._id];return(0,W.jsx)(T.Z,{item:e,selectedIds:o?[o]:void 0,onSelect:we,onChangeIds:function(e,n){var o=(0,Z.Z)(n,1)[0];console.log("onChangeIds",e,o),we(e,o)}},"prop_".concat(e._id))}))}),[be,null===fe||void 0===fe?void 0:fe.propertiesMap,we]);return(0,W.jsx)(V.Z,{fillHeight:!0,onBackPress:v,okButton:!1,title:f||"Create variation",children:(0,W.jsxs)(G,(0,c.Z)((0,c.Z)({onSubmit:ce(Ce,(function(e){console.error("[SUBMIT ERROR]",e)})),onReset:je},w),{},{children:[(0,W.jsxs)(z,{flex:1,fillWidth:!0,overflow:"auto",gap:12,children:[(0,W.jsxs)(N.y,{label:"Offer",expandable:!1,hideFooter:!0,children:[(0,W.jsx)(O.Z,{label:(0,L.t)("Offer label"),error:null===ve||void 0===ve||null===(o=ve.offer)||void 0===o?void 0:o._id,required:!0,disabled:!0,children:(0,W.jsx)(M.ZP,{value:null!==(i=null===oe||void 0===oe?void 0:oe.label)&&void 0!==i?i:void 0,placeholder:(0,L.t)("label"),required:!0,disabled:!0})}),(0,W.jsxs)(j.ZP,{fxDirection:"row",gap:12,fillWidth:!0,children:[(0,W.jsx)(O.Z,{label:(0,L.t)("sku"),disabled:!0,children:(0,W.jsx)(M.ZP,{value:null!==(t=null===oe||void 0===oe?void 0:oe.sku)&&void 0!==t?t:void 0,placeholder:(0,L.t)("sku"),disabled:!0})}),(0,W.jsx)(O.Z,{label:(0,L.t)("barCode"),disabled:!0,children:(0,W.jsx)(M.ZP,{value:null!==(r=null===oe||void 0===oe?void 0:oe.barCode)&&void 0!==r?r:void 0,placeholder:(0,L.t)("barCode"),disabled:!0})})]})]}),(0,W.jsxs)(N.y,{label:"Main info",expandable:!1,hideFooter:!0,children:[(0,W.jsx)(O.Z,{label:(0,L.t)("label"),error:ve.label,children:(0,W.jsx)(M.ZP,(0,c.Z)((0,c.Z)({},se("label",{required:!0})),{},{placeholder:(0,L.t)("label"),required:!0}))}),(0,W.jsxs)(j.ZP,{fxDirection:"row",gap:12,fillWidth:!0,children:[(0,W.jsx)(O.Z,{label:(0,L.t)("sku"),error:ve.sku,children:(0,W.jsx)(M.ZP,(0,c.Z)((0,c.Z)({},se("sku",{required:!0})),{},{placeholder:(0,L.t)("sku"),required:!0}))}),(0,W.jsx)(O.Z,{label:(0,L.t)("barCode"),error:ve.barCode,children:(0,W.jsx)(M.ZP,(0,c.Z)((0,c.Z)({},se("barCode")),{},{placeholder:(0,L.t)("barCode")}))})]})]}),(0,W.jsxs)(N.y,{label:(0,L.t)("Properties"),expandable:!1,hideFooter:!0,children:[(0,W.jsx)(U.c,{onSelect:function(e){ue("template",e),ae(e)},selected:le}),(0,W.jsx)(J,{padding:"0 8px",margin:"8px 0",children:Se})]}),ne&&(0,W.jsx)(N.y,{label:(0,L.t)("Cms information"),expandable:!1,hideFooter:!0,children:(0,W.jsxs)(Y,{padding:"8px 0",fillWidth:!0,children:[(0,W.jsx)(X,{padding:"8px",justifyContent:"flex-end",fxDirection:"row",fillWidth:!0,children:(0,W.jsx)(y.x,{$size:13,$weight:500,children:(0,L.t)("Cms configs")})}),(0,W.jsxs)(q,{children:[(0,W.jsx)(O.Z,{label:(0,L.t)("Language key"),error:null===ve||void 0===ve||null===(l=ve.cmsConfigs)||void 0===l?void 0:l.key,children:(0,W.jsx)(R.Z,{disabled:!0})}),(0,W.jsx)(O.Z,{label:(0,L.t)("Label by lang key"),error:null===ve||void 0===ve||null===(a=ve.cmsConfigs)||void 0===a||null===(d=a.labels)||void 0===d?void 0:d.ua,children:(0,W.jsx)(M.ZP,(0,c.Z)({placeholder:"Label"},se("cmsConfigs.labels.ua")))})]})]})})]}),(0,W.jsx)(B.AT,{loading:null===(u=ee.isLoading)||void 0===u?void 0:u.create,resetButtonShown:!0,onGoBackPress:v,submitButtonText:(0,L.t)("Accept"),canSubmit:ye,extraFooter:(0,W.jsx)(K,{children:(0,W.jsx)(_.Z,(0,c.Z)({},ie))})})]}))})},ee=function(e){var n,o=e.onSelect,i=e.selected,t=e.withActions,r=void 0===t||t,l=e.offer,a=(0,E.J)(),d=(0,v.rh)(),u=(0,D.G2)(l||(null===d||void 0===d?void 0:d.currentOffer)),g=(0,f.f9)(),b=(0,p.xc)()[p.EJ.offers],Z=(0,m.useCallback)((function(e){var n=e.refresh,o=e.update;u&&b.getAllVariations({data:{},params:{offerId:u._id},update:o,refresh:n,onLoading:a.onLoading("variations")})}),[u,a,b]),C=(0,m.useMemo)((function(){var e,n,o={},i=(0,s.Z)(null!==(e=null===u||void 0===u?void 0:u.variations)&&void 0!==e?e:[]);try{for(i.s();!(n=i.n()).done;){var t,r=n.value.properties,l=(0,s.Z)(null!==r&&void 0!==r?r:[]);try{for(l.s();!(t=l.n()).done;){var a,d=t.value,c=null===d||void 0===d||null===(a=d.parent)||void 0===a?void 0:a._id;c&&d.parent&&(o[c]=d.parent)}}catch(v){l.e(v)}finally{l.f()}}}catch(v){i.e(v)}finally{i.f()}return(0,x.F9)(Object.values(o))}),[null===u||void 0===u?void 0:u.variations]),w=(0,m.useMemo)((function(){return{onRowClick:function(e){o&&null!==e&&void 0!==e&&e.rowData&&o(null===e||void 0===e?void 0:e.rowData)},actionsCreator:r?function(e){var n,o=null===(n=e.selectedRow)||void 0===n?void 0:n._id;return[{icon:"refresh",type:"onlyIcon",onClick:function(){return Z({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!o,onClick:function(){window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0430\u0440\u0456\u0430\u0446\u0456\u044e:\n ".concat(o))}},{icon:"copy",type:"onlyIcon",disabled:!o},{icon:"edit",type:"onlyIcon",disabled:!o,onClick:function(){o&&e.selectedRow&&g.create(Q,{updateId:o})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){g.create(Q,{offer:u})}}]}:void 0}}),[u,Z,g,o,r]);return(0,m.useEffect)((function(){u&&Z({refresh:!0})}),[]),(0,W.jsx)(h.ZP,(0,c.Z)((0,c.Z)({},w),{},{hasSearch:!1,hasFilter:!1,isLoading:null===a||void 0===a||null===(n=a.isLoading)||void 0===n?void 0:n.variations,selectedRow:i,tableData:null===u||void 0===u?void 0:u.variations,tableTitles:C,transformData:x.m$}))}},8495:function(e,n,o){o.d(n,{SI:function(){return u},VU:function(){return d}});var i,t,r,l=o(168),a=o(2360),d=(0,a.iv)(i||(i=(0,l.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,a.iv)(t||(t=(0,l.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,a.iv)(r||(r=(0,l.Z)(["\n  outline: 1px solid tomato;\n"])))},7294:function(e,n,o){var i,t,r=o(168),l=o(1413),a=o(4925),d=o(2360),u=o(2791),c=o(7121),s=o(3329),v=["title","footer","children","extraFooter","extraHeader","isLoading","onClosePress","onBackPress","okButton","canSubmit"],f=function(e){var n=e.title,o=(e.footer,e.children),i=(e.extraFooter,e.extraHeader),t=(e.isLoading,e.onClosePress),r=e.onBackPress,d=e.okButton,u=e.canSubmit,f=(0,a.Z)(e,v);return(0,s.jsxs)(p,(0,l.Z)((0,l.Z)({className:"modal_base"},f),{},{children:[(0,s.jsx)(c.iw,{onBackPress:r,onClosePress:t,title:n,canSubmit:u,okButton:d,children:i}),(0,s.jsx)(h,{className:"main",children:o})]}))},p=d.ZP.div(i||(i=(0,r.Z)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: min-content 1fr max-content;\n\n  position: relative;\n  padding: 0 8px;\n\n  min-height: 200px;\n  max-height: 90vh;\n\n  color: ",";\n  width: ",";\n  height: ",";\n\n  min-width: 250px;\n  max-width: 100%;\n\n  //overflow: hidden;\n\n  box-shadow: ",";\n  fill: ",";\n  color: ",";\n  background-color: ",";\n\n  border-radius: 2px;\n  border-bottom: 1px solid ",";\n  /* resize: both; */\n\n  @media screen and (max-width: 480px) {\n    width: 98vw;\n  }\n\n  @media screen and (min-width: 480px) {\n    width: ",";\n  }\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){var n=e.width,o=void 0===n?"480px":n,i=e.fillWidth,t=e.fitContentH;return(i?"100vw":t&&"max-content")||o}),(function(e){var n=e.height,o=void 0===n?"":n,i=e.fillHeight,t=e.fitContentV;return(i?"90vh":t&&"max-content")||o}),(function(e){return e.theme.globals.shadowMain}),(function(e){return e.theme.fillColor}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.modalBackgroundColor}),(function(e){return e.theme.modalBorderColor}),(function(e){return e.fillWidth?"98vw":"450px"})),h=d.ZP.main(t||(t=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  overflow: auto;\n  position: relative;\n  height: 100%;\n  max-width: 100%;\n  max-height: 100%;\n  width: 100%;\n\n  background-color: ",";\n\n  ::-webkit-scrollbar {\n    width: 4px;\n    height: 4px;\n  }\n  //border-right: 1px solid ",";\n  //border-left: 1px solid ",";\n"])),(function(e){return e.theme.modalBackgroundColor}),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor}));n.Z=(0,u.memo)(f)},6753:function(e,n,o){o.d(n,{U:function(){return Z}});var i,t,r,l,a,d,u,c=o(168),s=o(2360),v=o(8095),f=o(6492),p=s.ZP.button(i||(i=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n\n  border: 0;\n  background-color: transparent;\n\n  font-family: inherit;\n  font-weight: 600;\n  font-size: 13px;\n  padding: 6px 10px;\n  color: ",";\n\n  cursor: pointer;\n\n  &[disabled] {\n    pointer-events: none;\n    color: ",";\n  }\n"])),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.modalBorderColor})),h=(0,s.ZP)(v.ZP)(t||(t=(0,c.Z)(["\n  //min-height: 70px;\n  height: max-content;\n  min-height: max-content;\n\n  padding: 0 8px 8px;\n  gap: 4px;\n\n  //overflow: hidden;\n\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(e){return e.theme.sideBarBorderColor})),m=(0,s.ZP)(v.ZP)(r||(r=(0,c.Z)(["\n  justify-content: center;\n  align-items: center;\n\n  padding: 4px 8px;\n  min-height: 28px;\n  color: #fcfcfc;\n\n  background-color: ",";\n\n  //background-color: #f1f1f1;\n\n  border-radius: 4px;\n  border: 1px solid ",";\n"])),(function(e){return e.theme.fieldBackgroundColor}),(function(e){return e.theme.modalBorderColor})),x=(0,s.ZP)(f.x)(l||(l=(0,c.Z)(["\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 100%;\n\n  color: ",";\n"])),(function(e){return e.$isTitle||e.$disabled?e.theme.globals.inputPlaceholderColor:void 0})),g=(0,s.ZP)(v.ZP)(a||(a=(0,c.Z)(["\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n"]))),b=(0,s.ZP)(v.ZP)(d||(d=(0,c.Z)(["\n  justify-content: center;\n\n  border-radius: 2px;\n  padding: 4px 12px;\n  height: 28px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.fieldBackgroundColor})),Z={CategoryItem:(0,s.ZP)(v.ZP)(u||(u=(0,c.Z)(["\n  align-items: center;\n  justify-content: center;\n\n  flex-direction: row;\n\n  padding: 4px 8px;\n\n  font-weight: 500;\n  font-size: 13px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  //background-color: ",";\n  border: 1px solid ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.field.backgroundColor}),(function(e){return e.theme.accentColor.base})),ImagesSetBox:g,CellText:x,Tag:m,HeaderButton:p,Cell:h,DefaultTag:b}},6493:function(e,n,o){o.d(n,{p:function(){return a}});var i=o(6522),t=o(8095),r=(o(2791),o(6753)),l=o(3329),a=function(e){var n=e.title,o=void 0===n?"Title":n,a=e.openOverlayButtonTitle,d=void 0===a?(0,i.t)("Change"):a,u=e.onOpenOverlayPress,c=e.editButtonText,s=void 0===c?(0,i.t)("Change"):c,v=e.onEditPress,f=e.acceptButtonText,p=void 0===f?(0,i.t)("Ok"):f,h=e.onAcceptPress,m=e.editMode,x=void 0!==m&&m,g=e.canAccept,b=void 0!==g&&g,Z=e.cancelButtonText,C=void 0===Z?(0,i.t)("Cancel"):Z,w=e.onCancelPress;return(0,l.jsxs)(t.ZP,{fxDirection:"row",justifyContent:"space-between",height:"max-content",alignItems:"center",minHeight:"36px",padding:"4px 0",children:[(0,l.jsx)(r.U.CellText,{$isTitle:!0,$size:13,style:{marginRight:"auto"},children:o}),u&&(0,l.jsx)(r.U.HeaderButton,{type:"button",onClick:u,children:d}),!x&&v&&(0,l.jsx)(r.U.HeaderButton,{type:"button",onClick:v,children:s}),x&&w&&(0,l.jsx)(r.U.HeaderButton,{type:"button",onClick:w,children:C}),x&&h&&(0,l.jsx)(r.U.HeaderButton,{type:"button",disabled:!b,onClick:h,children:p})]})}},5227:function(e,n,o){o.d(n,{k:function(){return d}});var i=o(8095),t=o(6522),r=o(2791),l=o(6753),a=o(3329),d=function(e){var n=e.cell,o=e.data,d=(0,r.useMemo)((function(){return n.getValue?n.getValue(o):null}),[n,o]);return(0,a.jsxs)(l.U.Cell,{children:[(0,a.jsx)(l.U.CellText,{$isTitle:!0,$size:12,children:null===n||void 0===n?void 0:n.title}),(0,a.jsx)(i.ZP,{fillWidth:!0,flex:1,fxDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",overflow:"hidden",style:{minHeight:24},children:(0,a.jsx)(l.U.CellText,{$isTitle:!d,$weight:500,children:d||(0,t.t)("undefined")})})]})}},758:function(e,n,o){o.d(n,{A7:function(){return r},QX:function(){return l},fK:function(){return d}});var i=o(6522),t=o(959),r=[{top:{name:(0,i.t)("label"),getData:function(e){return e.label}},bottom:{name:(0,i.t)("code"),getData:function(e){return e.code}},width:"220px",action:"valueByPath"},{top:{name:(0,i.t)("type"),getData:function(e){return null===e||void 0===e?void 0:e.type}},width:"125px",action:"valueByPath"},{top:{name:(0,i.t)("email"),path:"email"},bottom:{name:(0,i.t)("phone"),path:"phone"},width:"180px",action:"contacts"},{top:{name:(0,i.t)("Address"),getData:function(e){return e.address||"\u043d\u0435 \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"}},bottom:{name:"".concat((0,i.t)("longitude"),"/").concat((0,i.t)("latitude")),getData:function(e){var n,o;return"".concat(((null===(n=e.location)||void 0===n?void 0:n.longitude)||"---")+", "+((null===(o=e.location)||void 0===o?void 0:o.latitude)||"---"))}},width:"175px",action:"valueByPath"},{top:{name:(0,i.t)("Manager"),getData:function(e){var n,o;return"".concat((null===(n=e.manager)||void 0===n||null===(o=n.user)||void 0===o?void 0:o.name)||"---")}},bottom:{name:(0,i.t)("email"),getData:function(e){var n,o;return"".concat((null===(n=e.manager)||void 0===n||null===(o=n.user)||void 0===o?void 0:o.email)||"---")}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,i.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}],l=[{top:{name:(0,i.t)("variationLabel"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.label}},getImgPreview:function(e){var n,o,i;return null!==(n=e.offer)&&void 0!==n&&n.images?null===(o=e.offer)||void 0===o||null===(i=o.images[0])||void 0===i?void 0:i.img_preview:""},width:"270px",action:"doubleDataWithAvatar"},{top:{name:(0,i.t)("sku"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.sku}},bottom:{name:(0,i.t)("barCode"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,i.t)("type"),path:"type"},bottom:{name:(0,i.t)("status"),path:"status"},width:"120px",action:"status"},{top:{name:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c",align:"end",getData:function(e){return e.stock||0}},bottom:{name:"\u0420\u0435\u0437\u0435\u0440\u0432",align:"end",getData:function(e){return e.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f",align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.awaiting)||0}},bottom:{name:"\u0412\u0442\u0440\u0430\u0447\u0435\u043d\u043e",align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("warehouse"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,i.t)("code"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",path:"description"},width:"190px",action:"valueByPath"},{top:{name:"\u0410\u0432\u0442\u043e\u0440",path:"author.name"},bottom:{name:"\u0415\u043c\u0435\u0439\u043b",path:"author.email"},width:"190px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}],a=[{top:{name:(0,i.t)("Price OUT"),align:"end",getData:function(e){var n;return(0,t.__)(Number((null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.in)||0))}},bottom:{name:(0,i.t)("Price IN"),align:"end",getData:function(e){var n;return(0,t.__)(Number((null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.out)||0))}},width:"170px",action:"valueByPath"},{top:{name:(0,i.t)("comment"),align:"start",path:"description"},width:"150px",action:"valueByPath"}],d=[{top:{name:(0,i.t)("batch")},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("warehouse"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,i.t)("code"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:(0,i.t)("Stock"),align:"end",getData:function(e){return e.stock||0}},bottom:{name:(0,i.t)("Reserved"),align:"end",getData:function(e){return e.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("Awaiting"),align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.awaiting)||0}},bottom:{name:(0,i.t)("Lost"),align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,i.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}].concat(a)}}]);
//# sourceMappingURL=226.e806e182.chunk.js.map