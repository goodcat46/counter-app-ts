"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[427],{3427:function(e,r,n){n.r(r);var l,o=n(168),a=n(1413),s=n(9439),t=n(4925),d=n(2791),i=n(2360),u=n(5611),c=n(9656),p=n(4990),m=n(6681),Z=n(1819),x=n(9964),b=n(6522),h=n(2989),j=n(3423),v=n(457),f=n(867),C=n(8105),y=n(7824),S=n(959),T=n(1383),E=n(3329),g=["defaultState"],P=["businessSubjectType","type"],G=(0,i.ZP)(c.Z)(l||(l=(0,o.Z)([""])));r.default=function(e){var r,n,l,o,i,c=e.defaultState,I=(0,t.Z)(e,g),N=(0,Z.xc)()[y.d.permissions],w=(0,d.useState)(!1),k=(0,s.Z)(w,2),q=k[0],L=k[1],F=(0,h.hN)({defaultValues:(0,a.Z)({businessSubjectType:u.GE.company},c),reValidateMode:"onBlur",shouldUnregister:!0}),V=F.register,M=F.unregister,O=F.formState.errors,U=F.handleSubmit,W=F.formValues,_=W.businessSubjectType,A=W.type,B=(0,t.Z)(W,P),H=F.registerSelect,J=F.setValue,R=(0,d.useMemo)((function(){return{renderOwnershipTypeSelect:_===u.GE.company,renderLabelInput:_&&[u.GE.company,u.GE.entrepreneur].includes(_),renderNamesInputs:_&&[u.GE.person,u.GE.entrepreneur].includes(_),renderPersonalTaxCode:_&&[u.GE.person,u.GE.entrepreneur].includes(_),renderTaxCode:_&&[u.GE.company,u.GE.entrepreneur].includes(_),renderAttractionSourceSelect:A===f.I.CUSTOMER}}),[A,_]);return(0,E.jsx)(G,(0,a.Z)((0,a.Z)({fillHeight:!0,width:"480px"},I),{},{isLoading:q,onSubmit:U((function(e){console.log({formValues:B}),N.createCompany({data:(0,S.vg)(e),onSuccess:function(e){console.log("Company created",e),T.kl.success("Company created: ".concat((null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label))),(null===I||void 0===I?void 0:I.onClose)&&(null===I||void 0===I||I.onClose())},onError:function(){T.kl.error("Error")},onLoading:L}).then()}),(function(e){console.error("FormCreateCompany",e)})),children:(0,E.jsxs)(C.C,{flex:1,fillWidth:!0,padding:"8px 4px",overflow:"auto",children:[(0,E.jsx)(p.Z,{label:(0,b.t)("businessSubjectType"),error:O.businessSubjectType,required:!0,children:(0,E.jsx)(x.Z,{options:v.Wk,currentOption:{value:_},onSelect:function(e){var r=e.value;J("businessSubjectType",r),r!==u.GE.company&&M("ownershipType")}})}),R.renderOwnershipTypeSelect&&(0,E.jsx)(j.Z,(0,a.Z)({},H("ownershipType",{options:v.YJ,label:"\u0424\u043e\u0440\u043c\u0430 \u0432\u043b\u0430\u0441\u043d\u043e\u0441\u0442\u0456",placeholder:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0444\u043e\u0440\u043c\u0443 \u0432\u043b\u0430\u0441\u043d\u043e\u0441\u0442\u0456 \u043a\u043e\u043c\u043f\u0430\u043d\u0456\u0457"}))),R.renderNamesInputs&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(p.Z,{label:(0,b.t)("name"),error:null===(r=O.name)||void 0===r?void 0:r.first,required:!0,children:(0,E.jsx)(m.ZP,(0,a.Z)((0,a.Z)({placeholder:(0,b.t)("Insert first name")},V("name.first")),{},{required:!0,autoFocus:R.renderNamesInputs}))}),(0,E.jsx)(p.Z,{label:(0,b.t)("secondName"),error:null===O||void 0===O||null===(n=O.name)||void 0===n?void 0:n.second,children:(0,E.jsx)(m.ZP,(0,a.Z)({placeholder:(0,b.t)("insertSecondName")},V("name.second")))}),(0,E.jsx)(p.Z,{label:(0,b.t)("Middle name"),error:null===O||void 0===O||null===(l=O.name)||void 0===l?void 0:l.middle,children:(0,E.jsx)(m.ZP,(0,a.Z)({placeholder:(0,b.t)("Insert middle name")},V("name.middle")))})]}),R.renderLabelInput&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(p.Z,{label:(0,b.t)("Label"),error:null===(o=O.label)||void 0===o?void 0:o.base,required:!R.renderNamesInputs,children:(0,E.jsx)(m.ZP,(0,a.Z)((0,a.Z)({placeholder:(0,b.t)("insertLabel")},V("label.base")),{},{required:!R.renderNamesInputs,autoFocus:!R.renderNamesInputs}))}),(0,E.jsx)(p.Z,{label:(0,b.t)("Print label"),error:null===(i=O.label)||void 0===i?void 0:i.print,children:(0,E.jsx)(m.ZP,(0,a.Z)({placeholder:(0,b.t)("Enter print label")},V("label.print")))})]}),(0,E.jsx)(p.Z,{label:"\u0415\u043c\u0435\u0439\u043b (\u043e\u0441\u043d\u043e\u0432\u043d\u0438\u0439)",error:O.email,required:!0,children:(0,E.jsx)(m.ZP,(0,a.Z)((0,a.Z)({placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043e\u0441\u043d\u043e\u0432\u043d\u0438\u0439 \u0435\u043c\u0435\u0439\u043b"},V("email")),{},{type:"email",required:!0}))}),(0,E.jsx)(p.Z,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d (\u043e\u0441\u043d\u043e\u0432\u043d\u0438\u0439)",error:O.phone,children:(0,E.jsx)(m.ZP,(0,a.Z)({placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043e\u0441\u043d\u0438\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0438\u0439 \u043d\u043e\u043c\u0435\u0440"},V("phone")))}),R.renderTaxCode&&(0,E.jsx)(p.Z,{label:(0,b.t)("taxCode"),error:O.taxCode,children:(0,E.jsx)(m.ZP,(0,a.Z)({placeholder:(0,b.t)("taxCode")},V("taxCode")))}),R.renderPersonalTaxCode&&(0,E.jsx)(p.Z,{label:(0,b.t)("personalTaxCode"),error:O.taxCode,children:(0,E.jsx)(m.ZP,(0,a.Z)({placeholder:(0,b.t)("personalTaxCode")},V("personalTaxCode")))})]})}))}}}]);
//# sourceMappingURL=427.b88f9b4d.chunk.js.map