"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[670],{4670:function(n,e,t){t.r(e),t.d(e,{default:function(){return H}});var o,i,l=t(168),r=t(1413),a=t(3933),c=t(1680),d=t(7188),u=t(2360),s=t(7348),f=t(749),p=t(8500),h=t(2791),v=t(8553),b=function(){var n=(0,f.TL)(),e=(0,s.cM)(),t=(0,h.useMemo)((function(){return{create:function(e){return n((0,p.c)((0,v.y)(e)))},deleteById:function(e){return n((function(){}))},editById:function(e){return n((function(){}))},getById:function(e){return n((function(){}))},getAll:function(e){return n((0,p.S)((0,v.y)(e)))}}}),[n]);return(0,r.Z)({dispatch:n,state:e},t)},m=function(){var n=(0,f.CG)(),e=n.counts,t=n.categories;return[{label:"\u0422\u0438\u043f",data:[{_id:"ds6d5vf6sd5f1v6sd",name:"INCOME",label:"\u0414\u041e\u0425\u0406\u0414"},{_id:"ds6d5vf6sd6f1v61d",name:"TRANSFER",label:"\u041f\u0415\u0420\u0415\u041a\u0410\u0417"},{_id:"ds6d5vf6dd6f1v68d",name:"EXPENSE",label:"\u0412\u0418\u0422\u0420\u0410\u0422\u0418"}],selectorName:"type"},{label:"\u0420\u0430\u0445\u0443\u043d\u043a\u0438",data:e.counts,selectorName:"counts"},{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457",data:t.categories,selectorName:"categories"}]},Z=t(4354),x=t(4961),g=t(4925),C=t(5114),y=t(4990),S=t(6681),j=t(6727),P=t(4695),O=t(1134),I=t(4343),M=t(3423),N=t(2322),E=t(9439),_=t(8409),k=function(n){var e=(0,h.useState)({parentList:[],treeData:{},loading:!1,error:null}),t=(0,E.Z)(e,2),o=t[0],i=t[1];return(0,h.useMemo)((function(){(0,_.h)(n,{onSuccess:function(n){return i((function(e){return(0,r.Z)((0,r.Z)({},e),{},{treeData:n})}))},onError:function(n){return i((function(e){return(0,r.Z)((0,r.Z)({},e),{},{error:n})}))},onLoading:function(n){return i((function(e){return(0,r.Z)((0,r.Z)({},e),{},{loading:n})}))}})}),[n]),(0,h.useMemo)((function(){return i((function(e){return(0,r.Z)((0,r.Z)({},e),{},{parentList:n.filter((function(n){return!n.owner}))})}))}),[n]),o},w=t(8095),R=t(184),T=["edit","onSubmit","onSubmitEdit","copy","defaultState"],F=j.Ry().shape({_id:j.Z_(),label:j.Z_(),owner:j.Ry().shape({_id:j.Z_(),label:j.Z_()}).optional().nullable()}).nullable(),D=j.Ry().shape({countIn:F,subCountIn:F}),z=u.ZP.div(o||(o=(0,l.Z)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 12px;\n"])),(function(n){return n.gridTemplateColumns||"1fr 120px"})),A=function(n){n.edit;var e,t,o,i=n.onSubmit,l=n.onSubmitEdit,a=(n.copy,n.defaultState),c=(0,g.Z)(n,T),d=(0,f.CG)(),u=d.counts.counts,s=d.categories.categories,p=k(u),b=k(s),m=(0,O.cI)({defaultValues:(0,r.Z)({currency:"UAH"},a),resolver:(0,P.X)(D),reValidateMode:"onSubmit"}),Z=m.formState.errors,x=m.register,j=m.setValue,E=m.watch,_=m.unregister,F=m.handleSubmit,A=E(),B=(0,h.useCallback)((function(n,e,t){var o;return(0,r.Z)({onSelect:function(e,t){j(n,e)},name:n,selectValue:A[n],onClear:function(){var o;A[n]&&(_(n),null!==t&&void 0!==t&&t.childName&&(o=null===t||void 0===t?void 0:t.childName,_(o)),null===e||void 0===e||!e.options||e.options.length)},disabled:!(null!==e&&void 0!==e&&e.options)||0===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.length)},e)}),[A,j,_]),V=(0,h.useMemo)((function(){var n,e,t=p.parentList,o=p.treeData,i=null!==(n=A.countIn)&&void 0!==n&&n._id?o[null===(e=A.countIn)||void 0===e?void 0:e._id]:void 0;return A.type&&["INCOME","TRANSFER"].includes(A.type)?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(M.Z,(0,r.Z)({label:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a IN",placeholder:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a IN"},B("countIn",{options:t},{childName:"subCountIn"}))),(0,R.jsx)(M.Z,(0,r.Z)({label:"\u0421\u0443\u0431-\u0440\u0430\u0445\u0443\u043d\u043e\u043a IN",placeholder:"\u0421\u0443\u0431-\u0440\u0430\u0445\u0443\u043d\u043e\u043a IN"},B("subCountIn",{options:i})))]}):null}),[p,null===(e=A.countIn)||void 0===e?void 0:e._id,A.type,B]),H=(0,h.useMemo)((function(){var n,e,t=p.parentList,o=p.treeData,i=null!==(n=A.countOut)&&void 0!==n&&n._id?o[null===(e=A.countOut)||void 0===e?void 0:e._id]:void 0;return A.type&&["EXPENSE","TRANSFER"].includes(A.type)?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(M.Z,(0,r.Z)({label:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a OUT",placeholder:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a OUT"},B("countOut",{options:t,error:Z.countOut},{childName:"subCountOut"}))),(0,R.jsx)(M.Z,(0,r.Z)({label:"\u0421\u0443\u0431-\u0440\u0430\u0445\u0443\u043d\u043e\u043a OUT",placeholder:"\u0421\u0443\u0431-\u0440\u0430\u0445\u0443\u043d\u043e\u043a OUT"},B("subCountOut",{options:i,error:Z.subCountOut})))]}):null}),[p,Z.countOut,Z.subCountOut,null===(t=A.countOut)||void 0===t?void 0:t._id,A.type,B]),U=(0,h.useMemo)((function(){var n,e,t=b.parentList,o=b.treeData,i=null!==(n=A.category)&&void 0!==n&&n._id?o[null===(e=A.category)||void 0===e?void 0:e._id]:void 0;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(M.Z,(0,r.Z)({label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",placeholder:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"},B("category",{options:t}))),(0,R.jsx)(M.Z,(0,r.Z)({label:"\u041f\u0456\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",placeholder:"\u041f\u0456\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"},B("subCategory",{options:i})))]})}),[b,null===(o=A.category)||void 0===o?void 0:o._id,B]);return(0,R.jsx)(C.Z,(0,r.Z)((0,r.Z)({onSubmit:F((function(n){var e="INCOME"===A.type&&["countOut","subCountOut"]||"EXPENSE"===A.type&&["countIn","subCountIn"]||[],t=(0,N.hJ)(n,e,"transactionDate");console.log("trReqData",t),i&&i((0,v.P)({data:t})),l&&null!==a&&void 0!==a&&a._id&&l((0,v.P)({_id:null===a||void 0===a?void 0:a._id,data:t}))})),onOptSelect:function(n){var e=n.value;return e&&j("type",e)}},c),{},{children:(0,R.jsxs)(w.ZP,{className:"inputs",flex:"1",fillWidth:!0,maxHeight:"100%",padding:"12px",overflow:"auto",children:[(0,R.jsx)(y.Z,{label:"\u0414\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",direction:"vertical",children:(0,R.jsx)(S.ZP,(0,r.Z)({placeholder:"\u0414\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",type:"datetime-local"},x("transactionDate")))}),(0,R.jsxs)(z,{children:[(0,R.jsx)(y.Z,{label:"\u0421\u0443\u043c\u0430",direction:"vertical",children:(0,R.jsx)(S.ZP,(0,r.Z)({placeholder:"\u0421\u0443\u043c\u0430"},x("amount")))}),(0,R.jsx)(y.Z,{label:"\u0412\u0430\u043b\u044e\u0442\u0430",direction:"vertical",children:(0,R.jsx)(S.ZP,(0,r.Z)((0,r.Z)({placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430"},x("currency")),{},{disabled:!0}))})]}),V,H,U,(0,R.jsx)(y.Z,{label:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442",direction:"vertical",disabled:!0,children:(0,R.jsx)(S.ZP,{placeholder:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442",disabled:!0})}),(0,R.jsx)(y.Z,{label:"\u041f\u0440\u043e\u0454\u043a\u0442",direction:"vertical",disabled:!0,children:(0,R.jsx)(S.ZP,{placeholder:"\u041f\u0440\u043e\u0454\u043a\u0442",disabled:!0})}),(0,R.jsx)(y.Z,{label:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442",direction:"vertical",disabled:!0,children:(0,R.jsx)(S.ZP,{placeholder:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442",disabled:!0})}),(0,R.jsx)(y.Z,{label:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",direction:"vertical",children:(0,R.jsx)(I.Z,(0,r.Z)({placeholder:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440"},x("comment")))})]})}))},B=t(9254),V=u.ZP.div(i||(i=(0,l.Z)(["\n  ","\n"])),c.VU),H=function(n){var e=n.path,t=b(),o=t.state,i=t.getAll,l=m(),c=function(n){var e=(0,Z.f9)();return(0,h.useCallback)((function(t){var o,i,l;return[{name:"editTr",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",icon:"edit",disabled:!(null!==(o=t.selectedRow)&&void 0!==o&&o._id),type:"onlyIcon",onClick:function(){e.handleOpenModal({ModalChildren:A,modalChildrenProps:{title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",filterOptions:x.MN,onSubmitEdit:n.editById,fillHeight:!0}})}},{name:"copyTr",title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",icon:"copy",type:"onlyIcon",disabled:!(null!==(i=t.selectedRow)&&void 0!==i&&i._id),onClick:function(){e.handleOpenModal({ModalChildren:A,modalChildrenProps:{title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",filterOptions:x.MN,onSubmit:n.create,fillHeight:!0}})}},{name:"deleteTr",title:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457",icon:"delete",iconSize:"90%",type:"onlyIcon",disabled:!(null!==(l=t.selectedRow)&&void 0!==l&&l._id),onClick:function(){n.deleteById({data:{id:"id"},onSuccess:function(n){console.log(n)}})}},{separator:!0},{name:"createIncomeTr",title:"\u0414\u043e\u0445\u0456\u0434",icon:"INCOME",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){e.handleOpenModal({ModalChildren:A,modalChildrenProps:{title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043d\u043e\u0432\u0443",filterOptions:x.MN,defaultOption:0,defaultState:{type:"INCOME"},onSubmit:n.create,fillHeight:!0}})}},{name:"createTransferTr",title:"\u041f\u0435\u0440\u0435\u043a\u0430\u0437 \u043c\u0456\u0436 \u0440\u0430\u0445\u0443\u043d\u043a\u0430\u043c\u0438",icon:"TRANSFER",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){e.handleOpenModal({ModalChildren:A,modalChildrenProps:{title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043d\u043e\u0432\u0443",filterOptions:x.MN,defaultOption:1,defaultState:{type:"TRANSFER"},onSubmit:n.create,fillHeight:!0}})}},{name:"createExpenseTr",title:"\u0412\u0438\u0442\u0440\u0430\u0442\u0430",icon:"EXPENSE",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){e.handleOpenModal({ModalChildren:A,modalChildrenProps:{title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043d\u043e\u0432\u0443",filterOptions:x.MN,defaultOption:2,defaultState:{type:"EXPENSE"},onSubmit:n.create,fillHeight:!0}})}}]}),[e,n])}(t);(0,h.useEffect)((function(){i((0,v.P)())}),[i]);var u=(0,h.useMemo)((function(){return{tableData:o.transactions,tableTitles:d.yV,tableSearchParams:d.wo.filter((function(n){return n.search})),tableSortParams:d.wo.filter((function(n){return n.sort})),filterSelectors:l,isFilter:!0,isSearch:!0,footer:!0,checkBoxes:!0,actionsCreator:c,onFilterSubmit:function(n){},onRowClick:function(n){}}}),[c,l,o.transactions]);return(0,R.jsx)(B.default,{path:e,children:(0,R.jsx)(V,{children:(0,R.jsx)(a.ZP,(0,r.Z)({},u))})})}},1680:function(n,e,t){t.d(e,{SI:function(){return d},VU:function(){return c}});var o,i,l,r=t(168),a=t(2360),c=(0,a.iv)(o||(o=(0,r.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),d=(0,a.iv)(i||(i=(0,r.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,a.iv)(l||(l=(0,r.Z)(["\n  outline: 1px solid tomato;\n"])))},3423:function(n,e,t){var o,i,l,r,a,c,d=t(168),u=t(1413),s=t(9439),f=t(4925),p=t(4990),h=t(2791),v=t(763),b=t(2360),m=t(8095),Z=t(4109),x=t(6382),g=t(184),C=["InputComponent","inputProps","labelProps","selectValue","keepOpen","valueKey","id","options","name","open","onSelect","onClear","fieldMode"],y=function(n,e){n.InputComponent;var t=n.inputProps,o=void 0===t?{}:t,i=n.labelProps,l=void 0===i?{}:i,r=n.selectValue,a=n.keepOpen,c=n.valueKey,d=n.id,b=n.options,y=(n.name,n.open),N=void 0!==y&&y,E=n.onSelect,_=n.onClear,k=n.fieldMode,w=(0,f.Z)(n,C),R=(0,h.useState)(r),T=(0,s.Z)(R,2),F=T[0],D=T[1],z=(0,h.useState)(a||N),A=(0,s.Z)(z,2),B=A[0],V=A[1],H=(0,h.useRef)(null),U=(0,h.useMemo)((function(){return(0,x.x0)(5)}),[]),L=(0,h.useCallback)((function(){!a&&V((function(n){return!n}))}),[a]),X=(0,h.useCallback)((function(n){return null===b||void 0===b?void 0:b.some((function(e){return(null===e||void 0===e?void 0:e._id)===(null===n||void 0===n?void 0:n._id)}))}),[b]),W=(0,h.useCallback)((function(n){if(b&&0!==(null===b||void 0===b?void 0:b.length))return function(){D(n),E&&c&&c&&n[c]?E(n,n[c]):(E&&E(n,null===n||void 0===n?void 0:n.value),L())}}),[L,E,b,c]),G=(0,h.useCallback)((function(){D(void 0),V(!1),_&&_()}),[_]),K=(0,h.useMemo)((function(){return null===b||void 0===b?void 0:b.map((function(n){return(0,g.jsx)(j,{onClick:W(n),justifyContent:"flex-start",fillWidth:!0,fxDirection:"row",padding:"5px 8px",isActive:(null===n||void 0===n?void 0:n._id)===(null===F||void 0===F?void 0:F._id),children:n.label||n.name},n._id)}))}),[null===F||void 0===F?void 0:F._id,W,b]);return(0,h.useEffect)((function(){var n=X(r);return r&&n?D(r):r&&n?void 0:D(void 0)}),[X,r]),(0,g.jsxs)(m.ZP,{fillWidth:!0,style:{position:"relative"},"data-select":d||U,children:[(0,g.jsx)(m.ZP,{fillWidth:!0,style:{position:"relative"},children:(0,g.jsx)(p.Z,(0,u.Z)((0,u.Z)((0,u.Z)({direction:"vertical",ref:H},(0,v.pick)(w,["error","success","helperText","loading","label","id","uppercase","align","direction","disabled"])),l),{},{children:(0,g.jsxs)(P,{fieldMode:k,error:!!w.error,success:!!w.success,children:[(0,g.jsx)(O,(0,u.Z)((0,u.Z)({disabled:!k,value:(null===F||void 0===F?void 0:F.label)||(null===F||void 0===F?void 0:F.name)||"",ref:e},(0,v.omit)((0,u.Z)({},(0,v.pick)(w,["".concat(k?"onChange":""),"onBlur","name","id","ref","placeholder"])),["error","success","loading"])),o)),(0,g.jsxs)(M,{fxDirection:"row",gap:6,fillHeight:!0,alignItems:"center",padding:"0 8px 0 0",children:[_&&F&&(0,g.jsx)(Z.Z,{variant:"onlyIconNoEffects",className:"clearBtn",icon:"close",size:"20px",onClick:G}),(0,g.jsx)(Z.Z,{variant:"onlyIconNoEffects",className:"clearBtn",icon:B?"SmallArrowUp":"SmallArrowDown",size:"24px",iconSize:"100%",onClick:L})]})]})}))}),(0,g.jsx)(S,{isOpen:B,children:(0,g.jsx)(m.ZP,{fillWidth:!0,overflow:"auto",children:b&&(null===b||void 0===b?void 0:b.length)>0?K:(0,g.jsx)(I,{fillWidth:!0,fxDirection:"row",alignItems:"center",justifyContent:"center",children:"\u041e\u043f\u0446\u0456\u0457 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456"})})})]})},S=(0,b.ZP)(m.ZP)(o||(o=(0,d.Z)(["\n  // position: absolute;\n  // top: calc(100% + 4px);\n  // left: 0;\n  // z-index: ",";\n  font-size: 14px;\n\n  max-height: ",";\n  opacity: ",";\n  width: 100%;\n  overflow: hidden;\n\n  margin-top: 4px;\n\n  border-radius: 2px;\n  background-color: ",";\n  transition: all ",";\n"])),(function(n){return n.isOpen?100:10}),(function(n){return n.isOpen?"120px":0}),(function(n){return n.isOpen?1:0}),(function(n){return n.theme.fieldBackgroundColor}),(function(n){return n.theme.globals.timingFunctionMain})),j=(0,b.ZP)(m.X1)(i||(i=(0,d.Z)(["\n  min-height: 28px;\n\n  font-weight: ",";\n"])),(function(n){return n.isActive?700:""})),P=b.ZP.fieldset(l||(l=(0,d.Z)(["\n  flex: 1;\n\n  display: flex;\n  align-items: center;\n\n  padding: 0;\n  margin: 0;\n\n  width: 100%;\n  min-height: 28px;\n\n  color: ",";\n\n  background-color: ",";\n  border-radius: 2px;\n\n  border: 1px solid\n    ",";\n\n  &:hover {\n    border-color: ",";\n    //box-shadow: 0 0 3px ",";\n  }\n\n  &:focus,\n  &:focus-visible {\n    border-color: ",";\n    //box-shadow: 0 0 5px ",";\n    outline: 1px solid ",";\n  }\n\n  &::placeholder {\n    font-size: inherit;\n    color: ",";\n  }\n\n  //transition: border-color ",";\n\n  &[disabled] {\n    pointer-events: none;\n    opacity: 70%;\n  }\n\n  @media screen and (max-width: 480px) {\n    height: 34px;\n    font-size: 16px;\n  }\n"])),(function(n){var e=n.error,t=n.success,o=n.theme;return e&&o.globals.colors.error||t&&o.globals.colors.success||"inherit"}),(function(n){var e=n.theme,t=n.fieldMode;return(void 0===t?"true":t)?e.field.backgroundColor:"transparent"}),(function(n){var e=n.error,t=n.success,o=n.fieldMode,i=void 0===o?"true":o,l=n.theme;return e&&l.globals.colors.error||t&&l.globals.colors.success||i&&l.field.backgroundColor||l.input.borderColor}),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.globals.inputPlaceholderColor}),(function(n){return n.theme.globals.timingFunctionMain})),O=b.ZP.input(r||(r=(0,d.Z)(["\n  flex: 1;\n  height: 100%;\n\n  padding: 4px 8px;\n  color: inherit;\n  font-weight: 500;\n\n  background-color: transparent;\n  border-radius: 0;\n  border: 0;\n  outline: none;\n\n  &:hover,\n  &:focus,\n  &:focus-visible {\n    outline: none;\n  }\n"]))),I=(0,b.ZP)(m.ZP)(a||(a=(0,d.Z)(["\n  min-height: 28px;\n\n  font-weight: 700;\n  line-height: 1.3;\n"]))),M=(0,b.ZP)(m.ZP)(c||(c=(0,d.Z)(["\n  //position: absolute;\n  //top: 50%;\n  //right: 4px;\n  //z-index: 5;\n  //transform: translateY(-50%);\n\n  max-height: 100%;\n\n  color: ",";\n  fill: ",";\n"])),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.accentColor.base}));e.Z=(0,h.memo)((0,h.forwardRef)(y))}}]);
//# sourceMappingURL=670.7535bb9b.chunk.js.map