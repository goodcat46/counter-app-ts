{"version":3,"file":"static/js/882.17dd6dd3.chunk.js","mappings":"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","sources":["hooks/useProductsFilterSelectors.hook.ts","hooks/useOffersActionsCreator.hook.ts","components/AppPages/offers/PageOffers.tsx","components/AppPages/pagesStyles.tsx","components/Modals/EditOfferModal.tsx"],"sourcesContent":["import { FilterSelectorType } from 'components/Filter/AppFilter';\nimport { OfferEntity } from '../types/offers/offers.types';\n\nconst useStorageFilterSelectors = (): FilterSelectorType<keyof OfferEntity>[] => {\n  return [\n    // {\n    //   label: 'Рахунок OUT',\n    //   data: dirCounts.directory,\n    //   selectorName: 'countOut',\n    //   dirType: ApiDirType.COUNTS,\n    // },\n    // {\n    //   label: 'Суб-рахунок OUT',\n    //   data: dirCounts.directory,\n    //   selectorName: 'subCountOut',\n    //   dirType: ApiDirType.COUNTS,\n    // },\n    // {\n    //   label: 'Рахунок IN',\n    //   data: dirCounts.directory,\n    //   selectorName: 'countIn',\n    //   dirType: ApiDirType.COUNTS,\n    // },\n    // {\n    //   label: 'Суб-рахунок IN',\n    //   data: dirCounts.directory,\n    //   selectorName: 'subCountIn',\n    //   dirType: ApiDirType.COUNTS,\n    // },\n    // {\n    //   label: 'Категорії',\n    //   data: dirCategories.directory,\n    //   selectorName: 'category',\n    //   dirType: ApiDirType.CATEGORIES_TR,\n    // },\n    // {\n    //   label: 'Під-категорії',\n    //   data: dirCategories.directory,\n    //   selectorName: 'subCategory',\n    //   dirType: ApiDirType.CATEGORIES_TR,\n    // },\n  ];\n};\nexport default useStorageFilterSelectors;\n","import { useModalProvider } from '../Providers/ModalProvider/ModalProvider';\nimport { useCallback } from 'react';\nimport { TableActionsCreator } from '../components/TableList/tableTypes.types';\nimport { OfferEntity } from '../types/offers/offers.types';\nimport { ServiceName, useAppServiceProvider } from './useAppServices.hook';\nimport { t } from '../lang';\nimport EditOfferModal from '../components/Modals/EditOfferModal';\nimport CreateOfferModal from '../components/Modals/CreateOfferModal';\nimport { useAppRouter } from './useRouter.hook';\nimport { useOffersSelector } from '../redux/selectors.store';\nimport { UseLoadersReturn } from '../Providers/Loaders/useLoaders.hook';\n\nexport type OffersActionsCreator = TableActionsCreator<OfferEntity>;\n\nexport const useOffersActionsCreator = ({\n  loaders,\n}: { loaders?: UseLoadersReturn<'refresh' | 'offer'> } = {}): OffersActionsCreator => {\n  const service = useAppServiceProvider().get(ServiceName.offers);\n  const router = useAppRouter();\n  const modals = useModalProvider();\n  const stateMap = useOffersSelector().dataMap;\n\n  return useCallback(\n    ctx => {\n      const currentId = ctx.selectedRow?._id;\n      const Offer = currentId ? stateMap?.[currentId] : undefined;\n\n      return [\n        {\n          name: 'refreshData',\n          title: t('Refresh data'),\n          icon: 'refresh',\n          type: 'onlyIcon',\n          onClick: () => {\n            service.getAll({\n              data: { refresh: true },\n              onLoading: loaders ? loaders.onLoading('refresh') : ctx.onRefresh,\n            });\n          },\n        },\n        { separator: true },\n\n        {\n          name: 'review',\n          title: 'Перегляд продукту',\n          icon: 'openInNew',\n          disabled: !currentId,\n          type: 'onlyIcon',\n          navTo: `/app/${router.params.permissionId}/offers/` + currentId,\n        },\n\n        {\n          name: 'edit',\n          title: 'Змінити',\n          icon: 'edit',\n          iconSize: '90%',\n          type: 'onlyIcon',\n          disabled: !currentId,\n          onClick: () => {\n            if (Offer) {\n              modals.create(EditOfferModal, {\n                offer: Offer,\n              });\n            } else if (currentId) {\n              service.getOne({\n                data: { data: { params: { _id: currentId } } },\n                onLoading: loaders ? loaders.onLoading('offer') : ctx.onRefresh,\n                onSuccess: ({ data }) => {\n                  // router.push({ query: { offerId: data._id } });\n\n                  modals.create(EditOfferModal, {\n                    offer: data,\n                  });\n                },\n              });\n            }\n          },\n        },\n        {\n          name: 'copy',\n          title: 'Копіювати',\n          icon: 'copy',\n          iconSize: '90%',\n          type: 'onlyIcon',\n          disabled: !Offer,\n          onClick: () => {\n            Offer &&\n              modals.create(EditOfferModal, {\n                offer: Offer,\n                copy: true,\n              });\n          },\n        },\n        {\n          name: 'archiveProduct',\n          title: 'Архів',\n          icon: 'archive',\n          iconSize: '90%',\n          type: 'onlyIcon',\n          disabled: true,\n        },\n        { separator: true },\n        {\n          name: 'createProduct',\n          title: 'Новий',\n          icon: 'plus',\n          iconSize: '90%',\n          type: 'onlyIconFilled',\n          disabled: false,\n          onClick: () => {\n            modals.create(CreateOfferModal);\n          },\n        },\n      ];\n    },\n\n    [loaders, modals, router, service, stateMap]\n  );\n};\n\nexport default useOffersActionsCreator;\n\n// const currentProduct=useProductsSelector().currentProduct\n\n// const onSubmitCreateWrapper = useCallback(\n//   (onCloseModal: () => void) => {\n//     return (data: ITransactionReqData, options: AfterFormSubmitOptions,) => {\n//       service.create({\n//         data,\n//         onSuccess(d) {\n//           toast.success(`Сторено транзакцію на суму: ${d.amount}`);\n//           options?.close && onCloseModal();\n//         },\n//       });\n//     };\n//   },\n//   [service]\n// );\n","import TableList from 'components/TableList/TableList';\nimport { takeFullGridArea } from '../pagesStyles';\nimport styled from 'styled-components';\nimport { useEffect, useMemo, useState } from 'react';\nimport { ITableListProps, TableSortOrderEnum } from '../../TableList/tableTypes.types';\nimport AppGridPage from '../AppGridPage';\nimport { useOffersSelector } from '../../../redux/selectors.store';\nimport { GetAllOffersQuery } from '../../../api';\nimport { OfferEntity } from '../../../types/offers/offers.types';\nimport useProductsFilterSelectorsHook from '../../../hooks/useProductsFilterSelectors.hook';\nimport useOffersActionsCreator from '../../../hooks/useOffersActionsCreator.hook';\nimport { BaseAppPageProps } from '../index';\nimport {\n  OfferSearchParam,\n  OfferSortParam,\n  offersSearchParams,\n  offersSortParams,\n  offersTableColumns,\n} from '../../../data';\nimport { useLoaders } from '../../../Providers/Loaders/useLoaders.hook';\nimport { TableSearchFormState } from '../../TableList/TableOverHead/TableSearchForm/TableSearchForm';\nimport { useAppServiceProvider } from '../../../hooks/useAppServices.hook';\nimport { AppModuleName } from '../../../redux/reduxTypes.types';\nimport { setValueByPath } from '../../../utils';\n\ninterface Props extends BaseAppPageProps {}\n\nconst PageOffers: React.FC<any> = (props: Props) => {\n  const { tableConfig, isLoading } = useOffersTableSettings({});\n\n  return (\n    <AppGridPage path={props.path}>\n      <Page>\n        <TableList {...tableConfig} showFooter isLoading={isLoading?.offers} />\n      </Page>\n    </AppGridPage>\n  );\n};\n\nconst Page = styled.div`\n  ${takeFullGridArea}\n`;\n\nexport default PageOffers;\n\nexport const useOffersTableSettings = ({\n  searchState,\n  sortState,\n}: {\n  searchState?: TableSearchFormState<OfferSearchParam>;\n  sortState?: { param: OfferSortParam; order: TableSortOrderEnum };\n}) => {\n  const loaders = useLoaders<'offers' | 'refresh' | 'offer'>({\n    offers: { content: 'Refreshing...' },\n    refresh: { content: 'Refreshing...' },\n    offer: { content: 'Refreshing...' },\n  });\n  const { onLoading, isLoading } = loaders;\n  const service = useAppServiceProvider().get(AppModuleName.offers);\n  const { getAll } = service;\n  const state = useOffersSelector();\n\n  const filterSelectors = useProductsFilterSelectorsHook();\n  const actionsCreator = useOffersActionsCreator({ loaders });\n\n  const [sortParams, setSortParams] = useState(sortState);\n  const [searchParams, setSearchParams] = useState<TableSearchFormState | undefined>(searchState);\n  // const [filterParams, setFilterParams] = useState<FilterReturnDataType>();\n\n  const tableConfig = useMemo(\n    (): ITableListProps<OfferEntity, OfferSearchParam, OfferSortParam> => ({\n      onSubmitSearch: data => {\n        if (data.search) {\n          const params: GetAllOffersQuery = {};\n\n          const path = data.param?.dataPath;\n          if (path && data.search) {\n            setValueByPath(path, data.search, params, { mutation: true });\n          }\n\n          setSearchParams(data);\n\n          getAll({\n            params,\n            onLoading: onLoading('offers'),\n          }).then();\n        } else {\n          getAll({\n            onLoading: onLoading('offers'),\n          }).then();\n        }\n      },\n      tableData: state.list,\n      tableTitles: offersTableColumns,\n      searchParams: offersSearchParams,\n      sortParams: offersSortParams,\n      filterSelectors,\n      hasFilter: true,\n      hasSearch: true,\n      showFooter: false,\n      checkBoxes: true,\n      actionsCreator,\n\n      onTableSortChange: (param, order) => {\n        setSortParams({ param, order });\n\n        console.log({ param, order });\n\n        getAll({\n          params: {\n            sortOrder: order,\n            sortPath: param.dataPath,\n          },\n\n          onLoading: onLoading('offers'),\n        }).then();\n      },\n    }),\n    [actionsCreator, filterSelectors, getAll, onLoading, state.list]\n  );\n\n  useEffect(() => {\n    if (state.list.length === 0) {\n      getAll({\n        onLoading: onLoading('offers'),\n      });\n    }\n\n    // eslint-disable-next-line\n  }, []);\n\n  return {\n    tableConfig,\n    isLoading,\n    sortParams,\n    // filterParams,\n    searchParams,\n  };\n};\n","import { css } from 'styled-components';\n\nexport const takeFullGridArea = css`\n  grid-column: 1/13;\n  grid-row: 1/13;\n`;\nexport const takeFullPlace = css`\n  width: 100%;\n  height: 100%;\n`;\nexport const tomatO = css`\n  outline: 1px solid tomato;\n`;\n","import { ModalFormProps } from '../ModalForm';\nimport { OfferDimensionsFormArea } from '../Forms/offers/dimensions/OfferDimensionsFormArea';\nimport ModalBase from '../atoms/Modal';\nimport { t } from '../../lang';\nimport { toOfferFormData } from '../../utils';\nimport { OfferEntity, OfferTypeEnum } from '../../types/offers/offers.types';\nimport { OfferMeasurementFormArea } from 'components/Forms/offers/measurement/OfferMeasurementFormArea';\nimport { OfferBaseInfoFormArea } from '../Forms/offers/OfferBaseInfoFormArea';\nimport FlexBox from '../atoms/FlexBox';\nimport { AppLoaderSpiner } from '../atoms/AppLoaderSpiner';\nimport { Text } from '../atoms/Text';\nimport { useLoaders } from '../../Providers/Loaders/useLoaders.hook';\nimport { LoadersProvider } from 'Providers/Loaders/LoaderProvider';\nimport { OfferFormPropertiesArea } from '../Forms/offers/properties/OfferFormPropertiesArea';\nimport { OfferFormImagesArea } from '../Forms/offers/images/OfferFormImagesArea';\nimport { useCurrentOffer } from '../../hooks';\nimport { OfferFormCategoriesArea } from '../Forms/offers/categories/OfferFormCategoriesArea';\nimport { OfferLoadersData, OfferLoadersKey } from '../Forms/offers/types';\nimport { OfferPriceFormArea } from '../Forms/pricing/OfferPriceFormArea';\n\nexport interface EditOfferModalProps extends ModalFormProps {\n  copy?: boolean;\n  offer: OfferEntity;\n}\n\nconst EditOfferModal: React.FC<EditOfferModalProps> = ({ onClose, offer, copy }) => {\n  const Offer = useCurrentOffer(offer);\n  // const service = useOffersService();\n  // const router = useAppRouter();\n\n  const loaders = useLoaders<OfferLoadersKey, OfferLoadersData>(\n    { offer_refresh: { content: 'Refreshing...' }, offer_update: { content: 'Updating...' } },\n    {\n      formData: Offer ? toOfferFormData(Offer) : { type: OfferTypeEnum.GOODS },\n    }\n  );\n\n  const { setData, state } = loaders;\n\n  const offerId = copy ? state.formData?._id : Offer?._id;\n\n  if (!Offer) {\n    return (\n      <ModalBase title={!copy ? t('Update offer') : t('Copy offer')} fillHeight>\n        <FlexBox fillWidth fillHeight padding={'26px'} alignItems={'center'} justifyContent={'center'}>\n          <Text $size={16} $weight={600}>\n            {t('Offer not found')}\n          </Text>\n        </FlexBox>\n      </ModalBase>\n    );\n  }\n\n  return (\n    <ModalBase fillHeight title={!copy ? t('Update offer') : t('Copy offer')} onClose={onClose}>\n      <LoadersProvider value={loaders}>\n        {loaders.isLoading?.offer ? (\n          <FlexBox fillWidth padding={'24px'} alignItems={'center'} gap={16}>\n            <AppLoaderSpiner size={52} />\n\n            <Text>{t('Loading info about offer...')}</Text>\n          </FlexBox>\n        ) : (\n          <FlexBox padding={'0 0 16px'}>\n            <OfferBaseInfoFormArea\n              _id={offerId}\n              edit={!copy}\n              type={state.formData?.type}\n              defaultValues={state?.formData}\n              onSuccess={({ data }) => {\n                setData('formData', copy ? { ...toOfferFormData(data), _id: data._id } : toOfferFormData(data));\n              }}\n            />\n\n            <OfferFormCategoriesArea\n              _id={offerId}\n              offer={Offer}\n              defaultValues={state.formData?.categories}\n              disabled={!state.formData}\n            />\n\n            <OfferFormPropertiesArea\n              _id={offerId}\n              offer={Offer}\n              defaultValues={state.formData?.properties}\n              disabled={!state.formData}\n            />\n\n            <OfferPriceFormArea\n              expandable={true}\n              isOpen={false}\n              offer={Offer}\n              defaultState={Offer?.price}\n              price={Offer?.price}\n              title={t('Price')}\n            />\n\n            <OfferFormImagesArea\n              offer={Offer}\n              defaultValues={state?.formData?.images}\n              disabled={!state?.formData}\n              _id={offerId}\n            />\n\n            <OfferDimensionsFormArea\n              offer={Offer}\n              defaultValues={state.formData?.dimensions}\n              disabled={copy ? !(state.formData?._id && state.formData) : !offerId}\n              _id={offerId}\n            />\n            <OfferMeasurementFormArea\n              offer={Offer}\n              defaultValues={state.formData?.measurement}\n              disabled={copy ? !(state.formData?._id && state.formData) : !offerId}\n              _id={offerId}\n            />\n          </FlexBox>\n        )}\n      </LoadersProvider>\n    </ModalBase>\n  );\n};\n\nexport default EditOfferModal;\n"],"names":["loaders","arguments","length","undefined","service","useAppServiceProvider","get","ServiceName","router","useAppRouter","modals","useModalProvider","stateMap","useOffersSelector","dataMap","useCallback","ctx","_ctx$selectedRow","currentId","selectedRow","_id","Offer","name","title","t","icon","type","onClick","getAll","data","refresh","onLoading","onRefresh","separator","disabled","navTo","concat","params","permissionId","iconSize","create","EditOfferModal","offer","getOne","onSuccess","_ref2","copy","CreateOfferModal","Page","styled","_templateObject","_taggedTemplateLiteral","takeFullGridArea","props","_useOffersTableSettin","useOffersTableSettings","tableConfig","isLoading","_jsx","AppGridPage","path","children","TableList","_objectSpread","showFooter","offers","_ref","searchState","sortState","useLoaders","content","AppModuleName","state","filterSelectors","useProductsFilterSelectorsHook","actionsCreator","useOffersActionsCreator","_useState","useState","_useState2","_slicedToArray","sortParams","setSortParams","_useState3","_useState4","searchParams","setSearchParams","useMemo","onSubmitSearch","search","_data$param","param","dataPath","setValueByPath","mutation","then","tableData","list","tableTitles","offersTableColumns","offersSearchParams","offersSortParams","hasFilter","hasSearch","checkBoxes","onTableSortChange","order","console","log","sortOrder","sortPath","useEffect","css","takeFullPlace","_templateObject2","_templateObject3","_state$formData","_loaders$isLoading","_state$formData2","_state$formData3","_state$formData4","_state$formData5","_state$formData6","_state$formData7","_state$formData8","_state$formData9","onClose","useCurrentOffer","offer_refresh","offer_update","formData","toOfferFormData","OfferTypeEnum","setData","offerId","ModalBase","fillHeight","LoadersProvider","value","_jsxs","FlexBox","fillWidth","padding","alignItems","gap","AppLoaderSpiner","size","Text","OfferBaseInfoFormArea","edit","defaultValues","OfferFormCategoriesArea","categories","OfferFormPropertiesArea","properties","OfferPriceFormArea","expandable","isOpen","defaultState","price","OfferFormImagesArea","images","OfferDimensionsFormArea","dimensions","OfferMeasurementFormArea","measurement","justifyContent","$size","$weight"],"sourceRoot":""}