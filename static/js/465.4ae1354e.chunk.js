"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[465],{2483:function(e,n,i){i.d(n,{j:function(){return v}});var t,o,r=i(168),l=i(1413),d=i(4781),a=i(2791),u=i(2360),c=i(8095),s=i(3329),v=function(e){var n=(0,d.on)(),i=(0,a.useCallback)((function(e){return function(i){i.target===i.currentTarget&&n.remove(e)}}),[n]),t=(0,a.useMemo)((function(){return n.getStack().map((function(e,t){var o=e.RenderComponent,r=e.props,d=e.id;return(0,s.jsx)(p,{className:"overlay-".concat(d),style:{zIndex:20+t},fillHeight:!0,fillWidth:!0,alignItems:"flex-end",onClick:i(d),children:(0,s.jsx)(o,(0,l.Z)((0,l.Z)({},r),{},{onClose:function(){n.remove(d)},overlayId:d,index:t}),"overlay-".concat(d))},"overlay-".concat(d))}))}),[i,n]);return(0,s.jsx)(f,{fillWidth:!0,fillHeight:!0,isActive:t.length>0,overflow:"hidden",children:t})},f=(0,u.ZP)(c.ZP)(t||(t=(0,r.Z)(["\n  position: absolute;\n\n  top: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  left: ",";\n\n  opacity: ",";\n  visibility: ",";\n  pointer-events: ",";\n\n  z-index: 20;\n\n  background-color: ",";\n\n  transition: all ",";\n"])),(function(e){return e.isActive?0:"100%"}),(function(e){return e.isActive?1:0}),(function(e){return e.isActive?"visible":"hidden"}),(function(e){return e.isActive?"all":"none"}),(function(e){return e.theme.backdropColor}),(function(e){return e.theme.globals.timingFunctionMain})),p=(0,u.ZP)(c.ZP)(o||(o=(0,r.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 20;\n\n  max-width: 360px;\n\n  animation: TransformFromRight;\n\n  @media screen and (max-width: 768px) {\n    max-width: 400px;\n  }\n"])))},4781:function(e,n,i){i.d(n,{on:function(){return c}});var t=i(1413),o=i(3433),r=i(9439),l=i(2791),d=i(6382),a=i(3329),u=(0,l.createContext)({}),c=function(){return(0,l.useContext)(u)};n.ZP=function(e){var n=e.children,i=(0,l.useState)([]),c=(0,r.Z)(i,2),s=c[0],v=c[1],f=(0,l.useCallback)((function(e){v((function(n){return n.filter((function(n){return n.id!==e}))}))}),[]),p=(0,l.useCallback)((function(){v([])}),[]),h=(0,l.useCallback)((function(e){var n="".concat(e.RenderComponent.name,"_").concat((0,d.x0)(8));return"function"===typeof e.RenderComponent&&v((function(i){var r=i.find((function(n){return n.id.includes(e.RenderComponent.name)}));if(r){var l=i.filter((function(e){var n,i;return(null===(n=e.RenderComponent)||void 0===n?void 0:n.name)!==(null===(i=r.RenderComponent)||void 0===i?void 0:i.name)}));return[].concat((0,o.Z)(l),[(0,t.Z)((0,t.Z)({},e),{},{id:n})])}return[].concat((0,o.Z)(i),[(0,t.Z)((0,t.Z)({},e),{},{id:n})])})),{onClose:function(){return f(n)},compId:n}}),[f]),m={getStack:function(){return s},remove:f,clearStack:p,open:h};return(0,a.jsx)(u.Provider,{value:m,children:n})}},1831:function(e,n,i){i.r(n),i.d(n,{default:function(){return ui},useOfferOverviewLoaders:function(){return di}});var t,o,r,l,d,a,u,c,s,v,f,p,h,m,x,g,b,Z,C,w,j,y,P,S=i(168),_=i(9439),k=i(2360),B=i(8495),D=i(6931),I=i(2791),A=i(1819),O=i(4716),M=i(3329),R=(0,I.createContext)({}),L=function(){return(0,I.useContext)(R)},T=function(e){var n=e.children,i=(0,A.xc)()[A.EJ.offers],t=di(),o=(0,O.Zx)(),r=null===o||void 0===o?void 0:o.offerId,l=(0,O.G2)({id:r});(0,I.useEffect)((function(){var e;null!==t&&void 0!==t&&null!==(e=t.isLoading)&&void 0!==e&&e.offer||r&&i.getOne({data:{params:{_id:r,getVariations:!1,getPrices:!1}},onLoading:t.onLoading("offer")}).catch()}),[r]);return(0,I.useEffect)((function(){return function(){i.clearCurrent(void 0)}}),[]),(0,M.jsx)(R.Provider,{value:{clearCurrent:function(){i.clearCurrent(void 0)},currentOffer:l},children:n})},E=i(4942),V=i(8553),W=i(6492),U=i(9953),N=i(8095),H=i(1413),$=i(7762),F=i(5188),z=i(400),G=i(401),q=i(7653),J=i(7578),K=i(4925),Y=i(7348),X=i(1383),Q=i(6757),ee=i(7121),ne=i(6727),ie=i(4695),te=i(4990),oe=i(6681),re=i(6522),le=i(4235),de=i(7533),ae=i(4109),ue=(t={},(0,E.Z)(t,de.b2.size,{numColumns:4}),(0,E.Z)(t,de.b2.color,{numColumns:2}),t),ce=(0,k.ZP)(N.ZP)(o||(o=(0,S.Z)(["\n  border-top: 1px solid ",";\n  &:last-child {\n    border-bottom: 1px solid ",";\n  }\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),se=(0,k.ZP)(N.ZP)(r||(r=(0,S.Z)(["\n  width: 100%;\n  display: grid;\n\n  grid-template-columns: repeat(",", 1fr);\n"])),(function(e){var n,i;return e.cmsKey&&null!==(n=null===(i=ue[e.cmsKey])||void 0===i?void 0:i.numColumns)&&void 0!==n?n:2})),ve=function(e){var n=e.item,i=e.isSelected,t=e.onSelect;return(0,M.jsx)(fe,{variant:i?"filledSmall":"outlinedSmall",padding:"6px 8px",fontWeight:500,onClick:function(){t&&t(n._id)},children:n.label})},fe=(0,k.ZP)(ae.Z)(l||(l=(0,S.Z)(["\n  width: 100%;\n  max-width: 100%;\n  min-width: 50px;\n"]))),pe=function(e){var n,i=e.item,t=e.selectedIds,o=void 0===t?[]:t,r=e.onSelect,l=(0,Y.nr)(),d=(0,I.useMemo)((function(){var e,n,t,d=null===i||void 0===i?void 0:i._id,a=[],u=null!==(e=null===(n=l.propertiesKeysMap)||void 0===n?void 0:n[d])&&void 0!==e?e:[],c=(0,$.Z)(u);try{for(c.s();!(t=c.n()).done;){var s,v=t.value,f=null===(s=l.propertiesDataMap)||void 0===s?void 0:s[v];f&&a.push(f)}}catch(p){c.e(p)}finally{c.f()}return null===a||void 0===a?void 0:a.map((function(e){var n=o.includes(e._id);return(0,M.jsx)(ve,{item:e,isSelected:n,onSelect:function(n){return r&&r(i._id,n,null===e||void 0===e?void 0:e.label)}},"prop-value-".concat(e._id))}))}),[i._id,r,o,l.propertiesDataMap,l.propertiesKeysMap]);return(0,M.jsxs)(ce,{gap:8,fillWidth:!0,padding:"8px 0 0",children:[(0,M.jsx)(W.x,{style:{flex:1,paddingLeft:12},$weight:500,children:i.label}),(0,M.jsx)(se,{fillWidth:!0,padding:"8px 0",gap:6,cmsKey:null===(n=i.cmsConfigs)||void 0===n?void 0:n.key,children:d})]},"property-box-".concat(i._id))},he=i(9541),me=["title","footer","children","extraFooter","extraHeader","isLoading","onClosePress","onBackPress","okButton","canSubmit"],xe=function(e){var n=e.title,i=(e.footer,e.children),t=(e.extraFooter,e.extraHeader),o=(e.isLoading,e.onClosePress),r=e.onBackPress,l=e.okButton,d=e.canSubmit,a=(0,K.Z)(e,me);return(0,M.jsxs)(ge,(0,H.Z)((0,H.Z)({className:"modal_base"},a),{},{children:[(0,M.jsx)(ee.iw,{onBackPress:r,onClosePress:o,title:n,canSubmit:d,okButton:l,children:t}),(0,M.jsx)(be,{className:"main",children:i})]}))},ge=k.ZP.div(d||(d=(0,S.Z)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: min-content 1fr max-content;\n\n  position: relative;\n  padding: 0 8px;\n\n  min-height: 200px;\n  max-height: 90vh;\n\n  color: ",";\n  width: ",";\n  height: ",";\n\n  min-width: 250px;\n  max-width: 100%;\n\n  //overflow: hidden;\n\n  box-shadow: ",";\n  fill: ",";\n  color: ",";\n  background-color: ",";\n\n  border-radius: 2px;\n  border-bottom: 1px solid ",";\n  /* resize: both; */\n\n  @media screen and (max-width: 480px) {\n    width: 98vw;\n  }\n\n  @media screen and (min-width: 480px) {\n    width: ",";\n  }\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){var n=e.width,i=void 0===n?"480px":n,t=e.fillWidth,o=e.fitContentH;return(t?"100vw":o&&"max-content")||i}),(function(e){var n=e.height,i=void 0===n?"":n,t=e.fillHeight,o=e.fitContentV;return(t?"90vh":o&&"max-content")||i}),(function(e){return e.theme.globals.shadowMain}),(function(e){return e.theme.fillColor}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.modalBackgroundColor}),(function(e){return e.theme.modalBorderColor}),(function(e){return e.fillWidth?"98vw":"450px"})),be=k.ZP.main(a||(a=(0,S.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  overflow: auto;\n  position: relative;\n  height: 100%;\n  max-width: 100%;\n  max-height: 100%;\n  width: 100%;\n\n  background-color: ",";\n\n  ::-webkit-scrollbar {\n    width: 4px;\n    height: 4px;\n  }\n  //border-right: 1px solid ",";\n  //border-left: 1px solid ",";\n"])),(function(e){return e.theme.modalBackgroundColor}),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),Ze=(0,I.memo)(xe),Ce=i(3691),we=i(6785),je=i(9964),ye=i(3383),Pe=function(e){var n=e.selected,i=e.onSelect,t=e.filterValue,o=void 0===t?Ce.iv.GOODS:t,r=e.hasFilter,l=void 0!==r&&r,d=(0,Y.nr)(),a=(0,I.useState)(o),u=(0,_.Z)(a,2),c=u[0],s=u[1],v=(0,I.useState)(),f=(0,_.Z)(v,2),p=f[0],h=f[1],m=(0,I.useMemo)((function(){var e,n=d.propertiesByTypeKeysMap[c],i=[],t=(0,$.Z)(n);try{for(t.s();!(e=t.n()).done;){var o,r=e.value,l=null===(o=d.propertiesDataMap)||void 0===o?void 0:o[r];l&&i.push(l)}}catch(a){t.e(a)}finally{t.f()}return i}),[c,d.propertiesByTypeKeysMap,d.propertiesDataMap]);return(0,I.useEffect)((function(){n&&h(n)}),[n]),(0,I.useEffect)((function(){null!==m&&void 0!==m&&m.length&&!p&&(i&&m[0]?i(m[0]):h(m[0]))}),[p,i,m]),(0,M.jsxs)(N.ZP,{margin:"8px 0",gap:8,children:[l&&(0,M.jsx)(te.Z,{label:(0,re.t)("Select type"),children:(0,M.jsx)(je.Z,{options:ye.jI,value:c,onSelect:function(e){var n=e.value;s(n)}})}),(0,M.jsx)(we.Z,{label:(0,re.t)("Select properties group"),selectedOption:p,onSelect:function(e){i&&e?i(e):h(e)},options:m,placeholder:(0,re.t)("Select properties group")})]})},Se=i(8768),_e=["onClose","title","onSubmit","updateId","create","offerId","offer"],ke=ne.Ry().shape({label:ne.Z_().required().min(5).max(128),sku:ne.Z_().required().min(8).max(32),barCode:ne.Z_().max(32),cms:ne.Ry().shape({labels:ne.Ry().shape({ua:ne.Z_().min(5).max(64),en:ne.Z_().min(5).max(64)})}),propertiesMap:ne.Ry().shape({}).nonNullable().required(),offer:ne.Ry().shape({_id:ne.Z_().required(),label:ne.Z_(),labels:ne.Ry().shape({ua:ne.Z_().min(5).max(64),en:ne.Z_().min(5).max(64)})}),timeFrom:ne.hT(),timeTo:ne.hT(),price:ne.Ry().shape({out:ne.Z_()})}),Be=(0,k.ZP)(N._0)(u||(u=(0,S.Z)(["\n  flex: 1;\n  max-height: 100%;\n  height: 100vh;\n\n  width: 100%;\n  //padding: 0 12px;\n\n  overflow: hidden;\n\n  //max-width: 380px;\n  color: ",";\n  background-color: ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.tableBackgroundColor})),De=(0,k.ZP)(N.ZP)(c||(c=(0,S.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),Ie=(0,k.ZP)(N.ZP)(s||(s=(0,S.Z)(["\n  padding-bottom: 8px;\n"]))),Ae=(0,k.ZP)(N.ZP)(v||(v=(0,S.Z)(["\n  padding: 0 4px;\n"]))),Oe=(0,k.ZP)(N.ZP)(f||(f=(0,S.Z)(["\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor})),Me=(0,k.ZP)(N.ZP)(p||(p=(0,S.Z)([""]))),Re=(0,k.ZP)(N.ZP)(h||(h=(0,S.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),Le=function(e){var n,i,t,o,r,l,d,a,u,c,s=e.onClose,v=e.title,f=(e.onSubmit,e.updateId),p=(e.create,e.offerId),h=e.offer,m=(0,K.Z)(e,_e),x=(0,Y.nr)(),g=(0,A.xc)()[A.EJ.offers],b=(0,he.J)(),Z=(0,O.EV)({id:f}).variation,C=(0,O.G2)({id:(null===Z||void 0===Z||null===(n=Z.offer)||void 0===n?void 0:n._id)||p||(null===h||void 0===h?void 0:h._id)}),w=(0,Q.d)(),j=(0,I.useState)(),y=(0,_.Z)(j,2),P=y[0],S=y[1],k=(0,O.hN)({defaultValues:(0,q.Ls)(Z?(0,H.Z)((0,H.Z)({},Z),{},{offer:C,template:P}):{offer:C,template:P},C),resolver:(0,ie.X)(ke),reValidateMode:"onSubmit"}),B=k.setValue,D=k.handleSubmit,R=k.register,L=k.formState.errors,T=k.formValues,V=k.reset,U=(0,I.useState)((function(){var e,n,i={},t=(0,$.Z)((0,q.gQ)(null!==(e=T.propertiesMap)&&void 0!==e?e:{}));try{for(t.s();!(n=t.n()).done;){var o,r=(0,_.Z)(n.value,2),l=r[0],d=r[1],a=null===(o=x.propertiesDataMap)||void 0===o?void 0:o[d];a&&(i[l]=a)}}catch(u){t.e(u)}finally{t.f()}return i})),F=(0,_.Z)(U,2),z=F[0],G=F[1],J=(0,I.useMemo)((function(){var e,n,i,t=null===P||void 0===P?void 0:P._id,o=[],r=null!==(e=null===(n=x.propertiesKeysMap)||void 0===n?void 0:n[null!==t&&void 0!==t?t:"def"])&&void 0!==e?e:[],l=(0,$.Z)(r);try{for(l.s();!(i=l.n()).done;){var d,a=i.value,u=null===(d=x.propertiesDataMap)||void 0===d?void 0:d[a];if(null!==u&&void 0!==u&&u.isSelectable){var c=x.propertiesKeysMap[null===u||void 0===u?void 0:u._id];null!==c&&void 0!==c&&c.length&&o.push(u)}}}catch(s){l.e(s)}finally{l.f()}return o}),[null===P||void 0===P?void 0:P._id,x.propertiesDataMap,x.propertiesKeysMap]),ne=(0,I.useMemo)((function(){return null!==T&&void 0!==T&&T.propertiesMap?Object.values(null===T||void 0===T?void 0:T.propertiesMap):[]}),[null===T||void 0===T?void 0:T.propertiesMap,T]),de=(0,I.useMemo)((function(){return ne.length>0}),[ne.length]),ae=(0,I.useMemo)((function(){var e,n,i=Object.entries(z).sort((function(e,n){return e[0].localeCompare(n[0])})),t=null!==C&&void 0!==C&&C.label?[null===C||void 0===C?void 0:C.label]:[],o=(0,$.Z)(i);try{for(o.s();!(n=o.n()).done;){var r=n.value[1];(null===r||void 0===r?void 0:r.label)&&t.push(null===r||void 0===r?void 0:r.label)}}catch(l){o.e(l)}finally{o.f()}return{label:null!==i&&void 0!==i&&i.length?t.join(". "):null!==(e=null===Z||void 0===Z?void 0:Z.label)&&void 0!==e?e:"".concat(null===C||void 0===C?void 0:C.label,". {{VARIATION_LABEL}}")}}),[null===C||void 0===C?void 0:C.label,z,null===Z||void 0===Z?void 0:Z.label]).label;(0,I.useEffect)((function(){B("label",ae)}),[ae,B,Z]);var ue=(0,I.useCallback)((function(e){f?g.updateVariationById({data:(0,q.Ts)(e,f),onSuccess:function(e){console.log("updateVariationById onSuccess",e),s&&s()},onError:X.kl.toastAxiosError,onLoading:b.onLoading("update")}):g.createVariation({data:(0,q.Ts)(e),onSuccess:function(e){w.state.close&&s&&s(),w.state.clear&&V()},onError:X.kl.toastAxiosError,onLoading:b.onLoading("create")})}),[b,s,V,g,w.state.clear,w.state.close,f]),ce=(0,I.useCallback)((function(e,n){var i;B("propertiesMap.".concat(e),n);var t=null===(i=x.propertiesDataMap)||void 0===i?void 0:i[n];t&&G((function(n){return(0,H.Z)((0,H.Z)({},n),{},(0,E.Z)({},e,t))}))}),[B,x.propertiesDataMap]),se=(0,I.useCallback)((function(){B("propertiesMap",{}),G({})}),[B]),ve=(0,I.useMemo)((function(){return null===J||void 0===J?void 0:J.map((function(e){return(0,M.jsx)(pe,{item:e,selectedIds:ne,onSelect:ce},"prop_".concat(e._id))}))}),[J,ne,ce]);return(0,M.jsx)(Ze,{fillHeight:!0,onBackPress:s,okButton:!1,title:v,children:(0,M.jsxs)(Be,(0,H.Z)((0,H.Z)({onSubmit:D(ue,(function(e){console.error("[SUBMIT ERROR]",e)})),onReset:se},m),{},{children:[(0,M.jsxs)(De,{flex:1,fillWidth:!0,overflow:"auto",gap:12,children:[(0,M.jsxs)(Se.y,{label:"Offer",expandable:!1,hideFooter:!0,children:[(0,M.jsx)(te.Z,{label:(0,re.t)("Offer label"),error:null===L||void 0===L||null===(i=L.offer)||void 0===i?void 0:i._id,required:!0,disabled:!0,children:(0,M.jsx)(oe.ZP,{value:null!==(t=null===C||void 0===C?void 0:C.label)&&void 0!==t?t:void 0,placeholder:(0,re.t)("label"),required:!0,disabled:!0})}),(0,M.jsxs)(N.ZP,{fxDirection:"row",gap:8,fillWidth:!0,children:[(0,M.jsx)(te.Z,{label:(0,re.t)("sku"),disabled:!0,children:(0,M.jsx)(oe.ZP,{value:null!==(o=null===C||void 0===C?void 0:C.sku)&&void 0!==o?o:void 0,placeholder:(0,re.t)("sku"),disabled:!0})}),(0,M.jsx)(te.Z,{label:(0,re.t)("barCode"),disabled:!0,children:(0,M.jsx)(oe.ZP,{value:null!==(r=null===C||void 0===C?void 0:C.barCode)&&void 0!==r?r:void 0,placeholder:(0,re.t)("barCode"),disabled:!0})})]})]}),(0,M.jsxs)(Se.y,{label:"Main info",expandable:!1,hideFooter:!0,children:[(0,M.jsx)(te.Z,{label:(0,re.t)("label"),error:L.label,children:(0,M.jsx)(oe.ZP,(0,H.Z)((0,H.Z)({},R("label",{required:!0})),{},{placeholder:(0,re.t)("label"),required:!0}))}),(0,M.jsxs)(N.ZP,{fxDirection:"row",gap:8,fillWidth:!0,children:[(0,M.jsx)(te.Z,{label:(0,re.t)("sku"),error:L.sku,children:(0,M.jsx)(oe.ZP,(0,H.Z)((0,H.Z)({},R("sku",{required:!0})),{},{placeholder:(0,re.t)("sku"),required:!0}))}),(0,M.jsx)(te.Z,{label:(0,re.t)("barCode"),error:L.barCode,children:(0,M.jsx)(oe.ZP,(0,H.Z)((0,H.Z)({},R("barCode")),{},{placeholder:(0,re.t)("barCode")}))})]})]}),(0,M.jsxs)(Se.y,{label:(0,re.t)("Properties"),expandable:!1,hideFooter:!0,children:[(0,M.jsx)(Pe,{onSelect:function(e){B("template",e),S(e)},selected:P}),(0,M.jsx)(Ie,{padding:"0 8px",margin:"8px 0",children:ve})]}),Z&&(0,M.jsx)(Se.y,{label:(0,re.t)("Cms information"),expandable:!1,hideFooter:!0,children:(0,M.jsxs)(Me,{padding:"8px 0",fillWidth:!0,children:[(0,M.jsx)(Re,{padding:"8px",justifyContent:"flex-end",fxDirection:"row",fillWidth:!0,children:(0,M.jsx)(W.x,{$size:13,$weight:500,children:(0,re.t)("Cms configs")})}),(0,M.jsxs)(Ae,{children:[(0,M.jsx)(te.Z,{label:(0,re.t)("Language key"),error:null===L||void 0===L||null===(l=L.cmsConfigs)||void 0===l?void 0:l.key,children:(0,M.jsx)(le.Z,{disabled:!0})}),(0,M.jsx)(te.Z,{label:(0,re.t)("Label by lang key"),error:null===L||void 0===L||null===(d=L.cmsConfigs)||void 0===d||null===(a=d.labels)||void 0===a?void 0:a.ua,children:(0,M.jsx)(oe.ZP,(0,H.Z)({placeholder:"Label"},R("cmsConfigs.labels.ua")))})]})]})})]}),(0,M.jsx)(ee.AT,{loading:null===(u=b.isLoading)||void 0===u?void 0:u.create,resetButtonShown:!0,submitButtonText:null!==(c=b.isLoading)&&void 0!==c&&c.create?"Loading...":f?"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438":"\u0414\u043e\u0434\u0430\u0442\u0438",canSubmit:de,extraFooter:(0,M.jsx)(Oe,{children:(0,M.jsx)(Q.Z,(0,H.Z)({},w))})})]}))})},Te=function(e){var n,i=e.onSelect,t=e.selected,o=e.withActions,r=void 0===o||o,l=(0,J.un)(),d=L(),a=(0,F.f9)(),u=d.currentOffer,c=(0,A.xc)()[A.EJ.offers],s=(0,I.useCallback)((function(e){var n=e.refresh,i=e.update;u&&c.getAllVariationsByProductId({data:{refreshCurrent:n,updateCurrent:i,offerId:u._id},onLoading:l.onLoading("variations")})}),[u,l,c]),v=(0,I.useMemo)((function(){var e,n,i={},t=(0,$.Z)(null!==(e=null===u||void 0===u?void 0:u.variations)&&void 0!==e?e:[]);try{for(t.s();!(n=t.n()).done;){var o,r=n.value.properties,l=(0,$.Z)(null!==r&&void 0!==r?r:[]);try{for(l.s();!(o=l.n()).done;){var d,a=o.value,c=null===a||void 0===a||null===(d=a.parent)||void 0===d?void 0:d._id;c&&a.parent&&(i[c]=a.parent)}}catch(s){l.e(s)}finally{l.f()}}}catch(s){t.e(s)}finally{t.f()}return(0,G.F9)(Object.values(i))}),[null===u||void 0===u?void 0:u.variations]),f=(0,I.useMemo)((function(){return{onRowClick:function(e){if(i){if(null!==e&&void 0!==e&&e.rowData)return void i((0,q.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e._id&&i({_id:null===e||void 0===e?void 0:e._id})}},actionsCreator:r?function(e){var n,i=null===(n=e.selectedRow)||void 0===n?void 0:n._id;return[{icon:"refresh",type:"onlyIcon",onClick:function(){return s({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!i,onClick:function(){window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0430\u0440\u0456\u0430\u0446\u0456\u044e:\n ".concat(i))}},{icon:"copy",type:"onlyIcon",disabled:!i},{icon:"edit",type:"onlyIcon",disabled:!i,onClick:function(){i&&e.selectedRow&&a.open({ModalChildren:Le,modalChildrenProps:{updateId:i}})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){a.open({ModalChildren:Le,modalChildrenProps:{offer:d.currentOffer}})}}]}:void 0}}),[s,a,i,d.currentOffer,r]);return(0,I.useEffect)((function(){u&&s({refresh:!0})}),[]),(0,M.jsx)(z.ZP,(0,H.Z)((0,H.Z)({},f),{},{isSearch:!1,isFilter:!1,isLoading:null===l||void 0===l||null===(n=l.isLoading)||void 0===n?void 0:n.variations,selectedRow:t,tableData:null===u||void 0===u?void 0:u.variations,tableTitles:v,transformData:G.m$}))},Ee=i(4165),Ve=i(5861),We=i(9071),Ue=i(6981),Ne=i(1267),He=i(9978),$e=function(e){var n,i=e.onSelect,t=e.selected,o=e.withActions,r=void 0===o||o,l=(0,F.f9)(),d=(0,A.xc)()[A.EJ.offers],a=(0,O.Zx)().offerId,u=(0,O.G2)({id:a}),c=(0,I.useState)(),s=(0,_.Z)(c,2),v=s[0],f=s[1],p=(0,J.un)(),h=(0,Ne.TL)(),m=(0,I.useCallback)(function(){var e=(0,Ve.Z)((0,Ee.Z)().mark((function e(n){var i,t;return(0,Ee.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.refresh,t=n.update,u){e.next=3;break}return e.abrupt("return");case 3:d.getAllPrices({data:{params:{offerId:null===u||void 0===u?void 0:u._id},refreshCurrent:i,updateCurrent:t},onLoading:null===p||void 0===p?void 0:p.onLoading("prices")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[u,p,d]),x=(0,I.useMemo)((function(){return{onRowClick:function(e){var n;(f(null===e||void 0===e?void 0:e.rowData),i)&&i({_id:(null===e||void 0===e?void 0:e._id)||(null===e||void 0===e||null===(n=e.rowData)||void 0===n?void 0:n._id)||""})},actionsCreator:r?function(e){var n,i=(null===(n=e.selectedRow)||void 0===n?void 0:n._id)||(null===v||void 0===v?void 0:v._id);return[{icon:"refresh",type:"onlyIcon",onClick:function(){return m({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!i},{icon:"copy",type:"onlyIcon",disabled:!i},{icon:"edit",type:"onlyIcon",disabled:!i,onClick:function(){h((0,He.SN)({data:{params:{_id:i}},onLoading:p.onLoading("price",void 0,{content:"Refreshing price info..."}),onSuccess:function(){}})),l.open({ModalChildren:We.Z,modalChildrenProps:{offer:u,updateId:i}})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){l.open({ModalChildren:We.Z,modalChildrenProps:{offer:u}})}}]}:void 0}}),[r,i,null===v||void 0===v?void 0:v._id,m,h,p,l,u]);return(0,I.useEffect)((function(){m({refresh:!0})}),[]),(0,M.jsx)(z.ZP,(0,H.Z)((0,H.Z)({},x),{},{isSearch:!1,isFilter:!1,isLoading:null===p||void 0===p||null===(n=p.isLoading)||void 0===n?void 0:n.prices,selectedRow:t,tableData:null===u||void 0===u?void 0:u.prices,tableTitles:Ue.po}))},Fe=i(758),ze=i(3664),Ge=i(387),qe=function(e){var n=e.onSelect,i=e.selected,t=e.withActions,o=(0,Y.nr)().currentOffer,r=(0,F.f9)(),l=(0,A.xc)()[A.EJ.offers],d=(0,I.useState)(!1),a=(0,_.Z)(d,2),u=a[0],c=a[1],s=(0,I.useCallback)((function(e){var n=e.refresh;e.update;if(o){var i=(0,Ge.rE)(o);l.getAllInventories({data:{refreshCurrent:n,params:{offer:i}},onLoading:c})}}),[o,l]),v=(0,I.useMemo)((function(){return{tableData:null===o||void 0===o?void 0:o.inventories,tableTitles:Fe.QX,onRowClick:function(e){if(n){if(null!==e&&void 0!==e&&e.rowData)return void n((0,Ge.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e._id&&n({_id:null===e||void 0===e?void 0:e._id})}},actionsCreator:t?function(e){return[{icon:"refresh",type:"onlyIcon",onClick:function(){return s({refresh:!0})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){r.open({ModalChildren:ze.Z.CreateWarehouseDocument,modalChildrenProps:{}})}}]}:void 0}}),[null===o||void 0===o?void 0:o.inventories,s,r,n,t]);return(0,I.useEffect)((function(){s({refresh:!0})}),[]),(0,M.jsx)(z.ZP,(0,H.Z)((0,H.Z)({},v),{},{isSearch:!1,isFilter:!1,isLoading:u,selectedRow:i}))},Je=i(1251),Ke=function(e){return(0,M.jsx)(N.ZP,{padding:"16px",children:(0,M.jsx)(W.x,{$size:16,$weight:600,children:"In work"})})},Ye=function(e){return e.Prices="Prices",e.Variations="Variations",e.Warehousing="Warehousing",e.Sales="Sales",e}(Ye||{}),Xe=(0,V.H1)(Ye),Qe=(0,k.ZP)(N.ZP)(m||(m=(0,S.Z)(["\n  overflow: auto;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);\n  }\n"])),(function(e){return e.theme.globals.timingFunctionMain}),(function(e){return e.theme.backgroundColorLight}),(function(e){return e.isVisible?0:100})),en=(0,k.ZP)(N.ZP)(x||(x=(0,S.Z)(["\n  border-top: 1px solid ",";\n  //border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),nn=function(e){var n,i,t=e.isVisible,o=e.toggleVisibility,r=L(),l=(0,he.J)(),d=(0,I.useState)(Xe[0].value),a=(0,_.Z)(d,2),u=a[0],c=a[1],s=(0,I.useMemo)((function(){var e,n;if(!r.currentOffer)return null;var i=(e={},(0,E.Z)(e,Ye.Variations,(0,M.jsx)(Te,{withActions:!0})),(0,E.Z)(e,Ye.Warehousing,(0,M.jsx)(qe,{withActions:!0})),(0,E.Z)(e,Ye.Prices,(0,M.jsx)($e,{withActions:!0})),(0,E.Z)(e,Ye.Sales,(0,M.jsx)(Ke,{withActions:!0})),e);return null!==(n=null===i||void 0===i?void 0:i[u])&&void 0!==n?n:null}),[u,r.currentOffer]);return(0,M.jsx)(J.f4,{value:l,children:(0,M.jsxs)(Qe,{overflow:"hidden",fillHeight:!0,isVisible:t,children:[t&&(0,M.jsx)(Je.xB,{onBackPress:o,renderTitle:(0,M.jsxs)(N.ZP,{padding:"0 8px",fxDirection:"row",alignItems:"center",justifyContent:"center",gap:8,children:[(0,M.jsx)(W.x,{$weight:600,$size:14,children:null===r||void 0===r||null===(n=r.currentOffer)||void 0===n?void 0:n.label}),(0,M.jsx)(W.x,{$size:14,children:null===r||void 0===r||null===(i=r.currentOffer)||void 0===i?void 0:i.sku})]})}),(0,M.jsxs)(en,{overflow:"hidden",fillWidth:!0,flex:1,children:[(0,M.jsx)(U.Z,{filterOptions:Xe,onOptSelect:function(e,n,i){c(n)},preventDefault:!0}),s]})]})})},tn=i(2483),on=i(4781),rn=i(5227),ln=i(763),dn=i(870),an=i(6753),un=i(6493),cn=i(3433),sn=function e(n){var i,t,o=n.item,r=(n.index,n.lvl),l=void 0===r?0:r,d=n.selectedIds,a=n.onRemove,u=void 0===a?function(){console.log("onRemove not passed",l)}:a,c=(0,I.useMemo)((function(){var n;return null===o||void 0===o||null===(n=o.childrenList)||void 0===n?void 0:n.map((function(n,i){return(0,M.jsx)(e,{item:n,index:i,onRemove:u,lvl:l+1,selectedIds:d},"item_lvl_".concat(l,"_").concat(n._id))}))}),[null===o||void 0===o?void 0:o.childrenList,l,u,d]),s=(0,I.useMemo)((function(){return d.includes(o._id)}),[o._id,d]);return(0,M.jsxs)(M.Fragment,{children:[s&&(0,M.jsxs)(vn,{fxDirection:"row",alignItems:"center",padding:"0 2px 0 12px",gap:2,children:[(null===o||void 0===o||null===(i=o.parent)||void 0===i?void 0:i.label)&&"".concat(null===o||void 0===o||null===(t=o.parent)||void 0===t?void 0:t.label,"/"),"".concat(null===o||void 0===o?void 0:o.label),(0,M.jsx)(ae.Z,{variant:"onlyIcon",endIcon:"close",size:"24px",endIconSize:"80%",onClick:function(){return u&&u(o._id)}})]}),c]})},vn=(0,k.ZP)(N.ZP)(g||(g=(0,S.Z)(["\n  font-weight: 500;\n  font-size: 12px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  border: 1px solid ",";\n"])),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.accentColor.base})),fn=function(e){var n=e.options,i=e.onSelect,t=e.onChange,o=e.defaultData,r=(0,I.useState)([]),l=(0,_.Z)(r,2),d=l[0],a=l[1],u=(0,I.useCallback)((function(e){a((function(n){var o=e?n.includes(null===e||void 0===e?void 0:e._id)?n.filter((function(n){return n!==(null===e||void 0===e?void 0:e._id)})):[].concat((0,cn.Z)(n),[e._id]):n;return i&&(null===e||void 0===e?void 0:e._id)&&i(null===e||void 0===e?void 0:e._id),t&&t(o),o}))}),[t,i]),c=(0,I.useCallback)((function(e){a((function(n){var i=n.filter((function(n){return n!==e}));return t&&t(i),i}))}),[t]),s=(0,I.useMemo)((function(){return null===n||void 0===n?void 0:n.map((function(e,n){return(0,M.jsx)(sn,{item:e,index:n,selectedIds:d,onRemove:c},"item_lvl_0_".concat(e._id))}))}),[c,n,d]);return(0,I.useEffect)((function(){o&&a(o)}),[o]),(0,M.jsxs)(N.ZP,{fillWidth:!0,gap:6,children:[(0,M.jsx)(we.Z,{treeMode:!0,dropDownIsAbsolute:!0,defaultValue:o,label:(0,re.ZP)("categories"),placeholder:(0,re.ZP)("categories"),required:!0,options:n,onSelect:u}),(0,M.jsx)(N.ZP,{fxDirection:"row",flexWrap:"wrap",gap:8,children:s})]})},pn=(0,k.ZP)(N.ZP)(b||(b=(0,S.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),hn=function(e){var n=e.onClose,i=(0,Y.nr)().currentOffer,t=(0,Y.q$)(dn.cA.CATEGORIES_PROD).directory,o=(0,A.xc)()[A.EJ.offers],r=(0,I.useState)([]),l=(0,_.Z)(r,2),d=l[0],a=l[1],u=(0,I.useMemo)((function(){var e,n;return(null===i||void 0===i||null===(e=i.categories)||void 0===e||null===(n=e.map((function(e){return e._id})))||void 0===n?void 0:n.toString())!==d.toString()}),[null===i||void 0===i?void 0:i.categories,d]);return(0,I.useEffect)((function(){null!==i&&void 0!==i&&i.categories&&a(null===i||void 0===i?void 0:i.categories.map((function(e){return e._id})))}),[null===i||void 0===i?void 0:i.categories]),(0,M.jsxs)(ee.dF,{onSubmit:function(e){e.preventDefault(),i&&o.updateById({data:(0,H.Z)((0,H.Z)({},(0,Ge.rE)(i)),{},{data:{categories:d},refreshCurrent:!0}),onSuccess:function(e,i){n&&n()}})},children:[(0,M.jsx)(ee.iw,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457",onBackPress:n,canSubmit:u,okButton:!0}),(0,M.jsx)(pn,{padding:"0 0 8px 0",flex:1,children:(0,M.jsx)(fn,{onChange:a,options:t,defaultData:d})}),(0,M.jsx)(ee.AT,{canSubmit:u})]})},mn=function e(n){var i,t,o=n.item,r=n.lvl,l=void 0===r?0:r,d=n.selectedIds,a=(0,I.useMemo)((function(){var n;return null===o||void 0===o||null===(n=o.childrenList)||void 0===n?void 0:n.map((function(n,i){return(0,M.jsx)(e,{item:n,index:i,lvl:l+1,selectedIds:d},"item_lvl_".concat(l,"_").concat(n._id))}))}),[null===o||void 0===o?void 0:o.childrenList,l,d]),u=(0,I.useMemo)((function(){return d.includes(o._id)}),[o._id,d]);return(0,M.jsxs)(M.Fragment,{children:[u&&(0,M.jsxs)(an.U.CategoryItem,{fxDirection:"row",alignItems:"center",padding:"0 2px 0 12px",gap:2,children:[(null===o||void 0===o||null===(i=o.parent)||void 0===i?void 0:i.label)&&"".concat(null===o||void 0===o||null===(t=o.parent)||void 0===t?void 0:t.label,"/"),"".concat(null===o||void 0===o?void 0:o.label)]}),a]})},xn=["onClose","title","defaultState","onSubmit","update","offer","template","onSelect","onChange"],gn=(0,k.ZP)(N.ZP)(Z||(Z=(0,S.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n  padding-bottom: 8px;\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),bn=(0,k.ZP)(N.ZP)(C||(C=(0,S.Z)(["\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(e){return e.theme.sideBarBorderColor})),Zn=(0,k.ZP)(N.ZP)(w||(w=(0,S.Z)(["\n  //display: grid;\n  //grid-template-columns: repeat(auto-fill, 25%);\n  //\n  //@media screen and (max-width: 480px) {\n  //  grid-template-columns: repeat(auto-fill, 50%);\n  //}\n"]))),Cn=(0,k.ZP)(ae.Z)(j||(j=(0,S.Z)(["\n  flex-basis: 100px;\n  min-width: max-content;\n\n  //width: 100%;\n  //min-width: unset;\n\n  // border-radius: 2px;\n  // border: 2px solid ",";\n  //\n  // &:hover {\n  //   border: 2px solid ",";\n  // }\n"])),(function(e){return e.theme.accentColor.light}),(function(e){return e.theme.accentColor.base})),wn=function(e){var n,i,t=e.onClose,o=e.title,r=(e.defaultState,e.onSubmit),l=e.update,d=e.offer,a=(e.template,e.onSelect),u=e.onChange,c=(0,K.Z)(e,xn),s=d,v=(0,A.xc)()[A.EJ.offers],f=(0,Y.WS)(),p=(0,I.useState)(null===(n=f[0])||void 0===n?void 0:n._id),h=(0,_.Z)(p,2),m=h[0],x=h[1],g=(0,I.useState)(!1),b=(0,_.Z)(g,2),Z=b[0],C=b[1],w=(0,I.useState)([]),j=(0,_.Z)(w,2),y=j[0],P=j[1],S=(0,I.useMemo)((function(){return f.find((function(e){return e._id===m}))}),[m,f]),k=(0,I.useMemo)((function(){var e;return(null===s||void 0===s||null===(e=s.properties)||void 0===e?void 0:e.map((function(e){return e._id})).join(","))!==y.join(",")}),[null===s||void 0===s?void 0:s.properties,y]),B=(0,I.useCallback)((function(e){e.preventDefault();var n=null!==l&&void 0!==l?l:null===s||void 0===s?void 0:s._id;n?v.updateById({data:{_id:n,data:{properties:y}},onLoading:C,onSuccess:function(e,n){X.kl.success("Product updated"),t&&t()}}):console.debug("selectedIds",y),r&&r(y)}),[null===s||void 0===s?void 0:s._id,t,r,y,v,l]),D=(0,I.useCallback)((function(e,n){P((function(n){var i=n.includes(e)?n.filter((function(n){return n!==e})):[].concat((0,cn.Z)(n),[e]);return u&&u(i),a&&a(e),i}))}),[u,a]),O=(0,I.useMemo)((function(){var e;return null===S||void 0===S||null===(e=S.childrenList)||void 0===e?void 0:e.filter((function(e){return!(null!==e&&void 0!==e&&e.isSelectable)})).map((function(e){var n;return(0,M.jsxs)(bn,{gap:8,fillWidth:!0,padding:"8px 0 0",children:[(0,M.jsx)(W.x,{style:{flex:1,paddingLeft:12},$weight:500,children:e.label}),(0,M.jsx)(Zn,{fillWidth:!0,padding:"8px 0",gap:6,flexWrap:"wrap",fxDirection:"row",children:null===(n=e.childrenList)||void 0===n?void 0:n.map((function(n){var i=y.includes(n._id);return(0,M.jsx)(Cn,{variant:i?"filledSmall":"outlinedSmall",padding:"6px 8px",fontWeight:500,onClick:function(){return D(n._id,e._id)},children:n.label},"prop-value-".concat(n._id))}))})]},"property-".concat(e._id))}))}),[D,y,null===S||void 0===S?void 0:S.childrenList]);return(0,I.useEffect)((function(){null!==s&&void 0!==s&&s.properties&&P(null===s||void 0===s?void 0:s.properties.map((function(e){return e._id})))}),[null===s||void 0===s?void 0:s.properties]),(0,M.jsxs)(ee.dF,(0,H.Z)((0,H.Z)({onSubmit:B},c),{},{children:[(0,M.jsx)(ee.iw,{onBackPress:t,canSubmit:k,title:null!==(i=o||(null===S||void 0===S?void 0:S.label))&&void 0!==i?i:"",okButton:!0}),(0,M.jsx)(we.Z,{label:(0,re.t)("Available templates"),options:f,selectedValue:m,onSelect:function(e){x(null===e||void 0===e?void 0:e._id)}}),(0,M.jsx)(gn,{flex:1,overflow:"auto",children:O}),(0,M.jsx)(ee.AT,{canSubmit:k,loading:Z,submitButtonText:Z?"Loading...":"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]}))},jn=function(e){var n=e.item,i=e.selectedItems,t=(0,I.useMemo)((function(){var e,t;return null===(e=n.childrenList)||void 0===e||null===(t=e.filter((function(e){return null===i||void 0===i?void 0:i.includes(e._id)})))||void 0===t?void 0:t.map((function(e,n){return(0,M.jsx)(an.U.CategoryItem,{className:"PROP_VALUE",maxWidth:"130px",children:e.label},"prop-v-".concat(e._id))}))}),[n.childrenList,i]);return(0,M.jsxs)(N.ZP,{className:"PROPERTY",gap:8,alignItems:"flex-end",children:[(0,M.jsx)(N.ZP,{alignItems:"center",fxDirection:"row",fillWidth:!0,gap:8,children:(0,M.jsx)(an.U.CellText,{$size:13,$weight:600,children:null===n||void 0===n?void 0:n.label})}),(0,M.jsx)(N.ZP,{fxDirection:"row",flexWrap:"wrap",fillWidth:!0,gap:6,children:t&&(null===t||void 0===t?void 0:t.length)>0?t:(0,M.jsx)(W.x,{$size:12,children:"---"})})]})},yn=i(9069),Pn=function(e){var n=e.onSelect,i=e.withActions,t=(e.selected,e.types),o=(0,I.useState)(!1),r=(0,_.Z)(o,1)[0],l=(0,Y.q$)(dn.cA.CONTRACTORS).directory,d=(0,I.useMemo)((function(){return l.filter((function(e){return t&&t.includes(e.type)}))}),[l,t]),a=(0,I.useMemo)((function(){return{tableData:d,tableTitles:yn.PU,onRowClick:function(e){if(n){if(null!==e&&void 0!==e&&e.rowData)return void n((0,Ge.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e._id&&n({_id:null===e||void 0===e?void 0:e._id})}},actionsCreator:i?function(e){return[]}:void 0}}),[d,n,i]);return(0,M.jsx)(z.ZP,(0,H.Z)({isSearch:!1,isLoading:r},a))},Sn=function(e){return e.CUSTOMER="CUSTOMER",e.SUPPLIER="SUPPLIER",e.EMPLOYEE="EMPLOYEE",e.CONTRACTOR="CONTRACTOR",e.SUB_CONTRACTOR="SUB_CONTRACTOR",e.COMMISSION_AGENT="COMMISSION_AGENT",e.CONSIGNOR="CONSIGNOR",e.TRANSPORTER="TRANSPORTER",e.DELIVER="DELIVER",e}({}),_n=function(e){var n,i=e.onSelect,t=e.selected,o=(e.withActions,(0,A.xc)().warehouses),r=(0,J.un)(),l=(0,Y.eO)().warehouses,d=(0,I.useCallback)((function(){o.getAll({onLoading:r.onLoading("warehouses"),data:{refresh:!0}})}),[r,o]);(0,I.useEffect)((function(){d()}),[]);var a=(0,I.useMemo)((function(){return{tableData:l,tableTitles:Fe.A7,onRowClick:function(e){if(i){if(null!==e&&void 0!==e&&e.rowData)return void i((0,q.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e._id&&i({_id:null===e||void 0===e?void 0:e._id})}},actionsCreator:function(e){return[{icon:"refresh",onClick:d}]}}}),[d,i,l]);return(0,M.jsx)(z.ZP,(0,H.Z)((0,H.Z)({isSearch:!1},a),{},{isLoading:null===(n=r.isLoading)||void 0===n?void 0:n.warehouses,selectedRow:t}))},kn=function(e){return e.price="price",e.variation="variation",e.warehouse="warehouse",e.inventory="inventory",e.supplier="supplier",e}({}),Bn=(0,q.H1)(kn),Dn=k.ZP.form(y||(y=(0,S.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  flex: 1;\n\n  padding: 0 8px;\n\n  width: 480px;\n  max-width: 100%;\n\n  height: 100%;\n\n  background-color: ",";\n"])),(function(e){return e.theme.modalBackgroundColor})),In=(0,k.ZP)(N.ZP)(P||(P=(0,S.Z)(["\n  border-top: 1px solid ",";\n\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),An=function(e){var n,i=e.onClose,t=(e.onSubmit,(0,he.J)()),o=null===(n=(0,O.Zx)())||void 0===n?void 0:n.offerId,r=(0,O.G2)({id:o}),l=(0,A.xc)()[A.EJ.offers],d=(0,I.useState)(0),a=(0,_.Z)(d,2),u=a[0],c=a[1],s=(0,O.hN)(),v=s.setValue,f=s.formValues,p=s.handleSubmit,h=(0,I.useCallback)((function(e){v(Bn[u].value,e)}),[u,v]),m=(0,I.useMemo)((function(){var e,n,i;return null!==(n=(e={},(0,E.Z)(e,kn.warehouse,(0,M.jsx)(_n,{withActions:!0,onSelect:h,selected:null===f||void 0===f?void 0:f.warehouse})),(0,E.Z)(e,kn.price,(0,M.jsx)($e,{withActions:!0,onSelect:h,selected:null===f||void 0===f?void 0:f.price})),(0,E.Z)(e,kn.variation,(0,M.jsx)(Te,{withActions:!0,onSelect:h,selected:null===f||void 0===f?void 0:f.variation})),(0,E.Z)(e,kn.inventory,(0,M.jsx)(qe,{withActions:!0,onSelect:h,selected:null===f||void 0===f?void 0:f.inventory})),(0,E.Z)(e,kn.supplier,(0,M.jsx)(Pn,{withActions:!0,types:[Sn.SUPPLIER],onSelect:h,selected:null===f||void 0===f?void 0:f.supplier})),e)[null===(i=Bn[u])||void 0===i?void 0:i.value])&&void 0!==n?n:null}),[u,null===f||void 0===f?void 0:f.inventory,null===f||void 0===f?void 0:f.price,null===f||void 0===f?void 0:f.supplier,null===f||void 0===f?void 0:f.variation,null===f||void 0===f?void 0:f.warehouse,h]),x=(0,I.useMemo)((function(){var e,n,i,t,o,l,d,a=null===r||void 0===r?void 0:r.defaults,c=(0,E.Z)({},null!==(e=null===Bn||void 0===Bn||null===(n=Bn[u])||void 0===n?void 0:n.value)&&void 0!==e?e:"",!0);return c.variation?f.variation&&f.variation._id!==(null===a||void 0===a||null===(i=a.variation)||void 0===i?void 0:i._id):c.price?f.price&&f.price._id!==(null===a||void 0===a||null===(t=a.price)||void 0===t?void 0:t._id):c.warehouse?f.warehouse&&f.warehouse._id!==(null===a||void 0===a||null===(o=a.warehouse)||void 0===o?void 0:o._id):c.inventory?f.inventory&&f.inventory._id!==(null===a||void 0===a||null===(l=a.inventory)||void 0===l?void 0:l._id):c.supplier?f.supplier&&f.supplier._id!==(null===a||void 0===a||null===(d=a.supplier)||void 0===d?void 0:d._id):void 0}),[null===r||void 0===r?void 0:r.defaults,u,f.inventory,f.price,f.supplier,f.variation,f.warehouse]);return(0,M.jsx)(J.f4,{value:t,children:(0,M.jsxs)(Dn,{onSubmit:p((function(e){(null===r||void 0===r?void 0:r._id)&&l.setDefaults({data:{_id:null===r||void 0===r?void 0:r._id,defaults:(0,q.vg)(e),updateCurrent:!0},onSuccess:function(e,n){console.log(e,n)},onLoading:t.onLoading("submiting")})})),children:[(0,M.jsx)(Je.xB,{onBackPress:i,title:(0,re.t)("Default values"),canSubmit:x}),(0,M.jsx)(U.Z,{filterOptions:Bn,currentIndex:u,onChangeIndex:c}),(0,M.jsx)(In,{flex:1,fillWidth:!0,overflow:"hidden",children:m}),(0,M.jsx)(Je.AT,{loading:t.hasLoading,onCreatePress:function(){},canSubmit:x})]})})},On=i(3299);var Mn,Rn,Ln,Tn,En,Vn,Wn=i(4717),Un=i(8790),Nn=k.ZP.form(Mn||(Mn=(0,S.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  max-width: 480px;\n\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.sideBarBackgroundColor})),Hn=function(e){var n=e.onClose,i=(0,Y.nr)().currentOffer,t=(0,A.xc)()[A.EJ.offers],o=(0,I.useState)((null===i||void 0===i?void 0:i.images)||[]),r=(0,_.Z)(o,2),l=r[0],d=r[1],a=(0,I.useState)(!1),u=(0,_.Z)(a,2),c=u[0],s=u[1],v=(0,k.Fg)();return(0,M.jsx)(Nn,{onSubmit:function(e){e.preventDefault(),i&&t.updateById({data:(0,H.Z)((0,H.Z)({},(0,Ge.rE)(i)),{},{data:{images:l},refreshCurrent:!0}),onSuccess:function(){n&&n()},onLoading:s})},children:(0,M.jsx)(Un.Z,{initialData:l,onClose:n,onChangeState:d,contentContainerStyle:{flex:1,borderTop:"1px solid ".concat(v.sideBarBorderColor),borderBottom:"1px solid ".concat(v.sideBarBorderColor)},renderHeader:(0,M.jsx)(ee.iw,{title:"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",onBackPress:n,okButton:!0,canSubmit:l.length>0}),FooterComponent:function(e){return(0,M.jsx)(ee.AT,{onCreatePress:e.onAddNewImageSetPress,loading:c,canSubmit:l.length>0})}})})},$n=i(4436),Fn=["className"],zn=["CellComponent"],Gn=function(e){return e.General="General",e.Properties="Properties",e.Defaults="Defaults",e.Images="Images",e.Futures="Futures",e.Cms="Cms",e}({}),qn=(0,q.H1)(Gn),Jn=(0,k.ZP)(N.ZP)(Rn||(Rn=(0,S.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(e){return e.theme.sideBarBackgroundColor})),Kn=(0,k.ZP)(N.ZP)(Ln||(Ln=(0,S.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),Yn=(0,k.ZP)(N.ZP)(Tn||(Tn=(0,S.Z)([""]))),Xn=(0,k.ZP)(ae.Z)(En||(En=(0,S.Z)(["\n  fill: ",";\n"])),(function(e){return e.theme.globals.colors.error})),Qn=(0,k.ZP)(ae.Z)(Vn||(Vn=(0,S.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),ei=[{title:(0,re.t)("Label"),getValue:function(e){return null===e||void 0===e?void 0:e.label},gridArea:"label",tab:Gn.General},{title:(0,re.t)("status"),getValue:function(e){return null===e||void 0===e?void 0:e.approved},gridArea:"approved",tab:Gn.General},{title:(0,re.t)("Type"),getValue:function(e){return null===e||void 0===e?void 0:e.type},gridArea:"type",tab:Gn.General},{title:(0,re.t)("SKU"),getValue:function(e){return null===e||void 0===e?void 0:e.sku},gridArea:"sku",tab:Gn.General},{title:(0,re.t)("Bar-code"),getValue:function(e){return null===e||void 0===e?void 0:e.barCode},gridArea:"barCode",tab:Gn.General},{title:(0,re.t)("Categories"),CellComponent:function(e){var n=e.cell,i=e.overlayHandler,t=e.data,o=(0,Y.q$)(dn.cA.CATEGORIES_PROD).directory,r=(0,I.useMemo)((function(){var e,n;return null!==(e=null===t||void 0===t||null===(n=t.categories)||void 0===n?void 0:n.map((function(e){return e._id})))&&void 0!==e?e:[]}),[null===t||void 0===t?void 0:t.categories]),l=(0,I.useMemo)((function(){return o.map((function(e,n){return(0,M.jsx)(mn,{selectedIds:r,item:e},"cat_".concat(e._id))}))}),[o,r]);return(0,M.jsxs)(an.U.Cell,{style:{minHeight:"max-content"},children:[(0,M.jsx)(un.p,{title:null===n||void 0===n?void 0:n.title,openOverlayButtonTitle:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",onOpenOverlayPress:function(){i({RenderComponent:hn})}}),(0,M.jsx)(N.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"flex-end",flexWrap:"wrap",gap:8,style:{height:"max-content",minHeight:26},children:l})]})},gridArea:"categories",tab:Gn.General},{title:(0,re.t)("Brand"),getValue:function(e){var n;return null===e||void 0===e||null===(n=e.brand)||void 0===n?void 0:n.label},gridArea:"brand",tab:Gn.General},{title:(0,re.t)("Measurement"),gridArea:"measurement",getValue:function(e){try{var n=null!==e&&void 0!==e&&e.measurement?JSON.parse(null===e||void 0===e?void 0:e.measurement):{};return["".concat((0,re.t)("unit"),": ").concat((null===n||void 0===n?void 0:n.unit)||0),"".concat((0,re.t)("min"),": ").concat((null===n||void 0===n?void 0:n.min)||0),"".concat((0,re.t)("max"),": ").concat((null===n||void 0===n?void 0:n.max)||0),"".concat((0,re.t)("step"),": ").concat((null===n||void 0===n?void 0:n.step)||0)].join(" | ")}catch(i){return""}},tab:Gn.General},{title:(0,re.t)("Description"),getValue:function(e){return null===e||void 0===e?void 0:e.description},gridArea:"description",tab:Gn.General},{title:(0,re.t)("Negative sales"),getValue:function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&n.negativeSale?"Yes":"No"},gridArea:"reservation",tab:Gn.Futures},{title:(0,re.t)("Reservation"),getValue:function(e){var n,i;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(i=n.reservation)&&void 0!==i&&i.isAvailable?"Yes":"No"},gridArea:"reservation",tab:Gn.Futures},{title:(0,re.t)("Custom production"),getValue:function(e){var n,i;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(i=n.customProduction)&&void 0!==i&&i.isAvailable?"Yes":"No"},gridArea:"customProduction",tab:Gn.Futures},{title:(0,re.t)("Custom order"),getValue:function(e){var n,i;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(i=n.customOrder)&&void 0!==i&&i.isAvailable?"Yes":"No"},gridArea:"customOrder",tab:Gn.Futures},{title:(0,re.t)("Pre-order"),getValue:function(e){var n,i;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(i=n.preOrder)&&void 0!==i&&i.isAvailable?"Yes":"No"},gridArea:"preOrder",tab:Gn.Futures},{title:(0,re.t)("Is promo"),getValue:function(e){var n;return null===e||void 0===e||null===(n=e.futures)||void 0===n?void 0:n.isPromo},gridArea:"isPromo",tab:Gn.Futures},{title:(0,re.t)("Properties"),CellComponent:function(e){var n,i=e.cell,t=e.overlayHandler,o=e.data,r=(0,Y.nr)().properties,l=(0,I.useState)(null===(n=r[0])||void 0===n?void 0:n._id),d=(0,_.Z)(l,1)[0],a=(0,I.useMemo)((function(){return r.find((function(e){return e._id===d}))}),[d,r]),u=(0,I.useMemo)((function(){var e;return null===a||void 0===a||null===(e=a.childrenList)||void 0===e?void 0:e.filter((function(e){return!e.isSelectable}))}),[null===a||void 0===a?void 0:a.childrenList]),c=(0,I.useMemo)((function(){var e;return null===o||void 0===o||null===(e=o.properties)||void 0===e?void 0:e.map((function(e){return e._id}))}),[null===o||void 0===o?void 0:o.properties]),s=(0,I.useMemo)((function(){return null===u||void 0===u?void 0:u.map((function(e,n){return(0,M.jsx)(jn,{index:n,overlayHandler:t,item:e,selectedItems:c,data:o},"prop-".concat(null===e||void 0===e?void 0:e._id))}))}),[u,t,c,o]);return(0,M.jsxs)(an.U.Cell,{padding:"4px 4px 8px",gap:8,className:"PROPERTIES_LIST_CELL",style:{minHeight:s&&(null===s||void 0===s?void 0:s.length)>0?"max-content":50},children:[(0,M.jsx)(un.p,{title:null===i||void 0===i?void 0:i.title,onOpenOverlayPress:function(){t({RenderComponent:wn,props:{offer:o}})}}),(0,M.jsx)(N.ZP,{fillWidth:!0,gap:8,alignItems:s&&(null===s||void 0===s?void 0:s.length)>0?"stretch":"flex-end",children:s&&(null===s||void 0===s?void 0:s.length)>0?s:(0,M.jsx)(an.U.CellText,{$weight:500,children:(0,re.t)("undefined")})})]})},gridArea:"properties",tab:Gn.Properties},{title:(0,re.t)("Default values"),CellComponent:function(e){var n=e.data,i=e.cell,t=e.overlayHandler,o=(0,k.Fg)(),r=null===n||void 0===n?void 0:n.warehouse,l=null===n||void 0===n?void 0:n.supplier,d=null===n||void 0===n?void 0:n.price,a=(0,I.useMemo)((function(){var e,i=null===n||void 0===n?void 0:n.variation;return[{title:(0,re.t)("Label"),value:null===i||void 0===i?void 0:i.label},{title:(0,re.t)("Bar-code"),value:null===i||void 0===i?void 0:i.barCode},{title:(0,re.t)("SKU"),value:null===i||void 0===i?void 0:i.sku},{title:(0,re.t)("Props q-ty"),value:null===i||void 0===i||null===(e=i.properties)||void 0===e?void 0:e.length}].map((function(e,n){var i;return(0,M.jsxs)(N.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(W.x,{$size:14,children:"".concat(null===e||void 0===e?void 0:e.title,": ")}),(0,M.jsx)(W.x,{$size:14,$weight:600,$align:"right",children:null!==(i=null===e||void 0===e?void 0:e.value)&&void 0!==i?i:"---"})]},null===e||void 0===e?void 0:e.title)}))}),[null===n||void 0===n?void 0:n.variation]),u=(0,I.useMemo)((function(){return function(e){var n,i,t,o,r,l;return[{title:(0,re.t)("Input"),amount:(0,On.pU)(null===e||void 0===e?void 0:e.in)},{title:(0,re.t)("Output"),amount:(0,On.pU)(null===e||void 0===e?void 0:e.out)},{title:(0,re.t)("Commission"),amount:(0,On.pU)(null===e||void 0===e||null===(n=e.commission)||void 0===n?void 0:n.amount),percentage:null!==e&&void 0!==e&&null!==(i=e.commission)&&void 0!==i&&i.percentage?(0,On.pU)(null===e||void 0===e||null===(t=e.commission)||void 0===t?void 0:t.percentage):void 0},{title:(0,re.t)("Markup"),amount:(0,On.pU)(null===e||void 0===e||null===(o=e.markup)||void 0===o?void 0:o.amount),percentage:null!==e&&void 0!==e&&null!==(r=e.markup)&&void 0!==r&&r.percentage?(0,On.pU)(null===e||void 0===e||null===(l=e.markup)||void 0===l?void 0:l.percentage):void 0}]}(d).map((function(e,n){return(0,M.jsxs)(N.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(W.x,{children:"".concat(null===e||void 0===e?void 0:e.title,": ")}),(0,M.jsxs)(W.x,{$weight:600,children:[null===e||void 0===e?void 0:e.amount,(null===e||void 0===e?void 0:e.percentage)&&" | ".concat(null===e||void 0===e?void 0:e.percentage,"%")]})]},null===e||void 0===e?void 0:e.title)}))}),[d]);return(0,M.jsxs)(an.U.Cell,{style:{minHeight:"max-content"},children:[(0,M.jsx)(un.p,{title:null===i||void 0===i?void 0:i.title,onOpenOverlayPress:function(){t({RenderComponent:An})}}),(0,M.jsxs)(N.ZP,{fillWidth:!0,children:[(0,M.jsx)(an.U.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,re.t)("warehouse")}),(0,M.jsx)(N.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",children:[{label:(0,re.t)("Label"),value:null===r||void 0===r?void 0:r.label},{label:(0,re.t)("Code"),value:null===r||void 0===r?void 0:r.code}].map((function(e){return(0,M.jsxs)(N.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(W.x,{children:"".concat(e.label)}),(0,M.jsx)(W.x,{$weight:600,children:(null===e||void 0===e?void 0:e.value)||"---"})]},e.label)}))})]}),(0,M.jsxs)(N.ZP,{fillWidth:!0,children:[(0,M.jsx)(an.U.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,re.t)("supplier")}),[{label:(0,re.t)("Label"),value:null===l||void 0===l?void 0:l.label},{label:(0,re.t)("Code"),value:null===l||void 0===l?void 0:l.code}].map((function(e){return(0,M.jsxs)(N.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(W.x,{children:"".concat(e.label)}),(0,M.jsx)(W.x,{$weight:600,children:(null===e||void 0===e?void 0:e.value)||"---"})]},e.label)}))]}),(0,M.jsxs)(N.ZP,{fillWidth:!0,gap:6,children:[(0,M.jsx)(an.U.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,re.t)("variation")}),(0,M.jsx)(N.ZP,{fillWidth:!0,children:a})]}),(0,M.jsxs)(N.ZP,{fillWidth:!0,gap:6,children:[(0,M.jsx)(an.U.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,re.t)("price")}),(0,M.jsx)(N.ZP,{fillWidth:!0,children:u})]})]})},gridArea:"defaults",tab:Gn.Defaults},{title:(0,re.t)("Created by / Date / Time"),getValue:function(e){var n,i;return null!==e&&void 0!==e&&e.author?"".concat(null===e||void 0===e||null===(n=e.author)||void 0===n||null===(i=n.user)||void 0===i?void 0:i.email," / ").concat(null!==e&&void 0!==e&&e.createdAt&&(0,ln.isString)(null===e||void 0===e?void 0:e.createdAt)?(0,q.M7)(Date.parse(null===e||void 0===e?void 0:e.createdAt)):""):null},gridArea:"created",tab:Gn.General},{title:(0,re.t)("Updated by / Date / Time"),getValue:function(e){var n,i;return null!==e&&void 0!==e&&e.editor?"".concat(null===e||void 0===e||null===(n=e.editor)||void 0===n||null===(i=n.user)||void 0===i?void 0:i.email," / ").concat(null!==e&&void 0!==e&&e.updatedAt&&(0,ln.isString)(null===e||void 0===e?void 0:e.updatedAt)?(0,q.M7)(Date.parse(null===e||void 0===e?void 0:e.updatedAt)):""):null},gridArea:"updated",tab:Gn.General},{title:(0,re.t)("Images"),CellComponent:function(e){var n=e.data,i=e.cell,t=e.overlayHandler,o=(0,I.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.images)||void 0===e?void 0:e.map((function(e,n){return(0,M.jsx)(an.U.ImagesSetBox,{fxDirection:"row",gap:2,overflow:"auto",children:$n.E_.map((function(n){return(0,M.jsx)(Wn.Z,{src:e[n.value]||"",disabled:!0},"img_".concat(n.value))}))},"set_".concat((null===e||void 0===e?void 0:e._id)||n))}))}),[null===n||void 0===n?void 0:n.images]);return(0,M.jsxs)(an.U.Cell,{style:{minHeight:"max-content",padding:"4px 0"},children:[(0,M.jsx)(un.p,{title:null===i||void 0===i?void 0:i.title,onOpenOverlayPress:function(){t({RenderComponent:Hn})}}),(0,M.jsx)(N.ZP,{gap:2,height:"max-content",padding:"8px 0",style:{minHeight:26},children:o})]})},gridArea:"images",tab:Gn.Images}];var ni,ii,ti=function(e){var n,i=e.className,t=(0,K.Z)(e,Fn),o=(0,O.xj)(),r=L().currentOffer,l=(0,on.on)(),d=function(){var e={};return ei.forEach((function(n){var i,t=n.tab;t&&(e[t]?null===(i=e[t])||void 0===i||i.push(n):e[t]=[n])})),e}(),a=(0,I.useState)(Gn.General),u=(0,_.Z)(a,2),c=u[0],s=u[1],v=(0,I.useMemo)((function(){var e;return d[c]?null===(e=d[c])||void 0===e?void 0:e.map((function(e){var n=e.CellComponent,i=(0,K.Z)(e,zn);return n?(0,M.jsx)(n,{overlayHandler:l.open,cell:i,data:r},i.title):(0,M.jsx)(rn.k,{overlayHandler:l.open,cell:i,data:r},i.title)})):null}),[d,c,l.open,r]);return(0,M.jsxs)(Jn,{fillWidth:!0,flex:1,className:i,padding:"0 8px",children:[(0,M.jsx)(ee.iw,{title:(0,re.t)("Offer overview"),onBackPress:o.goBack}),(0,M.jsx)(U.Z,{optionProps:{fitContentH:!0},filterOptions:qn,onOptSelect:function(e){o.replace({hash:null===e||void 0===e?void 0:e.value}),s(null===e||void 0===e?void 0:e.value)}}),(0,M.jsx)(Kn,{fillWidth:!0,flex:1,overflow:"auto",children:v}),(0,M.jsxs)(Yn,{fillWidth:!0,fxDirection:"row",gap:6,padding:"6px 0",children:[(0,M.jsx)(ae.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==t&&void 0!==t&&t.onEdit),onClick:null===t||void 0===t?void 0:t.onEdit}),(0,M.jsx)(ae.Z,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:null!==t&&void 0!==t&&null!==(n=t.product)&&void 0!==n&&n.visible?"visibilityOn":"visibilityOff",disabled:!(null!==t&&void 0!==t&&t.onHide),onClick:null===t||void 0===t?void 0:t.onHide}),(0,M.jsx)(Xn,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==t&&void 0!==t&&t.onDelete),onClick:null===t||void 0===t?void 0:t.onDelete}),(0,M.jsxs)(N.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,M.jsx)(ae.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",disabled:!(null!==t&&void 0!==t&&t.onRefresh),onClick:null===t||void 0===t?void 0:t.onRefresh}),(0,M.jsx)(Qn,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==t&&void 0!==t&&t.onOpenRightSide),onClick:null===t||void 0===t?void 0:t.onOpenRightSide})]})]})]})},oi=i(7710),ri=(0,k.ZP)(N.ZP)(ni||(ni=(0,S.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor})),li=function(e){var n=e.toggleRightSideVisibility,i=L(),t=di(),o=(0,F.f9)(),r=(0,A.xc)().offers;return(0,M.jsxs)(ri,{children:[(0,M.jsx)(ti,{product:null===i||void 0===i?void 0:i.currentOffer,onEdit:function(){var e;i.currentOffer&&o.openModal({Modal:oi.n.EditOffer,props:{_id:null===i||void 0===i||null===(e=i.currentOffer)||void 0===e?void 0:e._id,title:(0,re.t)("Edit offer")}})},onRefresh:function(){var e,n;null!==(e=i.currentOffer)&&void 0!==e&&e._id&&r.getOne({data:{params:{_id:null===(n=i.currentOffer)||void 0===n?void 0:n._id,getPrices:!1,getVariations:!1}},onLoading:t.onLoading("offer")})},onOpenRightSide:n}),(0,M.jsx)(tn.j,{})]})},di=function(){return(0,J.un)()},ai=k.ZP.div(ii||(ii=(0,S.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),B.VU),ui=function(e){var n=e.path,i=(0,he.J)({offer:{content:(0,re.t)("Loading product info")}}),t=(0,I.useState)(!1),o=(0,_.Z)(t,2),r=o[0],l=o[1],d=(0,I.useCallback)((function(){l((function(e){return!e}))}),[]);return(0,M.jsx)(J.f4,{value:i,children:(0,M.jsx)(T,{children:(0,M.jsx)(on.ZP,{children:(0,M.jsx)(D.default,{path:n,children:(0,M.jsxs)(ai,{children:[(0,M.jsx)(li,{toggleRightSideVisibility:d}),(0,M.jsx)(nn,{isVisible:r,toggleVisibility:d})]})})})})})}},8495:function(e,n,i){i.d(n,{SI:function(){return u},VU:function(){return a}});var t,o,r,l=i(168),d=i(2360),a=(0,d.iv)(t||(t=(0,l.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,d.iv)(o||(o=(0,l.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,d.iv)(r||(r=(0,l.Z)(["\n  outline: 1px solid tomato;\n"])))},6753:function(e,n,i){i.d(n,{U:function(){return Z}});var t,o,r,l,d,a,u,c=i(168),s=i(2360),v=i(8095),f=i(6492),p=s.ZP.button(t||(t=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n\n  border: 0;\n  background-color: transparent;\n\n  font-family: inherit;\n  font-weight: 600;\n  font-size: 13px;\n  padding: 6px 10px;\n  color: ",";\n\n  cursor: pointer;\n\n  &[disabled] {\n    pointer-events: none;\n    color: ",";\n  }\n"])),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.modalBorderColor})),h=(0,s.ZP)(v.ZP)(o||(o=(0,c.Z)(["\n  //min-height: 70px;\n  height: max-content;\n  min-height: max-content;\n\n  padding: 0 8px 8px;\n  gap: 4px;\n\n  //overflow: hidden;\n\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(e){return e.theme.sideBarBorderColor})),m=(0,s.ZP)(v.ZP)(r||(r=(0,c.Z)(["\n  justify-content: center;\n  align-items: center;\n\n  padding: 4px 8px;\n  min-height: 28px;\n  color: #fcfcfc;\n\n  background-color: ",";\n\n  //background-color: #f1f1f1;\n\n  border-radius: 4px;\n  border: 1px solid ",";\n"])),(function(e){return e.theme.fieldBackgroundColor}),(function(e){return e.theme.modalBorderColor})),x=(0,s.ZP)(f.x)(l||(l=(0,c.Z)(["\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 100%;\n\n  color: ",";\n"])),(function(e){return e.$isTitle||e.$disabled?e.theme.globals.inputPlaceholderColor:void 0})),g=(0,s.ZP)(v.ZP)(d||(d=(0,c.Z)(["\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n"]))),b=(0,s.ZP)(v.ZP)(a||(a=(0,c.Z)(["\n  justify-content: center;\n\n  border-radius: 2px;\n  padding: 4px 12px;\n  height: 28px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.fieldBackgroundColor})),Z={CategoryItem:(0,s.ZP)(v.ZP)(u||(u=(0,c.Z)(["\n  align-items: center;\n  justify-content: center;\n\n  flex-direction: row;\n\n  padding: 4px;\n\n  font-weight: 500;\n  font-size: 12px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  //background-color: ",";\n  border: 1px solid ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.field.backgroundColor}),(function(e){return e.theme.accentColor.base})),ImagesSetBox:g,CellText:x,Tag:m,HeaderButton:p,Cell:h,DefaultTag:b}},6493:function(e,n,i){i.d(n,{p:function(){return d}});var t=i(6522),o=i(8095),r=(i(2791),i(6753)),l=i(3329),d=function(e){var n=e.title,i=void 0===n?"Title":n,d=e.openOverlayButtonTitle,a=void 0===d?(0,t.t)("Change"):d,u=e.onOpenOverlayPress,c=e.editButtonText,s=void 0===c?(0,t.t)("Change"):c,v=e.onEditPress,f=e.acceptButtonText,p=void 0===f?(0,t.t)("Ok"):f,h=e.onAcceptPress,m=e.editMode,x=void 0!==m&&m,g=e.canAccept,b=void 0!==g&&g,Z=e.cancelButtonText,C=void 0===Z?(0,t.t)("Cancel"):Z,w=e.onCancelPress;return(0,l.jsxs)(o.ZP,{fxDirection:"row",justifyContent:"space-between",height:"max-content",alignItems:"center",children:[(0,l.jsx)(r.U.CellText,{$isTitle:!0,$size:13,style:{marginRight:"auto"},children:i}),u&&(0,l.jsx)(r.U.HeaderButton,{type:"button",onClick:u,children:a}),!x&&v&&(0,l.jsx)(r.U.HeaderButton,{type:"button",onClick:v,children:s}),x&&w&&(0,l.jsx)(r.U.HeaderButton,{type:"button",onClick:w,children:C}),x&&h&&(0,l.jsx)(r.U.HeaderButton,{type:"button",disabled:!b,onClick:h,children:p})]})}},5227:function(e,n,i){i.d(n,{k:function(){return a}});var t=i(8095),o=i(6522),r=i(2791),l=i(6753),d=i(3329),a=function(e){var n=e.cell,i=e.data,a=(0,r.useMemo)((function(){return n.getValue?n.getValue(i):null}),[n,i]);return(0,d.jsxs)(l.U.Cell,{children:[(0,d.jsx)(l.U.CellText,{$isTitle:!0,$size:12,children:null===n||void 0===n?void 0:n.title}),(0,d.jsx)(t.ZP,{fillWidth:!0,flex:1,fxDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",overflow:"hidden",style:{minHeight:24},children:(0,d.jsx)(l.U.CellText,{$isTitle:!a,$weight:500,children:a||(0,o.t)("undefined")})})]})}},758:function(e,n,i){i.d(n,{A7:function(){return r},QX:function(){return l},fK:function(){return a}});var t=i(6522),o=i(7653),r=[{top:{name:(0,t.t)("label"),getData:function(e){return e.label}},bottom:{name:(0,t.t)("code"),getData:function(e){return e.code}},width:"220px",action:"valueByPath"},{top:{name:(0,t.t)("type"),getData:function(e){return null===e||void 0===e?void 0:e.type}},width:"125px",action:"valueByPath"},{top:{name:(0,t.t)("email"),path:"email"},bottom:{name:(0,t.t)("phone"),path:"phone"},width:"180px",action:"contacts"},{top:{name:(0,t.t)("Address"),getData:function(e){return e.address||"\u043d\u0435 \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"}},bottom:{name:"".concat((0,t.t)("longitude"),"/").concat((0,t.t)("latitude")),getData:function(e){var n,i;return"".concat(((null===(n=e.location)||void 0===n?void 0:n.longitude)||"---")+", "+((null===(i=e.location)||void 0===i?void 0:i.latitude)||"---"))}},width:"175px",action:"valueByPath"},{top:{name:(0,t.t)("Manager"),getData:function(e){var n,i;return"".concat((null===(n=e.manager)||void 0===n||null===(i=n.user)||void 0===i?void 0:i.name)||"---")}},bottom:{name:(0,t.t)("email"),getData:function(e){var n,i;return"".concat((null===(n=e.manager)||void 0===n||null===(i=n.user)||void 0===i?void 0:i.email)||"---")}},width:"150px",action:"valueByPath"},{top:{name:(0,t.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,t.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}],l=[{top:{name:(0,t.t)("variationLabel"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.label}},getImgPreview:function(e){var n,i,t;return null!==(n=e.offer)&&void 0!==n&&n.images?null===(i=e.offer)||void 0===i||null===(t=i.images[0])||void 0===t?void 0:t.img_preview:""},width:"270px",action:"doubleDataWithAvatar"},{top:{name:(0,t.t)("sku"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.sku}},bottom:{name:(0,t.t)("barCode"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,t.t)("type"),path:"type"},bottom:{name:(0,t.t)("status"),path:"status"},width:"120px",action:"status"},{top:{name:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c",align:"end",getData:function(e){return e.stock||0}},bottom:{name:"\u0420\u0435\u0437\u0435\u0440\u0432",align:"end",getData:function(e){return e.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f",align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.awaiting)||0}},bottom:{name:"\u0412\u0442\u0440\u0430\u0447\u0435\u043d\u043e",align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,t.t)("warehouse"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,t.t)("code"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",path:"description"},width:"190px",action:"valueByPath"},{top:{name:"\u0410\u0432\u0442\u043e\u0440",path:"author.name"},bottom:{name:"\u0415\u043c\u0435\u0439\u043b",path:"author.email"},width:"190px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}],d=[{top:{name:(0,t.t)("Price OUT"),align:"end",getData:function(e){var n;return(0,o.__)(Number((null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.in)||0))}},bottom:{name:(0,t.t)("Price IN"),align:"end",getData:function(e){var n;return(0,o.__)(Number((null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.out)||0))}},width:"170px",action:"valueByPath"},{top:{name:(0,t.t)("comment"),align:"start",path:"description"},width:"150px",action:"valueByPath"}],a=[{top:{name:(0,t.t)("batch")},width:"150px",action:"valueByPath"},{top:{name:(0,t.t)("warehouse"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,t.t)("code"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:(0,t.t)("Stock"),align:"end",getData:function(e){return e.stock||0}},bottom:{name:(0,t.t)("Reserved"),align:"end",getData:function(e){return e.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:(0,t.t)("Awaiting"),align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.awaiting)||0}},bottom:{name:(0,t.t)("Lost"),align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,t.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,t.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}].concat(d)}}]);
//# sourceMappingURL=465.4ae1354e.chunk.js.map