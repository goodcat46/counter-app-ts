"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[435],{3435:function(t,n,e){e.r(n);var a,o,i,r=e(168),l=e(4942),u=e(1413),d=e(9439),c=e(4925),v=e(2791),s=e(3363),p=e(9941),h=e(6522),m=e(8553),f=e(7506),g=e(2360),b=e(1251),x=e(8095),w=e(7606),P=e(7426),y=e(6666),D=e(7348),Z=e(1605),B=e(401),S=e(6211),C=e(758),k=e(853),A=e(763),_=e.n(A),j=e(6382),I=e(3847),M=e(3329),E=["params","defaultState","onSubmit","onClose"],N=function(t){return t.product="product",t.variation="variation",t.batch="batch",t}(N||{}),R=(0,m.H1)(N),O=g.ZP.form(a||(a=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  width: 98vw;\n  height: 98vh;\n  padding: 0 8px;\n\n  color: ",";\n\n  background-color: ",";\n"])),(function(t){return t.theme.fontColorSidebar}),(function(t){return t.theme.modalBackgroundColor})),W=(0,g.ZP)(x.ZP)(o||(o=(0,r.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(t){return t.theme.modalBorderColor}),(function(t){return t.theme.modalBorderColor})),q=(0,g.ZP)(x.ZP)(i||(i=(0,r.Z)([""])));n.default=function(t){var n,e,a,o=t.params,i=(t.defaultState,t.onSubmit),r=t.onClose,m=(0,c.Z)(t,E),g=(0,k.dn)(R),x=g.stepCheck,A=g.stepIdx,T=g.setPrevStep,G=g.setNextStep,L=(0,v.useState)([]),Q=(0,d.Z)(L,2),F=Q[0],H=Q[1],K=(0,v.useState)([]),U=(0,d.Z)(K,2),X=U[0],V=U[1],$=(0,v.useState)([]),z=(0,d.Z)($,2),J=z[0],Y=z[1],tt=(0,v.useState)({}),nt=(0,d.Z)(tt,2),et=nt[0],at=nt[1],ot=(0,v.useCallback)((function(t,n){at((function(e){return(0,u.Z)((0,u.Z)({},e),{},(0,l.Z)({},t,n))}))}),[]),it=(0,D.WS)(),rt=(0,P.hN)(),lt=rt.watch,ut=rt.setValue,dt=lt(),ct=dt.search,vt=dt.searchBy,st=(0,v.useMemo)((function(){return{tableTitles:I.By,tableData:F,tableSearchParams:[{dataPath:"label",label:(0,h.t)("label")},{dataPath:"sku",label:(0,h.t)("sku")}],selectedRow:null===et||void 0===et?void 0:et.product,onSubmitSearch:function(t){var n;ut("search",t.search),ut("searchBy",null===(n=t.searchParam)||void 0===n?void 0:n.dataPath)},onRowClick:function(t){var n=F.find((function(n){return n._id===(null===t||void 0===t?void 0:t._id)}));n&&ot("product",n),G()}}}),[null===et||void 0===et?void 0:et.product,F,ot,G,ut]),pt=(0,v.useMemo)((function(){var t=it.find((function(t){var n,e;return t._id===(null===et||void 0===et||null===(n=et.product)||void 0===n||null===(e=n.template)||void 0===e?void 0:e._id)}));return(0,y.c9)(t)}),[it,et]),ht=(0,v.useMemo)((function(){return{tableTitles:pt,tableData:X,isSearch:!1,selectedRow:null===et||void 0===et?void 0:et.variation,onRowClick:function(t){var n=X.find((function(n){return n._id===(null===t||void 0===t?void 0:t._id)}));n&&ot("variation",n),G()}}}),[null===et||void 0===et?void 0:et.variation,ot,G,pt,X]),mt=(0,v.useMemo)((function(){return{tableTitles:C.fK,tableData:J,isSearch:!1,selectedRow:null===et||void 0===et?void 0:et.inventory,onRowClick:function(t){var n=J.find((function(n){return n._id===(null===t||void 0===t?void 0:t._id)}));n&&ot("inventory",n),(null===n||void 0===n?void 0:n.warehouse)&&ot("warehouse",null===n||void 0===n?void 0:n.warehouse),G()}}}),[null===et||void 0===et?void 0:et.inventory,J,ot,G]),ft=(0,v.useMemo)((function(){return x(N.product)?st:x(N.variation)?ht:x(N.batch)?mt:void 0}),[x,st,ht,mt]),gt=(0,v.useMemo)((function(){var t=et.product,n=et.variation,e=et.inventory;return x(N.product)?!!t:x(N.variation)?J.length>0?!!t&&!!n:!!t:!!x(N.batch)&&!!e}),[et,J.length,x]),bt=(0,v.useMemo)((function(){return Object.values(et).length>=4}),[et]),xt=(0,v.useCallback)((function(){var t=et.product,n=et.variation;return x(N.product)?(0,p.Eh)({data:{search:ct,searchBy:vt},onSuccess:H},p.qO.getAll,p.qO):x(N.variation)&&t?(0,p.Eh)({data:{product:(0,S.rE)(t)},onSuccess:function(t){var n=t.map((function(t){return(0,B.m$)(t)}));V(n)}},Z.Z.getAllByProductId,Z.Z):x(N.batch)&&t?(0,p.Eh)({data:{product:(0,S.rE)(t),variation:n?(0,S.rE)(n):void 0,warehouse:null!==o&&void 0!==o&&o.warehouse?(0,S.rE)(null===o||void 0===o?void 0:o.warehouse):void 0},onSuccess:Y},p.nh.getAllInventories,p.nh):void 0}),[et,null===o||void 0===o?void 0:o.warehouse,ct,vt,x]);return(0,v.useEffect)((function(){xt()}),[xt]),(0,v.useEffect)((function(){var t,n,e;(null===(t=et.variation)||void 0===t||null===(n=t.product)||void 0===n?void 0:n._id)!==(null===(e=et.product)||void 0===e?void 0:e._id)&&at((function(t){return{product:null===t||void 0===t?void 0:t.product}}))}),[null===(n=et.product)||void 0===n?void 0:n._id,null===(e=et.variation)||void 0===e||null===(a=e.product)||void 0===a?void 0:a._id]),(0,M.jsxs)(O,(0,u.Z)((0,u.Z)({fillWidth:!0,fillHeight:!0},m),{},{onSubmit:function(t){var n,e;t.preventDefault();var a=(0,u.Z)((0,u.Z)((0,u.Z)({},_().omit(null===et||void 0===et||null===(n=et.inventory)||void 0===n?void 0:n.price,["author","owner","list","product","variation"])),_().omit(et,["price"])),{},{origin:_().pick(null===et||void 0===et||null===(e=et.inventory)||void 0===e?void 0:e.price,["_id"]),tempId:(0,j.x0)(8),quantity:1});i&&i(a),r&&r()},children:[(0,M.jsx)(b.xB,{title:(0,h.t)("Select product"),onBackPress:r}),(0,M.jsxs)(W,{fillWidth:!0,flex:1,overflow:"hidden",children:[(0,M.jsx)(f.Z,{filterOptions:R,asStepper:!0,currentIndex:A}),(0,M.jsx)(s.ZP,(0,u.Z)({},ft))]}),(0,M.jsx)(q,{padding:"8px",children:(0,M.jsx)(w.Z,{steps:R,onPrevPress:function(){return T()},onNextPress:function(){return G()},onCancelPress:0===A?r:void 0,canGoNext:gt,canSubmit:bt,currentIndex:A})})]}))}},7606:function(t,n,e){var a,o,i,r=e(168),l=e(9439),u=e(2360),d=e(8095),c=e(4109),v=e(2791),s=e(6666),p=e(6522),h=e(4805),m=e(3329),f=(0,u.ZP)(d.ZP)(a||(a=(0,r.Z)(["\n  //min-height: 44px;\n  // border-top: 1px solid ",";\n  // border-bottom: 1px solid ",";\n"])),(function(t){return t.theme.modalBorderColor}),(function(t){return t.theme.modalBorderColor})),g=(0,u.ZP)(c.Z)(o||(o=(0,r.Z)(["\n  flex: 1;\n  min-width: min-content;\n  height: 100%;\n"]))),b=(0,u.ZP)(c.Z)(i||(i=(0,r.Z)(["\n  min-width: 34px;\n  height: 100%;\n  color: ",";\n  fill: ",";\n  background-color: ",";\n  @media screen and (min-width: 480px) {\n    flex: 1;\n  }\n"])),(function(t){return t.theme.accentColor.base}),(function(t){return t.theme.accentColor.base}),(function(t){return t.theme.accentColor.light}));n.Z=function(t){var n=t.steps,e=t.currentIndex,a=void 0===e?0:e,o=t.onNextPress,i=t.onPrevPress,r=t.onCancelPress,u=t.onAcceptPress,d=t.canGoNext,c=void 0===d||d,x=t.canAccept,w=t.canSubmit,P=t.cancelButton,y=void 0===P||P,D=t.submitButton,Z=void 0===D||D,B=t.acceptButton,S=t.arrowButtons,C=void 0===S||S,k=(0,h.useMediaQuery)({query:"(max-width: 768px)"}),A=(0,h.useMediaQuery)({query:"(max-width: 480px)"}),_=(0,v.useState)(a),j=(0,l.Z)(_,2),I=j[0],M=j[1],E=(0,v.useMemo)((function(){var t,e;return n&&n[I-1]?{label:null===(t=n[I-1])||void 0===t?void 0:t.label,value:null===(e=n[I-1])||void 0===e?void 0:e.value}:null}),[I,n]),N=(0,v.useMemo)((function(){var t,e;return n&&n[I+1]?{label:null===(t=n[I+1])||void 0===t?void 0:t.label,value:null===(e=n[I+1])||void 0===e?void 0:e.value}:null}),[I,n]),R=(0,v.useCallback)((function(){if(n)if(i){if(0===I)return void(r&&r());var t=I-1;i&&i({option:n[t],value:n[t].value,index:t})}else M((function(t){return 0===t?t:t-1}))}),[I,r,i,n]),O=(0,v.useCallback)((function(){if(n){if(o){var t=I+1;return t===n.length?u&&u():o({option:n[t],value:n[t].value,index:t})}M((function(t){return t+1===n.length?t+1:t}))}}),[I,u,o,n]);return(0,v.useEffect)((function(){s.sr.isNotUnd(a)&&M(a)}),[a]),(0,m.jsxs)(f,{fxDirection:"row",gap:8,fillWidth:!0,children:[y&&!k&&(0,m.jsx)(g,{variant:"defOutlinedSmall",onClick:r,children:(0,p.t)("Cancel")}),C&&(0,m.jsx)(b,{variant:A?"onlyIconFilled":"filledSmall",icon:"SmallArrowLeft",onClick:R,disabled:!E,children:null===E||void 0===E?void 0:E.label}),C&&(0,m.jsx)(b,{variant:A?"onlyIconFilled":"filledSmall",endIcon:"SmallArrowRight",onClick:O,disabled:!c||!N,children:null===N||void 0===N?void 0:N.label}),(Z||B)&&(0,m.jsx)(g,{variant:"filledSmall",type:w&&Z?"submit":"button",onClick:u,disabled:w&&Z?!w:!x,children:(0,p.t)("Accept")})]})}},3847:function(t,n,e){e.d(n,{By:function(){return r},xx:function(){return i}});var a=e(6522),o=e(9663),i=(0,e(5481).Gg)(o.X),r=[{top:{name:(0,a.t)("label"),align:"start",getData:function(t){return null===t||void 0===t?void 0:t.label}},getImgPreview:function(t){var n;return t.images?null===(n=t.images[0])||void 0===n?void 0:n.img_preview:void 0},width:"270px",action:"doubleDataWithAvatar"},{top:{name:(0,a.t)("sku"),align:"start",getData:function(t){return null===t||void 0===t?void 0:t.sku}},bottom:{name:(0,a.t)("barCode"),align:"start",getData:function(t){return null===t||void 0===t?void 0:t.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,a.t)("type"),align:"start",path:"type"},bottom:{name:(0,a.t)("status"),align:"start",getData:function(t){return t.approved}},width:"100px",action:"status"},{top:{name:(0,a.t)("category"),align:"start",getData:function(t){var n;return null===(n=t.category)||void 0===n?void 0:n.label}},bottom:{name:(0,a.t)("parentCategory"),align:"start",getData:function(t){var n,e;return null===(n=t.category)||void 0===n||null===(e=n.parent)||void 0===e?void 0:e.label}},width:"180px",action:"valueByPath"},{top:{name:"\u0411\u0440\u0435\u043d\u0434",align:"start",path:"brand.label"},bottom:{name:"\u0412\u0438\u0440\u043e\u0431\u043d\u0438\u043a",align:"start",path:"manufacturer.name"},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",align:"start",path:"description"},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043d\u043e\u0432\u0438\u0432",align:"start",getData:function(t){var n;return null===t||void 0===t||null===(n=t.editor)||void 0===n?void 0:n.email}},bottom:{name:"\u0410\u0432\u0442\u043e\u0440",align:"start",getData:function(t){var n;return null===t||void 0===t||null===(n=t.author)||void 0===n?void 0:n.email}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},bottom:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},width:"150px",action:"dateDbl"}]},758:function(t,n,e){e.d(n,{A7:function(){return i},QX:function(){return r},fK:function(){return u}});var a=e(6522),o=e(5059),i=[{top:{name:(0,a.t)("label"),getData:function(t){return t.label}},bottom:{name:(0,a.t)("code"),getData:function(t){return t.code}},width:"220px",action:"valueByPath"},{top:{name:(0,a.t)("type"),getData:function(t){return null===t||void 0===t?void 0:t.type}},width:"125px",action:"valueByPath"},{top:{name:(0,a.t)("email")},bottom:{name:(0,a.t)("phone")},width:"180px",action:"contacts"},{top:{name:(0,a.t)("Address"),getData:function(t){return t.address||"\u043d\u0435 \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"}},bottom:{name:"".concat((0,a.t)("longitude"),"/").concat((0,a.t)("latitude")),getData:function(t){var n,e;return"".concat(((null===(n=t.location)||void 0===n?void 0:n.longitude)||"---")+", "+((null===(e=t.location)||void 0===e?void 0:e.latitude)||"---"))}},width:"175px",action:"valueByPath"},{top:{name:(0,a.t)("manager"),getData:function(t){var n,e;return"".concat((null===(n=t.manager)||void 0===n||null===(e=n.user)||void 0===e?void 0:e.name)||"---")}},bottom:{name:(0,a.t)("email"),getData:function(t){var n,e;return"".concat((null===(n=t.manager)||void 0===n||null===(e=n.user)||void 0===e?void 0:e.email)||"---")}},width:"150px",action:"valueByPath"},{top:{name:(0,a.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,a.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}],r=[{top:{name:(0,a.t)("variationLabel"),getData:function(t){var n;return null===(n=t.variation)||void 0===n?void 0:n.label}},getImgPreview:function(t){var n,e,a;return null!==(n=t.product)&&void 0!==n&&n.images?null===(e=t.product)||void 0===e||null===(a=e.images[0])||void 0===a?void 0:a.img_preview:""},width:"270px",action:"doubleDataWithAvatar"},{top:{name:(0,a.t)("sku"),getData:function(t){var n;return null===(n=t.variation)||void 0===n?void 0:n.sku}},bottom:{name:(0,a.t)("barCode"),getData:function(t){var n;return null===(n=t.variation)||void 0===n?void 0:n.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,a.t)("type"),path:"type"},bottom:{name:(0,a.t)("status"),path:"status"},width:"120px",action:"status"},{top:{name:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c",align:"end",getData:function(t){return t.stock||0}},bottom:{name:"\u0420\u0435\u0437\u0435\u0440\u0432",align:"end",getData:function(t){return t.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f",align:"end",getData:function(t){return(null===t||void 0===t?void 0:t.awaiting)||0}},bottom:{name:"\u0412\u0442\u0440\u0430\u0447\u0435\u043d\u043e",align:"end",getData:function(t){return(null===t||void 0===t?void 0:t.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,a.t)("warehouse"),getData:function(t){var n;return null===(n=t.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,a.t)("code"),getData:function(t){var n;return null===(n=t.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",path:"description"},width:"190px",action:"valueByPath"},{top:{name:"\u0410\u0432\u0442\u043e\u0440",path:"author.name"},bottom:{name:"\u0415\u043c\u0435\u0439\u043b",path:"author.email"},width:"190px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}],l=[{top:{name:(0,a.t)("Price OUT"),align:"end",getData:function(t){var n;return(0,o.ZP)(Number((null===t||void 0===t||null===(n=t.price)||void 0===n?void 0:n.in)||0))}},bottom:{name:(0,a.t)("Price IN"),align:"end",getData:function(t){var n;return(0,o.ZP)(Number((null===t||void 0===t||null===(n=t.price)||void 0===n?void 0:n.out)||0))}},width:"170px",action:"valueByPath"},{top:{name:(0,a.t)("comment"),align:"start",path:"description"},width:"150px",action:"valueByPath"}],u=[{top:{name:(0,a.t)("batch")},width:"150px",action:"valueByPath"},{top:{name:(0,a.t)("warehouse"),getData:function(t){var n;return null===(n=t.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,a.t)("code"),getData:function(t){var n;return null===(n=t.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:(0,a.t)("Stock"),align:"end",getData:function(t){return t.stock||0}},bottom:{name:(0,a.t)("Reserved"),align:"end",getData:function(t){return t.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:(0,a.t)("Awaiting"),align:"end",getData:function(t){return(null===t||void 0===t?void 0:t.awaiting)||0}},bottom:{name:(0,a.t)("Lost"),align:"end",getData:function(t){return(null===t||void 0===t?void 0:t.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,a.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,a.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}].concat(l)}}]);
//# sourceMappingURL=435.790034b8.chunk.js.map