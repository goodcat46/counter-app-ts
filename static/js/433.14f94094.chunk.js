"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[433],{6433:function(n,e,i){i.r(e),i.d(e,{default:function(){return $}});var o=i(168),t=i(1413),r=i(9439),l=i(4109),a=i(7585),d=i(1087),c=i(2791),s=i(2360),u=i(8495),p=i(7348),v=i(6733),m=i(9264),f=i(3433),h=i(5188),y=i(7689),x=i(9085),g=i(825),w=i(2437),Z=i(7824),b=i(401),C=i(6522),S=function(n){var e,i=n.ctx,o=n.navigate,t=n.service;return{name:"enterCompany",title:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438",icon:"logIn",disabled:!(null!==(e=i.selectedRow)&&void 0!==e&&e._id),iconSize:"100%",type:"onlyIcon",onClick:function(){var n,e;null!==(n=i.selectedRow)&&void 0!==n&&n._id&&t.logIn({data:{_id:null===(e=i.selectedRow)||void 0===e?void 0:e._id},onSuccess:function(n){var e;if(!n._id)return console.log("data",n);x.Am.success("Current company: ".concat(null===(e=n.company)||void 0===e?void 0:e.name)),o("/app/".concat(n._id))},onError:function(n){console.log(n)}})}}},k=function(n){var e,i=n.ctx,o=(n.navigate,n.service,n.companyType),t=n.modalService;return{name:"editCompany",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",icon:"edit",disabled:null===(e=i.selectedRow)||void 0===e||!e._id||!o||!["own"].includes(o),iconSize:"100%",type:"onlyIcon",onClick:function(){t.handleOpenModal({Modal:g.n.FormCreateCompany,modalChildrenProps:{fillHeight:!0,title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0456\u044e"}})}}},P=function(n){var e,i=n.companyType,o=n.ctx;return{name:"deleteCompany",title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",icon:"delete",iconSize:"100%",disabled:!(null===(e=o.selectedRow)||void 0===e||!e._id||!i)&&["own"].includes(i),type:"onlyIcon",onClick:function(){var n;console.log("selPermission",null===(n=o.selectedRow)||void 0===n?void 0:n._id)}}},I=function(n){var e,i=n.companyType,o=n.ctx;return{name:"leaveCompany",title:"\u041f\u043e\u043a\u0438\u043d\u0443\u0442\u0438",icon:"logOut",iconSize:"100%",disabled:null===(e=o.selectedRow)||void 0===e||!e._id||!i||!["invited"].includes(i),type:"onlyIcon",onClick:function(){var n;console.log("leaveCompany",null===(n=o.selectedRow)||void 0===n?void 0:n._id)}}},_=function(n){var e,i=n.ctx,o=n.companyType;return{name:"rejectPermission",title:"\u0412\u0456\u0434\u0445\u0438\u043b\u0438\u0442\u0438",icon:"clear",iconSize:"100%",type:"onlyIconFilled",disabled:null===(e=i.selectedRow)||void 0===e||!e._id||!o||!["invites"].includes(o),onClick:function(){console.log("rejectPermission",i.selectedRow)}}},z=function(n){var e,i=n.ctx,o=n.companyType;return{name:"acceptPermission",title:"\u041f\u0440\u0438\u0439\u043d\u044f\u0442\u0438",icon:"done",iconSize:"100%",type:"onlyIconFilled",disabled:null===(e=i.selectedRow)||void 0===e||!e._id||!o||!["invites"].includes(o),onClick:function(){console.log("acceptPermission",i.selectedRow)}}},j=function(n){var e=n.modalService;return{name:"createCompany",title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0456\u044e",icon:"plus",iconSize:"100%",type:"onlyIconFilled",onClick:function(){e.handleOpenModal({Modal:g.n.FormCreateCompany,props:{fillHeight:!0,title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0456\u044e"}})}}},R=new b.S7;R.add("refresh",(function(n){var e=n.ctx,i=n.service,o=n.extra;return{name:"refresh",title:(0,C.t)("Refresh"),icon:"refresh",iconSize:"100%",type:"onlyIcon",disabled:!(null!==o&&void 0!==o&&o.userId),onClick:function(){null!==o&&void 0!==o&&o.userId&&i.getAllByUserId({onLoading:e.onRefresh,data:{userId:null===o||void 0===o?void 0:o.userId,query:null===o||void 0===o?void 0:o.query}})}}}));var F,T,M,B,E,U,D,L=function(n){var e,i,o=(0,w.xc)()[Z.d.permissions],t=(0,h.kw)(),r=null===(e=(0,p.DF)())||void 0===e||null===(i=e.user)||void 0===i?void 0:i._id,l=(0,y.s0)();return function(e){var i={ctx:e,navigate:l,service:o,modalService:t,companyType:n},a=R.activate({navigate:l,service:o,modalService:t,extra:{userId:r,query:{type:n}}});return[S(i),I(i),{separator:!0}].concat((0,f.Z)(a(e)),[{separator:!0},k(i),P(i),{separator:!0},_(i),z(i),j(i)])}},A=i(9680),O=i(9345),q=i(457),N=i(3329),H=[{title:"\u041c\u043e\u0457",param:"own"},{title:"\u041f\u0440\u0430\u0446\u044e\u044e",param:"invited"},{title:"\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044f",param:"invites"},{title:"\u0423\u0441\u0456",param:"all"}],V=function(n){n.path;var e=(0,p.DF)().user,i=(0,c.useState)(),o=(0,r.Z)(i,2),l=o[0],s=o[1],u=(0,d.lr)({companyType:H[0].param})[1],f=(0,m.O)(),h=(0,w.xc)()[Z.d.permissions],y=L((null===l||void 0===l?void 0:l.param)||"own"),x=(0,c.useState)(!1),g=(0,r.Z)(x,2),b=g[0],C=g[1],S=(0,c.useMemo)((function(){var n;return null===(n=f.permissions)||void 0===n?void 0:n.filter((function(n){var e,i;return"invited"===(null===l||void 0===l?void 0:l.param)?n.status===A.n.ACCEPTED:"invites"===(null===l||void 0===l?void 0:l.param)?n.status===A.n.PENDING:"all"===(null===l||void 0===l?void 0:l.param)?n:"own"===(null===l||void 0===l?void 0:l.param)?(null===(e=n.user)||void 0===e?void 0:e._id)===(null===(i=n.owner)||void 0===i?void 0:i._id):n}))}),[null===l||void 0===l?void 0:l.param,f.permissions]),k=(0,c.useMemo)((function(){return{tableData:S,tableTitles:O.Tz,tableSearchParams:q.rB,isFilter:!1,isSearch:!0,checkBoxes:!1,actionsCreator:y}}),[y,S]),P=(0,c.useCallback)((function(n){u({companyType:n.param}),s(n)}),[u]),I=(0,c.useCallback)((function(n){return(null===l||void 0===l?void 0:l.param)===n?"active":""}),[null===l||void 0===l?void 0:l.param]);(0,c.useEffect)((function(){console.log("permissions loadind",b)}),[b]);var _=(0,c.useMemo)((function(){return H.map((function(n){return(0,N.jsx)(Y,{variant:"def",onClick:function(){return P(n)},className:I(n.param),children:n.title},n.param)}))}),[I,P]);return(0,c.useEffect)((function(){u({companyType:H[0].param}),s(H[0])}),[]),(0,c.useEffect)((function(){e._id&&h.getAllByUserId({data:{userId:e._id},onLoading:C})}),[e._id]),(0,N.jsxs)(G,{children:[(0,N.jsxs)(J,{children:[(0,N.jsx)(Q,{children:(0,N.jsx)(v.Z,(0,t.Z)({},e))}),(0,N.jsx)(W,{children:(0,N.jsx)(X,{children:_})})]}),(0,N.jsx)(K,{children:(0,N.jsx)(a.ZP,(0,t.Z)((0,t.Z)({},k),{},{isLoading:b}))})]})},G=s.ZP.div(F||(F=(0,o.Z)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: min-content 1fr;\n\n  ","\n"])),u.VU),J=s.ZP.div(T||(T=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n\n  position: relative;\n\n  overflow: hidden;\n\n  //background-color: ",";\n\n  ","\n"])),(function(n){return n.theme.tableBackgroundColor}),u.SI),K=s.ZP.div(M||(M=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  overflow: hidden;\n\n  ",";\n\n  background-color: ",";\n"])),u.SI,(function(n){return n.theme.tableBackgroundColor})),Q=s.ZP.div(B||(B=(0,o.Z)(["\n  position: sticky;\n  top: 0;\n  left: 0;\n  z-index: 1;\n\n  padding: 16px 12px;\n  width: 100%;\n  max-width: 250px;\n"]))),W=s.ZP.div(E||(E=(0,o.Z)(["\n  max-width: 100%;\n  overflow: auto;\n\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n"]))),X=s.ZP.div(U||(U=(0,o.Z)(["\n  display: grid;\n  grid-template-columns: repeat(4, 150px);\n  grid-auto-rows: 32px;\n\n  max-width: 600px;\n"]))),Y=(0,s.ZP)(l.Z)(D||(D=(0,o.Z)(["\n  position: relative;\n\n  font-weight: 700;\n  font-size: 12px;\n  text-transform: uppercase;\n  text-align: center;\n\n  border-radius: 0;\n  border-style: none;\n  border-width: 0;\n\n  &::before {\n    display: block;\n    content: '';\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 1px;\n    background-color: ",";\n  }\n\n  &::after {\n    display: block;\n    content: '';\n    position: absolute;\n    bottom: 0;\n    left: 50%;\n    //height: 1px;\n    //width: 100%;\n    height: 3px;\n    width: 0;\n    transition: all ",";\n    transform: translate(-50%);\n    background-color: ",";\n  }\n\n  &.active {\n    &::after {\n      width: 80%;\n    }\n  }\n\n  &:hover,\n  &:focus {\n    outline-style: none;\n\n    &::after {\n      width: 100%;\n    }\n  }\n"])),(function(n){return n.theme.trBorderClr}),(function(n){return n.theme.globals.timingFnMui}),(function(n){return n.theme.accentColor.base})),$=(0,c.memo)(V)},8495:function(n,e,i){i.d(e,{SI:function(){return c},VU:function(){return d}});var o,t,r,l=i(168),a=i(2360),d=(0,a.iv)(o||(o=(0,l.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),c=(0,a.iv)(t||(t=(0,l.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,a.iv)(r||(r=(0,l.Z)(["\n  outline: 1px solid tomato;\n"])))},6733:function(n,e,i){var o,t,r,l,a,d=i(168),c=i(1413),s=i(4925),u=i(2360),p=i(3329),v=["avatarURL","name","email","emailFontSize","nameFontSize","nameProps","emailProps","children"],m=u.ZP.div(o||(o=(0,d.Z)(["\n  display: flex;\n"]))),f=u.ZP.div(t||(t=(0,d.Z)(["\n  min-width: 64px;\n  max-width: 64px;\n  height: 64px;\n  overflow: hidden;\n  border-radius: 50%;\n"]))),h=u.ZP.div(r||(r=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 4px;\n  padding: 8px;\n\n  height: 100%;\n"]))),y=u.ZP.div(l||(l=(0,d.Z)(["\n  font-size: ",";\n  font-weight: 600;\n"])),(function(n){var e=n.fontSize;return e||"12px"})),x=u.ZP.div(a||(a=(0,d.Z)(["\n  font-size: ",";\n  line-height: 16px;\n"])),(function(n){var e=n.fontSize;return e||"10px"}));e.Z=function(n){var e=n.avatarURL,i=void 0===e?"":e,o=n.name,t=void 0===o?"name":o,r=n.email,l=void 0===r?"email":r,a=n.emailFontSize,d=n.nameFontSize,u=n.nameProps,g=n.emailProps,w=n.children,Z=(0,s.Z)(n,v);return(0,p.jsxs)(m,(0,c.Z)((0,c.Z)({},Z),{},{children:[(0,p.jsx)(f,{children:(0,p.jsx)("img",{src:i,alt:"userImage",width:100,height:100})}),(0,p.jsxs)(h,{children:[(0,p.jsx)(y,(0,c.Z)((0,c.Z)({fontSize:d},u),{},{children:t})),(0,p.jsx)(x,(0,c.Z)((0,c.Z)({fontSize:a},g),{},{children:l})),w]})]}))}}}]);
//# sourceMappingURL=433.14f94094.chunk.js.map