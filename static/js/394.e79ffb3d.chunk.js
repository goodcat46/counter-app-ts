"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[394],{4394:function(n,e,t){t.r(e),t.d(e,{default:function(){return pn}});var i,o,l,r,d,a,u,c,s,v,p,f=t(168),m=t(9439),g=t(2360),x=t(8495),h=t(9322),C=t(2791),Z=t(8332),b=t(8333),P=t(8553),k=t(6492),y=t(7506),j=t(8095),w=t(7995),A=t(6087),S=t(710),V=t(1251),O=t(3329),I=function(n){return n.Variations="Variations",n.Prices="Prices",n.Warehousing="Warehousing",n}(I||{}),z=(0,P.H1)(I),B=(0,g.ZP)(j.ZP)(i||(i=(0,f.Z)(["\n  overflow: auto;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);\n  }\n"])),(function(n){return n.theme.globals.timingFunctionMain}),(function(n){return n.theme.backgroundColorLight}),(function(n){return n.isVisible?0:100})),_=(0,g.ZP)(j.ZP)(o||(o=(0,f.Z)(["\n  border-top: 1px solid ",";\n  //border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor}),(function(n){return n.theme.modalBorderColor})),D=function(n){var e,t,i=n.isVisible,o=n.toggleVisibility,l=(0,b.N4)(),r=(0,C.useState)(I.Variations),d=(0,m.Z)(r,2),a=d[0],u=d[1],c=(0,C.useMemo)((function(){return a===I.Variations?(0,O.jsx)(w.Z,{withActions:!0}):a===I.Prices?(0,O.jsx)(A.Z,{withActions:!0}):a===I.Warehousing?(0,O.jsx)(S.Z,{withActions:!0}):void 0}),[a]);return(0,O.jsxs)(B,{overflow:"hidden",fillHeight:!0,isVisible:i,children:[i&&(0,O.jsx)(V.xB,{onBackPress:o,renderTitle:(0,O.jsxs)(j.ZP,{padding:"0 8px",fxDirection:"row",alignItems:"center",justifyContent:"center",gap:8,children:[(0,O.jsx)(k.x,{$weight:600,$size:14,children:null===l||void 0===l||null===(e=l.currentProduct)||void 0===e?void 0:e.label}),(0,O.jsx)(k.x,{$size:14,children:null===l||void 0===l||null===(t=l.currentProduct)||void 0===t?void 0:t.sku})]})}),(0,O.jsxs)(_,{overflow:"hidden",fillWidth:!0,flex:1,children:[(0,O.jsx)(y.Z,{filterOptions:z,defaultValue:a,onOptSelect:function(n,e,t){u(e)},preventFilter:!0}),c]})]})},Q=t(1413),R=t(4925),L=t(4109),W=t(6522),F=t(7348),M=t(7689),N=t(3728),H=t(4838),T=t(7665),E=t(6666),U=t(7426),$=["className"],K=["CellComponent"],X=(0,g.ZP)(j.ZP)(l||(l=(0,f.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(n){return n.theme.sideBarBackgroundColor})),J=(0,g.ZP)(j.ZP)(r||(r=(0,f.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),q=(0,g.ZP)(j.ZP)(d||(d=(0,f.Z)([""]))),G=(0,g.ZP)(L.Z)(a||(a=(0,f.Z)(["\n  fill: ",";\n"])),(function(n){return n.theme.globals.colors.error})),Y=(0,g.ZP)(L.Z)(u||(u=(0,f.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),nn=function(n){var e,t,i=n.className,o=(0,R.Z)(n,$),l=(0,F.nr)().currentProduct,r=(0,b.N4)(),d=null===(e=(0,U.Zx)())||void 0===e?void 0:e.productId,a=(0,M.s0)(),u=(0,M.TH)(),c=(0,C.useMemo)((function(){return en.map((function(n){var e=n.CellComponent,t=(0,R.Z)(n,K);return e?(0,O.jsx)(e,{setOverlayContent:r.createOverlayComponent,cell:t,data:l},t.title):(0,O.jsx)(N.kQ,{setOverlayContent:r.createOverlayComponent,cell:t,data:l},t.title)}))}),[r.createOverlayComponent,l]);return(0,O.jsxs)(X,{fillWidth:!0,flex:1,className:i,padding:"0 8px",children:[(0,O.jsx)(H.iw,{title:(0,W.t)("Product overview"),onClose:function(){if(null!==u&&void 0!==u&&u.pathname){var n,e=null===u||void 0===u||null===(n=u.pathname)||void 0===n?void 0:n.replace("/".concat((null===l||void 0===l?void 0:l._id)||d),"");e&&a(e)}}}),(0,O.jsx)(J,{fillWidth:!0,flex:1,overflow:"auto",children:c}),(0,O.jsxs)(q,{fillWidth:!0,fxDirection:"row",gap:6,padding:"6px 0",children:[(0,O.jsx)(L.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==o&&void 0!==o&&o.onEdit),onClick:null===o||void 0===o?void 0:o.onEdit}),(0,O.jsx)(L.Z,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:null!==o&&void 0!==o&&null!==(t=o.product)&&void 0!==t&&t.visible?"visibilityOn":"visibilityOff",disabled:!(null!==o&&void 0!==o&&o.onHide),onClick:null===o||void 0===o?void 0:o.onHide}),(0,O.jsx)(G,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==o&&void 0!==o&&o.onDelete),onClick:null===o||void 0===o?void 0:o.onDelete}),(0,O.jsxs)(j.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,O.jsx)(L.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",disabled:!(null!==o&&void 0!==o&&o.onRefresh),onClick:null===o||void 0===o?void 0:o.onRefresh}),(0,O.jsx)(Y,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==o&&void 0!==o&&o.onOpenRightSide),onClick:null===o||void 0===o?void 0:o.onOpenRightSide})]})]})]})},en=[{title:(0,W.t)("Label"),CellComponent:N.kQ,getValue:function(n){return null===n||void 0===n?void 0:n.label},gridArea:"label"},{title:(0,W.t)("status"),CellComponent:N.XO,getValue:function(n){return null===n||void 0===n?void 0:n.approved},gridArea:"approved"},{title:(0,W.t)("Type"),CellComponent:N.kQ,getValue:function(n){return null===n||void 0===n?void 0:n.type},gridArea:"type"},{title:(0,W.t)("SKU"),CellComponent:N.kQ,getValue:function(n){return null===n||void 0===n?void 0:n.sku},gridArea:"sku"},{title:(0,W.t)("Bar-code"),CellComponent:N.kQ,getValue:function(n){return null===n||void 0===n?void 0:n.barCode},gridArea:"barCode"},{title:(0,W.t)("Categories"),CellComponent:N.XK,gridArea:"categories"},{title:(0,W.t)("Brand"),CellComponent:N.kQ,getValue:function(n){var e;return null===n||void 0===n||null===(e=n.brand)||void 0===e?void 0:e.label},gridArea:"brand"},{title:(0,W.t)("Measurement"),CellComponent:N.kQ,getValue:function(n){try{var e=null!==n&&void 0!==n&&n.measurement?JSON.parse(null===n||void 0===n?void 0:n.measurement):{};return["".concat((0,W.t)("unit"),": ").concat((null===e||void 0===e?void 0:e.unit)||0),"".concat((0,W.t)("min"),": ").concat((null===e||void 0===e?void 0:e.min)||0),"".concat((0,W.t)("max"),": ").concat((null===e||void 0===e?void 0:e.max)||0),"".concat((0,W.t)("step"),": ").concat((null===e||void 0===e?void 0:e.step)||0)].join(" | ")}catch(t){return""}},gridArea:"measurement"},{title:(0,W.t)("Description"),CellComponent:N.kQ,getValue:function(n){return null===n||void 0===n?void 0:n.description},gridArea:"description"},{title:(0,W.t)("Variations template"),CellComponent:N.pT,gridArea:"template"},{title:(0,W.t)("Properties"),CellComponent:N._q,gridArea:"properties"},{title:(0,W.t)("Default values"),CellComponent:N.fQ,gridArea:"defaults"},{title:(0,W.t)("Created by / Date / Time"),CellComponent:N.kQ,getValue:function(n){var e;return null!==n&&void 0!==n&&n.author?"".concat(null===n||void 0===n||null===(e=n.author)||void 0===e?void 0:e.email," / ").concat(null!==n&&void 0!==n&&n.createdAt&&E.sr.isStr(null===n||void 0===n?void 0:n.createdAt)?(0,T.p)(Date.parse(null===n||void 0===n?void 0:n.createdAt)):""):null},gridArea:"created"},{title:(0,W.t)("Updated by / Date / Time"),CellComponent:N.kQ,getValue:function(n){var e;return null!==n&&void 0!==n&&n.editor?"".concat(null===n||void 0===n||null===(e=n.editor)||void 0===e?void 0:e.email," / ").concat(null!==n&&void 0!==n&&n.updatedAt&&E.sr.isStr(null===n||void 0===n?void 0:n.updatedAt)?(0,T.p)(Date.parse(null===n||void 0===n?void 0:n.updatedAt)):""):null},gridArea:"updated"},{title:(0,W.t)("Images"),CellComponent:N.AK,gridArea:"images"}],tn=t(5188),on=t(825),ln=t(1383),rn=t(6211),dn=(0,g.ZP)(j.ZP)(c||(c=(0,f.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor})),an=(0,g.ZP)(j.ZP)(s||(s=(0,f.Z)(["\n  position: absolute;\n\n  top: 0;\n  left: ",";\n  z-index: 20;\n\n  background-color: ",";\n\n  transition: all ",";\n"])),(function(n){return n.isActive?0:"100%"}),(function(n){return n.theme.backdropColor}),(function(n){return n.theme.globals.timingFunctionMain})),un=(0,g.ZP)(j.ZP)(v||(v=(0,f.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 20;\n\n  animation: 'OverlayFromRight';\n"]))),cn=function(n){var e=n.toggleRightSideVisibility,t=(0,b.N4)(),i=(0,tn.f9)(),o=(0,C.useState)(!1),l=(0,m.Z)(o,2),r=l[0],d=l[1],a=(0,Z.xc)().products,u=(0,C.useCallback)((function(n){return function(e){e.target===e.currentTarget&&t.removeStackItem(n)}}),[t]),c=(0,C.useMemo)((function(){return t.getOverlayStack().map((function(n,e){var i=n.RenderComponent,o=n.props,l=n.id;return(0,O.jsx)(un,{className:"overlay-".concat(l),style:{zIndex:20+e},fillHeight:!0,fillWidth:!0,alignItems:"flex-end",onClick:u(l),children:(0,O.jsx)(i,(0,Q.Z)((0,Q.Z)({},o),{},{onClose:function(){t.removeStackItem(l)},overlayId:l,index:e}),"overlay-".concat(l))},"overlay-".concat(l))}))}),[u,t]);return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(dn,{children:[(0,O.jsx)(nn,{product:null===t||void 0===t?void 0:t.currentProduct,onEdit:t.currentProduct?function(){var n;if(t.currentProduct){var e=(0,rn.$i)(null===t||void 0===t?void 0:t.currentProduct);console.log("PageProductOverviewLeftSide",e);var o=i.handleOpenModal({Modal:on.n.FormCreateProduct,props:{edit:!0,_id:null===t||void 0===t||null===(n=t.currentProduct)||void 0===n?void 0:n._id,defaultState:e,onSubmit:function(n,e){a.updateById({data:(0,Q.Z)((0,Q.Z)({},n),{},{refreshCurrent:!0}),onSuccess:function(){(null===e||void 0===e?void 0:e.closeAfterSave)&&(null===o||void 0===o||o.onClose()),ln.kl.success("Updated product")}}).finally()}}})}}:void 0,onRefresh:r?void 0:function(){var n,e,i=ln.kl.createLoader("Refreshing...").open();(null===(n=t.currentProduct)||void 0===n?void 0:n._id)&&a.getProductFullInfo({data:{_id:null===(e=t.currentProduct)||void 0===e?void 0:e._id},onSuccess:function(){i.close(),ln.kl.success("Data refreshed")},onLoading:d}).finally(i.close)},onOpenRightSide:e}),(0,O.jsx)(an,{fillWidth:!0,fillHeight:!0,isActive:c.length>0,overflow:"hidden",children:c})]})})},sn=ln.kl.createLoader("Loading product info"),vn=g.ZP.div(p||(p=(0,f.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),x.VU),pn=function(n){var e=n.path,t=(0,C.useState)(!1),i=(0,m.Z)(t,2),o=i[0],l=i[1],r=(0,Z.xc)()[Z.EJ.products],d=(0,U.Zx)().productId,a=(0,C.useState)(!1),u=(0,m.Z)(a,2),c=u[0],s=u[1],v=(0,F.nr)().currentProduct,p=(0,C.useCallback)((function(){l((function(n){return!n}))}),[]);return(0,C.useEffect)((function(){if(!c&&d&&d!==(null===v||void 0===v?void 0:v._id)){var n=sn.open().close;console.log("==========>>>>>>>>>>>>"),console.log("PageProductOverview get full info"),r.getProductFullInfo({data:{_id:d},onLoading:s}).finally(n)}}),[d]),(0,C.useEffect)((function(){return function(){r.clearCurrent(void 0)}}),[]),(0,O.jsx)(h.default,{path:e,children:(0,O.jsx)(b.ZP,{children:(0,O.jsxs)(vn,{children:[(0,O.jsx)(cn,{toggleRightSideVisibility:p}),(0,O.jsx)(D,{isVisible:o,toggleVisibility:p})]})})})}}}]);
//# sourceMappingURL=394.e79ffb3d.chunk.js.map