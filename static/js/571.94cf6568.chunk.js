"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[571,487],{7616:function(e,t,i){i.r(t),i.d(t,{default:function(){return w}});var n,r=i(168),o=i(1413),a=i(9439),l=i(3363),c=i(8495),s=i(8923),d=i(2360),u=i(2791),f=i(1199),p=i(7348),h=i(8314),Z=i(4165),v=i(5861),m=i(5188),S=i(1352),b=i(9806),x=i(9085),P=(i(763),i(6211),i(8583)),y=[{label:S.y.SALES,value:S.y.SALES},{label:S.y.PURCHASES,value:S.y.PURCHASES}],g=function(e){var t=(0,m.f9)();return(0,u.useCallback)((function(i){var n;return[{name:"openPriceList",title:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438",icon:"openInNew",iconSize:"90%",type:"onlyIcon",disabled:!(null!==(n=i.selectedRow)&&void 0!==n&&n._id),onClick:function(){var e=(0,v.Z)((0,Z.Z)().mark((function e(){var n;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.handleOpenModal({ModalChildren:P.Z,modalChildrenProps:{listId:null===(n=i.selectedRow)||void 0===n?void 0:n._id,getTableSetting:function(e){return{}}}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{name:"editPriceList",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",icon:"edit",iconSize:"90%",type:"onlyIcon",disabled:!0},{name:"copyPriceList",title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438",icon:"copy",iconSize:"90%",type:"onlyIcon",disabled:!0},{name:"archivePriceList",title:"\u0410\u0440\u0445\u0456\u0432",icon:"archive",iconSize:"90%",type:"onlyIcon",disabled:!0},{separator:!0},{name:"createPriceList",title:"\u041d\u043e\u0432\u0438\u0439",icon:"plus",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){var i=(0,v.Z)((0,Z.Z)().mark((function i(){var n;return(0,Z.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=t.handleOpenModal({ModalChildren:b.default,modalChildrenProps:{filterOptions:y,defaultData:{type:"purchases"},onSubmit:function(t,i){e.createList({data:t,onSuccess:function(e){(null===i||void 0===i?void 0:i.onSuccess)&&(null===i||void 0===i||i.onSuccess(e)),(null===i||void 0===i?void 0:i.closeAfterSave)&&(null===n||void 0===n||n.onClose()),x.Am.success("Created price list: ".concat(e.label))}})}}});case 1:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}()}]}),[t,e])},A=i(7689),C=i(3329),j=d.ZP.div(n||(n=(0,r.Z)(["\n  ","\n"])),c.VU),w=function(e){var t=(0,h.Z)(),i=(0,p.N_)(),n=(0,A.s0)(),r=t.getAll,c=g(t),d=(0,u.useState)(!1),Z=(0,a.Z)(d,2),v=Z[0],m=Z[1],S=(0,u.useState)(),b=(0,a.Z)(S,2),x=b[0],P=b[1],y=(0,u.useState)(),w=(0,a.Z)(y,2),k=w[0],L=w[1],_=(0,u.useMemo)((function(){return{tableData:i.lists,tableTitles:s.QJ,isFilter:!1,isSearch:!0,footer:!1,checkBoxes:!0,actionsCreator:c,onRowClick:function(e){(null===e||void 0===e?void 0:e._id)&&n("".concat(null===e||void 0===e?void 0:e._id))},onFilterSubmit:function(e){L(e),r({data:{refresh:!0,query:{filterParams:e,sortParams:x}},onLoading:m}).then()},handleTableSort:function(e,t){P({dataPath:e.dataPath,sortOrder:t}),r({data:{refresh:!0,query:{sortParams:{dataPath:e.dataPath,sortOrder:t},filterParams:k}},onLoading:m}).then()}}}),[c,k,r,n,x,i.lists]);return(0,u.useEffect)((function(){x||k||x||k||0===i.lists.length&&r({data:{refresh:!0},onLoading:m,onSuccess:function(e){console.log("PagePriceManagement onSuccess getAll")}})}),[k,r,x,i.lists.length]),(0,C.jsx)(f.default,{path:e.path,children:(0,C.jsx)(j,{children:(0,C.jsx)(l.ZP,(0,o.Z)((0,o.Z)({},_),{},{isLoading:v}))})})}},8495:function(e,t,i){i.d(t,{SI:function(){return s},VU:function(){return c}});var n,r,o,a=i(168),l=i(2360),c=(0,l.iv)(n||(n=(0,a.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),s=(0,l.iv)(r||(r=(0,a.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,l.iv)(o||(o=(0,a.Z)(["\n  outline: 1px solid tomato;\n"])))},9806:function(e,t,i){i.r(t);var n=i(1413),r=i(9439),o=i(4925),a=i(2242),l=i(7805),c=i(763),s=i(8095),d=i(4990),u=i(6681),f=i(6522),p=i(2005),h=i(2791),Z=i(6757),v=i(4343),m=i(3329),S=["filterOptions","onSubmit","defaultData","edit"];t.default=function(e){var t=e.filterOptions,i=e.onSubmit,b=e.defaultData,x=(e.edit,(0,o.Z)(e,S)),P=(0,h.useState)(!1),y=(0,r.Z)(P,1)[0],g=(0,l.hN)({defaultValues:(0,c.omit)(b,["createdAt","updatedAt","_id"])}),A=g.formState,C=A.errors,j=A.isValid,w=g.register,k=g.clearAfterSave,L=g.closeAfterSave,_=g.toggleAfterSubmitOption,O=g.setValue,F=g.handleSubmit;return(0,m.jsx)(a.Z,(0,n.Z)((0,n.Z)({isValid:j,onSubmit:F((function(e){return i&&i({data:e,_id:null===b||void 0===b?void 0:b._id},{closeAfterSave:L,clearAfterSave:k,onSuccess:function(e){},onError:function(){}})})),title:"Create price list"},x),{},{fitContentV:!0,filterOptions:t,defaultFilterValue:null===b||void 0===b?void 0:b.type,onOptSelect:function(e,t){O("type",t)},extraFooter:(0,m.jsxs)(s.ZP,{fxDirection:"column",fillWidth:!0,children:[y&&(0,m.jsx)(p.Z,{buttonText:"Add prices",onClick:function(){}}),(0,m.jsx)(Z.Z,{clearAfterSave:k,closeAfterSave:L,toggleOption:_})]}),children:(0,m.jsxs)(s.ZP,{fxDirection:"column",gap:4,padding:"8px 16px 16px",children:[(0,m.jsx)(d.Z,{label:(0,f.Z)("label"),direction:"vertical",error:C.label,required:!0,children:(0,m.jsx)(u.ZP,(0,n.Z)((0,n.Z)({placeholder:(0,f.Z)("label")},w("label")),{},{required:!0,autoFocus:!0}))}),(0,m.jsxs)(s.ZP,{fxDirection:"row",gap:16,children:[(0,m.jsx)(d.Z,{label:(0,f.Z)("timeFrom"),direction:"vertical",error:C.timeFrom,required:!0,children:(0,m.jsx)(u.ZP,(0,n.Z)({placeholder:(0,f.Z)("timeFrom"),type:"datetime-local"},w("timeFrom")))}),(0,m.jsx)(d.Z,{label:(0,f.Z)("timeTo"),direction:"vertical",error:C.timeTo,required:!0,children:(0,m.jsx)(u.ZP,(0,n.Z)({placeholder:(0,f.Z)("timeTo"),type:"datetime-local"},w("timeTo")))})]}),(0,m.jsx)(d.Z,{label:(0,f.Z)("description"),direction:"vertical",error:C.description,children:(0,m.jsx)(v.Z,(0,n.Z)({placeholder:(0,f.Z)("description")},w("description")))})]})}))}}}]);
//# sourceMappingURL=571.94cf6568.chunk.js.map