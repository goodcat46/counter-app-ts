"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[64,753,421],{8333:function(n,e,t){t.d(e,{N4:function(){return v}});var i=t(1413),o=t(3433),r=t(9439),l=t(2791),d=t(7348),a=t(6382),u=t(2437),c=t(3329),s=(0,l.createContext)({}),v=function(){return(0,l.useContext)(s)};e.ZP=function(n){var e=n.children,t=(0,d.nr)().currentProduct,v=(0,u.xc)()[u.EJ.products],p=(0,l.useState)([]),f=(0,r.Z)(p,2),h=f[0],m=f[1],x=(0,l.useCallback)((function(){v.clearCurrent(void 0)}),[v]),g=(0,l.useCallback)((function(n){m((function(e){return e.filter((function(e){return e.id!==n}))}))}),[]),b=(0,l.useCallback)((function(){m([])}),[]),Z=(0,l.useCallback)((function(n){var e="".concat(n.RenderComponent.name,"_").concat((0,a.x0)(8));return"function"===typeof n.RenderComponent&&m((function(t){var r=t.find((function(e){return e.id.includes(n.RenderComponent.name)}));if(r){var l=t.filter((function(n){return n.id!==r.id}));return[].concat((0,o.Z)(l),[(0,i.Z)((0,i.Z)({},n),{},{id:e})])}return[].concat((0,o.Z)(t),[(0,i.Z)((0,i.Z)({},n),{},{id:e})])})),{onClose:function(){return g(e)},overlayId:e}}),[g]),C=(0,l.useCallback)((function(){return h}),[h]),w=(0,l.useMemo)((function(){return{currentProduct:t,createOverlayComponent:Z,overlayStack:h,removeStackItem:g,getOverlayStack:C,clearStack:b,clearCurrent:x}}),[t,Z,h,g,C,b,x]);return(0,c.jsx)(s.Provider,{value:w,children:e})}},6087:function(n,e,t){var i=t(1413),o=t(4165),r=t(5861),l=t(9439),d=t(2437),a=t(2791),u=t(7585),c=t(6981),s=t(2578),v=t(7348),p=t(5188),f=t(6211),h=t(3329);e.Z=function(n){var e=n.onSelect,t=n.selected,m=n.withActions,x=void 0===m||m,g=(0,v.nr)().currentProduct,b=(0,d.xc)()[d.EJ.priceManagement],Z=(0,p.f9)(),C=(0,d.xc)()[d.EJ.products],w=(0,a.useState)(!1),P=(0,l.Z)(w,2),y=P[0],j=P[1],S=(0,a.useCallback)(function(){var n=(0,r.Z)((0,o.Z)().mark((function n(e){var t,i,r;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.refresh,i=e.update,g){n.next=3;break}return n.abrupt("return");case 3:r=(0,f.rE)(g),C.getAllPricesByProductId({data:{params:{product:r},refreshCurrent:t,updateCurrent:i},onLoading:j});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[g,C]),_=(0,a.useMemo)((function(){return{tableData:null===g||void 0===g?void 0:g.prices,tableTitles:c.po,onRowClick:function(n){if(e){if(null!==n&&void 0!==n&&n.rowData)return void e((0,f.rE)(null===n||void 0===n?void 0:n.rowData));null!==n&&void 0!==n&&n._id&&e({_id:null===n||void 0===n?void 0:n._id})}},actionsCreator:x?function(n){var e,t=null===(e=n.selectedRow)||void 0===e?void 0:e._id;return[{icon:"refresh",type:"onlyIcon",onClick:function(){return S({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!t},{icon:"copy",type:"onlyIcon",disabled:!t},{icon:"edit",type:"onlyIcon",disabled:!t},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){var n=Z.open({ModalChildren:s.default,modalChildrenProps:{product:g,onSubmit:function(e,t){console.log("FormCreatePrice submit pr overview",e),b.addPriceToList({data:{updateCurrent:!0,data:{data:e}},onSuccess:function(){(null===t||void 0===t?void 0:t.close)&&(null===n||void 0===n||n.onClose())}})}}})}}]}:void 0}}),[g,x,e,S,Z,b]);return(0,a.useEffect)((function(){S({refresh:!0})}),[]),(0,h.jsx)(u.ZP,(0,i.Z)((0,i.Z)({},_),{},{isSearch:!1,isFilter:!1,isLoading:y,selectedRow:t}))}},7995:function(n,e,t){var i=t(1413),o=t(9439),r=t(8333),l=t(5188),d=t(2437),a=t(7585),u=t(2791),c=t(401),s=t(3753),v=t(7348),p=t(6211),f=t(3329);e.Z=function(n){var e,t=n.onSelect,h=n.selected,m=n.withActions,x=void 0===m||m,g=(0,r.N4)(),b=(0,l.f9)(),Z=(0,v.nr)().currentProduct,C=(0,d.xc)()[d.EJ.products],w=(0,v.WS)(),P=(0,u.useState)(!1),y=(0,o.Z)(P,2),j=y[0],S=y[1],_=(0,u.useCallback)((function(n){var e=n.refresh,t=n.update;if(Z){var i=(0,p.rE)(Z);C.getAllVariationsByProductId({data:{refreshCurrent:e,updateCurrent:t,product:i},onLoading:S})}}),[Z,C]),k=(0,u.useMemo)((function(){var n=w.find((function(n){var e;return n._id===(null===Z||void 0===Z||null===(e=Z.template)||void 0===e?void 0:e._id)}));return(0,c.c9)(n)}),[null===Z||void 0===Z||null===(e=Z.template)||void 0===e?void 0:e._id,w]),B=(0,u.useMemo)((function(){return{tableTitles:k,tableData:null===Z||void 0===Z?void 0:Z.variations,transformData:c.m$,onRowClick:function(n){if(t){if(null!==n&&void 0!==n&&n.rowData)return void t((0,p.rE)(null===n||void 0===n?void 0:n.rowData));null!==n&&void 0!==n&&n._id&&t({_id:null===n||void 0===n?void 0:n._id})}},actionsCreator:x?function(n){var e,t=null===(e=n.selectedRow)||void 0===e?void 0:e._id;return[{icon:"refresh",type:"onlyIcon",onClick:function(){return _({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!t,onClick:function(){window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0430\u0440\u0456\u0430\u0446\u0456\u044e:\n ".concat(t))}},{icon:"copy",type:"onlyIcon",disabled:!t},{icon:"edit",type:"onlyIcon",disabled:!t,onClick:function(){var e;if(t&&n.selectedRow){var i=null===Z||void 0===Z||null===(e=Z.variations)||void 0===e?void 0:e.find((function(n){return(null===n||void 0===n?void 0:n._id)===t}));b.open({ModalChildren:s.default,modalChildrenProps:{update:t,defaultState:i}})}}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){b.open({ModalChildren:s.default,modalChildrenProps:{product:g.currentProduct}})}}]}:void 0}}),[null===Z||void 0===Z?void 0:Z.variations,_,b,t,g.currentProduct,k,x]);return(0,u.useEffect)((function(){_({refresh:!0})}),[]),(0,f.jsx)(a.ZP,(0,i.Z)((0,i.Z)({},B),{},{isSearch:!1,isFilter:!1,isLoading:j,selectedRow:h}))}},710:function(n,e,t){var i=t(1413),o=t(9439),r=t(7585),l=t(2791),d=t(758),a=t(3664),u=t(5188),c=t(2437),s=t(7348),v=t(6211),p=t(3329);e.Z=function(n){var e=n.onSelect,t=n.selected,f=n.withActions,h=(0,s.nr)().currentProduct,m=(0,u.f9)(),x=(0,c.xc)()[c.EJ.products],g=(0,l.useState)(!1),b=(0,o.Z)(g,2),Z=b[0],C=b[1],w=(0,l.useCallback)((function(n){var e=n.refresh;n.update;if(h){var t=(0,v.rE)(h);x.getAllInventoriesByProductId({data:{refreshCurrent:e,params:{product:t}},onLoading:C})}}),[h,x]),P=(0,l.useMemo)((function(){return{tableData:null===h||void 0===h?void 0:h.inventories,tableTitles:d.QX,onRowClick:function(n){if(e){if(null!==n&&void 0!==n&&n.rowData)return void e((0,v.rE)(null===n||void 0===n?void 0:n.rowData));null!==n&&void 0!==n&&n._id&&e({_id:null===n||void 0===n?void 0:n._id})}},actionsCreator:f?function(n){return[{icon:"refresh",type:"onlyIcon",onClick:function(){return w({refresh:!0})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){m.open({ModalChildren:a.Z.CreateWarehouseDocument,modalChildrenProps:{}})}}]}:void 0}}),[null===h||void 0===h?void 0:h.inventories,w,m,e,f]);return(0,l.useEffect)((function(){w({refresh:!0})}),[]),(0,p.jsx)(r.ZP,(0,i.Z)((0,i.Z)({},P),{},{isSearch:!1,isFilter:!1,isLoading:Z,selectedRow:t}))}},8495:function(n,e,t){t.d(e,{SI:function(){return u},VU:function(){return a}});var i,o,r,l=t(168),d=t(2360),a=(0,d.iv)(i||(i=(0,l.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,d.iv)(o||(o=(0,l.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,d.iv)(r||(r=(0,l.Z)(["\n  outline: 1px solid tomato;\n"])))},3753:function(n,e,t){t.r(e),t.d(e,{RenderVariationProperty:function(){return L}});var i,o,r,l,d,a,u,c,s=t(168),v=t(4942),p=t(1413),f=t(9439),h=t(4925),m=t(2360),x=t(8095),g=t(4109),b=t(7348),Z=t(2437),C=t(2791),w=t(6492),P=t(6211),y=t(1383),j=t(6757),S=t(4838),_=t(6727),k=t(4695),B=t(7426),D=t(4990),I=t(6681),E=t(6522),O=t(6666),R=t(3329),T=["onClose","title","defaultState","onSubmit","update","create"],A=[{name:"dimensions.height",label:(0,E.t)("Height"),placeholder:(0,E.t)("Sm")},{name:"dimensions.width",label:(0,E.t)("Width"),placeholder:(0,E.t)("Sm")},{name:"dimensions.length",label:(0,E.t)("Length"),placeholder:(0,E.t)("Sm")},{name:"dimensions.weight",label:(0,E.t)("Weight"),placeholder:(0,E.t)("Kg")}],M=_.Ry().shape({label:_.Z_().required().min(5).max(50),sku:_.Z_().required().min(8).max(36),barCode:_.Z_(),propertiesMap:_.Ry().shape({}),product:_.Ry().shape({label:_.Z_(),_id:_.Z_()}),timeFrom:_.hT(),timeTo:_.hT()}),L=function(n){var e=n.item,t=n.selectedIds,i=void 0===t?[]:t,o=n.onSelect,r=(0,C.useMemo)((function(){var n;return null===(n=e.childrenList)||void 0===n?void 0:n.map((function(n){var t=i.includes(n._id);return(0,R.jsx)(J,{item:n,isSelected:t,onSelect:function(t){return o&&o(e._id,t,null===n||void 0===n?void 0:n.label)}},"prop-value-".concat(n._id))}))}),[e._id,e.childrenList,o,i]);return(0,R.jsxs)(F,{gap:8,fillWidth:!0,padding:"8px 0 0",children:[(0,R.jsx)(w.x,{style:{flex:1,paddingLeft:12},$weight:500,children:e.label}),(0,R.jsx)(U,{fillWidth:!0,padding:"8px 0",gap:6,numColumns:e.label&&["\u0440\u043e\u0437\u043c\u0456\u0440"].includes(e.label.toLowerCase())?4:3,children:r})]},"property-box-".concat(e._id))},W=m.ZP.form(i||(i=(0,s.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 8px;\n\n  overflow: hidden;\n\n  max-width: 480px;\n  color: ",";\n  background-color: ",";\n"])),(function(n){return n.theme.fontColorSidebar}),(function(n){return n.theme.tableBackgroundColor})),$=(0,m.ZP)(x.ZP)(o||(o=(0,s.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),N=(0,m.ZP)(x.ZP)(r||(r=(0,s.Z)(["\n  padding-bottom: 8px;\n"]))),F=(0,m.ZP)(x.ZP)(l||(l=(0,s.Z)(["\n  border-top: 1px solid ",";\n  &:last-child {\n    border-bottom: 1px solid ",";\n  }\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),U=(0,m.ZP)(x.ZP)(d||(d=(0,s.Z)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(",", 1fr);\n"])),(function(n){var e=n.numColumns;return void 0===e?2:e})),V=(0,m.ZP)(x.ZP)(a||(a=(0,s.Z)([""]))),H=(0,m.ZP)(x.ZP)(u||(u=(0,s.Z)(["\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor})),z=(0,m.ZP)(g.Z)(c||(c=(0,s.Z)(["\n  width: 100%;\n  max-width: 100%;\n  min-width: 50px;\n"]))),J=function(n){var e=n.item,t=n.isSelected,i=n.onSelect,o=(0,C.useState)(!1),r=(0,f.Z)(o,2),l=r[0],d=r[1];return(0,C.useEffect)((function(){O.sr.isUnd(t)||d(t)}),[t]),(0,R.jsx)(z,{variant:l?"filledSmall":"outlinedSmall",padding:"6px 8px",fontWeight:500,onClick:function(){i&&i(e._id)},children:e.label})};e.default=function(n){var e=n.onClose,t=n.title,i=n.defaultState,o=n.onSubmit,r=n.update,l=(n.create,(0,h.Z)(n,T)),d=(0,j.d)(),a=(0,b.nr)().currentProduct,u=(0,Z.xc)()[Z.EJ.products],c=(0,b.WS)(),s=(0,C.useState)(!1),m=(0,f.Z)(s,2),g=m[0],w=m[1],_=(0,B.hN)({defaultValues:(0,P.PZ)(i?(0,p.Z)((0,p.Z)({},i),{},{product:a}):{product:a}),resolver:(0,k.X)(M),reValidateMode:"onSubmit"}),O=_.setValue,F=_.handleSubmit,U=_.register,z=_.formState.errors,J=_.formValues,q=(0,C.useState)({}),G=(0,f.Z)(q,2),X=G[0],K=G[1];(0,C.useEffect)((function(){if(!r){var n="";console.log(X);var e=Object.values(X);if(0!==e.length){var t=e.join(". ");n=null!==a&&void 0!==a&&a.label?"".concat(null===a||void 0===a?void 0:a.label,". ").concat(t):t,O("label",n)}else n="".concat(null===a||void 0===a?void 0:a.label,". {{VARIATION_LABEL}}")}}),[null===a||void 0===a?void 0:a.label,X,O,r]);var Y=(0,C.useMemo)((function(){return c.find((function(n){var e;return n._id===(null===a||void 0===a||null===(e=a.template)||void 0===e?void 0:e._id)}))}),[a,c]),Q=(0,C.useMemo)((function(){return null!==J&&void 0!==J&&J.propertiesMap?Object.values(null===J||void 0===J?void 0:J.propertiesMap):[]}),[null===J||void 0===J?void 0:J.propertiesMap,J]),nn=(0,C.useMemo)((function(){return Q.length>0}),[Q.length]),en=(0,C.useCallback)((function(n){r?u.updateVariationById({data:(0,P.vk)(n,r),onSuccess:function(n){console.log("updateVariationById onSuccess",n),e&&e()},onError:y.kl.toastAxiosError,onLoading:w}).then():u.createVariation({data:(0,P.vk)(n),onSuccess:function(n){d.state.close&&e&&e()},onError:y.kl.toastAxiosError,onLoading:w}).then(),o&&o(n)}),[e,o,u,d.state.close,r]),tn=(0,C.useCallback)((function(n,e,t){O("propertiesMap.".concat(n),e),t&&K((function(e){return(0,p.Z)((0,p.Z)({},e),{},(0,v.Z)({},n,t))}))}),[O]),on=(0,C.useCallback)((function(){O("propertiesMap",{}),K({})}),[O]),rn=(0,C.useMemo)((function(){var n;return null===Y||void 0===Y||null===(n=Y.childrenList)||void 0===n?void 0:n.filter((function(n){return null===n||void 0===n?void 0:n.isSelectable}))}),[null===Y||void 0===Y?void 0:Y.childrenList]),ln=(0,C.useMemo)((function(){return null===rn||void 0===rn?void 0:rn.map((function(n){return(0,R.jsx)(L,{item:n,selectedIds:Q,onSelect:tn},"prop_".concat(n._id))}))}),[rn,Q,tn]);return(0,R.jsxs)(W,(0,p.Z)((0,p.Z)({onSubmit:F(en),onReset:on},l),{},{children:[(0,R.jsx)(S.iw,{onClose:e,title:t||(null===Y||void 0===Y?void 0:Y.label),canSubmit:nn,showSubmitButton:!0}),(0,R.jsxs)($,{flex:1,fillWidth:!0,overflow:"auto",children:[(0,R.jsxs)(V,{padding:"0 8px",children:[(0,R.jsx)(D.Z,{label:(0,E.t)("label"),error:z.label,children:(0,R.jsx)(I.ZP,(0,p.Z)((0,p.Z)({},U("label",{required:!0})),{},{placeholder:(0,E.t)("label"),required:!0}))}),(0,R.jsxs)(x.ZP,{fxDirection:"row",gap:8,fillWidth:!0,children:[(0,R.jsx)(D.Z,{label:(0,E.t)("sku"),error:z.sku,children:(0,R.jsx)(I.ZP,(0,p.Z)((0,p.Z)({},U("sku",{required:!0})),{},{placeholder:(0,E.t)("sku"),required:!0}))}),(0,R.jsx)(D.Z,{label:(0,E.t)("barCode"),error:z.barCode,children:(0,R.jsx)(I.ZP,(0,p.Z)((0,p.Z)({},U("barCode")),{},{placeholder:(0,E.t)("barCode")}))})]}),(0,R.jsx)(x.ZP,{gap:8,fillWidth:!0,style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)"},children:A.map((function(n){return(0,R.jsx)(D.Z,{label:n.label,error:z[n.name],children:(0,R.jsx)(I.ZP,(0,p.Z)({placeholder:n.placeholder,min:1,type:"number"},U(n.name,{valueAsNumber:!0,min:1})))},n.name)}))})]}),(0,R.jsx)(N,{padding:"0 0 8px",margin:"8px 0 0",children:ln})]}),(0,R.jsx)(S.AT,{loading:g,resetButtonShown:!0,submitButtonText:g?"Loading...":r?"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438":"\u0414\u043e\u0434\u0430\u0442\u0438",canSubmit:nn,extraFooter:(0,R.jsx)(H,{children:(0,R.jsx)(j.Z,(0,p.Z)({},d))})})]}))}},2421:function(n,e,t){t.r(e);var i,o,r,l,d=t(168),a=t(1413),u=t(3433),c=t(9439),s=t(4925),v=t(2360),p=t(8095),f=t(4109),h=t(7348),m=t(2437),x=t(2791),g=t(6492),b=t(1383),Z=t(4838),C=t(3329),w=["onClose","title","defaultState","onSubmit","update","product","template","onSelect","onChange"],P=(0,v.ZP)(p.ZP)(i||(i=(0,d.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n  padding-bottom: 8px;\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),y=(0,v.ZP)(p.ZP)(o||(o=(0,d.Z)(["\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(n){return n.theme.sideBarBorderColor})),j=(0,v.ZP)(p.ZP)(r||(r=(0,d.Z)(["\n  //display: grid;\n  //grid-template-columns: repeat(auto-fill, 25%);\n  //\n  //@media screen and (max-width: 480px) {\n  //  grid-template-columns: repeat(auto-fill, 50%);\n  //}\n"]))),S=(0,v.ZP)(f.Z)(l||(l=(0,d.Z)(["\n  flex-basis: 100px;\n  min-width: max-content;\n\n  //width: 100%;\n  //min-width: unset;\n\n  // border-radius: 2px;\n  // border: 2px solid ",";\n  //\n  // &:hover {\n  //   border: 2px solid ",";\n  // }\n"])),(function(n){return n.theme.accentColor.light}),(function(n){return n.theme.accentColor.base}));e.default=function(n){var e,t=n.onClose,i=n.title,o=(n.defaultState,n.onSubmit),r=n.update,l=(n.product,n.template),d=n.onSelect,v=n.onChange,p=(0,s.Z)(n,w),f=(0,h.nr)().currentProduct,_=(0,m.xc)()[m.EJ.products],k=(0,h.WS)(),B=(0,x.useState)(!1),D=(0,c.Z)(B,2),I=D[0],E=D[1],O=(0,x.useState)([]),R=(0,c.Z)(O,2),T=R[0],A=R[1],M=(0,x.useMemo)((function(){return k.find((function(n){var e;return n._id===((null===l||void 0===l?void 0:l._id)||(null===f||void 0===f||null===(e=f.template)||void 0===e?void 0:e._id))}))}),[null===f||void 0===f||null===(e=f.template)||void 0===e?void 0:e._id,null===l||void 0===l?void 0:l._id,k]),L=(0,x.useMemo)((function(){var n;return(null===f||void 0===f||null===(n=f.properties)||void 0===n?void 0:n.map((function(n){return n._id})).join(","))!==T.join(",")}),[null===f||void 0===f?void 0:f.properties,T]),W=(0,x.useCallback)((function(n){n.preventDefault();var e=null!==r&&void 0!==r?r:null===f||void 0===f?void 0:f._id;e?_.updateById({data:{_id:e,data:{properties:T}},onLoading:E,onSuccess:function(n,e){b.kl.success("Product updated"),t&&t()}}):console.debug("selectedIds",T),o&&o(T)}),[null===f||void 0===f?void 0:f._id,t,o,T,_,r]),$=(0,x.useCallback)((function(n,e){A((function(e){var t=e.includes(n)?e.filter((function(e){return e!==n})):[].concat((0,u.Z)(e),[n]);return v&&v(t),d&&d(n),t}))}),[v,d]),N=(0,x.useMemo)((function(){var n;return null===M||void 0===M||null===(n=M.childrenList)||void 0===n?void 0:n.filter((function(n){return!(null!==n&&void 0!==n&&n.isSelectable)})).map((function(n){var e;return(0,C.jsxs)(y,{gap:8,fillWidth:!0,padding:"8px 0 0",children:[(0,C.jsx)(g.x,{style:{flex:1,paddingLeft:12},$weight:500,children:n.label}),(0,C.jsx)(j,{fillWidth:!0,padding:"8px 0",gap:6,flexWrap:"wrap",fxDirection:"row",children:null===(e=n.childrenList)||void 0===e?void 0:e.map((function(e){var t=T.includes(e._id);return(0,C.jsx)(S,{variant:t?"filledSmall":"outlinedSmall",padding:"6px 8px",fontWeight:500,onClick:function(){return $(e._id,n._id)},children:e.label},"prop-value-".concat(e._id))}))})]},"property-".concat(n._id))}))}),[$,T,null===M||void 0===M?void 0:M.childrenList]);return(0,x.useEffect)((function(){null!==f&&void 0!==f&&f.properties&&A(null===f||void 0===f?void 0:f.properties.map((function(n){return n._id})))}),[null===f||void 0===f?void 0:f.properties]),(0,C.jsxs)(Z.dF,(0,a.Z)((0,a.Z)({onSubmit:W},p),{},{children:[(0,C.jsx)(Z.iw,{onClose:t,canSubmit:L,title:i||(null===M||void 0===M?void 0:M.label),showSubmitButton:!0}),(0,C.jsx)(P,{flex:1,overflow:"auto",children:N}),(0,C.jsx)(Z.AT,{canSubmit:L,loading:I,submitButtonText:I?"Loading...":"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]}))}},4838:function(n,e,t){t.d(e,{AT:function(){return x},dF:function(){return b},iw:function(){return h}});var i,o,r,l=t(1413),d=t(4925),a=t(168),u=t(8095),c=t(4109),s=t(6492),v=t(2360),p=(t(2791),t(3329)),f=["children"],h=function(n){var e=n.onClose,t=n.title,i=n.showSubmitButton,o=n.canSubmit;return(0,p.jsx)(m,{padding:"4px 0",children:(0,p.jsxs)(u.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"space-between",alignItems:"stretch",height:"32px",children:[(0,p.jsx)(c.Z,{variant:"textExtraSmall",icon:"SmallArrowLeft",iconSize:"22px",padding:"0 6px",style:{minWidth:"max-content",minHeight:"100%"},onClick:e,children:"Back"}),(0,p.jsx)(u.ZP,{justifyContent:"center",overflow:"hidden",children:(0,p.jsx)(s.x,{$weight:600,$size:14,style:{textTransform:"uppercase",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:t})}),i&&(0,p.jsx)(c.Z,{variant:"textExtraSmall",gap:"6px",type:"submit",padding:"0 6px",endIcon:"done",endIconSize:"22px",style:{minWidth:"max-content",minHeight:"100%"},disabled:!o,children:"Ok"})]})})},m=(0,v.ZP)(u.ZP)(i||(i=(0,a.Z)(["\n  height: 32px;\n"]))),x=function(n){var e=n.submitButtonText,t=void 0===e?"\u041f\u0440\u0438\u0439\u043d\u044f\u0442\u0438":e,i=n.loading,o=n.extraFooter,r=n.canSubmit,l=n.onCreatePress,d=n.resetButtonShown;return(0,p.jsxs)(g,{fillWidth:!0,children:[o,(0,p.jsxs)(u.ZP,{padding:"8px 8px",fxDirection:"row",gap:8,alignItems:"center",children:[d&&(0,p.jsx)(c.Z,{variant:"onlyIcon",icon:"clear",size:"36px",iconSize:"80%",type:"reset"}),l&&(0,p.jsx)(c.Z,{variant:"onlyIcon",icon:"plus",size:"36px",iconSize:"80%",onClick:l}),(0,p.jsx)(c.Z,{variant:"filledLarge",flex:1,type:"submit",style:{padding:"0 12px"},textTransform:"uppercase",fontWeight:600,endIcon:"SmallArrowRight",endIconSize:"24px",disabled:i||!r,children:t})]})]})},g=(0,v.ZP)(u.ZP)(o||(o=(0,a.Z)([""]))),b=function(n){var e=n.children,t=(0,d.Z)(n,f);return(0,p.jsx)(Z,(0,l.Z)((0,l.Z)({},t),{},{children:e}))},Z=v.ZP.form(r||(r=(0,a.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  max-width: 480px;\n\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(n){return n.theme.modalBackgroundColor}))},3728:function(n,e,t){t.d(e,{XK:function(){return fn},AK:function(){return xn},kQ:function(){return cn},fQ:function(){return pn},XO:function(){return sn},_q:function(){return gn},pT:function(){return mn}});var i,o,r,l,d,a,u,c,s,v,p,f=t(1413),h=t(168),m=t(9439),x=t(8095),g=t(2791),b=t(3753),Z=t(2360),C=t(6492),w=t(7348),P=t(2421),y=t(2397),j=t(8961),S=t(2437),_=t(6211),k=t(4838),B=t(3329),D=Z.ZP.form(i||(i=(0,h.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  max-width: 480px;\n\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(n){return n.theme.sideBarBackgroundColor})),I=function(n){var e=n.onClose,t=(0,w.nr)().currentProduct,i=(0,S.xc)()[S.EJ.products],o=(0,g.useState)((null===t||void 0===t?void 0:t.images)||[]),r=(0,m.Z)(o,2),l=r[0],d=r[1],a=(0,g.useState)(!1),u=(0,m.Z)(a,2),c=u[0],s=u[1],v=(0,Z.Fg)();return(0,B.jsx)(D,{onSubmit:function(n){n.preventDefault(),t&&i.updateById({data:(0,f.Z)((0,f.Z)({},(0,_.rE)(t)),{},{data:{images:l},refreshCurrent:!0}),onSuccess:function(){e&&e()},onLoading:s})},children:(0,B.jsx)(j.Z,{initialData:l,onClose:e,onChangeState:d,contentContainerStyle:{flex:1,borderTop:"1px solid ".concat(v.sideBarBorderColor),borderBottom:"1px solid ".concat(v.sideBarBorderColor)},renderHeader:(0,B.jsx)(k.iw,{title:"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",onClose:e,showSubmitButton:!0,canSubmit:l.length>0}),FooterComponent:function(n){return(0,B.jsx)(k.AT,{onCreatePress:n.onAddNewImageSetPress,loading:c,canSubmit:l.length>0})}})})},E=t(4717),O=t(870),R=t(1771),T=(0,Z.ZP)(x.ZP)(o||(o=(0,h.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),A=function(n){var e=n.onClose,t=(0,w.nr)().currentProduct,i=(0,w.UL)(O.cA.CATEGORIES_PROD).directory,o=(0,S.xc)()[S.EJ.products],r=(0,g.useState)([]),l=(0,m.Z)(r,2),d=l[0],a=l[1],u=(0,g.useMemo)((function(){var n,e;return(null===t||void 0===t||null===(n=t.categories)||void 0===n||null===(e=n.map((function(n){return n._id})))||void 0===e?void 0:e.toString())!==d.toString()}),[null===t||void 0===t?void 0:t.categories,d]);return(0,g.useEffect)((function(){null!==t&&void 0!==t&&t.categories&&a(null===t||void 0===t?void 0:t.categories.map((function(n){return n._id})))}),[null===t||void 0===t?void 0:t.categories]),(0,B.jsxs)(k.dF,{onSubmit:function(n){n.preventDefault(),t&&o.updateById({data:(0,f.Z)((0,f.Z)({},(0,_.rE)(t)),{},{data:{categories:d},refreshCurrent:!0}),onSuccess:function(n,t){e&&e()}})},children:[(0,B.jsx)(k.iw,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457",onClose:e,canSubmit:u,showSubmitButton:!0}),(0,B.jsx)(T,{padding:"0 0 8px 0",flex:1,children:(0,B.jsx)(R.Z,{onChange:a,options:i,defaultData:d})}),(0,B.jsx)(k.AT,{canSubmit:u})]})},M=t(5059),L=t(6522),W=t(6666),$=t(1251),N=t(7426),F=t(8553),U=t(7506),V=t(6087),H=t(7995),z=t(710),J=t(7585),q=t(9069),G=function(n){var e=n.onSelect,t=n.withActions,i=(n.selected,n.types),o=(0,g.useState)(!1),r=(0,m.Z)(o,1)[0],l=(0,w.UL)(O.cA.CONTRACTORS).directory,d=(0,g.useMemo)((function(){return l.filter((function(n){return i&&i.includes(n.type)}))}),[l,i]),a=(0,g.useMemo)((function(){return{tableData:d,tableTitles:q.PU,onRowClick:function(n){if(e){if(null!==n&&void 0!==n&&n.rowData)return void e((0,_.rE)(null===n||void 0===n?void 0:n.rowData));null!==n&&void 0!==n&&n._id&&e({_id:null===n||void 0===n?void 0:n._id})}},actionsCreator:t?function(n){return[]}:void 0}}),[d,e,t]);return(0,B.jsx)(J.ZP,(0,f.Z)({isSearch:!1,isLoading:r},a))},X=function(n){return n.CUSTOMER="CUSTOMER",n.SUPPLIER="SUPPLIER",n.EMPLOYEE="EMPLOYEE",n.CONTRACTOR="CONTRACTOR",n.SUB_CONTRACTOR="SUB_CONTRACTOR",n.COMMISSION_AGENT="COMMISSION_AGENT",n.CONSIGNOR="CONSIGNOR",n.TRANSPORTER="TRANSPORTER",n.DELIVER="DELIVER",n}({}),K=t(758),Y=function(n){var e=n.onSelect,t=n.selected,i=n.withActions,o=(0,w.eO)().warehouses,r=(0,g.useMemo)((function(){return{tableData:o,tableTitles:K.A7,onRowClick:function(n){if(e){if(null!==n&&void 0!==n&&n.rowData)return void e((0,_.rE)(null===n||void 0===n?void 0:n.rowData));null!==n&&void 0!==n&&n._id&&e({_id:null===n||void 0===n?void 0:n._id})}},actionsCreator:i?function(n){return[]}:void 0}}),[e,o,i]);return(0,B.jsx)(J.ZP,(0,f.Z)((0,f.Z)({isSearch:!1},r),{},{selectedRow:t}))},Q=function(n){return n.variation="variation",n.price="price",n.warehouse="warehouse",n.inventory="inventory",n.supplier="supplier",n}({}),nn=(0,F.H1)(Q),en=Z.ZP.form(r||(r=(0,h.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  flex: 1;\n\n  padding: 0 8px;\n\n  width: 480px;\n  max-width: 100%;\n\n  height: 100%;\n\n  background-color: ",";\n"])),(function(n){return n.theme.modalBackgroundColor})),tn=(0,Z.ZP)(x.ZP)(l||(l=(0,h.Z)(["\n  border-top: 1px solid ",";\n\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor}),(function(n){return n.theme.modalBorderColor})),on=function(n){var e,t=n.onClose,i=(n.onSubmit,null===(e=(0,w.nr)())||void 0===e?void 0:e.currentProduct),o=(0,S.xc)()[S.EJ.products],r=(0,g.useState)(0),l=(0,m.Z)(r,2),d=l[0],a=l[1],u=(0,N.hN)(),c=u.setValue,s=u.formValues,v=u.handleSubmit,p=(0,g.useCallback)((function(n){c(nn[d].value,n)}),[d,c]),f=(0,g.useMemo)((function(){return nn[d].value===Q.warehouse?(0,B.jsx)(Y,{onSelect:p,selected:null===s||void 0===s?void 0:s.variation}):nn[d].value===Q.price?(0,B.jsx)(V.Z,{withActions:!1,onSelect:p,selected:null===s||void 0===s?void 0:s.price}):nn[d].value===Q.variation?(0,B.jsx)(H.Z,{withActions:!1,onSelect:p,selected:null===s||void 0===s?void 0:s.variation}):nn[d].value===Q.inventory?(0,B.jsx)(z.Z,{withActions:!1,onSelect:p,selected:null===s||void 0===s?void 0:s.inventory}):nn[d].value===Q.supplier?(0,B.jsx)(G,{types:[X.SUPPLIER],withActions:!1,onSelect:p,selected:null===s||void 0===s?void 0:s.supplier}):void 0}),[d,null===s||void 0===s?void 0:s.inventory,null===s||void 0===s?void 0:s.price,null===s||void 0===s?void 0:s.supplier,null===s||void 0===s?void 0:s.variation,p]),h=(0,g.useMemo)((function(){var n,e,t,o,r,l=null===i||void 0===i?void 0:i.defaults;return nn[d].value===Q.variation?s.variation&&s.variation._id!==(null===l||void 0===l||null===(n=l.variation)||void 0===n?void 0:n._id):nn[d].value===Q.price?s.price&&s.price._id!==(null===l||void 0===l||null===(e=l.price)||void 0===e?void 0:e._id):nn[d].value===Q.warehouse?s.warehouse&&s.warehouse._id!==(null===l||void 0===l||null===(t=l.warehouse)||void 0===t?void 0:t._id):nn[d].value===Q.inventory?s.inventory&&s.inventory._id!==(null===l||void 0===l||null===(o=l.inventory)||void 0===o?void 0:o._id):nn[d].value===Q.supplier?s.supplier&&s.supplier._id!==(null===l||void 0===l||null===(r=l.supplier)||void 0===r?void 0:r._id):void 0}),[null===i||void 0===i?void 0:i.defaults,d,s.inventory,s.price,s.supplier,s.variation,s.warehouse]);return(0,B.jsxs)(en,{onSubmit:v((function(n){o.setDefaults({data:{data:{defaults:(0,_.X$)(n)},_id:null===i||void 0===i?void 0:i._id,updateCurrent:!0},onSuccess:function(n,e){console.log(n,e)}})})),children:[(0,B.jsx)($.xB,{onBackPress:t,title:(0,L.t)("Default values"),canSubmit:h}),(0,B.jsxs)(tn,{flex:1,fillWidth:!0,children:[(0,B.jsx)(U.Z,{filterOptions:nn,currentIndex:d,onChangeIndex:a})," ",f]}),(0,B.jsx)($.AT,{onCreatePress:function(){},canSubmit:h})]})},rn=t(4109),ln=function(n){var e=n.options,t=void 0===e?[]:e,i=n.colorIndicator,o=void 0===i||i,r=n.onChange,l=n.currentOption,d=n.currentIndex,a=n.disabled,u=(n.name,(0,g.useState)(0)),c=(0,m.Z)(u,2),s=c[0],v=c[1],p=(0,g.useMemo)((function(){return t?t[s]:null}),[s,t]),f=(0,Z.Fg)();(0,g.useEffect)((function(){W.sr.isFun(r)&&W.sr.isUnd(null!==l&&void 0!==l?l:d)&&console.warn("Changer",'You try to use uncontrolled "Changer" component\n',"You need to pass option or index")}),[r,l,d]);var h=function(n){return function(){if(W.sr.isFun(r)){var e,i=s+n;r({index:i,value:null===(e=t[i])||void 0===e?void 0:e.value,option:t[i]})}else s>=0&&s+1<=(null===t||void 0===t?void 0:t.length)&&v((function(e){return e+n}))}};return(0,g.useEffect)((function(){!W.sr.isUnd(d)&&s>=0&&s+1<=t.length&&v(d)}),[d]),(0,g.useEffect)((function(){if(!W.sr.isUnd(l)){var n=t.findIndex((function(n){return null!==l&&void 0!==l&&l.value?(null===n||void 0===n?void 0:n.value)===(null===l||void 0===l?void 0:l.value):!(null===l||void 0===l||!l._id)&&(null===n||void 0===n?void 0:n._id)===(null===l||void 0===l?void 0:l._id)}));n>=0&&n!==s&&v(n)}}),[l]),(0,B.jsxs)(x.ZP,{fxDirection:"row",fillWidth:!0,height:"28px",alignItems:"center",gap:8,children:[(0,B.jsx)(rn.Z,{variant:"onlyIconNoEffects",icon:"SmallArrowLeft",iconSize:"28px",disabled:a||0===s,onClick:h(-1)}),(0,B.jsxs)(x.ZP,{flex:1,alignItems:"stretch",justifyContent:"center",overflow:"hidden",style:{borderRadius:2,backgroundColor:f.fieldBackgroundColor,color:f.fontColorSidebar,height:"100%"},children:[(0,B.jsx)(x.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"center",alignItems:"center",flex:1,children:(0,B.jsx)(C.x,{$size:15,$weight:600,className:"inner",$ellipsisMode:!0,children:null===p||void 0===p?void 0:p.label})}),o&&(null===p||void 0===p?void 0:p.color)&&(0,B.jsx)(x.ZP,{fillWidth:!0,height:"4px",style:{backgroundColor:null===p||void 0===p?void 0:p.backgroundColor}})]}),(0,B.jsx)(rn.Z,{variant:"onlyIconNoEffects",icon:"SmallArrowRight",iconSize:"28px",disabled:a||s+1===t.length,onClick:h(1)})]})},dn=t(3847),an=t(5481),un=t(1383),cn=function(n){var e=n.cell,t=n.data,i=e.getValue?e.getValue(t):null;return(0,B.jsxs)(wn,{children:[(0,B.jsx)(yn,{$isTitle:!0,$size:12,children:null===e||void 0===e?void 0:e.title}),(0,B.jsx)(x.ZP,{fillWidth:!0,flex:1,fxDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",overflow:"hidden",style:{minHeight:24},children:(0,B.jsx)(yn,{$isTitle:!i,$weight:500,children:i||(0,L.t)("undefined")})})]})},sn=function(n){var e=n.cell,t=n.data,i=(0,g.useState)(!1),o=(0,m.Z)(i,2),r=o[0],l=o[1],d=(0,g.useState)(null===t||void 0===t?void 0:t.approved),a=(0,m.Z)(d,2),u=a[0],c=a[1],s=(0,S.xc)()[S.EJ.products],v=(0,g.useMemo)((function(){return(0,an.g_)(u)}),[u]),p=(0,g.useMemo)((function(){return u!==(null===t||void 0===t?void 0:t.approved)}),[u,null===t||void 0===t?void 0:t.approved]),f=function(){var n;c(null!==(n=null===t||void 0===t?void 0:t.approved)&&void 0!==n?n:dn.xx[0].value),l(!1)};return(0,g.useEffect)((function(){null!==t&&void 0!==t&&t.approved&&c(t.approved)}),[]),(0,B.jsxs)(wn,{style:{minHeight:"max-content"},children:[(0,B.jsx)(Zn,{title:null===e||void 0===e?void 0:e.title,onCancelPress:f,onEditPress:function(){return l(!0)},editMode:r}),(0,B.jsx)(x.ZP,{fillWidth:!0,flex:1,justifyContent:"flex-end",alignItems:"stretch",overflow:"hidden",style:{minHeight:24},gap:8,children:r?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(ln,{disabled:!r,options:dn.xx,currentOption:{value:u},onChange:function(n){return c(null===n||void 0===n?void 0:n.value)}}),(0,B.jsxs)(x.ZP,{fxDirection:"row",gap:8,fillWidth:!0,children:[(0,B.jsx)(rn.Z,{variant:"outlinedSmall",disabled:!p,onClick:f,children:(0,L.t)("Cancel")}),(0,B.jsx)(rn.Z,{variant:"filledSmall",disabled:!p,flex:1,onClick:function(){s.updateById({data:{_id:null===t||void 0===t?void 0:t._id,data:{approved:u},refreshCurrent:!0},onSuccess:function(){l(!1),un.kl.success("Product updated")}})},children:(0,L.t)("Ok")})]})]}):(0,B.jsx)(Pn,{style:{alignSelf:"flex-end",borderColor:null===v||void 0===v?void 0:v.backgroundColor,backgroundColor:null===v||void 0===v?void 0:v.backgroundColor},children:(0,B.jsx)(yn,{$isTitle:!u,$weight:600,$align:"right",children:(0,L.t)(u||"undefined")})})})]})},vn=(0,Z.ZP)(x.ZP)(d||(d=(0,h.Z)(["\n  justify-content: center;\n\n  border-radius: 2px;\n  padding: 4px 12px;\n  height: 28px;\n\n  background-color: ",";\n"])),(function(n){return n.theme.fieldBackgroundColor})),pn=function(n){var e=n.data,t=n.cell,i=n.setOverlayContent,o=(0,Z.Fg)(),r=null===e||void 0===e?void 0:e.warehouse,l=null===e||void 0===e?void 0:e.supplier,d=(0,g.useMemo)((function(){var n=null===e||void 0===e?void 0:e.variation;return[{title:(0,L.t)("Label"),value:null===n||void 0===n?void 0:n.label},{title:(0,L.t)("Bar-code"),value:null===n||void 0===n?void 0:n.barCode},{title:(0,L.t)("SKU"),value:null===n||void 0===n?void 0:n.sku}].map((function(n,e){return(0,B.jsxs)(vn,{children:["".concat(null===n||void 0===n?void 0:n.title,": "),(null===n||void 0===n?void 0:n.value)||"---"]},null===n||void 0===n?void 0:n.title)}))}),[null===e||void 0===e?void 0:e.variation]),a=(0,g.useMemo)((function(){return n=null===e||void 0===e?void 0:e.price,[{title:(0,L.t)("Price"),amount:null===n||void 0===n?void 0:n.in},{title:(0,L.t)("Cost"),amount:null===n||void 0===n?void 0:n.out},(0,f.Z)({title:(0,L.t)("Commission")},null===n||void 0===n?void 0:n.commission),(0,f.Z)({title:(0,L.t)("Markup")},null===n||void 0===n?void 0:n.markup),(0,f.Z)({title:(0,L.t)("Discount")},null===n||void 0===n?void 0:n.discount),(0,f.Z)({title:(0,L.t)("Bonus")},null===n||void 0===n?void 0:n.bonus),(0,f.Z)({title:(0,L.t)("Cashback")},null===n||void 0===n?void 0:n.cashback)];var n}),[null===e||void 0===e?void 0:e.price]),u=(0,g.useMemo)((function(){return a.map((function(n,e){return(0,B.jsxs)(vn,{children:["".concat(null===n||void 0===n?void 0:n.title,": "),(0,M.ZP)((null===n||void 0===n?void 0:n.amount)||0),W.sr.isNum(null===n||void 0===n?void 0:n.percentage)&&" | ".concat((0,M.ZP)(null===n||void 0===n?void 0:n.percentage),"%")]},null===n||void 0===n?void 0:n.title)}))}),[a]);return(0,B.jsxs)(wn,{style:{minHeight:"max-content"},children:[(0,B.jsx)(Zn,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:on})}}),(0,B.jsxs)(x.ZP,{fillWidth:!0,gap:6,children:[(0,B.jsx)(yn,{$isTitle:!0,$weight:500,style:{color:null===o||void 0===o?void 0:o.fontColorHeader,marginInline:8},children:(0,L.t)("warehouse")}),(0,B.jsxs)(x.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",gap:8,children:[(0,B.jsx)(vn,{children:"".concat((0,L.t)("Label"),": ").concat((null===r||void 0===r?void 0:r.label)||"---")}),(0,B.jsx)(vn,{children:"".concat((0,L.t)("Code"),": ").concat((null===r||void 0===r?void 0:r.code)||"---")})]})]}),(0,B.jsxs)(x.ZP,{fillWidth:!0,gap:6,children:[(0,B.jsx)(yn,{$isTitle:!0,$weight:500,style:{color:null===o||void 0===o?void 0:o.fontColorHeader,marginInline:8},children:(0,L.t)("supplier")}),(0,B.jsxs)(x.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",gap:8,children:[(0,B.jsx)(vn,{children:"".concat((0,L.t)("Label"),": ").concat((null===l||void 0===l?void 0:l.label)||"---")}),(0,B.jsx)(vn,{children:"".concat((0,L.t)("Code"),": ").concat((null===l||void 0===l?void 0:l.code)||"---")})]})]}),(0,B.jsxs)(x.ZP,{fillWidth:!0,gap:6,children:[(0,B.jsx)(yn,{$weight:500,style:{color:null===o||void 0===o?void 0:o.fontColorHeader,marginInline:8},children:(0,L.t)("variation")}),(0,B.jsx)(x.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",gap:8,children:d})]}),(0,B.jsxs)(x.ZP,{fillWidth:!0,gap:6,children:[(0,B.jsx)(yn,{$isTitle:!0,$weight:500,style:{color:null===o||void 0===o?void 0:o.fontColorHeader,marginInline:8},children:(0,L.t)("price")}),(0,B.jsx)(x.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",gap:8,children:u})]})]})},fn=function(n){var e=n.cell,t=n.setOverlayContent,i=n.data,o=(0,w.UL)(O.cA.CATEGORIES_PROD).directory,r=(0,g.useMemo)((function(){var n,e;return null!==(n=null===i||void 0===i||null===(e=i.categories)||void 0===e?void 0:e.map((function(n){return n._id})))&&void 0!==n?n:[]}),[null===i||void 0===i?void 0:i.categories]),l=(0,g.useMemo)((function(){return o.map((function(n,e){return(0,B.jsx)(hn,{selectedIds:r,item:n},"cat_".concat(n._id))}))}),[o,r]);return(0,B.jsxs)(wn,{style:{minHeight:"max-content"},children:[(0,B.jsx)(Zn,{title:null===e||void 0===e?void 0:e.title,openOverlayButtonTitle:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",onOpenOverlayPress:function(){t({RenderComponent:A})}}),(0,B.jsx)(x.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"flex-end",flexWrap:"wrap",gap:8,style:{height:"max-content",minHeight:26},children:l})]})},hn=function n(e){var t,i,o=e.item,r=(e.index,e.lvl),l=void 0===r?0:r,d=e.selectedIds,a=(0,g.useMemo)((function(){var e;return null===o||void 0===o||null===(e=o.childrenList)||void 0===e?void 0:e.map((function(e,t){return(0,B.jsx)(n,{item:e,index:t,lvl:l+1,selectedIds:d},"item_lvl_".concat(l,"_").concat(e._id))}))}),[null===o||void 0===o?void 0:o.childrenList,l,d]),u=(0,g.useMemo)((function(){return d.includes(o._id)}),[o._id,d]);return(0,B.jsxs)(B.Fragment,{children:[u&&(0,B.jsxs)(Sn,{fxDirection:"row",alignItems:"center",padding:"0 2px 0 12px",gap:2,children:[(null===o||void 0===o||null===(t=o.parent)||void 0===t?void 0:t.label)&&"".concat(null===o||void 0===o||null===(i=o.parent)||void 0===i?void 0:i.label,"/"),"".concat(null===o||void 0===o?void 0:o.label)]}),a]})},mn=function(n){var e,t,i=n.cell,o=n.setOverlayContent,r=n.data;return(0,B.jsxs)(wn,{padding:"4px",children:[(0,B.jsx)(Zn,{title:i.title,openOverlayButtonTitle:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434",onOpenOverlayPress:function(){o({RenderComponent:b.default,props:{create:!0}})}}),(0,B.jsx)(x.ZP,{fillWidth:!0,fxDirection:"row",gap:8,height:"24px",justifyContent:"flex-end",alignItems:"flex-end",overflow:"hidden",children:(0,B.jsx)(yn,{$disabled:!(null!==r&&void 0!==r&&null!==(e=r.template)&&void 0!==e&&e.label),$weight:500,children:"".concat(null===r||void 0===r||null===(t=r.template)||void 0===t?void 0:t.label)})})]})},xn=function(n){var e=n.data,t=n.cell,i=n.setOverlayContent,o=(0,g.useMemo)((function(){var n;return null===e||void 0===e||null===(n=e.images)||void 0===n?void 0:n.map((function(n,e){return(0,B.jsx)(jn,{fxDirection:"row",gap:2,overflow:"auto",children:y.E_.map((function(e){return(0,B.jsx)(E.Z,{src:n[e.value]||"",title:e.label,disabled:!0},"img_".concat(e.value))}))},"set_".concat((null===n||void 0===n?void 0:n._id)||e))}))}),[null===e||void 0===e?void 0:e.images]);return(0,B.jsxs)(wn,{style:{minHeight:"max-content",padding:"4px 0"},children:[(0,B.jsx)(Zn,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:I})}}),(0,B.jsx)(x.ZP,{gap:2,height:"max-content",padding:"8px 0",style:{minHeight:26},children:o})]})},gn=function(n){var e,t=n.cell,i=n.setOverlayContent,o=n.data,r=(0,w.nr)().properties,l=(0,g.useMemo)((function(){return r.find((function(n){var e;return n._id===(null===o||void 0===o||null===(e=o.template)||void 0===e?void 0:e._id)}))}),[null===o||void 0===o||null===(e=o.template)||void 0===e?void 0:e._id,r]),d=(0,g.useMemo)((function(){var n;return null===l||void 0===l||null===(n=l.childrenList)||void 0===n?void 0:n.filter((function(n){return!n.isSelectable}))}),[null===l||void 0===l?void 0:l.childrenList]),a=(0,g.useMemo)((function(){var n;return null===o||void 0===o||null===(n=o.properties)||void 0===n?void 0:n.map((function(n){return n._id}))}),[null===o||void 0===o?void 0:o.properties]),u=(0,g.useMemo)((function(){return null===d||void 0===d?void 0:d.map((function(n,e){return(0,B.jsx)(bn,{index:e,setOverlayContent:i,item:n,selectedItems:a},"prop-".concat(null===n||void 0===n?void 0:n._id))}))}),[d,i,a]),c=(0,g.useMemo)((function(){var n,e,t=null===o||void 0===o||null===(n=o.variations)||void 0===n||null===(e=n.map((function(n){return n.properties})))||void 0===e?void 0:e.flat(1),i={};return null===t||void 0===t||t.forEach((function(n){null!==n&&void 0!==n&&n._id&&(i[null===n||void 0===n?void 0:n._id]=n)})),Object.values(i).map((function(n){return(0,B.jsx)(x.ZP,{children:n.label})}))}),[null===o||void 0===o?void 0:o.variations]);return console.log("renderPropertiesFromVariations",c),(0,B.jsxs)(wn,{padding:"4px 4px 8px",gap:8,className:"PROPERTIES_LIST_CELL",style:{minHeight:u&&(null===u||void 0===u?void 0:u.length)>0?"max-content":50},children:[(0,B.jsx)(Zn,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){l&&i({RenderComponent:P.default})}}),(0,B.jsxs)(x.ZP,{fillWidth:!0,gap:8,alignItems:u&&(null===u||void 0===u?void 0:u.length)>0?"stretch":"flex-end",children:[u&&(null===u||void 0===u?void 0:u.length)>0?u:(0,B.jsx)(yn,{$weight:500,children:(0,L.t)("undefined")}),c]})]})},bn=function(n){var e=n.item,t=n.selectedItems,i=(0,g.useMemo)((function(){var n,i;return null===(n=e.childrenList)||void 0===n||null===(i=n.filter((function(n){return null===t||void 0===t?void 0:t.includes(n._id)})))||void 0===i?void 0:i.map((function(n,e){return(0,B.jsx)(Sn,{className:"PROP_VALUE",maxWidth:"130px",children:n.label},"prop-v-".concat(n._id))}))}),[e.childrenList,t]);return(0,B.jsxs)(x.ZP,{className:"PROPERTY",gap:8,alignItems:"flex-end",children:[(0,B.jsx)(x.ZP,{alignItems:"center",fxDirection:"row",fillWidth:!0,gap:8,children:(0,B.jsx)(yn,{$size:14,$weight:600,children:null===e||void 0===e?void 0:e.label})}),(0,B.jsx)(x.ZP,{fxDirection:"row-reverse",flexWrap:"wrap",fillWidth:!0,gap:8,children:i&&(null===i||void 0===i?void 0:i.length)>0?i:(0,B.jsx)(C.x,{$size:12,children:"---"})})]})},Zn=function(n){var e=n.title,t=void 0===e?"Title":e,i=n.openOverlayButtonTitle,o=void 0===i?(0,L.t)("Change"):i,r=n.onOpenOverlayPress,l=n.editButtonText,d=void 0===l?(0,L.t)("Change"):l,a=n.onEditPress,u=n.acceptButtonText,c=void 0===u?(0,L.t)("Ok"):u,s=n.onAcceptPress,v=n.editMode,p=void 0!==v&&v,f=n.canAccept,h=void 0!==f&&f,m=n.cancelButtonText,g=void 0===m?(0,L.t)("Cancel"):m,b=n.onCancelPress;return(0,B.jsxs)(x.ZP,{fxDirection:"row",justifyContent:"space-between",children:[(0,B.jsx)(yn,{$isTitle:!0,$size:12,style:{marginRight:"auto"},children:t}),r&&(0,B.jsx)(Cn,{type:"button",onClick:r,children:o}),!p&&a&&(0,B.jsx)(Cn,{type:"button",onClick:a,children:d}),p&&b&&(0,B.jsx)(Cn,{type:"button",onClick:b,children:g}),p&&s&&(0,B.jsx)(Cn,{type:"button",disabled:!h,onClick:s,children:c})]})},Cn=Z.ZP.button(a||(a=(0,h.Z)(["\n  display: flex;\n  align-items: center;\n\n  border: 0;\n  background-color: transparent;\n\n  font-family: inherit;\n  font-weight: 600;\n  font-size: 12px;\n  padding: 0 6px;\n  color: ",";\n\n  cursor: pointer;\n\n  &[disabled] {\n    pointer-events: none;\n    color: ",";\n  }\n"])),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.modalBorderColor})),wn=(0,Z.ZP)(x.ZP)(u||(u=(0,h.Z)(["\n  min-height: 50px;\n  height: max-content;\n\n  padding: 4px;\n  gap: 4px;\n\n  //overflow: hidden;\n\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(n){return n.theme.sideBarBorderColor})),Pn=(0,Z.ZP)(x.ZP)(c||(c=(0,h.Z)(["\n  justify-content: center;\n  align-items: center;\n\n  padding: 4px 8px;\n  min-height: 28px;\n  color: #fcfcfc;\n\n  background-color: ",";\n\n  //background-color: #f1f1f1;\n\n  border-radius: 4px;\n  border: 1px solid ",";\n"])),(function(n){return n.theme.fieldBackgroundColor}),(function(n){return n.theme.modalBorderColor})),yn=(0,Z.ZP)(C.x)(s||(s=(0,h.Z)(["\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 100%;\n\n  color: ",";\n"])),(function(n){return n.$isTitle||n.$disabled?n.theme.globals.inputPlaceholderColor:void 0})),jn=(0,Z.ZP)(x.ZP)(v||(v=(0,h.Z)(["\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n"]))),Sn=(0,Z.ZP)(x.ZP)(p||(p=(0,h.Z)(["\n  align-items: center;\n  justify-content: center;\n\n  flex-direction: row;\n\n  padding: 4px 12px;\n\n  font-weight: 500;\n  font-size: 12px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  background-color: ",";\n  //border: 1px solid ",";\n"])),(function(n){return n.theme.fontColorSidebar}),(function(n){return n.theme.field.backgroundColor}),(function(n){return n.theme.accentColor.base}))},3847:function(n,e,t){t.d(e,{By:function(){return l},xx:function(){return r}});var i=t(6522),o=t(9663),r=(0,t(5481).Gg)(o.X),l=[{top:{name:(0,i.t)("label"),align:"start",getData:function(n){return null===n||void 0===n?void 0:n.label}},getImgPreview:function(n){var e;return n.images?null===(e=n.images[0])||void 0===e?void 0:e.img_preview:void 0},width:"270px",action:"doubleDataWithAvatar"},{top:{name:(0,i.t)("sku"),align:"start",getData:function(n){return null===n||void 0===n?void 0:n.sku}},bottom:{name:(0,i.t)("barCode"),align:"start",getData:function(n){return null===n||void 0===n?void 0:n.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,i.t)("type"),align:"start",path:"type"},bottom:{name:(0,i.t)("status"),align:"start",getData:function(n){return n.approved}},width:"100px",action:"status"},{top:{name:(0,i.t)("category"),align:"start",getData:function(n){var e;return null===(e=n.category)||void 0===e?void 0:e.label}},bottom:{name:(0,i.t)("parentCategory"),align:"start",getData:function(n){var e,t;return null===(e=n.category)||void 0===e||null===(t=e.parent)||void 0===t?void 0:t.label}},width:"180px",action:"valueByPath"},{top:{name:"\u0411\u0440\u0435\u043d\u0434",align:"start",path:"brand.label"},bottom:{name:"\u0412\u0438\u0440\u043e\u0431\u043d\u0438\u043a",align:"start",path:"manufacturer.name"},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",align:"start",path:"description"},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043d\u043e\u0432\u0438\u0432",align:"start",getData:function(n){var e;return null===n||void 0===n||null===(e=n.editor)||void 0===e?void 0:e.email}},bottom:{name:"\u0410\u0432\u0442\u043e\u0440",align:"start",getData:function(n){var e;return null===n||void 0===n||null===(e=n.author)||void 0===e?void 0:e.email}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},bottom:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},width:"150px",action:"dateDbl"}]},758:function(n,e,t){t.d(e,{A7:function(){return r},QX:function(){return l},fK:function(){return a}});var i=t(6522),o=t(5059),r=[{top:{name:(0,i.t)("label"),getData:function(n){return n.label}},bottom:{name:(0,i.t)("code"),getData:function(n){return n.code}},width:"220px",action:"valueByPath"},{top:{name:(0,i.t)("type"),getData:function(n){return null===n||void 0===n?void 0:n.type}},width:"125px",action:"valueByPath"},{top:{name:(0,i.t)("email")},bottom:{name:(0,i.t)("phone")},width:"180px",action:"contacts"},{top:{name:(0,i.t)("Address"),getData:function(n){return n.address||"\u043d\u0435 \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"}},bottom:{name:"".concat((0,i.t)("longitude"),"/").concat((0,i.t)("latitude")),getData:function(n){var e,t;return"".concat(((null===(e=n.location)||void 0===e?void 0:e.longitude)||"---")+", "+((null===(t=n.location)||void 0===t?void 0:t.latitude)||"---"))}},width:"175px",action:"valueByPath"},{top:{name:(0,i.t)("manager"),getData:function(n){var e,t;return"".concat((null===(e=n.manager)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.name)||"---")}},bottom:{name:(0,i.t)("email"),getData:function(n){var e,t;return"".concat((null===(e=n.manager)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email)||"---")}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,i.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}],l=[{top:{name:(0,i.t)("variationLabel"),getData:function(n){var e;return null===(e=n.variation)||void 0===e?void 0:e.label}},getImgPreview:function(n){var e,t,i;return null!==(e=n.product)&&void 0!==e&&e.images?null===(t=n.product)||void 0===t||null===(i=t.images[0])||void 0===i?void 0:i.img_preview:""},width:"270px",action:"doubleDataWithAvatar"},{top:{name:(0,i.t)("sku"),getData:function(n){var e;return null===(e=n.variation)||void 0===e?void 0:e.sku}},bottom:{name:(0,i.t)("barCode"),getData:function(n){var e;return null===(e=n.variation)||void 0===e?void 0:e.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,i.t)("type"),path:"type"},bottom:{name:(0,i.t)("status"),path:"status"},width:"120px",action:"status"},{top:{name:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c",align:"end",getData:function(n){return n.stock||0}},bottom:{name:"\u0420\u0435\u0437\u0435\u0440\u0432",align:"end",getData:function(n){return n.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f",align:"end",getData:function(n){return(null===n||void 0===n?void 0:n.awaiting)||0}},bottom:{name:"\u0412\u0442\u0440\u0430\u0447\u0435\u043d\u043e",align:"end",getData:function(n){return(null===n||void 0===n?void 0:n.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("warehouse"),getData:function(n){var e;return null===(e=n.warehouse)||void 0===e?void 0:e.label}},bottom:{name:(0,i.t)("code"),getData:function(n){var e;return null===(e=n.warehouse)||void 0===e?void 0:e.code}},width:"170px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",path:"description"},width:"190px",action:"valueByPath"},{top:{name:"\u0410\u0432\u0442\u043e\u0440",path:"author.name"},bottom:{name:"\u0415\u043c\u0435\u0439\u043b",path:"author.email"},width:"190px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}],d=[{top:{name:(0,i.t)("Price OUT"),align:"end",getData:function(n){var e;return(0,o.ZP)(Number((null===n||void 0===n||null===(e=n.price)||void 0===e?void 0:e.in)||0))}},bottom:{name:(0,i.t)("Price IN"),align:"end",getData:function(n){var e;return(0,o.ZP)(Number((null===n||void 0===n||null===(e=n.price)||void 0===e?void 0:e.out)||0))}},width:"170px",action:"valueByPath"},{top:{name:(0,i.t)("comment"),align:"start",path:"description"},width:"150px",action:"valueByPath"}],a=[{top:{name:(0,i.t)("batch")},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("warehouse"),getData:function(n){var e;return null===(e=n.warehouse)||void 0===e?void 0:e.label}},bottom:{name:(0,i.t)("code"),getData:function(n){var e;return null===(e=n.warehouse)||void 0===e?void 0:e.code}},width:"170px",action:"valueByPath"},{top:{name:(0,i.t)("Stock"),align:"end",getData:function(n){return n.stock||0}},bottom:{name:(0,i.t)("Reserved"),align:"end",getData:function(n){return n.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("Awaiting"),align:"end",getData:function(n){return(null===n||void 0===n?void 0:n.awaiting)||0}},bottom:{name:(0,i.t)("Lost"),align:"end",getData:function(n){return(null===n||void 0===n?void 0:n.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,i.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}].concat(d)}}]);
//# sourceMappingURL=64.9efadce3.chunk.js.map