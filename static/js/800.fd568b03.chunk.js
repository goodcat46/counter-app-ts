"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[800],{5800:function(e,t,n){n.r(t),n.d(t,{useCustomersTableSettings:function(){return C}});var i,o=n(168),a=n(1413),r=n(9439),l=n(3363),d=n(8495),u=n(2360),c=n(2791),s=n(9322),f=n(1186),h=n(8332),p=n(7348),v=n(5188),m=n(8293),Z=n(763),x=n.n(Z),b=n(6211),g=n(1383),S=n(3329),j=u.ZP.div(i||(i=(0,o.Z)(["\n  ","\n"])),d.VU);t.default=function(e){var t=(0,c.useState)(!1),n=(0,r.Z)(t,2),i=n[0],o=n[1],d=(0,v.kw)(),u=(0,p.I6)(),Z=(0,c.useState)(),C=(0,r.Z)(Z,2),P=C[0],y=C[1],w=(0,c.useState)(),k=(0,r.Z)(w,2),_=k[0],I=k[1],D=(0,h.xc)()[h.EJ.customers],q=(0,c.useMemo)((function(){return{tableData:u.customers,tableTitles:f.f,isFilter:!0,isSearch:!0,footer:!1,checkBoxes:!0,actionsCreator:function(e){var t=null===e||void 0===e?void 0:e.selectedRow;return[{icon:"refresh",onClick:function(){D.getAll({data:{refresh:!0,params:{}}})}},{separator:!0},{icon:"edit",type:"onlyIcon",onClick:function(){var e=d.open({ModalChildren:m.Z,modalChildrenProps:{defaultState:u.customers.find((function(e){return e._id===(null===t||void 0===t?void 0:t._id)})),onSubmit:function(n){D.update({data:{data:{data:(0,b.X$)(n),_id:null===t||void 0===t?void 0:t._id},refresh:!0},onSuccess:function(t,n){console.log("edit customer P",t),(null===e||void 0===e?void 0:e.onClose)&&(null===e||void 0===e||e.onClose())}})}}})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){var e=d.open({ModalChildren:m.Z,modalChildrenProps:{withReferer:!0,onSubmit:function(t){var n;D.create({data:{data:null!==t&&void 0!==t&&null!==(n=t.referrer)&&void 0!==n&&n._id?(0,b.X$)(t):(0,b.X$)(x().omit(t,["referrer"]))},onSuccess:function(t){g.kl.success("New user created: ".concat(null===t||void 0===t?void 0:t.email)),(null===e||void 0===e?void 0:e.onClose)&&(null===e||void 0===e||e.onClose())}})}}})}}]},onFilterSubmit:function(e){I(e)},handleTableSort:function(e,t){y({dataPath:e.dataPath,sortOrder:t})}}}),[d,D,u.customers]);return(0,c.useEffect)((function(){P||_||P||_||0===u.customers.length&&D.getAll({data:{refresh:!0,params:{}},onLoading:o})}),[_,D,P,u.customers.length]),(0,S.jsx)(s.default,{path:e.path,children:(0,S.jsx)(j,{children:(0,S.jsx)(l.ZP,(0,a.Z)((0,a.Z)({},q),{},{isLoading:i}))})})};var C=function(){var e=(0,c.useState)(),t=(0,r.Z)(e,2),n=t[0],i=t[1],o=(0,c.useState)(),a=(0,r.Z)(o,2),l=a[0],d=a[1],u=(0,c.useMemo)((function(){return{isFilter:!0,isSearch:!0,footer:!1,checkBoxes:!0,onFilterSubmit:function(e){d(e)},handleTableSort:function(e,t){i({dataPath:e.dataPath,sortOrder:t})}}}),[]);return(0,c.useEffect)((function(){}),[l,n,u]),{tableConfig:u,sortParams:n,filterParams:l}}},8495:function(e,t,n){n.d(t,{SI:function(){return u},VU:function(){return d}});var i,o,a,r=n(168),l=n(2360),d=(0,l.iv)(i||(i=(0,r.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,l.iv)(o||(o=(0,r.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,l.iv)(a||(a=(0,r.Z)(["\n  outline: 1px solid tomato;\n"])))},8293:function(e,t,n){n.d(t,{Z:function(){return D}});var i,o=n(168),a=n(1413),r=n(4925),l=function(e){return e.facebook="facebook",e.instagram="instagram",e.referralSystem="referralSystem",e.another="another",e}({}),d=n(9656),u=n(6522),c=n(2360),s=n(8095),f=n(4990),h=n(6681),p=n(9964),v=n(457),m=n(1134),Z=n(4109),x=n(1392),b=n(8553),g=n(2791),S=n(1383),j=n(7038),C=n(763),P=n.n(C),y=n(3329),w=["defaultState","withReferer","onSubmit","onClose"],k=S.E4.isDevMode(),_=(0,b.H1)(l),I=(0,c.ZP)(s.ZP)(i||(i=(0,o.Z)([""]))),D=function(e){var t=e.defaultState,n=e.withReferer,i=e.onSubmit,o=(e.onClose,(0,r.Z)(e,w)),c=(0,m.cI)({defaultValues:(0,a.Z)((0,a.Z)({},t),{},{businessType:j.G.company})}),b=c.register,S=c.setValue,C=c.handleSubmit,D=(0,c.watch)(),q=(0,g.useMemo)((function(){return!(null===t||void 0===t||!t.email)}),[null===t||void 0===t?void 0:t.email]);return(0,y.jsx)(d.Z,(0,a.Z)((0,a.Z)({},o),{},{title:o.title?o.title:(0,u.t)("Create customer"),onSubmit:C((function(e){i&&i(P().omit(e,q?["engagementSource","email"]:["engagementSource"]))})),children:(0,y.jsxs)(I,{padding:"0 8px 8px",children:[(0,y.jsx)(f.Z,{label:(0,u.t)("type"),required:!0,children:(0,y.jsx)(p.Z,{options:v.Wk,onSelect:function(e){S("businessType",null===e||void 0===e?void 0:e.value)}})}),(0,y.jsx)(f.Z,{label:(0,u.t)("name"),required:!0,children:(0,y.jsx)(h.ZP,(0,a.Z)((0,a.Z)({placeholder:(0,u.t)("name")},b("name")),{},{required:!0}))}),(0,y.jsx)(f.Z,{label:(0,u.t)("secondName"),children:(0,y.jsx)(h.ZP,(0,a.Z)({placeholder:(0,u.t)("secondName")},b("secondName")))}),(0,y.jsx)(f.Z,{label:(0,u.t)("email"),disabled:q,required:!0,children:(0,y.jsx)(h.ZP,(0,a.Z)((0,a.Z)({placeholder:(0,u.t)("email"),type:"email"},b("email",{required:!0})),{},{disabled:q,required:!0}))}),(0,y.jsx)(f.Z,{label:(0,u.t)("phone"),children:(0,y.jsx)(h.ZP,(0,a.Z)({placeholder:(0,u.t)("phone")},b("phone")))}),(0,y.jsx)(f.Z,{label:(0,u.t)("Birth date"),children:(0,y.jsx)(h.ZP,(0,a.Z)((0,a.Z)({placeholder:(0,u.t)("Birth date")},b("birthDate")),{},{type:"datetime-local"}))}),n&&k&&(0,y.jsx)(f.Z,{label:(0,u.t)("Referrer id"),children:(0,y.jsx)(h.ZP,(0,a.Z)({placeholder:(0,u.t)("Referrer id")},b("referrer._id")))}),(0,y.jsx)(f.Z,{label:(0,u.t)("Source"),children:(0,y.jsx)(x.Z,{disabled:!0,options:_,currentOption:{value:null===D||void 0===D?void 0:D.engagementSource},onChangeIndex:function(e){S("engagementSource",_[e].value)}})}),(null===D||void 0===D?void 0:D.engagementSource)===l.referralSystem&&(0,y.jsxs)(s.ZP,{gap:8,fillWidth:!0,children:[(0,y.jsx)(f.Z,{label:(0,u.t)("Referrer"),required:!0,children:(0,y.jsx)(h.ZP,{placeholder:(0,u.t)("Referrer"),type:"email",required:!0})}),(0,y.jsxs)(s.ZP,{fxDirection:"row",fillWidth:!0,gap:8,padding:"8px 0",children:[(0,y.jsx)(Z.Z,{variant:"defOutlinedSmall",children:(0,u.t)("Clear referrer")}),(0,y.jsx)(Z.Z,{variant:"outlinedSmall",flex:1,children:(0,u.t)("Select referrer")})]})]})]})}))}},1392:function(e,t,n){var i=n(3433),o=n(9439),a=n(2791),r=n(6666),l=n(8095),d=n(3855),u=n(6492),c=n(3329);t.Z=function(e){var t=e.options,n=e.onChangeIndex,s=e.currentIndex,f=e.currentOption,h=e.multiple,p=e.onChange,v=e.value,m=e.disabled,Z=e.disabledCheck,x=(0,a.useState)(0),b=(0,o.Z)(x,2),g=b[0],S=b[1],j=(0,a.useState)([]),C=(0,o.Z)(j,2),P=C[0],y=C[1];return(0,a.useEffect)((function(){r.sr.isUnd(s)||S(s)}),[s]),(0,a.useEffect)((function(){h||r.sr.isUnd(f)||r.sr.isUnd(t)||S(t.findIndex((function(e){return(null===e||void 0===e?void 0:e.value)===(null===f||void 0===f?void 0:f.value)||(null===e||void 0===e?void 0:e._id)===(null===f||void 0===f?void 0:f._id)})))}),[f,h,t]),(0,a.useEffect)((function(){h&&!r.sr.isUnd(v)&&r.sr.isArray(v)&&y(v)}),[h,v]),(0,c.jsx)(l.ZP,{fillWidth:!0,gap:8,children:null===t||void 0===t?void 0:t.map((function(e,t){var o=Z?Z(e,t):m;return(0,c.jsxs)(l.ZP,{fxDirection:"row",gap:8,padding:"2px 4px",alignItems:"center",style:{opacity:o?.7:1,pointerEvents:o?"none":"all"},onClick:function(){var a;o||(!function(e){S(e),n&&n(e)}(t),(null===e||void 0===e?void 0:e._id)&&(a=null===e||void 0===e?void 0:e._id,h?y((function(e){var t=P.includes(a)?e.filter((function(e){return e!==a})):[].concat((0,i.Z)(e),[a]);return p&&p(t),t})):(y([a]),p&&p([a]))))},children:[(0,c.jsx)(d.Z,{checked:(null===e||void 0===e?void 0:e._id)&&P.includes(null===e||void 0===e?void 0:e._id)||t===g,size:"22px",disabled:o}),(0,c.jsx)(u.x,{children:null===e||void 0===e?void 0:e.label})]},"m-opt_".concat(e.value))}))})}},1186:function(e,t,n){n.d(t,{f:function(){return o}});var i=n(6522),o=[{top:{name:"".concat((0,i.t)("label"),"/").concat((0,i.t)("name")),getData:function(e){return(null===e||void 0===e?void 0:e.label)||"".concat((null===e||void 0===e?void 0:e.name)||"---"," ").concat((null===e||void 0===e?void 0:e.secondName)||"---")}},bottom:{name:"\u0406\u041f\u041d/\u0404\u0414\u0420\u041f\u041e\u0423",getData:function(e){return(e.personalTaxCode||"---")+"/"+(e.taxCode||"---")}},width:"240px",action:"doubleDataWithAvatar"},{top:{name:"\u0422\u0438\u043f",path:"type",getData:function(e){return null===e||void 0===e?void 0:e.type}},bottom:{name:"\u0421\u0442\u0430\u0442\u0443\u0441",path:"status"},width:"120px",action:"valueByPath"},{top:{name:"\u0415\u043c\u0435\u0439\u043b",path:"email",uppercase:!1},bottom:{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",path:"phone"},width:"170px",action:"contacts"},{top:{name:"\u041b\u043e\u043a\u0430\u0446\u0456\u044f"},width:"170px",action:"valueByPath"},{top:{name:"\u0422\u0435\u0433\u0438",path:"tags"},width:"200px",action:"tags"},{top:{name:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",path:"description"},width:"170px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}]}}]);
//# sourceMappingURL=800.fd568b03.chunk.js.map