"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[681],{7681:function(e,t,r){r.r(t),r.d(t,{default:function(){return N},useProductsTableSettings:function(){return D}});var n,o=r(168),a=r(1413),i=r(9439),l=r(4360),d=r(8495),u=r(1261),c=r(2360),s=r(2791),f=r(9254),p=r(7348),h=r(4406),Z=function(){return[]},v=r(4165),S=r(5861),b=r(4354),m=r(4925),P=r(5114),g=r(4990),y=r(6681),x=r(4343),C=r(3423),O=r(5304),j=r(8095),A=r(6522),w=r(870),_=r(3288),k=r(6211),I=r(5476),M=r(6757),R=r(184),L=["edit","onSubmit","copy","defaultState","addInputs"],E=function(e){e.edit;var t,r=e.onSubmit,n=(e.copy,e.defaultState),o=(e.addInputs,(0,m.Z)(e,L)),i=(0,O.CG)().directories.directories,l=(0,_.hN)({defaultValues:(0,a.Z)({currency:"UAH"},n),reValidateMode:"onSubmit"}),d=l.formState.errors,u=l.formValues,c=l.register,f=l.setValue,p=l.registerSelect,h=l.handleSubmit,Z=l.toggleAfterSubmitOption,v=l.closeAfterSave,S=l.clearAfterSave;var b=(0,s.useMemo)((function(){var e,t=i[w.cA.CATEGORIES_PROD],r=null===(e=t.find((function(e){var t;return e._id===(null===(t=u.category)||void 0===t?void 0:t._id)})))||void 0===e?void 0:e.childrenList;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(C.Z,(0,a.Z)({},p("category",{label:(0,A.Z)("category"),placeholder:(0,A.Z)("category"),required:!0,options:t},{childName:"subCategory"}))),r&&r.length>0&&(0,R.jsx)(C.Z,(0,a.Z)({label:(0,A.Z)("subCategory"),placeholder:(0,A.Z)("subCategory")},p("subCategory",{options:r})))]})}),[i,null===(t=u.category)||void 0===t?void 0:t._id,p]),E=(0,s.useMemo)((function(){return(0,R.jsx)(C.Z,(0,a.Z)({},p("supplier",{options:i[w.cA.CONTRACTORS].filter((function(e){return e.type===I.I.SUPPLIER})),placeholder:(0,A.Z)(I.I.SUPPLIER),label:(0,A.Z)(I.I.SUPPLIER)})))}),[i,p]),F=(0,s.useMemo)((function(){return(0,R.jsx)(C.Z,(0,a.Z)({},p("brand",{options:i[w.cA.BRANDS],placeholder:(0,A.Z)("selectBrand"),label:(0,A.Z)("brand")})))}),[i,p]);return(0,R.jsx)(P.Z,(0,a.Z)((0,a.Z)({onSubmit:h((function(e){var t=(0,k.X$)(e,[]);r&&r({_id:"",data:t},{closeAfterSave:v,clearAfterSave:S})}),(function(e){return console.log(e)})),onOptSelect:function(e){var t=e.value;return t&&f("type",t)}},o),{},{extraFooter:(0,R.jsx)(M.Z,{toggleOption:Z,closeAfterSave:v,clearAfterSave:S}),children:(0,R.jsxs)(j.ZP,{className:"inputs",flex:"1",fillWidth:!0,maxHeight:"100%",padding:"12px",overflow:"auto",children:[(0,R.jsx)(g.Z,{label:(0,A.Z)("label"),direction:"vertical",error:d.label,required:!0,children:(0,R.jsx)(y.ZP,(0,a.Z)((0,a.Z)({placeholder:(0,A.Z)("label")},c("label")),{},{required:!0,autoFocus:!0}))}),(0,R.jsx)(g.Z,{label:(0,A.Z)("sku"),direction:"vertical",error:d.sku,children:(0,R.jsx)(y.ZP,(0,a.Z)({placeholder:(0,A.Z)("sku")},c("sku",{max:120})))}),b,E,F,(0,R.jsx)(g.Z,{label:(0,A.Z)("status"),direction:"vertical",error:d.status,disabled:!0,children:(0,R.jsx)(y.ZP,(0,a.Z)((0,a.Z)({placeholder:(0,A.Z)("status")},c("status")),{},{disabled:!0}))}),(0,R.jsx)(g.Z,{label:"\u0428\u0442\u0440\u0438\u0445-\u043a\u043e\u0434",direction:"vertical",error:d.barCode,children:(0,R.jsx)(y.ZP,(0,a.Z)({placeholder:"\u0428\u0442\u0440\u0438\u0445-\u043a\u043e\u0434"},c("barCode")))}),(0,R.jsx)(g.Z,{label:"\u041e\u0434\u0438\u043d\u0438\u0446\u0456 \u0432\u0438\u043c\u0456\u0440\u0443",direction:"vertical",error:d.unitsOfMeasurement,disabled:!0,children:(0,R.jsx)(y.ZP,(0,a.Z)((0,a.Z)({placeholder:"\u041e\u0434\u0438\u043d\u0438\u0446\u0456 \u0432\u0438\u043c\u0456\u0440\u0443"},c("unitsOfMeasurement")),{},{disabled:!0}))}),(0,R.jsx)(g.Z,{label:(0,A.Z)("description"),direction:"vertical",error:d.description,children:(0,R.jsx)(x.Z,(0,a.Z)({placeholder:(0,A.Z)("description")},c("description")))})]})}))},F=r(9102),T=r(763),V=[{label:"GOODS",value:"GOODS"},{label:"SERVICE",value:"SERVICE"}],q=function(){var e=(0,h.Z)(),t=(0,p.nr)(),r=(0,b.f9)();return(0,s.useCallback)((function(n){var o,a,i;return[{name:"reviewProduct",title:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0443",icon:"openInNew",disabled:!(null!==(o=n.selectedRow)&&void 0!==o&&o._id),type:"onlyIcon",onClick:function(){r.handleOpenModal({ModalChildren:F.Z,modalChildrenProps:{title:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0443",product:t.products.find((function(e){var t;return e._id===(null===(t=n.selectedRow)||void 0===t?void 0:t._id)}))}})}},{name:"editProduct",title:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",icon:"edit",iconSize:"90%",type:"onlyIcon",disabled:!(null!==n&&void 0!==n&&null!==(a=n.selectedRow)&&void 0!==a&&a._id),onClick:function(){var o=(0,S.Z)((0,v.Z)().mark((function o(){var a;return(0,v.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:a=r.handleOpenModal({ModalChildren:E,modalChildrenProps:{title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438",filterOptions:V,defaultState:(0,T.omit)(t.products.find((function(e){var t;return e._id===(null===n||void 0===n||null===(t=n.selectedRow)||void 0===t?void 0:t._id)})),["_id","createdAt","updatedAt"]),onSubmit:function(t,r){e.create({data:t,onSuccess:function(e){(null===r||void 0===r?void 0:r.closeAfterSave)&&(null===a||void 0===a||a.onClose())}})},fillHeight:!0}});case 1:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}()},{name:"copyProduct",title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438",icon:"copy",iconSize:"90%",type:"onlyIcon",disabled:!(null!==n&&void 0!==n&&null!==(i=n.selectedRow)&&void 0!==i&&i._id),onClick:function(){var o=(0,S.Z)((0,v.Z)().mark((function o(){var a;return(0,v.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:a=r.handleOpenModal({ModalChildren:E,modalChildrenProps:{title:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",filterOptions:V,defaultState:(0,T.omit)(t.products.find((function(e){var t;return e._id===(null===n||void 0===n||null===(t=n.selectedRow)||void 0===t?void 0:t._id)})),["createdAt","updatedAt"]),onSubmit:function(t,r){e.create({data:t,onSuccess:function(e){(null===r||void 0===r?void 0:r.closeAfterSave)&&(null===a||void 0===a||a.onClose())}})},fillHeight:!0}});case 1:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}()},{name:"archiveProduct",title:"\u0410\u0440\u0445\u0456\u0432",icon:"archive",iconSize:"90%",type:"onlyIcon",disabled:!0},{separator:!0},{name:"createProduct",title:"\u041d\u043e\u0432\u0438\u0439",icon:"plus",iconSize:"90%",type:"onlyIconFilled",disabled:!1,onClick:function(){var t=(0,S.Z)((0,v.Z)().mark((function t(){var n;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.handleOpenModal({ModalChildren:E,modalChildrenProps:{title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",filterOptions:V,defaultState:{type:"GOODS"},onSubmit:function(t,r){e.create({data:t,onSuccess:function(e){(null===r||void 0===r?void 0:r.closeAfterSave)&&(null===n||void 0===n||n.onClose())}})},fillHeight:!0}});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]}),[r,e,t.products])},D=function(){var e=(0,h.Z)(),t=(0,p.nr)(),r=e.getAll,n=Z(),o=q(),a=(0,s.useState)(!1),l=(0,i.Z)(a,2),d=l[0],c=l[1],f=(0,s.useState)(),v=(0,i.Z)(f,2),S=v[0],b=v[1],m=(0,s.useState)(),P=(0,i.Z)(m,2),g=P[0],y=P[1],x=(0,s.useMemo)((function(){return{tableData:t.products,tableTitles:u.By,tableSortParams:u.wo.filter((function(e){return e.sort})),filterSelectors:n,isFilter:!0,isSearch:!0,footer:!1,checkBoxes:!0,actionsCreator:o,onFilterSubmit:function(e){y(e),r({data:{refresh:!0,query:{filterParams:e,sortParams:S}},onLoading:c}).then()},handleTableSort:function(e,t){b({dataPath:e.dataPath,sortOrder:t}),r({data:{refresh:!0,query:{sortParams:{dataPath:e.dataPath,sortOrder:t},filterParams:g}},onLoading:c}).then()}}}),[o,g,n,r,S,t.products]);return(0,s.useEffect)((function(){S||g||S||g||0===t.products.length&&r({data:{refresh:!0},onLoading:c})}),[g,r,d,S,t.products.length,x]),{tableConfig:x,isLoading:d,sortParams:S,filterParams:g}},B=c.ZP.div(n||(n=(0,o.Z)(["\n  ","\n"])),d.VU),N=function(e){var t=(0,h.Z)().getAll,r=(0,p.nr)(),n=Z(),o=q(),d=(0,s.useState)(!1),c=(0,i.Z)(d,2),v=c[0],S=c[1],b=(0,s.useState)(),m=(0,i.Z)(b,2),P=m[0],g=m[1],y=(0,s.useState)(),x=(0,i.Z)(y,2),C=x[0],O=x[1],j=(0,s.useMemo)((function(){return{tableData:r.products,tableTitles:u.By,tableSortParams:u.wo.filter((function(e){return e.sort})),filterSelectors:n,isFilter:!0,isSearch:!0,footer:!1,checkBoxes:!0,actionsCreator:o,onFilterSubmit:function(e){O(e),t({data:{refresh:!0,query:{filterParams:e,sortParams:P}},onLoading:S}).then()},handleTableSort:function(e,r){g({dataPath:e.dataPath,sortOrder:r}),t({data:{refresh:!0,query:{sortParams:{dataPath:e.dataPath,sortOrder:r},filterParams:C}},onLoading:S}).then()}}}),[o,C,n,t,P,r.products]);return(0,s.useEffect)((function(){P||C||P||C||0===r.products.length&&t({data:{refresh:!0},onLoading:S})}),[C,t,P,r.products.length]),(0,R.jsx)(f.default,{path:e.path,children:(0,R.jsx)(B,{children:(0,R.jsx)(l.ZP,(0,a.Z)((0,a.Z)({},j),{},{isLoading:v}))})})}},8495:function(e,t,r){r.d(t,{SI:function(){return u},VU:function(){return d}});var n,o,a,i=r(168),l=r(2360),d=(0,l.iv)(n||(n=(0,i.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,l.iv)(o||(o=(0,i.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,l.iv)(a||(a=(0,i.Z)(["\n  outline: 1px solid tomato;\n"])))}}]);
//# sourceMappingURL=681.7d101105.chunk.js.map