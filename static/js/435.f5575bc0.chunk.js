"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[435],{3435:function(t,n,e){e.r(n);var o,a,i,r=e(168),u=e(4942),l=e(1413),d=e(9439),c=e(4925),v=e(2791),p=e(400),s=e(1419),m=e(6522),h=e(8553),f=e(9953),g=e(2360),b=e(1251),x=e(8095),w=e(7606),P=e(163),y=e(6272),D=e(7348),S=e(1605),Z=e(401),B=e(387),C=e(758),_=e(853),k=e(763),A=e.n(k),I=e(6382),j=e(8828),M=e(3329),E=["params","defaultState","onSubmit","onClose"],N=function(t){return t.product="product",t.variation="variation",t.batch="batch",t}(N||{}),L=(0,h.H1)(N),Q=g.ZP.form(o||(o=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  width: 98vw;\n  height: 98vh;\n  padding: 0 8px;\n\n  color: ",";\n\n  background-color: ",";\n"])),(function(t){return t.theme.fontColorSidebar}),(function(t){return t.theme.modalBackgroundColor})),R=(0,g.ZP)(x.ZP)(a||(a=(0,r.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(t){return t.theme.modalBorderColor}),(function(t){return t.theme.modalBorderColor})),W=(0,g.ZP)(x.ZP)(i||(i=(0,r.Z)([""])));n.default=function(t){var n,e,o,a=t.params,i=(t.defaultState,t.onSubmit),r=t.onClose,h=(0,c.Z)(t,E),g=(0,_.dn)(L),x=g.stepCheck,k=g.stepIdx,U=g.setPrevStep,H=g.setNextStep,O=(0,v.useState)([]),T=(0,d.Z)(O,2),q=T[0],F=T[1],G=(0,v.useState)([]),K=(0,d.Z)(G,2),V=K[0],Y=K[1],X=(0,v.useState)([]),$=(0,d.Z)(X,2),z=$[0],J=$[1],tt=(0,v.useState)({}),nt=(0,d.Z)(tt,2),et=nt[0],ot=nt[1],at=(0,v.useState)(!1),it=(0,d.Z)(at,2),rt=it[0],ut=it[1],lt=(0,v.useCallback)((function(t,n){ot((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,u.Z)({},t,n))}))}),[]),dt=(0,D.WS)(),ct=(0,P.hN)(),vt=ct.watch,pt=ct.setValue,st=vt(),mt=st.search,ht=st.searchBy,ft=(0,v.useMemo)((function(){return{tableTitles:j.Y5,tableData:q,tableSearchParams:[{dataPath:"label",label:(0,m.t)("label")},{dataPath:"sku",label:(0,m.t)("sku")}],selectedRow:null===et||void 0===et?void 0:et.product,onSubmitSearch:function(t){var n;pt("search",t.search),pt("searchBy",null===(n=t.searchParam)||void 0===n?void 0:n.dataPath)},onRowClick:function(t){var n=q.find((function(n){return n._id===(null===t||void 0===t?void 0:t._id)}));n&&lt("product",n),H()}}}),[null===et||void 0===et?void 0:et.product,q,lt,H,pt]),gt=(0,v.useMemo)((function(){var t=dt.find((function(t){var n,e;return t._id===(null===et||void 0===et||null===(n=et.product)||void 0===n||null===(e=n.template)||void 0===e?void 0:e._id)}));return(0,y.F9)(t)}),[dt,et]),bt=(0,v.useMemo)((function(){return{tableTitles:gt,tableData:V,isSearch:!1,selectedRow:null===et||void 0===et?void 0:et.variation,onRowClick:function(t){var n=V.find((function(n){return n._id===(null===t||void 0===t?void 0:t._id)}));n&&lt("variation",n),H()}}}),[null===et||void 0===et?void 0:et.variation,lt,H,gt,V]),xt=(0,v.useMemo)((function(){return{tableTitles:C.fK,tableData:z,isSearch:!1,selectedRow:null===et||void 0===et?void 0:et.inventory,onRowClick:function(t){var n=z.find((function(n){return n._id===(null===t||void 0===t?void 0:t._id)}));n&&lt("inventory",n),(null===n||void 0===n?void 0:n.warehouse)&&lt("warehouse",null===n||void 0===n?void 0:n.warehouse),H()}}}),[null===et||void 0===et?void 0:et.inventory,z,lt,H]),wt=(0,v.useMemo)((function(){return x(N.product)?ft:x(N.variation)?bt:x(N.batch)?xt:void 0}),[x,ft,bt,xt]),Pt=(0,v.useMemo)((function(){var t=et.product,n=et.variation,e=et.inventory;return x(N.product)?!!t:x(N.variation)?z.length>0?!!t&&!!n:!!t:!!x(N.batch)&&!!e}),[et,z.length,x]),yt=(0,v.useMemo)((function(){return Object.values(et).length>=4}),[et]),Dt=(0,v.useCallback)((function(){var t=et.product,n=et.variation;return x(N.product)?(0,s.Eh)({data:{search:mt,searchBy:ht},onSuccess:F,onLoading:ut},s.So.getAll,s.So):x(N.variation)&&t?(0,s.Eh)({data:{offerId:(0,B.rE)(t)},onSuccess:function(t){Y(t.map((function(t){return(0,Z.m$)(t)})))},onLoading:ut},S.Z.getAllByProductId,S.Z):x(N.batch)&&t?(0,s.Eh)({data:{offer:(0,B.rE)(t),variation:n?(0,B.rE)(n):void 0,warehouse:null!==a&&void 0!==a&&a.warehouse?(0,B.rE)(null===a||void 0===a?void 0:a.warehouse):void 0},onSuccess:J,onLoading:ut},s.nh.getAllInventories,s.nh):void 0}),[et,null===a||void 0===a?void 0:a.warehouse,mt,ht,x]);return(0,v.useEffect)((function(){Dt()}),[Dt]),(0,v.useEffect)((function(){var t,n,e;(null===(t=et.variation)||void 0===t||null===(n=t.offer)||void 0===n?void 0:n._id)!==(null===(e=et.product)||void 0===e?void 0:e._id)&&ot((function(t){return{product:null===t||void 0===t?void 0:t.product}}))}),[null===(n=et.product)||void 0===n?void 0:n._id,null===(e=et.variation)||void 0===e||null===(o=e.offer)||void 0===o?void 0:o._id]),(0,M.jsxs)(Q,(0,l.Z)((0,l.Z)({fillWidth:!0,fillHeight:!0},h),{},{onSubmit:function(t){var n,e;t.preventDefault();var o=(0,l.Z)((0,l.Z)((0,l.Z)({},A().omit(null===et||void 0===et||null===(n=et.inventory)||void 0===n?void 0:n.price,["_id","createdAt","updatedAt","deletedAt","author","owner","list","product","variation"])),A().omit(et,["price"])),{},{origin:null===et||void 0===et||null===(e=et.inventory)||void 0===e?void 0:e.price,tempId:(0,I.x0)(8),quantity:1});i&&i(o),r&&r()},children:[(0,M.jsx)(b.xB,{title:(0,m.t)("Select product"),onBackPress:r}),(0,M.jsxs)(R,{fillWidth:!0,flex:1,overflow:"hidden",children:[(0,M.jsx)(f.Z,{filterOptions:L,asStepper:!0,currentIndex:k}),(0,M.jsx)(p.ZP,(0,l.Z)((0,l.Z)({},wt),{},{isLoading:rt}))]}),(0,M.jsx)(W,{padding:"8px",children:(0,M.jsx)(w.Z,{steps:L,onPrevPress:function(){return U()},onNextPress:function(){return H()},onCancelPress:0===k?r:void 0,canGoNext:Pt,canSubmit:yt,submitButton:!0,currentIndex:k})})]}))}},7606:function(t,n,e){var o,a,i,r=e(168),u=e(9439),l=e(2360),d=e(8095),c=e(4109),v=e(2791),p=e(6272),s=e(6522),m=e(4805),h=e(3329),f=(0,l.ZP)(d.ZP)(o||(o=(0,r.Z)(["\n  //min-height: 44px;\n  // border-top: 1px solid ",";\n  // border-bottom: 1px solid ",";\n"])),(function(t){return t.theme.modalBorderColor}),(function(t){return t.theme.modalBorderColor})),g=(0,l.ZP)(c.Z)(a||(a=(0,r.Z)(["\n  padding-top: 0;\n  padding-bottom: 0;\n\n  flex: 1;\n\n  min-width: min-content;\n  height: 100%;\n"]))),b=(0,l.ZP)(c.Z)(i||(i=(0,r.Z)(["\n  min-width: 34px;\n  height: 100%;\n  // color: ",";\n  // fill: ",";\n  // background-color: ",";\n  @media screen and (min-width: 480px) {\n    flex: 1;\n  }\n"])),(function(t){return t.theme.accentColor.base}),(function(t){return t.theme.accentColor.base}),(function(t){return t.theme.accentColor.light}));n.Z=function(t){var n=t.steps,e=t.currentIndex,o=void 0===e?0:e,a=t.onNextPress,i=t.onPrevPress,r=t.onCancelPress,l=t.onAcceptPress,d=t.canGoNext,c=void 0===d||d,x=t.canAccept,w=t.canSubmit,P=t.cancelButton,y=void 0===P||P,D=t.submitButton,S=void 0!==D&&D,Z=t.acceptButton,B=t.arrowButtons,C=void 0===B||B,_=t.isLoading,k=(0,m.useMediaQuery)({query:"(max-width: 768px)"}),A=(0,m.useMediaQuery)({query:"(max-width: 480px)"}),I=(0,v.useState)(o),j=(0,u.Z)(I,2),M=j[0],E=j[1],N=(0,v.useMemo)((function(){var t,e;return n&&n[M-1]?{label:null===(t=n[M-1])||void 0===t?void 0:t.label,value:null===(e=n[M-1])||void 0===e?void 0:e.value}:null}),[M,n]),L=(0,v.useMemo)((function(){var t,e;return n&&n[M+1]?{label:null===(t=n[M+1])||void 0===t?void 0:t.label,value:null===(e=n[M+1])||void 0===e?void 0:e.value}:null}),[M,n]),Q=(0,v.useCallback)((function(){if(n)if(i){if(0===M)return void(r&&r());var t=M-1;i&&i({option:n[t],value:n[t].value,index:t})}else E((function(t){return 0===t?t:t-1}))}),[M,r,i,n]),R=(0,v.useCallback)((function(){if(n){if(a){var t=M+1;return t===n.length?l&&l():a({option:n[t],value:n[t].value,index:t})}E((function(t){return t+1===n.length?t+1:t}))}}),[M,l,a,n]);return(0,v.useEffect)((function(){p.sr.isNotUnd(o)&&E(o)}),[o]),(0,h.jsxs)(f,{fxDirection:"row",gap:8,fillWidth:!0,children:[y&&!k&&(0,h.jsx)(g,{variant:"defOutlinedSmall",isLoading:_,onClick:r,children:(0,s.t)("Cancel")}),C&&(0,h.jsx)(b,{variant:A?"onlyIconFilled":"filledSmall",icon:"SmallArrowLeft",onClick:Q,disabled:_||!N,children:null===N||void 0===N?void 0:N.label}),C&&(0,h.jsx)(b,{variant:A?"onlyIconFilled":"filledSmall",endIcon:"SmallArrowRight",onClick:R,disabled:_||!c||!L,children:null===L||void 0===L?void 0:L.label}),(S||Z)&&(0,h.jsx)(g,{variant:"filledSmall",type:w&&S?"submit":"button",onClick:l,isLoading:_,disabled:w&&S?!w:!x,children:(0,s.t)("Accept")})]})}},8828:function(t,n,e){e.d(n,{E_:function(){return c},SQ:function(){return d},Y5:function(){return v}});var o=e(6522),a=e(3691),i=e(5481),r=e(6272),u=e(755),l=e(3299),d=((0,i.Gg)(a.Hb),(0,r.H1)(a.Hb)),c=[{label:"Preview",value:u.Q.img_preview,required:!0},{label:"1x",value:u.Q.img_1x},{label:"2x",value:u.Q.img_2x},{label:"Webp",value:u.Q.webp}],v=[{top:{name:(0,o.t)("label"),getData:function(t){return null===t||void 0===t?void 0:t.label}},getImgPreview:function(t){var n;return t.images?null===(n=t.images[0])||void 0===n?void 0:n.img_preview:void 0},width:"270px",action:"dataWithAvatar"},{top:{name:(0,o.t)("sku"),getData:function(t){return null===t||void 0===t?void 0:t.sku}},bottom:{name:(0,o.t)("barCode"),getData:function(t){return null===t||void 0===t?void 0:t.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,o.t)("type"),path:"type"},bottom:{name:(0,o.t)("status"),getData:function(t){return t.approved}},width:"100px",action:"status"},{top:{name:(0,o.t)("Price OUT"),align:"end",getData:function(t){var n;return(0,l.pU)(null===(n=t.price)||void 0===n?void 0:n.out)}},bottom:{name:(0,o.t)("Price IN"),align:"end",getData:function(t){var n;return(0,l.pU)(null===(n=t.price)||void 0===n?void 0:n.in)}},width:"150px",action:"valueByPath"},{top:{name:(0,o.t)("Variation label"),getData:function(t){var n;return(null===(n=t.variation)||void 0===n?void 0:n.label)||"---"}},bottom:{name:(0,o.t)("SKU"),getData:function(t){var n;return(null===(n=t.variation)||void 0===n?void 0:n.sku)||"---"}},width:"190px",action:"valueByPath"},{top:{name:(0,o.t)("Warehouse"),getData:function(t){var n;return null===(n=t.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,o.t)("Code"),getData:function(t){var n;return null===(n=t.warehouse)||void 0===n?void 0:n.code}},width:"150px",action:"valueByPath"},{top:{name:"\u0411\u0440\u0435\u043d\u0434",path:"brand.label"},bottom:{name:"\u0412\u0438\u0440\u043e\u0431\u043d\u0438\u043a",path:"manufacturer.name"},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",path:"description"},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043d\u043e\u0432\u0438\u0432",getData:function(t){var n;return null===t||void 0===t||null===(n=t.editor)||void 0===n?void 0:n.email}},bottom:{name:"\u0410\u0432\u0442\u043e\u0440",getData:function(t){var n;return null===t||void 0===t||null===(n=t.author)||void 0===n?void 0:n.email}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},bottom:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},width:"150px",action:"dateDbl"}]},758:function(t,n,e){e.d(n,{A7:function(){return i},QX:function(){return r},fK:function(){return l}});var o=e(6522),a=e(6272),i=[{top:{name:(0,o.t)("label"),getData:function(t){return t.label}},bottom:{name:(0,o.t)("code"),getData:function(t){return t.code}},width:"220px",action:"valueByPath"},{top:{name:(0,o.t)("type"),getData:function(t){return null===t||void 0===t?void 0:t.type}},width:"125px",action:"valueByPath"},{top:{name:(0,o.t)("email")},bottom:{name:(0,o.t)("phone")},width:"180px",action:"contacts"},{top:{name:(0,o.t)("Address"),getData:function(t){return t.address||"\u043d\u0435 \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"}},bottom:{name:"".concat((0,o.t)("longitude"),"/").concat((0,o.t)("latitude")),getData:function(t){var n,e;return"".concat(((null===(n=t.location)||void 0===n?void 0:n.longitude)||"---")+", "+((null===(e=t.location)||void 0===e?void 0:e.latitude)||"---"))}},width:"175px",action:"valueByPath"},{top:{name:(0,o.t)("Manager"),getData:function(t){var n,e;return"".concat((null===(n=t.manager)||void 0===n||null===(e=n.user)||void 0===e?void 0:e.name)||"---")}},bottom:{name:(0,o.t)("email"),getData:function(t){var n,e;return"".concat((null===(n=t.manager)||void 0===n||null===(e=n.user)||void 0===e?void 0:e.email)||"---")}},width:"150px",action:"valueByPath"},{top:{name:(0,o.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,o.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}],r=[{top:{name:(0,o.t)("variationLabel"),getData:function(t){var n;return null===(n=t.variation)||void 0===n?void 0:n.label}},getImgPreview:function(t){var n,e,o;return null!==(n=t.offer)&&void 0!==n&&n.images?null===(e=t.offer)||void 0===e||null===(o=e.images[0])||void 0===o?void 0:o.img_preview:""},width:"270px",action:"doubleDataWithAvatar"},{top:{name:(0,o.t)("sku"),getData:function(t){var n;return null===(n=t.variation)||void 0===n?void 0:n.sku}},bottom:{name:(0,o.t)("barCode"),getData:function(t){var n;return null===(n=t.variation)||void 0===n?void 0:n.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,o.t)("type"),path:"type"},bottom:{name:(0,o.t)("status"),path:"status"},width:"120px",action:"status"},{top:{name:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c",align:"end",getData:function(t){return t.stock||0}},bottom:{name:"\u0420\u0435\u0437\u0435\u0440\u0432",align:"end",getData:function(t){return t.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f",align:"end",getData:function(t){return(null===t||void 0===t?void 0:t.awaiting)||0}},bottom:{name:"\u0412\u0442\u0440\u0430\u0447\u0435\u043d\u043e",align:"end",getData:function(t){return(null===t||void 0===t?void 0:t.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,o.t)("warehouse"),getData:function(t){var n;return null===(n=t.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,o.t)("code"),getData:function(t){var n;return null===(n=t.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",path:"description"},width:"190px",action:"valueByPath"},{top:{name:"\u0410\u0432\u0442\u043e\u0440",path:"author.name"},bottom:{name:"\u0415\u043c\u0435\u0439\u043b",path:"author.email"},width:"190px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}],u=[{top:{name:(0,o.t)("Price OUT"),align:"end",getData:function(t){var n;return(0,a.__)(Number((null===t||void 0===t||null===(n=t.price)||void 0===n?void 0:n.in)||0))}},bottom:{name:(0,o.t)("Price IN"),align:"end",getData:function(t){var n;return(0,a.__)(Number((null===t||void 0===t||null===(n=t.price)||void 0===n?void 0:n.out)||0))}},width:"170px",action:"valueByPath"},{top:{name:(0,o.t)("comment"),align:"start",path:"description"},width:"150px",action:"valueByPath"}],l=[{top:{name:(0,o.t)("batch")},width:"150px",action:"valueByPath"},{top:{name:(0,o.t)("warehouse"),getData:function(t){var n;return null===(n=t.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,o.t)("code"),getData:function(t){var n;return null===(n=t.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:(0,o.t)("Stock"),align:"end",getData:function(t){return t.stock||0}},bottom:{name:(0,o.t)("Reserved"),align:"end",getData:function(t){return t.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:(0,o.t)("Awaiting"),align:"end",getData:function(t){return(null===t||void 0===t?void 0:t.awaiting)||0}},bottom:{name:(0,o.t)("Lost"),align:"end",getData:function(t){return(null===t||void 0===t?void 0:t.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,o.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,o.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}].concat(u)},755:function(t,n,e){e.d(n,{Q:function(){return o}});var o=function(t){return t.img_preview="img_preview",t.img_1x="img_1x",t.img_2x="img_2x",t.webp="webp",t}({})}}]);
//# sourceMappingURL=435.f5575bc0.chunk.js.map