"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[494],{9701:function(e,n,o){o.d(n,{B:function(){return j}});var i=o(1413),t=o(4925),l=o(8768),r=o(8376),d=o(4990),a=o(6522),u=o(6681),s=o(8095),c=(o(2791),o(6785)),f=o(870),v=o(4343),p=o(8382),m=o(2913),h=o(1494),b=o(4436),g=o(7348),Z=o(3329),x=["formState","register","registerSelect","formValues"],j=function(e){var n=e.defaultValues,o=e.edit,j=e.type,S=e.onSuccess,y=e._id,L=(0,h.useOfferLoadersProvider)(),_=L.isLoading,P=L.onLoading,V=(0,m.Z)(),C=(0,g.q$)(f.cA.BRANDS).directory,O=(0,r.hN)({defaultValues:(0,i.Z)((0,i.Z)({},n),{},{type:j})}),D=O.formState.errors,I=O.register,k=O.registerSelect,w=(O.formValues,(0,t.Z)(O,x));return(0,Z.jsxs)(l.h,{label:(0,a.t)("Base info"),isLoading:o?null===_||void 0===_?void 0:_.offer_update:null===_||void 0===_?void 0:_.offer_create,onSubmit:w.handleSubmit((function(e){var n=(0,p.vg)(e,{ignorePaths:["measurement"]});o?V.updateById({data:{data:n,_id:y},onSuccess:S,onLoading:P("offer_update")}):V.create({data:{data:n},onSuccess:S,onLoading:P("offer_create")})})),onReset:w.reset,canSubmit:!0,children:[(0,Z.jsx)(d.Z,{label:(0,a.t)("label"),error:D.label,required:!0,children:(0,Z.jsx)(u.ZP,(0,i.Z)((0,i.Z)({placeholder:(0,a.t)("label")},I("label")),{},{required:!0,autoFocus:!0}))}),(0,Z.jsxs)(s.ZP,{fxDirection:"row",gap:6,fillWidth:!0,children:[(0,Z.jsx)(d.Z,{label:(0,a.t)("sku"),error:D.sku,children:(0,Z.jsx)(u.ZP,(0,i.Z)({placeholder:(0,a.t)("sku")},I("sku")))}),(0,Z.jsx)(d.Z,{label:"\u0428\u0442\u0440\u0438\u0445-\u043a\u043e\u0434",error:D.barCode,children:(0,Z.jsx)(u.ZP,(0,i.Z)({placeholder:"\u0428\u0442\u0440\u0438\u0445-\u043a\u043e\u0434"},I("barCode")))})]}),(0,Z.jsx)(c.Z,(0,i.Z)({},k("brand",{options:C,label:(0,a.t)("brand"),placeholder:(0,a.t)("selectBrand")}))),(0,Z.jsx)(c.Z,(0,i.Z)({},k("approved",{options:b.SQ,label:(0,a.t)("status"),placeholder:(0,a.t)("status")}))),(0,Z.jsx)(d.Z,{label:(0,a.t)("description"),error:D.description,children:(0,Z.jsx)(v.Z,(0,i.Z)({placeholder:(0,a.t)("description")},I("description")))})]})}},6600:function(e,n,o){o.d(n,{A:function(){return y}});var i,t=o(1413),l=o(9439),r=o(4925),d=o(168),a=o(6522),u=o(2791),s=o(8095),c=o(4990),f=o(6681),v=o(2360),p=o(3329),m=[{name:"height",label:(0,a.t)("Height"),placeholder:(0,a.t)("Sm")},{name:"width",label:(0,a.t)("Width"),placeholder:(0,a.t)("Sm")},{name:"length",label:(0,a.t)("Length"),placeholder:(0,a.t)("Sm")},{name:"weight",label:(0,a.t)("Weight"),placeholder:(0,a.t)("Kg")}],h=(0,v.ZP)(s.ZP)(i||(i=(0,d.Z)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  column-gap: 8px;\n\n  @media screen and (min-width: 480px) {\n    grid-template-columns: repeat(4, 1fr);\n  }\n"]))),b=function(e){var n,o,i=e.form,l=e.disabled,r=null===i||void 0===i||null===(n=i.formState)||void 0===n||null===(o=n.errors)||void 0===o?void 0:o.dimensions;return(0,p.jsx)(h,{fillWidth:!0,children:m.map((function(e){return(0,p.jsx)(c.Z,{label:e.label,error:r&&r[e.name],children:(0,p.jsx)(f.ZP,(0,t.Z)((0,t.Z)({placeholder:e.placeholder,min:1,type:"number"},i.register("dimensions.".concat(e.name),{valueAsNumber:!0,min:1})),{},{disabled:l}))},e.name)}))})},g=o(8376),Z=o(8768),x=o(2913),j=o(1383),S=["defaultValues","_id","disabled"],y=function(e){var n,o,i,d=e.defaultValues,s=e._id,c=e.disabled,f=(0,r.Z)(e,S),v=(0,x.Z)(),m=(0,u.useState)(!1),h=(0,l.Z)(m,2),y=h[0],L=h[1],_=(0,g.hN)({defaultValues:{dimensions:null!==d&&void 0!==d?d:{}}}),P=!(null===(n=_.formState.touchedFields)||void 0===n||!n.dimensions)&&(null===(o=Object.values(null===(i=_.formState.touchedFields)||void 0===i?void 0:i.dimensions))||void 0===o?void 0:o.some((function(e){return e})));return(0,p.jsx)(Z.h,(0,t.Z)((0,t.Z)({onSubmit:_.handleSubmit((function(e){v.updateById({data:{data:e,_id:s},onSuccess:function(e){j.kl.success("Product updated")},onError:function(e){console.error("Product update action",e)},onLoading:L})})),label:(0,a.t)("Package size"),isLoading:y,isOpen:!1},f),{},{disabled:!P||c,children:(0,p.jsx)(b,{form:_,disabled:c})}))}},3023:function(e,n,o){o.d(n,{A:function(){return g}});var i,t=o(168),l=o(1413),r=o(9439),d=o(2791),a=o(8768),u=o(2360),s=o(8095),c=o(1819),f=o(1494),v=o(6522),p=o(8382),m=o(9184),h=o(8376),b=o(3329),g=function(e){var n,o,i=e.offer,t=e.disabled,u=(0,h.G2)(i),s=(0,f.useOfferLoadersProvider)(),g=(0,p.sK)(null===u||void 0===u||null===(n=u.categories)||void 0===n?void 0:n.map((function(e){return e._id}))),x=(0,c.xc)()[c.EJ.offers],j=(0,d.useState)(g),S=(0,r.Z)(j,2),y=S[0],L=S[1],_=(0,d.useMemo)((function(){return!(null===y||void 0===y||!y.length)&&(null===g||void 0===g?void 0:g.join(","))!==(0,p.sK)(y).join(",")}),[g,y]);return(0,d.useEffect)((function(){null!==u&&void 0!==u&&u.categories&&L(null===u||void 0===u?void 0:u.categories.map((function(e){return e._id})))}),[]),(0,b.jsx)(a.h,{label:(0,v.t)("Categories"),onSubmit:function(e){e.preventDefault(),u&&x.updateById({onLoading:s.onLoading("categories"),data:(0,l.Z)((0,l.Z)({},(0,p.rE)(u)),{},{data:{categories:y},refreshCurrent:!0}),onSuccess:function(e,n){}})},disabled:t,isLoading:null===(o=s.isLoading)||void 0===o?void 0:o.properties,canSubmit:_,maxHeight:"300px",isOpen:!1,children:(0,b.jsx)(Z,{flex:1,overflow:"auto",children:(0,b.jsx)(m.Z,{onChangeIds:L,offer:u})})})},Z=(0,u.ZP)(s.j6)(i||(i=(0,t.Z)(["\n  padding-bottom: 8px;\n"])))},2353:function(e,n,o){o.d(n,{A:function(){return p}});var i=o(1413),t=o(9439),l=o(1494),r=o(1819),d=o(2791),a=o(8768),u=o(8790),s=o(8382),c=o(6522),f=o(1383),v=o(3329),p=function(e){var n,o,p=e.offer,m=e.onSubmit,h=e.onSuccess,b=e.disabled,g=e.defaultValues,Z=(0,l.useOfferLoadersProvider)(),x=(0,d.useState)(g||(null===Z||void 0===Z||null===(n=Z.state)||void 0===n?void 0:n.images)||[]),j=(0,t.Z)(x,2),S=j[0],y=j[1];(0,d.useEffect)((function(){console.log(f.E4)}),[]);var L=(0,r.xc)()[r.EJ.offers],_=(0,d.useMemo)((function(){return!0}),[]);return(0,v.jsx)(a.h,{label:(0,c.t)("Images"),onSubmit:function(e){e.preventDefault(),m?m(S):p?L.updateById({data:(0,i.Z)((0,i.Z)({},(0,s.rE)(p)),{},{data:{images:S},refreshCurrent:!0}),onSuccess:h,onLoading:Z.onLoading("images")}):console.warn("Offer not passed")},canSubmit:_,disabled:b,isLoading:null===(o=Z.isLoading)||void 0===o?void 0:o.images,isOpen:!1,maxHeight:"400px",children:(0,v.jsx)(u.Z,{hideLabel:!0,initialData:S,onChangeState:y,contentContainerStyle:{flex:1}})})}},7109:function(e,n,o){o.d(n,{R:function(){return S}});var i,t=o(168),l=o(7762),r=o(9439),d=o(3433),a=o(2791),u=o(8768),s=o(2360),c=o(8095),f=o(7348),v=o(1819),p=o(1494),m=o(6522),h=o(5998),b=o(98),g=o(6492),Z=o(8376),x=o(3329),j=function(e){var n;return null===(n=(0,d.Z)(null!==e&&void 0!==e?e:[]))||void 0===n?void 0:n.sort((function(e,n){return e.localeCompare(n)}))},S=function(e){e.onSubmit;var n,o,i=e.onSuccess,t=e.disabled,s=e.offer,S=(0,p.useOfferLoadersProvider)(),L=(0,f.nr)(),_=(0,Z.G2)(s),P=(0,v.xc)()[v.EJ.offers],V=j(null===_||void 0===_||null===(n=_.properties)||void 0===n?void 0:n.map((function(e){return e._id}))),C=(0,a.useState)(V),O=(0,r.Z)(C,2),D=O[0],I=O[1],k=(0,a.useState)(),w=(0,r.Z)(k,2),A=w[0],B=w[1],E=(0,a.useMemo)((function(){var e;return!(null===D||void 0===D||!D.length)&&(null===V||void 0===V?void 0:V.join(","))!==(null===(e=j(D))||void 0===e?void 0:e.join(","))}),[D,V]),M=(0,a.useMemo)((function(){var e,n,o,i=null===A||void 0===A?void 0:A._id,t=[],r=null!==(e=null===(n=L.propertiesKeysMap)||void 0===n?void 0:n[null!==i&&void 0!==i?i:"def"])&&void 0!==e?e:[],d=(0,l.Z)(r);try{for(d.s();!(o=d.n()).done;){var a,u=o.value,s=null===(a=L.propertiesDataMap)||void 0===a?void 0:a[u];if(s&&(null===s||void 0===s||!s.isSelectable)){var c=L.propertiesKeysMap[null===s||void 0===s?void 0:s._id];null!==c&&void 0!==c&&c.length&&t.push(s)}}}catch(f){d.e(f)}finally{d.f()}return t}),[A,L.propertiesDataMap,L.propertiesKeysMap]),q=(0,a.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";I((function(e){return e.includes(n)?e.filter((function(e){return e!==n})):[].concat((0,d.Z)(e),[n])}))}),[]),F=(0,a.useMemo)((function(){return null===M||void 0===M?void 0:M.map((function(e){return(0,x.jsx)(b.Z,{item:e,selectedIds:D,onSelect:q},"prop_".concat(e._id))}))}),[M,D,q]);return(0,x.jsxs)(u.h,{label:(0,m.t)("Properties"),canSubmit:E,onSubmit:function(e){e.preventDefault(),_&&P.updateById({data:{_id:null===_||void 0===_?void 0:_._id,updateCurrent:!0,data:{properties:D}},onLoading:S.onLoading("properties"),onSuccess:i})},isLoading:null===(o=S.isLoading)||void 0===o?void 0:o.properties,isOpen:!1,disabled:!_||t,children:[(0,x.jsx)(h.U,{selected:A,onSelect:B}),(0,x.jsx)(y,{flex:1,overflow:"auto",children:null!==F&&void 0!==F&&F.length?F:(0,x.jsx)(c.ZP,{padding:"24px",alignItems:"center",justifyContent:"center",children:(0,x.jsx)(g.x,{$size:16,children:(0,m.t)("Data not found")})})})]})},y=(0,s.ZP)(c.ZP)(i||(i=(0,t.Z)(["\n  padding-bottom: 8px;\n"])))},4826:function(e,n,o){o.d(n,{n:function(){return y}});var i=o(1413),t=o(9439),l=o(4925),r=o(3691),d=o(8553),a=o(6785),u=o(4990),s=o(6681),c=o(8095),f=o(2791),v=o(6522),p=o(3329),m=(0,d.H1)(r.qU),h=[{name:"measurement.unit",label:(0,v.t)("unit"),placeholder:(0,v.t)("unit"),options:m},{name:"measurement.min",label:(0,v.t)("min"),placeholder:(0,v.t)("min"),type:"number"},{name:"measurement.max",label:(0,v.t)("max"),placeholder:(0,v.t)("max"),type:"number"}],b=function(e){var n=e.appForm,o=e.disabled;return(0,p.jsx)(c.ZP,{fillWidth:!0,style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",columnGap:8},children:h.map((function(e){var t;return e.options?(0,p.jsx)(a.Z,(0,i.Z)((0,i.Z)({},n.registerSelect(null===e||void 0===e?void 0:e.name,{options:null===e||void 0===e?void 0:e.options,label:null===e||void 0===e?void 0:e.label,placeholder:null===e||void 0===e?void 0:e.label,dropDownIsAbsolute:!0,onlyValue:!0})),{},{disabled:o}),e.name):(0,p.jsx)(u.Z,{label:e.label,error:null===n||void 0===n||null===(t=n.formState)||void 0===t?void 0:t.errors[e.name],children:(0,p.jsx)(s.ZP,(0,i.Z)((0,i.Z)({placeholder:e.placeholder,min:"number"===(null===e||void 0===e?void 0:e.type)?1:void 0,type:null===e||void 0===e?void 0:e.type},n.register(e.name,{valueAsNumber:"number"===(null===e||void 0===e?void 0:e.type),min:"number"===(null===e||void 0===e?void 0:e.type)?1:void 0})),{},{disabled:o}))},e.name)}))})},g=o(8376),Z=o(8768),x=o(2913),j=o(1383),S=["defaultValues","_id","disabled"],y=function(e){var n,o,r,d=e.defaultValues,a=e._id,u=e.disabled,s=(0,l.Z)(e,S),c=(0,x.Z)(),m=(0,f.useState)(!1),h=(0,t.Z)(m,2),y=h[0],L=h[1],_=(0,g.hN)({defaultValues:{measurement:d}}),P=!(null===(n=_.formState.touchedFields)||void 0===n||!n.measurement)&&(null===(o=Object.values(null===(r=_.formState.touchedFields)||void 0===r?void 0:r.measurement))||void 0===o?void 0:o.some((function(e){return e})));return(0,p.jsx)(Z.h,(0,i.Z)((0,i.Z)({onSubmit:_.handleSubmit((function(e){c.updateById({data:{data:e,_id:a},onSuccess:function(e){j.kl.success("Product updated")},onError:function(e){console.error("Product update action",e)},onLoading:L})})),label:(0,v.t)("Measurement info"),isLoading:y,disabled:!P||u,isOpen:!1},s),{},{children:(0,p.jsx)(b,{appForm:_,disabled:u})}))}},1494:function(e,n,o){o.r(n),o.d(n,{useOfferLoadersProvider:function(){return S}});var i=o(1413),t=o(6600),l=o(8050),r=o(6522),d=o(8382),a=o(2791),u=o(3691),s=o(4826),c=o(9701),f=o(8095),v=o(9953),p=o(3383),m=o(7109),h=o(9541),b=o(7578),g=o(2353),Z=o(8376),x=o(3023),j=o(3329),S=function(){return(0,b.un)()};n.default=function(e){var n,o,S=e.onClose,y=(e._id,(0,h.J)()),L=y.state.formData,_=y.setData,P=(0,Z.xj)(),V=(0,Z.G2)({_id:null===(n=P.query)||void 0===n?void 0:n.offerId});return(0,a.useEffect)((function(){return P.push({query:{}}),function(){P.push({query:{}})}}),[]),(0,j.jsx)(l.Z,{title:(0,r.t)("Create offer"),onClose:S,extraHeader:(0,j.jsx)(v.Z,{defaultValue:null!==(o=null===L||void 0===L?void 0:L.type)&&void 0!==o?o:u.iv.GOODS,filterOptions:p.jI,onOptSelect:function(e){return _("formData",(function(n){return(0,i.Z)((0,i.Z)({},n),{},{type:e.value})}))}}),children:(0,j.jsx)(b.f4,{value:y,children:(0,j.jsxs)(f.ZP,{padding:"0 8px 16px",overflow:"hidden",children:[(0,j.jsx)(c.B,{defaultValues:L,onSuccess:function(e){_("formData",(0,d.xT)(e)),P.push({query:{offerId:null===e||void 0===e?void 0:e._id}})},type:null===L||void 0===L?void 0:L.type}),V&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x.A,{offer:V,defaultValues:null===L||void 0===L?void 0:L.categories,disabled:!L}),(0,j.jsx)(m.R,{offer:V,defaultValues:null===L||void 0===L?void 0:L.properties,disabled:!L}),(0,j.jsx)(g.A,{offer:V,defaultValues:null===L||void 0===L?void 0:L.images,disabled:!L}),(0,j.jsx)(t.A,{offer:V,defaultValues:null===L||void 0===L?void 0:L.dimensions,disabled:!L}),(0,j.jsx)(s.n,{offer:V,defaultValues:null===L||void 0===L?void 0:L.measurement,disabled:!L})]})]})})})}}}]);
//# sourceMappingURL=494.9ab55173.chunk.js.map