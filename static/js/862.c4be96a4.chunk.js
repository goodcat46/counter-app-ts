"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[862],{2483:function(n,e,t){t.d(e,{j:function(){return v}});var i,o,r=t(168),l=t(1413),d=t(4781),a=t(2791),u=t(2360),c=t(8095),s=t(3329),v=function(n){var e=(0,d.on)(),t=(0,a.useCallback)((function(n){return function(t){t.target===t.currentTarget&&e.remove(n)}}),[e]),i=(0,a.useMemo)((function(){return e.getStack().map((function(n,i){var o=n.RenderComponent,r=n.props,d=n.id;return(0,s.jsx)(p,{className:"overlay-".concat(d),style:{zIndex:20+i},fillHeight:!0,fillWidth:!0,alignItems:"flex-end",onClick:t(d),children:(0,s.jsx)(o,(0,l.Z)((0,l.Z)({},r),{},{onClose:function(){e.remove(d)},overlayId:d,index:i}),"overlay-".concat(d))},"overlay-".concat(d))}))}),[t,e]);return(0,s.jsx)(f,{fillWidth:!0,fillHeight:!0,isActive:i.length>0,overflow:"hidden",children:i})},f=(0,u.ZP)(c.ZP)(i||(i=(0,r.Z)(["\n  position: absolute;\n\n  top: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  left: ",";\n\n  opacity: ",";\n  visibility: ",";\n  pointer-events: ",";\n\n  z-index: 20;\n\n  background-color: ",";\n\n  transition: all ",";\n"])),(function(n){return n.isActive?0:"100%"}),(function(n){return n.isActive?1:0}),(function(n){return n.isActive?"visible":"hidden"}),(function(n){return n.isActive?"all":"none"}),(function(n){return n.theme.backdropColor}),(function(n){return n.theme.globals.timingFunctionMain})),p=(0,u.ZP)(c.ZP)(o||(o=(0,r.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 20;\n\n  max-width: 360px;\n\n  animation: TransformFromRight;\n\n  @media screen and (max-width: 768px) {\n    max-width: 400px;\n  }\n"])))},4781:function(n,e,t){t.d(e,{on:function(){return c}});var i=t(1413),o=t(3433),r=t(9439),l=t(2791),d=t(6382),a=t(3329),u=(0,l.createContext)({}),c=function(){return(0,l.useContext)(u)};e.ZP=function(n){var e=n.children,t=(0,l.useState)([]),c=(0,r.Z)(t,2),s=c[0],v=c[1],f=(0,l.useCallback)((function(n){v((function(e){return e.filter((function(e){return e.id!==n}))}))}),[]),p=(0,l.useCallback)((function(){v([])}),[]),h=(0,l.useCallback)((function(n){var e="".concat(n.RenderComponent.name,"_").concat((0,d.x0)(8));return"function"===typeof n.RenderComponent&&v((function(t){var r=t.find((function(e){return e.id.includes(n.RenderComponent.name)}));if(r){var l=t.filter((function(n){var e,t;return(null===(e=n.RenderComponent)||void 0===e?void 0:e.name)!==(null===(t=r.RenderComponent)||void 0===t?void 0:t.name)}));return[].concat((0,o.Z)(l),[(0,i.Z)((0,i.Z)({},n),{},{id:e})])}return[].concat((0,o.Z)(t),[(0,i.Z)((0,i.Z)({},n),{},{id:e})])})),{onClose:function(){return f(e)},compId:e}}),[f]),m={getStack:function(){return s},remove:f,clearStack:p,open:h};return(0,a.jsx)(u.Provider,{value:m,children:e})}},5801:function(n,e,t){t.r(e),t.d(e,{default:function(){return vn},useOfferOverviewLoaders:function(){return cn}});var i,o,r,l,d,a,u,c,s,v=t(168),f=t(9439),p=t(2360),h=t(8495),m=t(6931),x=t(2791),g=t(3226),b=t(4942),Z=t(8553),C=t(6492),w=t(9953),j=t(8095),P=t(5990),y=t(8613),S=t(815),_=t(1251),k=t(3329),B=function(n){return n.Variations="Variations",n.Prices="Prices",n.Warehousing="Warehousing",n}(B||{}),I=(0,Z.H1)(B),A=(0,p.ZP)(j.ZP)(i||(i=(0,v.Z)(["\n  overflow: auto;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);\n  }\n"])),(function(n){return n.theme.globals.timingFunctionMain}),(function(n){return n.theme.backgroundColorLight}),(function(n){return n.isVisible?0:100})),O=(0,p.ZP)(j.ZP)(o||(o=(0,v.Z)(["\n  border-top: 1px solid ",";\n  //border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor}),(function(n){return n.theme.modalBorderColor})),D=function(n){var e,t,i=n.isVisible,o=n.toggleVisibility,r=(0,g.rh)(),l=(0,x.useState)(B.Variations),d=(0,f.Z)(l,2),a=d[0],u=d[1],c=(0,x.useMemo)((function(){var n,e;if(!r.currentOffer)return null;var t=(n={},(0,b.Z)(n,B.Variations,(0,k.jsx)(P.Z,{withActions:!0})),(0,b.Z)(n,B.Warehousing,(0,k.jsx)(S.Z,{withActions:!0})),(0,b.Z)(n,B.Prices,(0,k.jsx)(y.Z,{withActions:!0})),n);return null!==(e=null===t||void 0===t?void 0:t[a])&&void 0!==e?e:null}),[a,r.currentOffer]);return(0,k.jsxs)(A,{overflow:"hidden",fillHeight:!0,isVisible:i,children:[i&&(0,k.jsx)(_.xB,{onBackPress:o,renderTitle:(0,k.jsxs)(j.ZP,{padding:"0 8px",fxDirection:"row",alignItems:"center",justifyContent:"center",gap:8,children:[(0,k.jsx)(C.x,{$weight:600,$size:14,children:null===r||void 0===r||null===(e=r.currentOffer)||void 0===e?void 0:e.label}),(0,k.jsx)(C.x,{$size:14,children:null===r||void 0===r||null===(t=r.currentOffer)||void 0===t?void 0:t.sku})]})}),(0,k.jsxs)(O,{overflow:"hidden",fillWidth:!0,flex:1,children:[(0,k.jsx)(w.Z,{filterOptions:I,defaultValue:a,onOptSelect:function(n,e,t){u(e)},preventFilter:!0}),c]})]})},R=t(5188),L=t(1819),M=t(2483),T=t(4925),E=t(4109),V=t(6522),W=t(7121),N=t(4781),$=t(163),H=t(6272),z=t(763),F=t(119),G=function(n){return n.General="General",n.Properties="Properties",n.Defaults="Defaults",n.Images="Images",n.Futures="Futures",n.Cms="Cms",n}({}),U=(0,H.H1)(G),q=[{title:(0,V.t)("Label"),getValue:function(n){return null===n||void 0===n?void 0:n.label},gridArea:"label",tab:G.General},{title:(0,V.t)("status"),getValue:function(n){return null===n||void 0===n?void 0:n.approved},gridArea:"approved",tab:G.General},{title:(0,V.t)("Type"),getValue:function(n){return null===n||void 0===n?void 0:n.type},gridArea:"type",tab:G.General},{title:(0,V.t)("SKU"),getValue:function(n){return null===n||void 0===n?void 0:n.sku},gridArea:"sku",tab:G.General},{title:(0,V.t)("Bar-code"),getValue:function(n){return null===n||void 0===n?void 0:n.barCode},gridArea:"barCode",tab:G.General},{title:(0,V.t)("Categories"),CellComponent:F.zB,gridArea:"categories",tab:G.General},{title:(0,V.t)("Brand"),getValue:function(n){var e;return null===n||void 0===n||null===(e=n.brand)||void 0===e?void 0:e.label},gridArea:"brand",tab:G.General},{title:(0,V.t)("Measurement"),gridArea:"measurement",getValue:function(n){try{var e=null!==n&&void 0!==n&&n.measurement?JSON.parse(null===n||void 0===n?void 0:n.measurement):{};return["".concat((0,V.t)("unit"),": ").concat((null===e||void 0===e?void 0:e.unit)||0),"".concat((0,V.t)("min"),": ").concat((null===e||void 0===e?void 0:e.min)||0),"".concat((0,V.t)("max"),": ").concat((null===e||void 0===e?void 0:e.max)||0),"".concat((0,V.t)("step"),": ").concat((null===e||void 0===e?void 0:e.step)||0)].join(" | ")}catch(t){return""}},tab:G.General},{title:(0,V.t)("Description"),getValue:function(n){return null===n||void 0===n?void 0:n.description},gridArea:"description",tab:G.General},{title:(0,V.t)("Negative sales"),getValue:function(n){var e;return null!==n&&void 0!==n&&null!==(e=n.futures)&&void 0!==e&&e.negativeSale?"Yes":"No"},gridArea:"reservation",tab:G.Futures},{title:(0,V.t)("Reservation"),getValue:function(n){var e,t;return null!==n&&void 0!==n&&null!==(e=n.futures)&&void 0!==e&&null!==(t=e.reservation)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"reservation",tab:G.Futures},{title:(0,V.t)("Custom production"),getValue:function(n){var e,t;return null!==n&&void 0!==n&&null!==(e=n.futures)&&void 0!==e&&null!==(t=e.customProduction)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"customProduction",tab:G.Futures},{title:(0,V.t)("Custom order"),getValue:function(n){var e,t;return null!==n&&void 0!==n&&null!==(e=n.futures)&&void 0!==e&&null!==(t=e.customOrder)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"customOrder",tab:G.Futures},{title:(0,V.t)("Pre-order"),getValue:function(n){var e,t;return null!==n&&void 0!==n&&null!==(e=n.futures)&&void 0!==e&&null!==(t=e.preOrder)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"preOrder",tab:G.Futures},{title:(0,V.t)("Is promo"),getValue:function(n){var e;return null===n||void 0===n||null===(e=n.futures)||void 0===e?void 0:e.isPromo},gridArea:"isPromo",tab:G.Futures},{title:(0,V.t)("Properties"),CellComponent:F.Sc,gridArea:"properties",tab:G.Properties},{title:(0,V.t)("Default values"),CellComponent:F.t8,gridArea:"defaults",tab:G.Defaults},{title:(0,V.t)("Created by / Date / Time"),getValue:function(n){var e,t;return null!==n&&void 0!==n&&n.author?"".concat(null===n||void 0===n||null===(e=n.author)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email," / ").concat(null!==n&&void 0!==n&&n.createdAt&&(0,z.isString)(null===n||void 0===n?void 0:n.createdAt)?(0,H.M7)(Date.parse(null===n||void 0===n?void 0:n.createdAt)):""):null},gridArea:"created",tab:G.General},{title:(0,V.t)("Updated by / Date / Time"),getValue:function(n){var e,t;return null!==n&&void 0!==n&&n.editor?"".concat(null===n||void 0===n||null===(e=n.editor)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email," / ").concat(null!==n&&void 0!==n&&n.updatedAt&&(0,z.isString)(null===n||void 0===n?void 0:n.updatedAt)?(0,H.M7)(Date.parse(null===n||void 0===n?void 0:n.updatedAt)):""):null},gridArea:"updated",tab:G.General},{title:(0,V.t)("Images"),CellComponent:F.Ru,gridArea:"images",tab:G.Images}],J=["className"],Y=["CellComponent"],K=function(){var n={};return q.forEach((function(e){var t=e.tab;t&&(n[t]?n[t].push(e):n[t]=[e])})),n}(),X=(0,p.ZP)(j.ZP)(r||(r=(0,v.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(n){return n.theme.sideBarBackgroundColor})),Q=(0,p.ZP)(j.ZP)(l||(l=(0,v.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),nn=(0,p.ZP)(j.ZP)(d||(d=(0,v.Z)([""]))),en=(0,p.ZP)(E.Z)(a||(a=(0,v.Z)(["\n  fill: ",";\n"])),(function(n){return n.theme.globals.colors.error})),tn=(0,p.ZP)(E.Z)(u||(u=(0,v.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),on=function(n){var e,t=n.className,i=(0,T.Z)(n,J),o=(0,$.xj)(),r=(0,g.rh)().currentOffer,l=(0,N.on)(),d=(0,x.useState)(G.General),a=(0,f.Z)(d,2),u=a[0],c=a[1];console.log("OfferOverviewXL",K);var s=(0,x.useMemo)((function(){var n;return null===(n=K[u])||void 0===n?void 0:n.map((function(n){var e=n.CellComponent,t=(0,T.Z)(n,Y);return e?(0,k.jsx)(e,{overlayHandler:l.open,cell:t,data:r},t.title):(0,k.jsx)(F.kQ,{overlayHandler:l.open,cell:t,data:r},t.title)}))}),[u,l.open,r]);return(0,k.jsxs)(X,{fillWidth:!0,flex:1,className:t,padding:"0 8px",children:[(0,k.jsx)(W.iw,{title:(0,V.t)("Offer overview"),onBackPress:o.goBack}),(0,k.jsx)(w.Z,{optionProps:{fitContentH:!0},filterOptions:U,onOptSelect:function(n){o.replace({hash:null===n||void 0===n?void 0:n.value}),c(null===n||void 0===n?void 0:n.value)}}),(0,k.jsx)(Q,{fillWidth:!0,flex:1,overflow:"auto",children:s}),(0,k.jsxs)(nn,{fillWidth:!0,fxDirection:"row",gap:6,padding:"6px 0",children:[(0,k.jsx)(E.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==i&&void 0!==i&&i.onEdit),onClick:null===i||void 0===i?void 0:i.onEdit}),(0,k.jsx)(E.Z,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:null!==i&&void 0!==i&&null!==(e=i.product)&&void 0!==e&&e.visible?"visibilityOn":"visibilityOff",disabled:!(null!==i&&void 0!==i&&i.onHide),onClick:null===i||void 0===i?void 0:i.onHide}),(0,k.jsx)(en,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==i&&void 0!==i&&i.onDelete),onClick:null===i||void 0===i?void 0:i.onDelete}),(0,k.jsxs)(j.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,k.jsx)(E.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",disabled:!(null!==i&&void 0!==i&&i.onRefresh),onClick:null===i||void 0===i?void 0:i.onRefresh}),(0,k.jsx)(tn,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==i&&void 0!==i&&i.onOpenRightSide),onClick:null===i||void 0===i?void 0:i.onOpenRightSide})]})]})]})},rn=t(4683),ln=(0,p.ZP)(j.ZP)(c||(c=(0,v.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor})),dn=function(n){var e=n.toggleRightSideVisibility,t=(0,g.rh)(),i=cn(),o=(0,R.f9)(),r=(0,L.xc)().products;return(0,k.jsxs)(ln,{children:[(0,k.jsx)(on,{product:null===t||void 0===t?void 0:t.currentOffer,onEdit:function(){var n;t.currentOffer&&o.openModal({Modal:rn.n.EditOffer,props:{_id:null===t||void 0===t||null===(n=t.currentOffer)||void 0===n?void 0:n._id,title:(0,V.t)("Edit offer")}})},onRefresh:function(){var n,e;null!==(n=t.currentOffer)&&void 0!==n&&n._id&&r.getProductFullInfo({data:{_id:null===(e=t.currentOffer)||void 0===e?void 0:e._id},onLoading:i.onLoading("offer")})},onOpenRightSide:e}),(0,k.jsx)(M.j,{})]})},an=t(7578),un=t(9541),cn=function(){return(0,an.un)()},sn=p.ZP.div(s||(s=(0,v.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),h.VU),vn=function(n){var e=n.path,t=(0,un.J)({offer:{content:(0,V.t)("Loading product info")}}),i=(0,x.useState)(!1),o=(0,f.Z)(i,2),r=o[0],l=o[1],d=(0,x.useCallback)((function(){l((function(n){return!n}))}),[]);return(0,k.jsx)(an.f4,{value:t,children:(0,k.jsx)(g.ZP,{children:(0,k.jsx)(N.ZP,{children:(0,k.jsx)(m.default,{path:e,children:(0,k.jsxs)(sn,{children:[(0,k.jsx)(dn,{toggleRightSideVisibility:d}),(0,k.jsx)(D,{isVisible:r,toggleVisibility:d})]})})})})})}},3226:function(n,e,t){t.d(e,{rh:function(){return u}});var i=t(2791),o=t(1819),r=t(163),l=t(5801),d=t(3329),a=(0,i.createContext)({}),u=function(){return(0,i.useContext)(a)};e.ZP=function(n){var e=n.children,t=(0,o.xc)()[o.EJ.products],u=(0,l.useOfferOverviewLoaders)(),c=(0,r.Zx)(),s=null===c||void 0===c?void 0:c.offerId,v=(0,r.G2)({id:s});(0,i.useEffect)((function(){var n;null!==u&&void 0!==u&&null!==(n=u.isLoading)&&void 0!==n&&n.offer||s&&t.getProductFullInfo({data:{_id:s},onLoading:u.onLoading("offer")}).finally()}),[s]);return(0,i.useEffect)((function(){return function(){t.clearCurrent(void 0)}}),[]),(0,d.jsx)(a.Provider,{value:{clearCurrent:function(){t.clearCurrent(void 0)},currentOffer:v},children:e})}},8613:function(n,e,t){var i=t(1413),o=t(4165),r=t(5861),l=t(1819),d=t(2791),a=t(400),u=t(6981),c=t(9071),s=t(5188),v=t(387),f=t(163),p=t(7578),h=t(3329);e.Z=function(n){var e,t=n.onSelect,m=n.selected,x=n.withActions,g=void 0===x||x,b=(0,s.f9)(),Z=(0,l.xc)()[l.EJ.products],C=(0,f.Zx)().offerId,w=(0,f.G2)({id:C}),j=(0,p.un)(),P=(0,d.useCallback)(function(){var n=(0,r.Z)((0,o.Z)().mark((function n(e){var t,i;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.refresh,i=e.update,w){n.next=3;break}return n.abrupt("return");case 3:Z.getAllPrices({data:{params:{offerId:null===w||void 0===w?void 0:w._id},refreshCurrent:t,updateCurrent:i},onLoading:null===j||void 0===j?void 0:j.onLoading("prices")});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[w,j,Z]),y=(0,d.useMemo)((function(){return{tableData:null===w||void 0===w?void 0:w.prices,tableTitles:u.po,onRowClick:function(n){if(t){if(null!==n&&void 0!==n&&n.rowData)return void t((0,v.rE)(null===n||void 0===n?void 0:n.rowData));null!==n&&void 0!==n&&n._id&&t({_id:null===n||void 0===n?void 0:n._id})}},actionsCreator:g?function(n){var e,t=null===(e=n.selectedRow)||void 0===e?void 0:e._id;return[{icon:"refresh",type:"onlyIcon",onClick:function(){return P({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!t},{icon:"copy",type:"onlyIcon",disabled:!t},{icon:"edit",type:"onlyIcon",disabled:!t},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){b.open({ModalChildren:c.default,modalChildrenProps:{offer:w}})}}]}:void 0}}),[w,g,t,P,b]);return(0,d.useEffect)((function(){P({refresh:!0})}),[]),(0,h.jsx)(a.ZP,(0,i.Z)((0,i.Z)({},y),{},{isSearch:!1,isFilter:!1,isLoading:null===j||void 0===j||null===(e=j.isLoading)||void 0===e?void 0:e.prices,selectedRow:m}))}},5990:function(n,e,t){t.d(e,{Z:function(){return an}});var i,o,r,l,d,a,u,c,s,v,f=t(1413),p=t(7762),h=t(3226),m=t(5188),x=t(1819),g=t(400),b=t(2791),Z=t(401),C=t(6272),w=t(7578),j=t(168),P=t(4942),y=t(3433),S=t(9439),_=t(4925),k=t(2360),B=t(8095),I=t(7348),A=t(6492),O=t(1383),D=t(6757),R=t(7121),L=t(6727),M=t(4695),T=t(163),E=t(4990),V=t(6681),W=t(6522),N=t(4235),$=t(4109),H=t(654),z=t(3329),F=(0,k.ZP)(B.ZP)(i||(i=(0,j.Z)(["\n  border-top: 1px solid ",";\n  &:last-child {\n    border-bottom: 1px solid ",";\n  }\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),G=(0,k.ZP)(B.ZP)(o||(o=(0,j.Z)(["\n  width: 100%;\n  display: grid;\n\n  grid-template-columns: repeat(",", 1fr);\n"])),(function(n){var e,t;return n.cmsKey&&null!==(e=null===(t=H.K[n.cmsKey])||void 0===t?void 0:t.numColumns)&&void 0!==e?e:2})),U=function(n){var e=n.item,t=n.isSelected,i=n.onSelect;return(0,z.jsx)(q,{variant:t?"filledSmall":"outlinedSmall",padding:"6px 8px",fontWeight:500,onClick:function(){i&&i(e._id)},children:e.label})},q=(0,k.ZP)($.Z)(r||(r=(0,j.Z)(["\n  width: 100%;\n  max-width: 100%;\n  min-width: 50px;\n"]))),J=function(n){var e,t=n.item,i=n.selectedIds,o=void 0===i?[]:i,r=n.onSelect,l=(0,b.useMemo)((function(){var n;return null===(n=t.childrenList)||void 0===n?void 0:n.map((function(n){var e=o.includes(n._id);return(0,z.jsx)(U,{item:n,isSelected:e,onSelect:function(e){return r&&r(t._id,e,null===n||void 0===n?void 0:n.label)}},"prop-value-".concat(n._id))}))}),[t._id,t.childrenList,r,o]);return(0,z.jsxs)(F,{gap:8,fillWidth:!0,padding:"8px 0 0",children:[(0,z.jsx)(A.x,{style:{flex:1,paddingLeft:12},$weight:500,children:t.label}),(0,z.jsx)(G,{fillWidth:!0,padding:"8px 0",gap:6,cmsKey:null===(e=t.cmsConfigs)||void 0===e?void 0:e.key,children:l})]},"property-box-".concat(t._id))},Y=t(9541),K=["onClose","title","defaultState","onSubmit","update","create","offerId","offer"],X=L.Ry().shape({label:L.Z_().required().min(5).max(64),sku:L.Z_().required().min(8).max(32),barCode:L.Z_().max(32),cms:L.Ry().shape({labels:L.Ry().shape({ua:L.Z_().min(5).max(64),en:L.Z_().min(5).max(64)})}),propertiesMap:L.Ry().shape({}).nonNullable().required(),offer:L.Ry().shape({_id:L.Z_().required(),label:L.Z_(),labels:L.Ry().shape({ua:L.Z_().min(5).max(64),en:L.Z_().min(5).max(64)})}),timeFrom:L.hT(),timeTo:L.hT(),price:L.Ry().shape({out:L.Z_()})}),Q=k.ZP.form(l||(l=(0,j.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 8px;\n\n  overflow: hidden;\n\n  max-width: 480px;\n  color: ",";\n  background-color: ",";\n"])),(function(n){return n.theme.fontColorSidebar}),(function(n){return n.theme.tableBackgroundColor})),nn=(0,k.ZP)(B.ZP)(d||(d=(0,j.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),en=(0,k.ZP)(B.ZP)(a||(a=(0,j.Z)(["\n  padding-bottom: 8px;\n"]))),tn=(0,k.ZP)(B.ZP)(u||(u=(0,j.Z)(["\n  padding: 0 4px;\n"]))),on=(0,k.ZP)(B.ZP)(c||(c=(0,j.Z)(["\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor})),rn=(0,k.ZP)(B.ZP)(s||(s=(0,j.Z)([""]))),ln=(0,k.ZP)(B.ZP)(v||(v=(0,j.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor}),(function(n){return n.theme.modalBorderColor})),dn=function(n){var e,t,i,o,r,l,d=n.onClose,a=n.title,u=n.defaultState,c=(n.onSubmit,n.update),s=(n.create,n.offerId),v=n.offer,h=(0,_.Z)(n,K),m=(0,x.xc)()[x.EJ.products],g=(0,I.WS)(),Z=(0,Y.J)(),w=(0,T.G2)({id:c||s||(null===v||void 0===v?void 0:v._id)}),j=(0,D.d)(),k=(0,b.useState)(null===g||void 0===g?void 0:g[0]),L=(0,S.Z)(k,1)[0],$=(0,b.useState)({}),H=(0,S.Z)($,2),F=H[0],G=H[1],U=(0,b.useMemo)((function(){var n,e=null===L||void 0===L||null===(n=L.childrenList)||void 0===n?void 0:n.filter((function(n){return null===n||void 0===n?void 0:n.isSelectable})),t={};return{propertiesList:e,propertiesDataMap:Object.assign.apply(Object,[{}].concat((0,y.Z)((null!==e&&void 0!==e?e:[]).map((function(n){var e;return null!==n&&void 0!==n&&null!==(e=n.childrenList)&&void 0!==e&&e.length&&(null===n||void 0===n||n.childrenList.forEach((function(n){t[n._id]=n}))),(0,P.Z)({},n._id,n)}))))),propValuesDataMap:t}}),[null===L||void 0===L?void 0:L.childrenList]),q=U.propertiesList,dn=U.propValuesDataMap,an=(0,T.hN)({defaultValues:(0,C.Ls)(u?(0,f.Z)((0,f.Z)({},u),{},{offer:w}):{offer:w}),resolver:(0,M.X)(X),reValidateMode:"onSubmit"}),un=an.setValue,cn=an.handleSubmit,sn=an.register,vn=an.formState.errors,fn=an.formValues,pn=an.reset;(0,b.useEffect)((function(){console.log({formValues:fn})}),[fn]);var hn=(0,b.useMemo)((function(){return null!==fn&&void 0!==fn&&fn.propertiesMap?Object.values(null===fn||void 0===fn?void 0:fn.propertiesMap):[]}),[null===fn||void 0===fn?void 0:fn.propertiesMap,fn]),mn=(0,b.useMemo)((function(){return hn.length>0}),[hn.length]),xn=(0,b.useMemo)((function(){var n,e=Object.entries(F).sort((function(n,e){return n[0].localeCompare(e[0])})),t=null!==w&&void 0!==w&&w.label?[null===w||void 0===w?void 0:w.label]:[],i=(0,p.Z)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value[1];(null===o||void 0===o?void 0:o.label)&&t.push(null===o||void 0===o?void 0:o.label)}}catch(r){i.e(r)}finally{i.f()}return{label:null!==e&&void 0!==e&&e.length?t.join(". "):"".concat(null===w||void 0===w?void 0:w.label,". {{VARIATION_LABEL}}")}}),[null===w||void 0===w?void 0:w.label,F]).label;(0,b.useEffect)((function(){un("label",xn)}),[xn,un]);var gn=(0,b.useCallback)((function(n){c?m.updateVariationById({data:(0,C.Ts)(n,c),onSuccess:function(n){console.log("updateVariationById onSuccess",n),d&&d()},onError:O.kl.toastAxiosError,onLoading:Z.onLoading("create")}).then():m.createVariation({data:(0,C.Ts)(n),onSuccess:function(n){j.state.close&&d&&d(),j.state.clear&&pn()},onError:O.kl.toastAxiosError,onLoading:Z.onLoading("create")}).then()}),[Z,d,pn,m,j.state.clear,j.state.close,c]),bn=(0,b.useCallback)((function(n,e,t){un("propertiesMap.".concat(n),e),G((function(t){return(0,f.Z)((0,f.Z)({},t),{},(0,P.Z)({},n,null===dn||void 0===dn?void 0:dn[e]))}))}),[dn,un]),Zn=(0,b.useCallback)((function(){un("propertiesMap",{}),G({})}),[un]),Cn=(0,b.useMemo)((function(){return null===q||void 0===q?void 0:q.map((function(n){return(0,z.jsx)(J,{item:n,selectedIds:hn,onSelect:bn},"prop_".concat(n._id))}))}),[q,hn,bn]);return(0,z.jsxs)(Q,(0,f.Z)((0,f.Z)({onSubmit:cn(gn,(function(n){console.error("[SUBMIT ERROR]",n)})),onReset:Zn},h),{},{children:[(0,z.jsx)(R.iw,{onBackPress:d,title:null!==(e=a||(null===L||void 0===L?void 0:L.label))&&void 0!==e?e:"",canSubmit:mn,okButton:!0}),(0,z.jsxs)(nn,{flex:1,fillWidth:!0,overflow:"auto",children:[(0,z.jsxs)(tn,{children:[(0,z.jsx)(E.Z,{label:(0,W.t)("label"),error:vn.label,children:(0,z.jsx)(V.ZP,(0,f.Z)((0,f.Z)({},sn("label",{required:!0})),{},{placeholder:(0,W.t)("label"),required:!0}))}),(0,z.jsxs)(B.ZP,{fxDirection:"row",gap:8,fillWidth:!0,children:[(0,z.jsx)(E.Z,{label:(0,W.t)("sku"),error:vn.sku,children:(0,z.jsx)(V.ZP,(0,f.Z)((0,f.Z)({},sn("sku",{required:!0})),{},{placeholder:(0,W.t)("sku"),required:!0}))}),(0,z.jsx)(E.Z,{label:(0,W.t)("barCode"),error:vn.barCode,children:(0,z.jsx)(V.ZP,(0,f.Z)((0,f.Z)({},sn("barCode")),{},{placeholder:(0,W.t)("barCode")}))})]})]}),(0,z.jsx)(en,{padding:"0 0 8px",margin:"8px 0 0",children:Cn}),!w&&(0,z.jsxs)(rn,{padding:"8px 0",fillWidth:!0,children:[(0,z.jsx)(ln,{padding:"8px",justifyContent:"flex-end",fxDirection:"row",fillWidth:!0,children:(0,z.jsx)(A.x,{$size:13,$weight:500,children:(0,W.t)("Cms configs")})}),(0,z.jsxs)(tn,{children:[(0,z.jsx)(E.Z,{label:(0,W.t)("Language key"),error:null===vn||void 0===vn||null===(t=vn.cmsConfigs)||void 0===t?void 0:t.key,children:(0,z.jsx)(N.Z,{disabled:!0})}),(0,z.jsx)(E.Z,{label:(0,W.t)("Label by lang key"),error:null===vn||void 0===vn||null===(i=vn.cmsConfigs)||void 0===i||null===(o=i.labels)||void 0===o?void 0:o.ua,children:(0,z.jsx)(V.ZP,(0,f.Z)({placeholder:"Label"},sn("cmsConfigs.labels.ua")))})]})]})]}),(0,z.jsx)(R.AT,{loading:null===(r=Z.isLoading)||void 0===r?void 0:r.create,resetButtonShown:!0,submitButtonText:null!==(l=Z.isLoading)&&void 0!==l&&l.create?"Loading...":c?"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438":"\u0414\u043e\u0434\u0430\u0442\u0438",canSubmit:mn,extraFooter:(0,z.jsx)(on,{children:(0,z.jsx)(D.Z,(0,f.Z)({},j))})})]}))},an=function(n){var e,t=n.onSelect,i=n.selected,o=n.withActions,r=void 0===o||o,l=(0,w.un)(),d=(0,h.rh)(),a=(0,m.f9)(),u=d.currentOffer,c=(0,x.xc)()[x.EJ.products],s=(0,b.useCallback)((function(n){var e=n.refresh,t=n.update;u&&c.getAllVariationsByProductId({data:{refreshCurrent:e,updateCurrent:t,offerId:u._id},onLoading:l.onLoading("variations")})}),[u,l,c]),v=(0,b.useMemo)((function(){var n,e,t={},i=(0,p.Z)(null!==(n=null===u||void 0===u?void 0:u.variations)&&void 0!==n?n:[]);try{for(i.s();!(e=i.n()).done;){var o,r=e.value.properties,l=(0,p.Z)(null!==r&&void 0!==r?r:[]);try{for(l.s();!(o=l.n()).done;){var d,a=o.value,c=null===a||void 0===a||null===(d=a.parent)||void 0===d?void 0:d._id;c&&a.parent&&(t[c]=a.parent)}}catch(s){l.e(s)}finally{l.f()}}}catch(s){i.e(s)}finally{i.f()}return(0,Z.F9)(Object.values(t))}),[null===u||void 0===u?void 0:u.variations]),j=(0,b.useMemo)((function(){return{tableTitles:v,tableData:null===u||void 0===u?void 0:u.variations,transformData:Z.m$,onRowClick:function(n){if(t){if(null!==n&&void 0!==n&&n.rowData)return void t((0,C.rE)(null===n||void 0===n?void 0:n.rowData));null!==n&&void 0!==n&&n._id&&t({_id:null===n||void 0===n?void 0:n._id})}},actionsCreator:r?function(n){var e,t=null===(e=n.selectedRow)||void 0===e?void 0:e._id;return[{icon:"refresh",type:"onlyIcon",onClick:function(){return s({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!t,onClick:function(){window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0430\u0440\u0456\u0430\u0446\u0456\u044e:\n ".concat(t))}},{icon:"copy",type:"onlyIcon",disabled:!t},{icon:"edit",type:"onlyIcon",disabled:!t,onClick:function(){var e;if(t&&n.selectedRow){var i=null===u||void 0===u||null===(e=u.variations)||void 0===e?void 0:e.find((function(n){return(null===n||void 0===n?void 0:n._id)===t}));a.open({ModalChildren:dn,modalChildrenProps:{update:t,defaultState:i}})}}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){a.open({ModalChildren:dn,modalChildrenProps:{offer:d.currentOffer}})}}]}:void 0}}),[null===u||void 0===u?void 0:u.variations,s,a,t,d.currentOffer,v,r]);return(0,b.useEffect)((function(){u&&s({refresh:!0})}),[]),(0,z.jsx)(g.ZP,(0,f.Z)((0,f.Z)({},j),{},{isSearch:!1,isFilter:!1,isLoading:null===l||void 0===l||null===(e=l.isLoading)||void 0===e?void 0:e.variations,selectedRow:i}))}},815:function(n,e,t){var i=t(1413),o=t(9439),r=t(400),l=t(2791),d=t(758),a=t(3664),u=t(5188),c=t(1819),s=t(7348),v=t(387),f=t(3329);e.Z=function(n){var e=n.onSelect,t=n.selected,p=n.withActions,h=(0,s.nr)().currentOffer,m=(0,u.f9)(),x=(0,c.xc)()[c.EJ.products],g=(0,l.useState)(!1),b=(0,o.Z)(g,2),Z=b[0],C=b[1],w=(0,l.useCallback)((function(n){var e=n.refresh;n.update;if(h){var t=(0,v.rE)(h);x.getAllInventories({data:{refreshCurrent:e,params:{offer:t}},onLoading:C})}}),[h,x]),j=(0,l.useMemo)((function(){return{tableData:null===h||void 0===h?void 0:h.inventories,tableTitles:d.QX,onRowClick:function(n){if(e){if(null!==n&&void 0!==n&&n.rowData)return void e((0,v.rE)(null===n||void 0===n?void 0:n.rowData));null!==n&&void 0!==n&&n._id&&e({_id:null===n||void 0===n?void 0:n._id})}},actionsCreator:p?function(n){return[{icon:"refresh",type:"onlyIcon",onClick:function(){return w({refresh:!0})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){m.open({ModalChildren:a.Z.CreateWarehouseDocument,modalChildrenProps:{}})}}]}:void 0}}),[null===h||void 0===h?void 0:h.inventories,w,m,e,p]);return(0,l.useEffect)((function(){w({refresh:!0})}),[]),(0,f.jsx)(r.ZP,(0,i.Z)((0,i.Z)({},j),{},{isSearch:!1,isFilter:!1,isLoading:Z,selectedRow:t}))}},8495:function(n,e,t){t.d(e,{SI:function(){return u},VU:function(){return a}});var i,o,r,l=t(168),d=t(2360),a=(0,d.iv)(i||(i=(0,l.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,d.iv)(o||(o=(0,l.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,d.iv)(r||(r=(0,l.Z)(["\n  outline: 1px solid tomato;\n"])))},119:function(n,e,t){t.d(e,{zB:function(){return Sn},t8:function(){return tn},Ru:function(){return xn},Sc:function(){return Tn},z4:function(){return En},kQ:function(){return S}});var i,o,r,l,d,a,u,c,s,v=t(8095),f=t(6522),p=t(2791),h=t(168),m=t(2360),x=t(6492),g=m.ZP.button(i||(i=(0,h.Z)(["\n  display: flex;\n  align-items: center;\n\n  border: 0;\n  background-color: transparent;\n\n  font-family: inherit;\n  font-weight: 600;\n  font-size: 13px;\n  padding: 6px 10px;\n  color: ",";\n\n  cursor: pointer;\n\n  &[disabled] {\n    pointer-events: none;\n    color: ",";\n  }\n"])),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.modalBorderColor})),b=(0,m.ZP)(v.ZP)(o||(o=(0,h.Z)(["\n  //min-height: 70px;\n  height: max-content;\n  min-height: max-content;\n\n  padding: 0 8px 8px;\n  gap: 4px;\n\n  //overflow: hidden;\n\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(n){return n.theme.sideBarBorderColor})),Z=(0,m.ZP)(v.ZP)(r||(r=(0,h.Z)(["\n  justify-content: center;\n  align-items: center;\n\n  padding: 4px 8px;\n  min-height: 28px;\n  color: #fcfcfc;\n\n  background-color: ",";\n\n  //background-color: #f1f1f1;\n\n  border-radius: 4px;\n  border: 1px solid ",";\n"])),(function(n){return n.theme.fieldBackgroundColor}),(function(n){return n.theme.modalBorderColor})),C=(0,m.ZP)(x.x)(l||(l=(0,h.Z)(["\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 100%;\n\n  color: ",";\n"])),(function(n){return n.$isTitle||n.$disabled?n.theme.globals.inputPlaceholderColor:void 0})),w=(0,m.ZP)(v.ZP)(d||(d=(0,h.Z)(["\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n"]))),j=(0,m.ZP)(v.ZP)(a||(a=(0,h.Z)(["\n  justify-content: center;\n\n  border-radius: 2px;\n  padding: 4px 12px;\n  height: 28px;\n\n  background-color: ",";\n"])),(function(n){return n.theme.fieldBackgroundColor})),P={CategoryItem:(0,m.ZP)(v.ZP)(u||(u=(0,h.Z)(["\n  align-items: center;\n  justify-content: center;\n\n  flex-direction: row;\n\n  padding: 4px;\n\n  font-weight: 500;\n  font-size: 12px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  //background-color: ",";\n  border: 1px solid ",";\n"])),(function(n){return n.theme.fontColorSidebar}),(function(n){return n.theme.field.backgroundColor}),(function(n){return n.theme.accentColor.base})),ImagesSetBox:w,CellText:C,Tag:Z,HeaderButton:g,Cell:b,DefaultTag:j},y=t(3329),S=function(n){var e=n.cell,t=n.data,i=(0,p.useMemo)((function(){return e.getValue?e.getValue(t):null}),[e,t]);return(0,y.jsxs)(P.Cell,{children:[(0,y.jsx)(P.CellText,{$isTitle:!0,$size:12,children:null===e||void 0===e?void 0:e.title}),(0,y.jsx)(v.ZP,{fillWidth:!0,flex:1,fxDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",overflow:"hidden",style:{minHeight:24},children:(0,y.jsx)(P.CellText,{$isTitle:!i,$weight:500,children:i||(0,f.t)("undefined")})})]})},_=function(n){var e=n.title,t=void 0===e?"Title":e,i=n.openOverlayButtonTitle,o=void 0===i?(0,f.t)("Change"):i,r=n.onOpenOverlayPress,l=n.editButtonText,d=void 0===l?(0,f.t)("Change"):l,a=n.onEditPress,u=n.acceptButtonText,c=void 0===u?(0,f.t)("Ok"):u,s=n.onAcceptPress,p=n.editMode,h=void 0!==p&&p,m=n.canAccept,x=void 0!==m&&m,g=n.cancelButtonText,b=void 0===g?(0,f.t)("Cancel"):g,Z=n.onCancelPress;return(0,y.jsxs)(v.ZP,{fxDirection:"row",justifyContent:"space-between",height:"max-content",alignItems:"center",children:[(0,y.jsx)(P.CellText,{$isTitle:!0,$size:13,style:{marginRight:"auto"},children:t}),r&&(0,y.jsx)(P.HeaderButton,{type:"button",onClick:r,children:o}),!h&&a&&(0,y.jsx)(P.HeaderButton,{type:"button",onClick:a,children:d}),h&&Z&&(0,y.jsx)(P.HeaderButton,{type:"button",onClick:Z,children:b}),h&&s&&(0,y.jsx)(P.HeaderButton,{type:"button",disabled:!x,onClick:s,children:c})]})},k=t(4942),B=t(9439),I=t(1251),A=t(163),O=t(6272),D=t(9953),R=t(8613),L=t(5990),M=t(815),T=t(1413),E=t(400),V=t(7348),W=t(387),N=t(9069),$=t(870),H=function(n){var e=n.onSelect,t=n.withActions,i=(n.selected,n.types),o=(0,p.useState)(!1),r=(0,B.Z)(o,1)[0],l=(0,V.q$)($.cA.CONTRACTORS).directory,d=(0,p.useMemo)((function(){return l.filter((function(n){return i&&i.includes(n.type)}))}),[l,i]),a=(0,p.useMemo)((function(){return{tableData:d,tableTitles:N.PU,onRowClick:function(n){if(e){if(null!==n&&void 0!==n&&n.rowData)return void e((0,W.rE)(null===n||void 0===n?void 0:n.rowData));null!==n&&void 0!==n&&n._id&&e({_id:null===n||void 0===n?void 0:n._id})}},actionsCreator:t?function(n){return[]}:void 0}}),[d,e,t]);return(0,y.jsx)(E.ZP,(0,T.Z)({isSearch:!1,isLoading:r},a))},z=function(n){return n.CUSTOMER="CUSTOMER",n.SUPPLIER="SUPPLIER",n.EMPLOYEE="EMPLOYEE",n.CONTRACTOR="CONTRACTOR",n.SUB_CONTRACTOR="SUB_CONTRACTOR",n.COMMISSION_AGENT="COMMISSION_AGENT",n.CONSIGNOR="CONSIGNOR",n.TRANSPORTER="TRANSPORTER",n.DELIVER="DELIVER",n}({}),F=t(758),G=t(1819),U=t(7578),q=function(n){var e,t=n.onSelect,i=n.selected,o=(n.withActions,(0,G.xc)().warehouses),r=(0,U.un)(),l=(0,V.eO)().warehouses,d=(0,p.useCallback)((function(){o.getAll({onLoading:r.onLoading("warehouses"),data:{refresh:!0}})}),[r,o]);(0,p.useEffect)((function(){d()}),[]);var a=(0,p.useMemo)((function(){return{tableData:l,tableTitles:F.A7,onRowClick:function(n){if(t){if(null!==n&&void 0!==n&&n.rowData)return void t((0,O.rE)(null===n||void 0===n?void 0:n.rowData));null!==n&&void 0!==n&&n._id&&t({_id:null===n||void 0===n?void 0:n._id})}},actionsCreator:function(n){return[{icon:"refresh",onClick:d}]}}}),[d,t,l]);return(0,y.jsx)(E.ZP,(0,T.Z)((0,T.Z)({isSearch:!1},a),{},{isLoading:null===(e=r.isLoading)||void 0===e?void 0:e.warehouses,selectedRow:i}))},J=t(9541),Y=function(n){return n.price="price",n.variation="variation",n.warehouse="warehouse",n.inventory="inventory",n.supplier="supplier",n}({}),K=(0,O.H1)(Y),X=m.ZP.form(c||(c=(0,h.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  flex: 1;\n\n  padding: 0 8px;\n\n  width: 480px;\n  max-width: 100%;\n\n  height: 100%;\n\n  background-color: ",";\n"])),(function(n){return n.theme.modalBackgroundColor})),Q=(0,m.ZP)(v.ZP)(s||(s=(0,h.Z)(["\n  border-top: 1px solid ",";\n\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor}),(function(n){return n.theme.modalBorderColor})),nn=function(n){var e,t=n.onClose,i=(n.onSubmit,(0,J.J)()),o=null===(e=(0,A.Zx)())||void 0===e?void 0:e.offerId,r=(0,A.G2)({id:o}),l=(0,G.xc)()[G.EJ.products],d=(0,p.useState)(0),a=(0,B.Z)(d,2),u=a[0],c=a[1],s=(0,A.hN)(),v=s.setValue,h=s.formValues,m=s.handleSubmit,x=(0,p.useCallback)((function(n){v(K[u].value,n)}),[u,v]),g=(0,p.useMemo)((function(){var n,e,t;return null!==(e=(n={},(0,k.Z)(n,Y.warehouse,(0,y.jsx)(q,{onSelect:x,selected:null===h||void 0===h?void 0:h.warehouse})),(0,k.Z)(n,Y.price,(0,y.jsx)(R.Z,{withActions:!0,onSelect:x,selected:null===h||void 0===h?void 0:h.price})),(0,k.Z)(n,Y.variation,(0,y.jsx)(L.Z,{withActions:!0,onSelect:x,selected:null===h||void 0===h?void 0:h.variation})),(0,k.Z)(n,Y.inventory,(0,y.jsx)(M.Z,{withActions:!0,onSelect:x,selected:null===h||void 0===h?void 0:h.inventory})),(0,k.Z)(n,Y.supplier,(0,y.jsx)(H,{types:[z.SUPPLIER],withActions:!0,onSelect:x,selected:null===h||void 0===h?void 0:h.supplier})),n)[null===(t=K[u])||void 0===t?void 0:t.value])&&void 0!==e?e:null}),[u,null===h||void 0===h?void 0:h.inventory,null===h||void 0===h?void 0:h.price,null===h||void 0===h?void 0:h.supplier,null===h||void 0===h?void 0:h.variation,null===h||void 0===h?void 0:h.warehouse,x]),b=(0,p.useMemo)((function(){var n,e,t,i,o,l,d,a=null===r||void 0===r?void 0:r.defaults,c=(0,k.Z)({},null!==(n=null===K||void 0===K||null===(e=K[u])||void 0===e?void 0:e.value)&&void 0!==n?n:"",!0);return c.variation?h.variation&&h.variation._id!==(null===a||void 0===a||null===(t=a.variation)||void 0===t?void 0:t._id):c.price?h.price&&h.price._id!==(null===a||void 0===a||null===(i=a.price)||void 0===i?void 0:i._id):c.warehouse?h.warehouse&&h.warehouse._id!==(null===a||void 0===a||null===(o=a.warehouse)||void 0===o?void 0:o._id):c.inventory?h.inventory&&h.inventory._id!==(null===a||void 0===a||null===(l=a.inventory)||void 0===l?void 0:l._id):c.supplier?h.supplier&&h.supplier._id!==(null===a||void 0===a||null===(d=a.supplier)||void 0===d?void 0:d._id):void 0}),[null===r||void 0===r?void 0:r.defaults,u,h.inventory,h.price,h.supplier,h.variation,h.warehouse]);return(0,y.jsx)(U.f4,{value:i,children:(0,y.jsxs)(X,{onSubmit:m((function(n){(null===r||void 0===r?void 0:r._id)&&l.setDefaults({data:{_id:null===r||void 0===r?void 0:r._id,defaults:(0,O.vg)(n),updateCurrent:!0},onSuccess:function(n,e){console.log(n,e)},onLoading:i.onLoading("submiting")})})),children:[(0,y.jsx)(I.xB,{onBackPress:t,title:(0,f.t)("Default values"),canSubmit:b}),(0,y.jsx)(D.Z,{filterOptions:K,currentIndex:u,onChangeIndex:c}),(0,y.jsx)(Q,{flex:1,fillWidth:!0,overflow:"hidden",children:g}),(0,y.jsx)(I.AT,{loading:i.hasLoading,onCreatePress:function(){},canSubmit:b})]})})},en=t(3299),tn=function(n){var e=n.data,t=n.cell,i=n.overlayHandler,o=(0,m.Fg)(),r=null===e||void 0===e?void 0:e.warehouse,l=null===e||void 0===e?void 0:e.supplier,d=null===e||void 0===e?void 0:e.price,a=(0,p.useMemo)((function(){var n,t=null===e||void 0===e?void 0:e.variation;return[{title:(0,f.t)("Label"),value:null===t||void 0===t?void 0:t.label},{title:(0,f.t)("Bar-code"),value:null===t||void 0===t?void 0:t.barCode},{title:(0,f.t)("SKU"),value:null===t||void 0===t?void 0:t.sku},{title:(0,f.t)("Props q-ty"),value:null===t||void 0===t||null===(n=t.properties)||void 0===n?void 0:n.length}].map((function(n,e){var t;return(0,y.jsxs)(v.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,y.jsx)(x.x,{$size:14,children:"".concat(null===n||void 0===n?void 0:n.title,": ")}),(0,y.jsx)(x.x,{$size:14,$weight:600,$align:"right",children:null!==(t=null===n||void 0===n?void 0:n.value)&&void 0!==t?t:"---"})]},null===n||void 0===n?void 0:n.title)}))}),[null===e||void 0===e?void 0:e.variation]),u=(0,p.useMemo)((function(){return function(n){var e,t,i,o,r,l;return[{title:(0,f.t)("Input"),amount:(0,en.pU)(null===n||void 0===n?void 0:n.in)},{title:(0,f.t)("Output"),amount:(0,en.pU)(null===n||void 0===n?void 0:n.out)},{title:(0,f.t)("Commission"),amount:(0,en.pU)(null===n||void 0===n||null===(e=n.commission)||void 0===e?void 0:e.amount),percentage:null!==n&&void 0!==n&&null!==(t=n.commission)&&void 0!==t&&t.percentage?(0,en.pU)(null===n||void 0===n||null===(i=n.commission)||void 0===i?void 0:i.percentage):void 0},{title:(0,f.t)("Markup"),amount:(0,en.pU)(null===n||void 0===n||null===(o=n.markup)||void 0===o?void 0:o.amount),percentage:null!==n&&void 0!==n&&null!==(r=n.markup)&&void 0!==r&&r.percentage?(0,en.pU)(null===n||void 0===n||null===(l=n.markup)||void 0===l?void 0:l.percentage):void 0}]}(d).map((function(n,e){return(0,y.jsxs)(v.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,y.jsx)(x.x,{children:"".concat(null===n||void 0===n?void 0:n.title,": ")}),(0,y.jsxs)(x.x,{$weight:600,children:[null===n||void 0===n?void 0:n.amount,(null===n||void 0===n?void 0:n.percentage)&&" | ".concat(null===n||void 0===n?void 0:n.percentage,"%")]})]},null===n||void 0===n?void 0:n.title)}))}),[d]);return(0,y.jsxs)(P.Cell,{style:{minHeight:"max-content"},children:[(0,y.jsx)(_,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:nn})}}),(0,y.jsxs)(v.ZP,{fillWidth:!0,children:[(0,y.jsx)(P.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,f.t)("warehouse")}),(0,y.jsx)(v.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",children:[{label:(0,f.t)("Label"),value:null===r||void 0===r?void 0:r.label},{label:(0,f.t)("Code"),value:null===r||void 0===r?void 0:r.code}].map((function(n){return(0,y.jsxs)(v.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,y.jsx)(x.x,{children:"".concat(n.label)}),(0,y.jsx)(x.x,{$weight:600,children:(null===n||void 0===n?void 0:n.value)||"---"})]},n.label)}))})]}),(0,y.jsxs)(v.ZP,{fillWidth:!0,children:[(0,y.jsx)(P.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,f.t)("supplier")}),[{label:(0,f.t)("Label"),value:null===l||void 0===l?void 0:l.label},{label:(0,f.t)("Code"),value:null===l||void 0===l?void 0:l.code}].map((function(n){return(0,y.jsxs)(v.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,y.jsx)(x.x,{children:"".concat(n.label)}),(0,y.jsx)(x.x,{$weight:600,children:(null===n||void 0===n?void 0:n.value)||"---"})]},n.label)}))]}),(0,y.jsxs)(v.ZP,{fillWidth:!0,gap:6,children:[(0,y.jsx)(P.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,f.t)("variation")}),(0,y.jsx)(v.ZP,{fillWidth:!0,children:a})]}),(0,y.jsxs)(v.ZP,{fillWidth:!0,gap:6,children:[(0,y.jsx)(P.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,f.t)("price")}),(0,y.jsx)(v.ZP,{fillWidth:!0,children:u})]})]})};var on,rn,ln,dn,an,un,cn,sn=t(4717),vn=t(8790),fn=t(7121),pn=m.ZP.form(on||(on=(0,h.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  max-width: 480px;\n\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(n){return n.theme.sideBarBackgroundColor})),hn=function(n){var e=n.onClose,t=(0,V.nr)().currentOffer,i=(0,G.xc)()[G.EJ.products],o=(0,p.useState)((null===t||void 0===t?void 0:t.images)||[]),r=(0,B.Z)(o,2),l=r[0],d=r[1],a=(0,p.useState)(!1),u=(0,B.Z)(a,2),c=u[0],s=u[1],v=(0,m.Fg)();return(0,y.jsx)(pn,{onSubmit:function(n){n.preventDefault(),t&&i.updateById({data:(0,T.Z)((0,T.Z)({},(0,W.rE)(t)),{},{data:{images:l},refreshCurrent:!0}),onSuccess:function(){e&&e()},onLoading:s})},children:(0,y.jsx)(vn.Z,{initialData:l,onClose:e,onChangeState:d,contentContainerStyle:{flex:1,borderTop:"1px solid ".concat(v.sideBarBorderColor),borderBottom:"1px solid ".concat(v.sideBarBorderColor)},renderHeader:(0,y.jsx)(fn.iw,{title:"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",onBackPress:e,okButton:!0,canSubmit:l.length>0}),FooterComponent:function(n){return(0,y.jsx)(fn.AT,{onCreatePress:n.onAddNewImageSetPress,loading:c,canSubmit:l.length>0})}})})},mn=t(4436),xn=function(n){var e=n.data,t=n.cell,i=n.overlayHandler,o=(0,p.useMemo)((function(){var n;return null===e||void 0===e||null===(n=e.images)||void 0===n?void 0:n.map((function(n,e){return(0,y.jsx)(P.ImagesSetBox,{fxDirection:"row",gap:2,overflow:"auto",children:mn.E_.map((function(e){return(0,y.jsx)(sn.Z,{src:n[e.value]||"",disabled:!0},"img_".concat(e.value))}))},"set_".concat((null===n||void 0===n?void 0:n._id)||e))}))}),[null===e||void 0===e?void 0:e.images]);return(0,y.jsxs)(P.Cell,{style:{minHeight:"max-content",padding:"4px 0"},children:[(0,y.jsx)(_,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:hn})}}),(0,y.jsx)(v.ZP,{gap:2,height:"max-content",padding:"8px 0",style:{minHeight:26},children:o})]})},gn=t(3433),bn=t(4109),Zn=t(6785),Cn=function n(e){var t,i,o=e.item,r=(e.index,e.lvl),l=void 0===r?0:r,d=e.selectedIds,a=e.onRemove,u=void 0===a?function(){console.log("onRemove not passed",l)}:a,c=(0,p.useMemo)((function(){var e;return null===o||void 0===o||null===(e=o.childrenList)||void 0===e?void 0:e.map((function(e,t){return(0,y.jsx)(n,{item:e,index:t,onRemove:u,lvl:l+1,selectedIds:d},"item_lvl_".concat(l,"_").concat(e._id))}))}),[null===o||void 0===o?void 0:o.childrenList,l,u,d]),s=(0,p.useMemo)((function(){return d.includes(o._id)}),[o._id,d]);return(0,y.jsxs)(y.Fragment,{children:[s&&(0,y.jsxs)(wn,{fxDirection:"row",alignItems:"center",padding:"0 2px 0 12px",gap:2,children:[(null===o||void 0===o||null===(t=o.parent)||void 0===t?void 0:t.label)&&"".concat(null===o||void 0===o||null===(i=o.parent)||void 0===i?void 0:i.label,"/"),"".concat(null===o||void 0===o?void 0:o.label),(0,y.jsx)(bn.Z,{variant:"onlyIcon",endIcon:"close",size:"24px",endIconSize:"80%",onClick:function(){return u&&u(o._id)}})]}),c]})},wn=(0,m.ZP)(v.ZP)(rn||(rn=(0,h.Z)(["\n  font-weight: 500;\n  font-size: 12px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  border: 1px solid ",";\n"])),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.accentColor.base})),jn=function(n){var e=n.options,t=n.onSelect,i=n.onChange,o=n.defaultData,r=(0,p.useState)([]),l=(0,B.Z)(r,2),d=l[0],a=l[1],u=(0,p.useCallback)((function(n){a((function(e){var o=n?e.includes(null===n||void 0===n?void 0:n._id)?e.filter((function(e){return e!==(null===n||void 0===n?void 0:n._id)})):[].concat((0,gn.Z)(e),[n._id]):e;return t&&(null===n||void 0===n?void 0:n._id)&&t(null===n||void 0===n?void 0:n._id),i&&i(o),o}))}),[i,t]),c=(0,p.useCallback)((function(n){a((function(e){var t=e.filter((function(e){return e!==n}));return i&&i(t),t}))}),[i]),s=(0,p.useMemo)((function(){return null===e||void 0===e?void 0:e.map((function(n,e){return(0,y.jsx)(Cn,{item:n,index:e,selectedIds:d,onRemove:c},"item_lvl_0_".concat(n._id))}))}),[c,e,d]);return(0,p.useEffect)((function(){o&&a(o)}),[o]),(0,y.jsxs)(v.ZP,{fillWidth:!0,gap:6,children:[(0,y.jsx)(Zn.Z,{treeMode:!0,dropDownIsAbsolute:!0,defaultValue:o,label:(0,f.ZP)("categories"),placeholder:(0,f.ZP)("categories"),required:!0,options:e,onSelect:u}),(0,y.jsx)(v.ZP,{fxDirection:"row",flexWrap:"wrap",gap:8,children:s})]})},Pn=(0,m.ZP)(v.ZP)(ln||(ln=(0,h.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),yn=function(n){var e=n.onClose,t=(0,V.nr)().currentOffer,i=(0,V.q$)($.cA.CATEGORIES_PROD).directory,o=(0,G.xc)()[G.EJ.products],r=(0,p.useState)([]),l=(0,B.Z)(r,2),d=l[0],a=l[1],u=(0,p.useMemo)((function(){var n,e;return(null===t||void 0===t||null===(n=t.categories)||void 0===n||null===(e=n.map((function(n){return n._id})))||void 0===e?void 0:e.toString())!==d.toString()}),[null===t||void 0===t?void 0:t.categories,d]);return(0,p.useEffect)((function(){null!==t&&void 0!==t&&t.categories&&a(null===t||void 0===t?void 0:t.categories.map((function(n){return n._id})))}),[null===t||void 0===t?void 0:t.categories]),(0,y.jsxs)(fn.dF,{onSubmit:function(n){n.preventDefault(),t&&o.updateById({data:(0,T.Z)((0,T.Z)({},(0,W.rE)(t)),{},{data:{categories:d},refreshCurrent:!0}),onSuccess:function(n,t){e&&e()}})},children:[(0,y.jsx)(fn.iw,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457",onBackPress:e,canSubmit:u,okButton:!0}),(0,y.jsx)(Pn,{padding:"0 0 8px 0",flex:1,children:(0,y.jsx)(jn,{onChange:a,options:i,defaultData:d})}),(0,y.jsx)(fn.AT,{canSubmit:u})]})},Sn=function(n){var e=n.cell,t=n.overlayHandler,i=n.data,o=(0,V.q$)($.cA.CATEGORIES_PROD).directory,r=(0,p.useMemo)((function(){var n,e;return null!==(n=null===i||void 0===i||null===(e=i.categories)||void 0===e?void 0:e.map((function(n){return n._id})))&&void 0!==n?n:[]}),[null===i||void 0===i?void 0:i.categories]),l=(0,p.useMemo)((function(){return o.map((function(n,e){return(0,y.jsx)(_n,{selectedIds:r,item:n},"cat_".concat(n._id))}))}),[o,r]);return(0,y.jsxs)(P.Cell,{style:{minHeight:"max-content"},children:[(0,y.jsx)(_,{title:null===e||void 0===e?void 0:e.title,openOverlayButtonTitle:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",onOpenOverlayPress:function(){t({RenderComponent:yn})}}),(0,y.jsx)(v.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"flex-end",flexWrap:"wrap",gap:8,style:{height:"max-content",minHeight:26},children:l})]})},_n=function n(e){var t,i,o=e.item,r=e.lvl,l=void 0===r?0:r,d=e.selectedIds,a=(0,p.useMemo)((function(){var e;return null===o||void 0===o||null===(e=o.childrenList)||void 0===e?void 0:e.map((function(e,t){return(0,y.jsx)(n,{item:e,index:t,lvl:l+1,selectedIds:d},"item_lvl_".concat(l,"_").concat(e._id))}))}),[null===o||void 0===o?void 0:o.childrenList,l,d]),u=(0,p.useMemo)((function(){return d.includes(o._id)}),[o._id,d]);return(0,y.jsxs)(y.Fragment,{children:[u&&(0,y.jsxs)(P.CategoryItem,{fxDirection:"row",alignItems:"center",padding:"0 2px 0 12px",gap:2,children:[(null===o||void 0===o||null===(t=o.parent)||void 0===t?void 0:t.label)&&"".concat(null===o||void 0===o||null===(i=o.parent)||void 0===i?void 0:i.label,"/"),"".concat(null===o||void 0===o?void 0:o.label)]}),a]})},kn=(t(5481),t(8828),t(1383)),Bn=(t(5801),t(4925)),In=["onClose","title","defaultState","onSubmit","update","offer","template","onSelect","onChange"],An=(0,m.ZP)(v.ZP)(dn||(dn=(0,h.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n  padding-bottom: 8px;\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),On=(0,m.ZP)(v.ZP)(an||(an=(0,h.Z)(["\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(n){return n.theme.sideBarBorderColor})),Dn=(0,m.ZP)(v.ZP)(un||(un=(0,h.Z)(["\n  //display: grid;\n  //grid-template-columns: repeat(auto-fill, 25%);\n  //\n  //@media screen and (max-width: 480px) {\n  //  grid-template-columns: repeat(auto-fill, 50%);\n  //}\n"]))),Rn=(0,m.ZP)(bn.Z)(cn||(cn=(0,h.Z)(["\n  flex-basis: 100px;\n  min-width: max-content;\n\n  //width: 100%;\n  //min-width: unset;\n\n  // border-radius: 2px;\n  // border: 2px solid ",";\n  //\n  // &:hover {\n  //   border: 2px solid ",";\n  // }\n"])),(function(n){return n.theme.accentColor.light}),(function(n){return n.theme.accentColor.base})),Ln=function(n){var e,t,i=n.onClose,o=n.title,r=(n.defaultState,n.onSubmit),l=n.update,d=n.offer,a=(n.template,n.onSelect),u=n.onChange,c=(0,Bn.Z)(n,In),s=d,v=(0,G.xc)()[G.EJ.products],h=(0,V.WS)(),m=(0,p.useState)(null===(e=h[0])||void 0===e?void 0:e._id),g=(0,B.Z)(m,2),b=g[0],Z=g[1],C=(0,p.useState)(!1),w=(0,B.Z)(C,2),j=w[0],P=w[1],S=(0,p.useState)([]),_=(0,B.Z)(S,2),k=_[0],I=_[1],A=(0,p.useMemo)((function(){return h.find((function(n){return n._id===b}))}),[b,h]),O=(0,p.useMemo)((function(){var n;return(null===s||void 0===s||null===(n=s.properties)||void 0===n?void 0:n.map((function(n){return n._id})).join(","))!==k.join(",")}),[null===s||void 0===s?void 0:s.properties,k]),D=(0,p.useCallback)((function(n){n.preventDefault();var e=null!==l&&void 0!==l?l:null===s||void 0===s?void 0:s._id;e?v.updateById({data:{_id:e,data:{properties:k}},onLoading:P,onSuccess:function(n,e){kn.kl.success("Product updated"),i&&i()}}):console.debug("selectedIds",k),r&&r(k)}),[null===s||void 0===s?void 0:s._id,i,r,k,v,l]),R=(0,p.useCallback)((function(n,e){I((function(e){var t=e.includes(n)?e.filter((function(e){return e!==n})):[].concat((0,gn.Z)(e),[n]);return u&&u(t),a&&a(n),t}))}),[u,a]),L=(0,p.useMemo)((function(){var n;return null===A||void 0===A||null===(n=A.childrenList)||void 0===n?void 0:n.filter((function(n){return!(null!==n&&void 0!==n&&n.isSelectable)})).map((function(n){var e;return(0,y.jsxs)(On,{gap:8,fillWidth:!0,padding:"8px 0 0",children:[(0,y.jsx)(x.x,{style:{flex:1,paddingLeft:12},$weight:500,children:n.label}),(0,y.jsx)(Dn,{fillWidth:!0,padding:"8px 0",gap:6,flexWrap:"wrap",fxDirection:"row",children:null===(e=n.childrenList)||void 0===e?void 0:e.map((function(e){var t=k.includes(e._id);return(0,y.jsx)(Rn,{variant:t?"filledSmall":"outlinedSmall",padding:"6px 8px",fontWeight:500,onClick:function(){return R(e._id,n._id)},children:e.label},"prop-value-".concat(e._id))}))})]},"property-".concat(n._id))}))}),[R,k,null===A||void 0===A?void 0:A.childrenList]);return(0,p.useEffect)((function(){null!==s&&void 0!==s&&s.properties&&I(null===s||void 0===s?void 0:s.properties.map((function(n){return n._id})))}),[null===s||void 0===s?void 0:s.properties]),(0,y.jsxs)(fn.dF,(0,T.Z)((0,T.Z)({onSubmit:D},c),{},{children:[(0,y.jsx)(fn.iw,{onBackPress:i,canSubmit:O,title:null!==(t=o||(null===A||void 0===A?void 0:A.label))&&void 0!==t?t:"",okButton:!0}),(0,y.jsx)(Zn.Z,{label:(0,f.t)("Available templates"),options:h,selectedValue:b,onSelect:function(n){Z(null===n||void 0===n?void 0:n._id)}}),(0,y.jsx)(An,{flex:1,overflow:"auto",children:L}),(0,y.jsx)(fn.AT,{canSubmit:O,loading:j,submitButtonText:j?"Loading...":"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]}))},Mn=function(n){var e=n.item,t=n.selectedItems,i=(0,p.useMemo)((function(){var n,i;return null===(n=e.childrenList)||void 0===n||null===(i=n.filter((function(n){return null===t||void 0===t?void 0:t.includes(n._id)})))||void 0===i?void 0:i.map((function(n,e){return(0,y.jsx)(P.CategoryItem,{className:"PROP_VALUE",maxWidth:"130px",children:n.label},"prop-v-".concat(n._id))}))}),[e.childrenList,t]);return(0,y.jsxs)(v.ZP,{className:"PROPERTY",gap:8,alignItems:"flex-end",children:[(0,y.jsx)(v.ZP,{alignItems:"center",fxDirection:"row",fillWidth:!0,gap:8,children:(0,y.jsx)(P.CellText,{$size:13,$weight:600,children:null===e||void 0===e?void 0:e.label})}),(0,y.jsx)(v.ZP,{fxDirection:"row",flexWrap:"wrap",fillWidth:!0,gap:6,children:i&&(null===i||void 0===i?void 0:i.length)>0?i:(0,y.jsx)(x.x,{$size:12,children:"---"})})]})},Tn=function(n){var e,t=n.cell,i=n.overlayHandler,o=n.data,r=(0,V.nr)().properties,l=(0,p.useState)(null===(e=r[0])||void 0===e?void 0:e._id),d=(0,B.Z)(l,1)[0],a=(0,p.useMemo)((function(){return r.find((function(n){return n._id===d}))}),[d,r]),u=(0,p.useMemo)((function(){var n;return null===a||void 0===a||null===(n=a.childrenList)||void 0===n?void 0:n.filter((function(n){return!n.isSelectable}))}),[null===a||void 0===a?void 0:a.childrenList]),c=(0,p.useMemo)((function(){var n;return null===o||void 0===o||null===(n=o.properties)||void 0===n?void 0:n.map((function(n){return n._id}))}),[null===o||void 0===o?void 0:o.properties]),s=(0,p.useMemo)((function(){return null===u||void 0===u?void 0:u.map((function(n,e){return(0,y.jsx)(Mn,{index:e,overlayHandler:i,item:n,selectedItems:c,data:o},"prop-".concat(null===n||void 0===n?void 0:n._id))}))}),[u,i,c,o]);return(0,y.jsxs)(P.Cell,{padding:"4px 4px 8px",gap:8,className:"PROPERTIES_LIST_CELL",style:{minHeight:s&&(null===s||void 0===s?void 0:s.length)>0?"max-content":50},children:[(0,y.jsx)(_,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:Ln,props:{offer:o}})}}),(0,y.jsx)(v.ZP,{fillWidth:!0,gap:8,alignItems:s&&(null===s||void 0===s?void 0:s.length)>0?"stretch":"flex-end",children:s&&(null===s||void 0===s?void 0:s.length)>0?s:(0,y.jsx)(P.CellText,{$weight:500,children:(0,f.t)("undefined")})})]})},En=function(n){var e,t,i=n.data,o=n.cell,r=(0,p.useMemo)((function(){var n,e;return[{label:(0,f.t)("Amount"),value:(0,O.__)(null===i||void 0===i||null===(n=i.total)||void 0===n?void 0:n.amount)},{label:(0,f.t)("Items count"),value:null===i||void 0===i||null===(e=i.total)||void 0===e?void 0:e.items}].map((function(n){return(0,y.jsxs)(v.ZP,{fxDirection:"row",padding:"6px",justifyContent:"space-between",fillWidth:!0,gap:8,children:[(0,y.jsx)(x.x,{$size:11,children:n.label}),(0,y.jsx)(P.CellText,{$weight:600,children:null===n||void 0===n?void 0:n.value})]})}))}),[null===i||void 0===i||null===(e=i.total)||void 0===e?void 0:e.amount,null===i||void 0===i||null===(t=i.total)||void 0===t?void 0:t.items]);return(0,y.jsxs)(P.Cell,{children:[(0,y.jsx)(_,{title:o.title}),r]})}},4235:function(n,e,t){var i=t(6522),o=t(2791),r=t(8553),l=t(9964),d=t(3329);e.Z=function(n){var e=n.onChange,t=n.disabled,a=(0,o.useMemo)((function(){return(0,r.H1)(i.bp)}),[]);return(0,d.jsx)(l.Z,{disabled:t,options:a,onSelect:function(n){return e&&e(n.value)}})}},758:function(n,e,t){t.d(e,{A7:function(){return r},QX:function(){return l},fK:function(){return a}});var i=t(6522),o=t(6272),r=[{top:{name:(0,i.t)("label"),getData:function(n){return n.label}},bottom:{name:(0,i.t)("code"),getData:function(n){return n.code}},width:"220px",action:"valueByPath"},{top:{name:(0,i.t)("type"),getData:function(n){return null===n||void 0===n?void 0:n.type}},width:"125px",action:"valueByPath"},{top:{name:(0,i.t)("email")},bottom:{name:(0,i.t)("phone")},width:"180px",action:"contacts"},{top:{name:(0,i.t)("Address"),getData:function(n){return n.address||"\u043d\u0435 \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"}},bottom:{name:"".concat((0,i.t)("longitude"),"/").concat((0,i.t)("latitude")),getData:function(n){var e,t;return"".concat(((null===(e=n.location)||void 0===e?void 0:e.longitude)||"---")+", "+((null===(t=n.location)||void 0===t?void 0:t.latitude)||"---"))}},width:"175px",action:"valueByPath"},{top:{name:(0,i.t)("Manager"),getData:function(n){var e,t;return"".concat((null===(e=n.manager)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.name)||"---")}},bottom:{name:(0,i.t)("email"),getData:function(n){var e,t;return"".concat((null===(e=n.manager)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email)||"---")}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,i.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}],l=[{top:{name:(0,i.t)("variationLabel"),getData:function(n){var e;return null===(e=n.variation)||void 0===e?void 0:e.label}},getImgPreview:function(n){var e,t,i;return null!==(e=n.offer)&&void 0!==e&&e.images?null===(t=n.offer)||void 0===t||null===(i=t.images[0])||void 0===i?void 0:i.img_preview:""},width:"270px",action:"doubleDataWithAvatar"},{top:{name:(0,i.t)("sku"),getData:function(n){var e;return null===(e=n.variation)||void 0===e?void 0:e.sku}},bottom:{name:(0,i.t)("barCode"),getData:function(n){var e;return null===(e=n.variation)||void 0===e?void 0:e.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,i.t)("type"),path:"type"},bottom:{name:(0,i.t)("status"),path:"status"},width:"120px",action:"status"},{top:{name:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c",align:"end",getData:function(n){return n.stock||0}},bottom:{name:"\u0420\u0435\u0437\u0435\u0440\u0432",align:"end",getData:function(n){return n.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f",align:"end",getData:function(n){return(null===n||void 0===n?void 0:n.awaiting)||0}},bottom:{name:"\u0412\u0442\u0440\u0430\u0447\u0435\u043d\u043e",align:"end",getData:function(n){return(null===n||void 0===n?void 0:n.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("warehouse"),getData:function(n){var e;return null===(e=n.warehouse)||void 0===e?void 0:e.label}},bottom:{name:(0,i.t)("code"),getData:function(n){var e;return null===(e=n.warehouse)||void 0===e?void 0:e.code}},width:"170px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",path:"description"},width:"190px",action:"valueByPath"},{top:{name:"\u0410\u0432\u0442\u043e\u0440",path:"author.name"},bottom:{name:"\u0415\u043c\u0435\u0439\u043b",path:"author.email"},width:"190px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}],d=[{top:{name:(0,i.t)("Price OUT"),align:"end",getData:function(n){var e;return(0,o.__)(Number((null===n||void 0===n||null===(e=n.price)||void 0===e?void 0:e.in)||0))}},bottom:{name:(0,i.t)("Price IN"),align:"end",getData:function(n){var e;return(0,o.__)(Number((null===n||void 0===n||null===(e=n.price)||void 0===e?void 0:e.out)||0))}},width:"170px",action:"valueByPath"},{top:{name:(0,i.t)("comment"),align:"start",path:"description"},width:"150px",action:"valueByPath"}],a=[{top:{name:(0,i.t)("batch")},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("warehouse"),getData:function(n){var e;return null===(e=n.warehouse)||void 0===e?void 0:e.label}},bottom:{name:(0,i.t)("code"),getData:function(n){var e;return null===(e=n.warehouse)||void 0===e?void 0:e.code}},width:"170px",action:"valueByPath"},{top:{name:(0,i.t)("Stock"),align:"end",getData:function(n){return n.stock||0}},bottom:{name:(0,i.t)("Reserved"),align:"end",getData:function(n){return n.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("Awaiting"),align:"end",getData:function(n){return(null===n||void 0===n?void 0:n.awaiting)||0}},bottom:{name:(0,i.t)("Lost"),align:"end",getData:function(n){return(null===n||void 0===n?void 0:n.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,i.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}].concat(d)}}]);
//# sourceMappingURL=862.c4be96a4.chunk.js.map