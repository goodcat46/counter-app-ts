"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[953],{4781:function(e,n,i){i.d(n,{on:function(){return c}});var t=i(1413),o=i(3433),l=i(9439),r=i(2791),d=i(6382),a=i(3329),u=(0,r.createContext)({}),c=function(){return(0,r.useContext)(u)};n.ZP=function(e){var n=e.children,i=(0,r.useState)([]),c=(0,l.Z)(i,2),s=c[0],v=c[1],f=(0,r.useCallback)((function(e){v((function(n){return n.filter((function(n){return n.id!==e}))}))}),[]),p=(0,r.useCallback)((function(){v([])}),[]),h=(0,r.useCallback)((function(e){var n="".concat(e.RenderComponent.name,"_").concat((0,d.x0)(8));return"function"===typeof e.RenderComponent&&v((function(i){var l=i.find((function(n){return n.id.includes(e.RenderComponent.name)}));if(l){var r=i.filter((function(e){var n,i;return(null===(n=e.RenderComponent)||void 0===n?void 0:n.name)!==(null===(i=l.RenderComponent)||void 0===i?void 0:i.name)}));return[].concat((0,o.Z)(r),[(0,t.Z)((0,t.Z)({},e),{},{id:n})])}return[].concat((0,o.Z)(i),[(0,t.Z)((0,t.Z)({},e),{},{id:n})])})),{onClose:function(){return f(n)},compId:n}}),[f]),x={getStack:function(){return s},remove:f,clearStack:p,open:h};return(0,a.jsx)(u.Provider,{value:x,children:n})}},2930:function(e,n,i){i.r(n),i.d(n,{default:function(){return he},useOfferOverviewLoaders:function(){return fe}});var t,o,l,r,d,a,u,c=i(168),s=i(9439),v=i(2360),f=i(8495),p=i(6931),h=i(2791),x=i(1452),m=i(4942),g=i(8553),b=i(6492),C=i(9953),Z=i(8095),j=i(4886),w=i(6087),y=i(710),P=i(1251),S=i(3329),_=function(e){return e.Variations="Variations",e.Prices="Prices",e.Warehousing="Warehousing",e}(_||{}),k=(0,g.H1)(_),I=(0,v.ZP)(Z.ZP)(t||(t=(0,c.Z)(["\n  overflow: auto;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);\n  }\n"])),(function(e){return e.theme.globals.timingFunctionMain}),(function(e){return e.theme.backgroundColorLight}),(function(e){return e.isVisible?0:100})),O=(0,v.ZP)(Z.ZP)(o||(o=(0,c.Z)(["\n  border-top: 1px solid ",";\n  //border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),B=function(e){var n,i,t=e.isVisible,o=e.toggleVisibility,l=(0,x.N4)(),r=(0,h.useState)(_.Variations),d=(0,s.Z)(r,2),a=d[0],u=d[1],c=(0,h.useMemo)((function(){var e,n;if(!l.currentOffer)return null;var i=(e={},(0,m.Z)(e,_.Variations,(0,S.jsx)(j.Z,{withActions:!0})),(0,m.Z)(e,_.Warehousing,(0,S.jsx)(y.Z,{withActions:!0})),(0,m.Z)(e,_.Prices,(0,S.jsx)(w.Z,{withActions:!0})),e);return null!==(n=null===i||void 0===i?void 0:i[a])&&void 0!==n?n:null}),[a,l.currentOffer]);return(0,S.jsxs)(I,{overflow:"hidden",fillHeight:!0,isVisible:t,children:[t&&(0,S.jsx)(P.xB,{onBackPress:o,renderTitle:(0,S.jsxs)(Z.ZP,{padding:"0 8px",fxDirection:"row",alignItems:"center",justifyContent:"center",gap:8,children:[(0,S.jsx)(b.x,{$weight:600,$size:14,children:null===l||void 0===l||null===(n=l.currentOffer)||void 0===n?void 0:n.label}),(0,S.jsx)(b.x,{$size:14,children:null===l||void 0===l||null===(i=l.currentOffer)||void 0===i?void 0:i.sku})]})}),(0,S.jsxs)(O,{overflow:"hidden",fillWidth:!0,flex:1,children:[(0,S.jsx)(C.Z,{filterOptions:k,defaultValue:a,onOptSelect:function(e,n,i){u(n)},preventFilter:!0}),c]})]})},T=i(4925),D=i(4109),A=i(6522),L=i(7121),R=i(1185),M=i(7739),E=i(4781),N=i(163),W=["className"],V=["CellComponent"],$=function(e){return e.General="General",e.Properties="Properties",e.Defaults="Defaults",e.Images="Images",e.Futures="Futures",e.Cms="Cms",e}({}),z=(0,R.H1)($),H=(0,v.ZP)(Z.ZP)(l||(l=(0,c.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(e){return e.theme.sideBarBackgroundColor})),F=(0,v.ZP)(Z.ZP)(r||(r=(0,c.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),G=(0,v.ZP)(Z.ZP)(d||(d=(0,c.Z)([""]))),U=(0,v.ZP)(D.Z)(a||(a=(0,c.Z)(["\n  fill: ",";\n"])),(function(e){return e.theme.globals.colors.error})),J=(0,v.ZP)(D.Z)(u||(u=(0,c.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),q=function(e){var n,i=e.className,t=(0,T.Z)(e,W),o=(0,N.xj)(),l=(0,x.N4)().currentOffer,r=(0,E.on)(),d=(0,h.useState)($.General),a=(0,s.Z)(d,2),u=a[0],c=a[1],v=(0,h.useMemo)((function(){var e;return null===(e=K[u])||void 0===e?void 0:e.map((function(e){var n=e.CellComponent,i=(0,T.Z)(e,V);return n?(0,S.jsx)(n,{overlayHandler:r.open,cell:i,data:l},i.title):(0,S.jsx)(M.N.Text,{overlayHandler:r.open,cell:i,data:l},i.title)}))}),[u,r.open,l]);return(0,S.jsxs)(H,{fillWidth:!0,flex:1,className:i,padding:"0 8px",children:[(0,S.jsx)(L.iw,{title:(0,A.t)("Offer overview"),onBackPress:o.goBack}),(0,S.jsx)(C.Z,{optionProps:{fitContentH:!0},filterOptions:z,onOptSelect:function(e){o.replace({hash:null===e||void 0===e?void 0:e.value}),c(null===e||void 0===e?void 0:e.value)}}),(0,S.jsx)(F,{fillWidth:!0,flex:1,overflow:"auto",children:v}),(0,S.jsxs)(G,{fillWidth:!0,fxDirection:"row",gap:6,padding:"6px 0",children:[(0,S.jsx)(D.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==t&&void 0!==t&&t.onEdit),onClick:null===t||void 0===t?void 0:t.onEdit}),(0,S.jsx)(D.Z,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:null!==t&&void 0!==t&&null!==(n=t.product)&&void 0!==n&&n.visible?"visibilityOn":"visibilityOff",disabled:!(null!==t&&void 0!==t&&t.onHide),onClick:null===t||void 0===t?void 0:t.onHide}),(0,S.jsx)(U,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==t&&void 0!==t&&t.onDelete),onClick:null===t||void 0===t?void 0:t.onDelete}),(0,S.jsxs)(Z.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,S.jsx)(D.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",disabled:!(null!==t&&void 0!==t&&t.onRefresh),onClick:null===t||void 0===t?void 0:t.onRefresh}),(0,S.jsx)(J,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==t&&void 0!==t&&t.onOpenRightSide),onClick:null===t||void 0===t?void 0:t.onOpenRightSide})]})]})]})},Y=[{title:(0,A.t)("Label"),CellComponent:M.N.Text,getValue:function(e){return null===e||void 0===e?void 0:e.label},gridArea:"label",tab:$.General},{title:(0,A.t)("status"),CellComponent:M.N.OfferStatusChanger,getValue:function(e){return null===e||void 0===e?void 0:e.approved},gridArea:"approved",tab:$.General},{title:(0,A.t)("Type"),CellComponent:M.N.Text,getValue:function(e){return null===e||void 0===e?void 0:e.type},gridArea:"type",tab:$.General},{title:(0,A.t)("SKU"),CellComponent:M.N.Text,getValue:function(e){return null===e||void 0===e?void 0:e.sku},gridArea:"sku",tab:$.General},{title:(0,A.t)("Bar-code"),CellComponent:M.N.Text,getValue:function(e){return null===e||void 0===e?void 0:e.barCode},gridArea:"barCode",tab:$.General},{title:(0,A.t)("Categories"),CellComponent:M.N.OfferCategories,gridArea:"categories",tab:$.General},{title:(0,A.t)("Brand"),CellComponent:M.N.Text,getValue:function(e){var n;return null===e||void 0===e||null===(n=e.brand)||void 0===n?void 0:n.label},gridArea:"brand",tab:$.General},{title:(0,A.t)("Measurement"),CellComponent:M.N.Text,gridArea:"measurement",getValue:function(e){try{var n=null!==e&&void 0!==e&&e.measurement?JSON.parse(null===e||void 0===e?void 0:e.measurement):{};return["".concat((0,A.t)("unit"),": ").concat((null===n||void 0===n?void 0:n.unit)||0),"".concat((0,A.t)("min"),": ").concat((null===n||void 0===n?void 0:n.min)||0),"".concat((0,A.t)("max"),": ").concat((null===n||void 0===n?void 0:n.max)||0),"".concat((0,A.t)("step"),": ").concat((null===n||void 0===n?void 0:n.step)||0)].join(" | ")}catch(i){return""}},tab:$.General},{title:(0,A.t)("Description"),CellComponent:M.N.Text,getValue:function(e){return null===e||void 0===e?void 0:e.description},gridArea:"description",tab:$.General},{title:(0,A.t)("Negative sales"),CellComponent:M.N.Text,getValue:function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&n.negativeSale?"Yes":"No"},gridArea:"reservation",tab:$.Futures},{title:(0,A.t)("Reservation"),CellComponent:M.N.Text,getValue:function(e){var n,i;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(i=n.reservation)&&void 0!==i&&i.isAvailable?"Yes":"No"},gridArea:"reservation",tab:$.Futures},{title:(0,A.t)("Custom production"),CellComponent:M.N.Text,getValue:function(e){var n,i;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(i=n.customProduction)&&void 0!==i&&i.isAvailable?"Yes":"No"},gridArea:"customProduction",tab:$.Futures},{title:(0,A.t)("Custom order"),CellComponent:M.N.Text,getValue:function(e){var n,i;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(i=n.customOrder)&&void 0!==i&&i.isAvailable?"Yes":"No"},gridArea:"customOrder",tab:$.Futures},{title:(0,A.t)("Pre-order"),CellComponent:M.N.Text,getValue:function(e){var n,i;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(i=n.preOrder)&&void 0!==i&&i.isAvailable?"Yes":"No"},gridArea:"preOrder",tab:$.Futures},{title:(0,A.t)("Is promo"),CellComponent:M.N.Text,getValue:function(e){var n;return null===e||void 0===e||null===(n=e.futures)||void 0===n?void 0:n.isPromo},gridArea:"isPromo",tab:$.Futures},{title:(0,A.t)("Properties"),CellComponent:M.N.OfferStaticProperties,gridArea:"properties",tab:$.Properties},{title:(0,A.t)("Default values"),CellComponent:M.N.OfferDefaults,gridArea:"defaults",tab:$.Defaults},{title:(0,A.t)("Created by / Date / Time"),CellComponent:M.N.Text,getValue:function(e){var n;return null!==e&&void 0!==e&&e.author?"".concat(null===e||void 0===e||null===(n=e.author)||void 0===n?void 0:n.email," / ").concat(null!==e&&void 0!==e&&e.createdAt&&R.sr.isStr(null===e||void 0===e?void 0:e.createdAt)?(0,R.M7)(Date.parse(null===e||void 0===e?void 0:e.createdAt)):""):null},gridArea:"created",tab:$.General},{title:(0,A.t)("Updated by / Date / Time"),CellComponent:M.N.Text,getValue:function(e){var n;return null!==e&&void 0!==e&&e.editor?"".concat(null===e||void 0===e||null===(n=e.editor)||void 0===n?void 0:n.email," / ").concat(null!==e&&void 0!==e&&e.updatedAt&&R.sr.isStr(null===e||void 0===e?void 0:e.updatedAt)?(0,R.M7)(Date.parse(null===e||void 0===e?void 0:e.updatedAt)):""):null},gridArea:"updated",tab:$.General},{title:(0,A.t)("Images"),CellComponent:M.N.OfferImages,gridArea:"images",tab:$.Images}],K={};Y.forEach((function(e){var n=e.tab;n&&(K[n]?K[n].push(e):K[n]=[e])}));var X,Q,ee,ne,ie=i(5188),te=i(1819),oe=i(8577),le=i(1413),re=function(e){var n=(0,E.on)(),i=(0,h.useCallback)((function(e){return function(i){i.target===i.currentTarget&&n.remove(e)}}),[n]),t=(0,h.useMemo)((function(){return n.getStack().map((function(e,t){var o=e.RenderComponent,l=e.props,r=e.id;return(0,S.jsx)(ae,{className:"overlay-".concat(r),style:{zIndex:20+t},fillHeight:!0,fillWidth:!0,alignItems:"flex-end",onClick:i(r),children:(0,S.jsx)(o,(0,le.Z)((0,le.Z)({},l),{},{onClose:function(){n.remove(r)},overlayId:r,index:t}),"overlay-".concat(r))},"overlay-".concat(r))}))}),[i,n]);return(0,S.jsx)(de,{fillWidth:!0,fillHeight:!0,isActive:t.length>0,overflow:"hidden",children:t})},de=(0,v.ZP)(Z.ZP)(X||(X=(0,c.Z)(["\n  position: absolute;\n\n  top: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  left: ",";\n\n  opacity: ",";\n  visibility: ",";\n  pointer-events: ",";\n\n  z-index: 20;\n\n  background-color: ",";\n\n  transition: all ",";\n"])),(function(e){return e.isActive?0:"100%"}),(function(e){return e.isActive?1:0}),(function(e){return e.isActive?"visible":"hidden"}),(function(e){return e.isActive?"all":"none"}),(function(e){return e.theme.backdropColor}),(function(e){return e.theme.globals.timingFunctionMain})),ae=(0,v.ZP)(Z.ZP)(Q||(Q=(0,c.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 20;\n\n  max-width: 360px;\n\n  animation: TransformFromRight;\n\n  @media screen and (max-width: 768px) {\n    max-width: 400px;\n  }\n"]))),ue=(0,v.ZP)(Z.ZP)(ee||(ee=(0,c.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor})),ce=function(e){var n=e.toggleRightSideVisibility,i=(0,x.N4)(),t=fe(),o=(0,ie.f9)(),l=(0,te.xc)().products;return(0,S.jsxs)(ue,{children:[(0,S.jsx)(q,{product:null===i||void 0===i?void 0:i.currentOffer,onEdit:function(){var e;i.currentOffer&&o.openModal({Modal:oe.n.EditOffer,props:{_id:null===i||void 0===i||null===(e=i.currentOffer)||void 0===e?void 0:e._id,title:(0,A.t)("Edit offer")}})},onRefresh:function(){var e,n;null!==(e=i.currentOffer)&&void 0!==e&&e._id&&l.getProductFullInfo({data:{_id:null===(n=i.currentOffer)||void 0===n?void 0:n._id},onLoading:t.onLoading("offer")})},onOpenRightSide:n}),(0,S.jsx)(re,{})]})},se=i(7578),ve=i(9541),fe=function(){return(0,se.un)()},pe=v.ZP.div(ne||(ne=(0,c.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),f.VU),he=function(e){var n=e.path,i=(0,ve.J)({offer:{content:(0,A.t)("Loading product info")}}),t=(0,h.useState)(!1),o=(0,s.Z)(t,2),l=o[0],r=o[1],d=(0,h.useCallback)((function(){r((function(e){return!e}))}),[]);return(0,S.jsx)(se.f4,{value:i,children:(0,S.jsx)(x.ZP,{children:(0,S.jsx)(E.ZP,{children:(0,S.jsx)(p.default,{path:n,children:(0,S.jsxs)(pe,{children:[(0,S.jsx)(ce,{toggleRightSideVisibility:d}),(0,S.jsx)(B,{isVisible:l,toggleVisibility:d})]})})})})})}},1452:function(e,n,i){i.d(n,{N4:function(){return u}});var t=i(2791),o=i(1819),l=i(163),r=i(2930),d=i(3329),a=(0,t.createContext)({}),u=function(){return(0,t.useContext)(a)};n.ZP=function(e){var n=e.children,i=(0,o.xc)()[o.EJ.products],u=(0,r.useOfferOverviewLoaders)(),c=(0,l.Zx)(),s=null===c||void 0===c?void 0:c.offerId,v=(0,l.G2)({id:s});(0,t.useEffect)((function(){var e;null!==u&&void 0!==u&&null!==(e=u.isLoading)&&void 0!==e&&e.offer||s&&i.getProductFullInfo({data:{_id:s},onLoading:u.onLoading("offer")}).finally()}),[s]);return(0,t.useEffect)((function(){return function(){i.clearCurrent(void 0)}}),[]),(0,d.jsx)(a.Provider,{value:{clearCurrent:function(){i.clearCurrent(void 0)},currentOffer:v},children:n})}},6087:function(e,n,i){var t=i(1413),o=i(4165),l=i(5861),r=i(1819),d=i(2791),a=i(3772),u=i(6981),c=i(9071),s=i(5188),v=i(387),f=i(163),p=i(7578),h=i(3329);n.Z=function(e){var n,i=e.onSelect,x=e.selected,m=e.withActions,g=void 0===m||m,b=(0,s.f9)(),C=(0,r.xc)()[r.EJ.products],Z=(0,f.Zx)().offerId,j=(0,f.G2)({id:Z}),w=(0,p.un)(),y=(0,d.useCallback)(function(){var e=(0,l.Z)((0,o.Z)().mark((function e(n){var i,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.refresh,t=n.update,j){e.next=3;break}return e.abrupt("return");case 3:C.getAllPrices({data:{params:{offerId:null===j||void 0===j?void 0:j._id},refreshCurrent:i,updateCurrent:t},onLoading:null===w||void 0===w?void 0:w.onLoading("prices")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[j,w,C]),P=(0,d.useMemo)((function(){return{tableData:null===j||void 0===j?void 0:j.prices,tableTitles:u.po,onRowClick:function(e){if(i){if(null!==e&&void 0!==e&&e.rowData)return void i((0,v.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e._id&&i({_id:null===e||void 0===e?void 0:e._id})}},actionsCreator:g?function(e){var n,i=null===(n=e.selectedRow)||void 0===n?void 0:n._id;return[{icon:"refresh",type:"onlyIcon",onClick:function(){return y({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!i},{icon:"copy",type:"onlyIcon",disabled:!i},{icon:"edit",type:"onlyIcon",disabled:!i},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){b.open({ModalChildren:c.default,modalChildrenProps:{offer:j}})}}]}:void 0}}),[j,g,i,y,b]);return(0,d.useEffect)((function(){y({refresh:!0})}),[]),(0,h.jsx)(a.ZP,(0,t.Z)((0,t.Z)({},P),{},{isSearch:!1,isFilter:!1,isLoading:null===w||void 0===w||null===(n=w.isLoading)||void 0===n?void 0:n.prices,selectedRow:x}))}},4886:function(e,n,i){i.d(n,{Z:function(){return de}});var t,o,l,r,d,a,u,c,s,v,f=i(1413),p=i(7762),h=i(1452),x=i(5188),m=i(1819),g=i(3772),b=i(2791),C=i(401),Z=i(1185),j=i(7578),w=i(168),y=i(4942),P=i(3433),S=i(9439),_=i(4925),k=i(2360),I=i(8095),O=i(7348),B=i(6492),T=i(1383),D=i(6757),A=i(7121),L=i(6727),R=i(4695),M=i(163),E=i(4990),N=i(6681),W=i(6522),V=i(4235),$=i(4109),z=i(654),H=i(3329),F=(0,k.ZP)(I.ZP)(t||(t=(0,w.Z)(["\n  border-top: 1px solid ",";\n  &:last-child {\n    border-bottom: 1px solid ",";\n  }\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),G=(0,k.ZP)(I.ZP)(o||(o=(0,w.Z)(["\n  width: 100%;\n  display: grid;\n\n  grid-template-columns: repeat(",", 1fr);\n"])),(function(e){var n,i;return e.cmsKey&&null!==(n=null===(i=z.K[e.cmsKey])||void 0===i?void 0:i.numColumns)&&void 0!==n?n:2})),U=function(e){var n=e.item,i=e.isSelected,t=e.onSelect;return(0,H.jsx)(J,{variant:i?"filledSmall":"outlinedSmall",padding:"6px 8px",fontWeight:500,onClick:function(){t&&t(n._id)},children:n.label})},J=(0,k.ZP)($.Z)(l||(l=(0,w.Z)(["\n  width: 100%;\n  max-width: 100%;\n  min-width: 50px;\n"]))),q=function(e){var n,i=e.item,t=e.selectedIds,o=void 0===t?[]:t,l=e.onSelect,r=(0,b.useMemo)((function(){var e;return null===(e=i.childrenList)||void 0===e?void 0:e.map((function(e){var n=o.includes(e._id);return(0,H.jsx)(U,{item:e,isSelected:n,onSelect:function(n){return l&&l(i._id,n,null===e||void 0===e?void 0:e.label)}},"prop-value-".concat(e._id))}))}),[i._id,i.childrenList,l,o]);return(0,H.jsxs)(F,{gap:8,fillWidth:!0,padding:"8px 0 0",children:[(0,H.jsx)(B.x,{style:{flex:1,paddingLeft:12},$weight:500,children:i.label}),(0,H.jsx)(G,{fillWidth:!0,padding:"8px 0",gap:6,cmsKey:null===(n=i.cmsConfigs)||void 0===n?void 0:n.key,children:r})]},"property-box-".concat(i._id))},Y=i(9541),K=["onClose","title","defaultState","onSubmit","update","create","offerId","offer"],X=L.Ry().shape({label:L.Z_().required().min(5).max(64),sku:L.Z_().required().min(8).max(32),barCode:L.Z_().max(32),cms:L.Ry().shape({labels:L.Ry().shape({ua:L.Z_().min(5).max(64),en:L.Z_().min(5).max(64)})}),propertiesMap:L.Ry().shape({}).nonNullable().required(),offer:L.Ry().shape({_id:L.Z_().required(),label:L.Z_(),labels:L.Ry().shape({ua:L.Z_().min(5).max(64),en:L.Z_().min(5).max(64)})}),timeFrom:L.hT(),timeTo:L.hT(),price:L.Ry().shape({out:L.Z_()})}),Q=k.ZP.form(r||(r=(0,w.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 8px;\n\n  overflow: hidden;\n\n  max-width: 480px;\n  color: ",";\n  background-color: ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.tableBackgroundColor})),ee=(0,k.ZP)(I.ZP)(d||(d=(0,w.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),ne=(0,k.ZP)(I.ZP)(a||(a=(0,w.Z)(["\n  padding-bottom: 8px;\n"]))),ie=(0,k.ZP)(I.ZP)(u||(u=(0,w.Z)(["\n  padding: 0 4px;\n"]))),te=(0,k.ZP)(I.ZP)(c||(c=(0,w.Z)(["\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor})),oe=(0,k.ZP)(I.ZP)(s||(s=(0,w.Z)([""]))),le=(0,k.ZP)(I.ZP)(v||(v=(0,w.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),re=function(e){var n,i,t,o,l,r,d=e.onClose,a=e.title,u=e.defaultState,c=(e.onSubmit,e.update),s=(e.create,e.offerId),v=e.offer,h=(0,_.Z)(e,K),x=(0,m.xc)()[m.EJ.products],g=(0,O.WS)(),C=(0,Y.J)(),j=(0,M.G2)({id:c||s||(null===v||void 0===v?void 0:v._id)}),w=(0,D.d)(),k=(0,b.useState)(null===g||void 0===g?void 0:g[0]),L=(0,S.Z)(k,1)[0],$=(0,b.useState)({}),z=(0,S.Z)($,2),F=z[0],G=z[1],U=(0,b.useMemo)((function(){var e,n=null===L||void 0===L||null===(e=L.childrenList)||void 0===e?void 0:e.filter((function(e){return null===e||void 0===e?void 0:e.isSelectable})),i={};return{propertiesList:n,propertiesDataMap:Object.assign.apply(Object,[{}].concat((0,P.Z)((null!==n&&void 0!==n?n:[]).map((function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.childrenList)&&void 0!==n&&n.length&&(null===e||void 0===e||e.childrenList.forEach((function(e){i[e._id]=e}))),(0,y.Z)({},e._id,e)}))))),propValuesDataMap:i}}),[null===L||void 0===L?void 0:L.childrenList]),J=U.propertiesList,re=U.propValuesDataMap,de=(0,M.hN)({defaultValues:(0,Z.Ls)(u?(0,f.Z)((0,f.Z)({},u),{},{offer:j}):{offer:j}),resolver:(0,R.X)(X),reValidateMode:"onSubmit"}),ae=de.setValue,ue=de.handleSubmit,ce=de.register,se=de.formState.errors,ve=de.formValues,fe=de.reset;(0,b.useEffect)((function(){console.log({formValues:ve})}),[ve]);var pe=(0,b.useMemo)((function(){return null!==ve&&void 0!==ve&&ve.propertiesMap?Object.values(null===ve||void 0===ve?void 0:ve.propertiesMap):[]}),[null===ve||void 0===ve?void 0:ve.propertiesMap,ve]),he=(0,b.useMemo)((function(){return pe.length>0}),[pe.length]),xe=(0,b.useMemo)((function(){var e,n=Object.entries(F).sort((function(e,n){return e[0].localeCompare(n[0])})),i=null!==j&&void 0!==j&&j.label?[null===j||void 0===j?void 0:j.label]:[],t=(0,p.Z)(n);try{for(t.s();!(e=t.n()).done;){var o=e.value[1];(null===o||void 0===o?void 0:o.label)&&i.push(null===o||void 0===o?void 0:o.label)}}catch(l){t.e(l)}finally{t.f()}return{label:null!==n&&void 0!==n&&n.length?i.join(". "):"".concat(null===j||void 0===j?void 0:j.label,". {{VARIATION_LABEL}}")}}),[null===j||void 0===j?void 0:j.label,F]).label;(0,b.useEffect)((function(){ae("label",xe)}),[xe,ae]);var me=(0,b.useCallback)((function(e){c?x.updateVariationById({data:(0,Z.Ts)(e,c),onSuccess:function(e){console.log("updateVariationById onSuccess",e),d&&d()},onError:T.kl.toastAxiosError,onLoading:C.onLoading("create")}).then():x.createVariation({data:(0,Z.Ts)(e),onSuccess:function(e){w.state.close&&d&&d(),w.state.clear&&fe()},onError:T.kl.toastAxiosError,onLoading:C.onLoading("create")}).then()}),[C,d,fe,x,w.state.clear,w.state.close,c]),ge=(0,b.useCallback)((function(e,n,i){ae("propertiesMap.".concat(e),n),G((function(i){return(0,f.Z)((0,f.Z)({},i),{},(0,y.Z)({},e,null===re||void 0===re?void 0:re[n]))}))}),[re,ae]),be=(0,b.useCallback)((function(){ae("propertiesMap",{}),G({})}),[ae]),Ce=(0,b.useMemo)((function(){return null===J||void 0===J?void 0:J.map((function(e){return(0,H.jsx)(q,{item:e,selectedIds:pe,onSelect:ge},"prop_".concat(e._id))}))}),[J,pe,ge]);return(0,H.jsxs)(Q,(0,f.Z)((0,f.Z)({onSubmit:ue(me,(function(e){console.error("[SUBMIT ERROR]",e)})),onReset:be},h),{},{children:[(0,H.jsx)(A.iw,{onBackPress:d,title:null!==(n=a||(null===L||void 0===L?void 0:L.label))&&void 0!==n?n:"",canSubmit:he,okButton:!0}),(0,H.jsxs)(ee,{flex:1,fillWidth:!0,overflow:"auto",children:[(0,H.jsxs)(ie,{children:[(0,H.jsx)(E.Z,{label:(0,W.t)("label"),error:se.label,children:(0,H.jsx)(N.ZP,(0,f.Z)((0,f.Z)({},ce("label",{required:!0})),{},{placeholder:(0,W.t)("label"),required:!0}))}),(0,H.jsxs)(I.ZP,{fxDirection:"row",gap:8,fillWidth:!0,children:[(0,H.jsx)(E.Z,{label:(0,W.t)("sku"),error:se.sku,children:(0,H.jsx)(N.ZP,(0,f.Z)((0,f.Z)({},ce("sku",{required:!0})),{},{placeholder:(0,W.t)("sku"),required:!0}))}),(0,H.jsx)(E.Z,{label:(0,W.t)("barCode"),error:se.barCode,children:(0,H.jsx)(N.ZP,(0,f.Z)((0,f.Z)({},ce("barCode")),{},{placeholder:(0,W.t)("barCode")}))})]})]}),(0,H.jsx)(ne,{padding:"0 0 8px",margin:"8px 0 0",children:Ce}),!j&&(0,H.jsxs)(oe,{padding:"8px 0",fillWidth:!0,children:[(0,H.jsx)(le,{padding:"8px",justifyContent:"flex-end",fxDirection:"row",fillWidth:!0,children:(0,H.jsx)(B.x,{$size:13,$weight:500,children:(0,W.t)("Cms configs")})}),(0,H.jsxs)(ie,{children:[(0,H.jsx)(E.Z,{label:(0,W.t)("Language key"),error:null===se||void 0===se||null===(i=se.cmsConfigs)||void 0===i?void 0:i.key,children:(0,H.jsx)(V.Z,{disabled:!0})}),(0,H.jsx)(E.Z,{label:(0,W.t)("Label by lang key"),error:null===se||void 0===se||null===(t=se.cmsConfigs)||void 0===t||null===(o=t.labels)||void 0===o?void 0:o.ua,children:(0,H.jsx)(N.ZP,(0,f.Z)({placeholder:"Label"},ce("cmsConfigs.labels.ua")))})]})]})]}),(0,H.jsx)(A.AT,{loading:null===(l=C.isLoading)||void 0===l?void 0:l.create,resetButtonShown:!0,submitButtonText:null!==(r=C.isLoading)&&void 0!==r&&r.create?"Loading...":c?"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438":"\u0414\u043e\u0434\u0430\u0442\u0438",canSubmit:he,extraFooter:(0,H.jsx)(te,{children:(0,H.jsx)(D.Z,(0,f.Z)({},w))})})]}))},de=function(e){var n,i=e.onSelect,t=e.selected,o=e.withActions,l=void 0===o||o,r=(0,j.un)(),d=(0,h.N4)(),a=(0,x.f9)(),u=d.currentOffer,c=(0,m.xc)()[m.EJ.products],s=(0,b.useCallback)((function(e){var n=e.refresh,i=e.update;u&&c.getAllVariationsByProductId({data:{refreshCurrent:n,updateCurrent:i,offerId:u._id},onLoading:r.onLoading("variations")})}),[u,r,c]),v=(0,b.useMemo)((function(){var e,n,i={},t=(0,p.Z)(null!==(e=null===u||void 0===u?void 0:u.variations)&&void 0!==e?e:[]);try{for(t.s();!(n=t.n()).done;){var o,l=n.value.properties,r=(0,p.Z)(null!==l&&void 0!==l?l:[]);try{for(r.s();!(o=r.n()).done;){var d,a=o.value,c=null===a||void 0===a||null===(d=a.parent)||void 0===d?void 0:d._id;c&&a.parent&&(i[c]=a.parent)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}return(0,C.F9)(Object.values(i))}),[null===u||void 0===u?void 0:u.variations]),w=(0,b.useMemo)((function(){return{tableTitles:v,tableData:null===u||void 0===u?void 0:u.variations,transformData:C.m$,onRowClick:function(e){if(i){if(null!==e&&void 0!==e&&e.rowData)return void i((0,Z.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e._id&&i({_id:null===e||void 0===e?void 0:e._id})}},actionsCreator:l?function(e){var n,i=null===(n=e.selectedRow)||void 0===n?void 0:n._id;return[{icon:"refresh",type:"onlyIcon",onClick:function(){return s({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!i,onClick:function(){window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0430\u0440\u0456\u0430\u0446\u0456\u044e:\n ".concat(i))}},{icon:"copy",type:"onlyIcon",disabled:!i},{icon:"edit",type:"onlyIcon",disabled:!i,onClick:function(){var n;if(i&&e.selectedRow){var t=null===u||void 0===u||null===(n=u.variations)||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e._id)===i}));a.open({ModalChildren:re,modalChildrenProps:{update:i,defaultState:t}})}}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){a.open({ModalChildren:re,modalChildrenProps:{offer:d.currentOffer}})}}]}:void 0}}),[null===u||void 0===u?void 0:u.variations,s,a,i,d.currentOffer,v,l]);return(0,b.useEffect)((function(){u&&s({refresh:!0})}),[]),(0,H.jsx)(g.ZP,(0,f.Z)((0,f.Z)({},w),{},{isSearch:!1,isFilter:!1,isLoading:null===r||void 0===r||null===(n=r.isLoading)||void 0===n?void 0:n.variations,selectedRow:t}))}},710:function(e,n,i){var t=i(1413),o=i(9439),l=i(3772),r=i(2791),d=i(758),a=i(3664),u=i(5188),c=i(1819),s=i(7348),v=i(387),f=i(3329);n.Z=function(e){var n=e.onSelect,i=e.selected,p=e.withActions,h=(0,s.nr)().currentOffer,x=(0,u.f9)(),m=(0,c.xc)()[c.EJ.products],g=(0,r.useState)(!1),b=(0,o.Z)(g,2),C=b[0],Z=b[1],j=(0,r.useCallback)((function(e){var n=e.refresh;e.update;if(h){var i=(0,v.rE)(h);m.getAllInventories({data:{refreshCurrent:n,params:{offer:i}},onLoading:Z})}}),[h,m]),w=(0,r.useMemo)((function(){return{tableData:null===h||void 0===h?void 0:h.inventories,tableTitles:d.QX,onRowClick:function(e){if(n){if(null!==e&&void 0!==e&&e.rowData)return void n((0,v.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e._id&&n({_id:null===e||void 0===e?void 0:e._id})}},actionsCreator:p?function(e){return[{icon:"refresh",type:"onlyIcon",onClick:function(){return j({refresh:!0})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){x.open({ModalChildren:a.Z.CreateWarehouseDocument,modalChildrenProps:{}})}}]}:void 0}}),[null===h||void 0===h?void 0:h.inventories,j,x,n,p]);return(0,r.useEffect)((function(){j({refresh:!0})}),[]),(0,f.jsx)(l.ZP,(0,t.Z)((0,t.Z)({},w),{},{isSearch:!1,isFilter:!1,isLoading:C,selectedRow:i}))}},8495:function(e,n,i){i.d(n,{SI:function(){return u},VU:function(){return a}});var t,o,l,r=i(168),d=i(2360),a=(0,d.iv)(t||(t=(0,r.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,d.iv)(o||(o=(0,r.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,d.iv)(l||(l=(0,r.Z)(["\n  outline: 1px solid tomato;\n"])))},7739:function(e,n,i){i.d(n,{N:function(){return Re}});var t,o,l,r,d,a,u,c,s,v=i(2360),f=i(2791),p=i(6522),h=i(8095),x=i(6492),m=i(168),g=v.ZP.button(t||(t=(0,m.Z)(["\n  display: flex;\n  align-items: center;\n\n  border: 0;\n  background-color: transparent;\n\n  font-family: inherit;\n  font-weight: 600;\n  font-size: 13px;\n  padding: 6px 10px;\n  color: ",";\n\n  cursor: pointer;\n\n  &[disabled] {\n    pointer-events: none;\n    color: ",";\n  }\n"])),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.modalBorderColor})),b=(0,v.ZP)(h.ZP)(o||(o=(0,m.Z)(["\n  //min-height: 70px;\n  height: max-content;\n  min-height: max-content;\n\n  padding: 0 8px 8px;\n  gap: 4px;\n\n  //overflow: hidden;\n\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(e){return e.theme.sideBarBorderColor})),C=(0,v.ZP)(h.ZP)(l||(l=(0,m.Z)(["\n  justify-content: center;\n  align-items: center;\n\n  padding: 4px 8px;\n  min-height: 28px;\n  color: #fcfcfc;\n\n  background-color: ",";\n\n  //background-color: #f1f1f1;\n\n  border-radius: 4px;\n  border: 1px solid ",";\n"])),(function(e){return e.theme.fieldBackgroundColor}),(function(e){return e.theme.modalBorderColor})),Z=(0,v.ZP)(x.x)(r||(r=(0,m.Z)(["\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 100%;\n\n  color: ",";\n"])),(function(e){return e.$isTitle||e.$disabled?e.theme.globals.inputPlaceholderColor:void 0})),j=(0,v.ZP)(h.ZP)(d||(d=(0,m.Z)(["\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n"]))),w=(0,v.ZP)(h.ZP)(a||(a=(0,m.Z)(["\n  justify-content: center;\n\n  border-radius: 2px;\n  padding: 4px 12px;\n  height: 28px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.fieldBackgroundColor})),y={CategoryItem:(0,v.ZP)(h.ZP)(u||(u=(0,m.Z)(["\n  align-items: center;\n  justify-content: center;\n\n  flex-direction: row;\n\n  padding: 4px;\n\n  font-weight: 500;\n  font-size: 12px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  //background-color: ",";\n  border: 1px solid ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.field.backgroundColor}),(function(e){return e.theme.accentColor.base})),ImagesSetBox:j,CellText:Z,Tag:C,HeaderButton:g,Cell:b,DefaultTag:w},P=i(3329),S=function(e){var n=e.title,i=void 0===n?"Title":n,t=e.openOverlayButtonTitle,o=void 0===t?(0,p.t)("Change"):t,l=e.onOpenOverlayPress,r=e.editButtonText,d=void 0===r?(0,p.t)("Change"):r,a=e.onEditPress,u=e.acceptButtonText,c=void 0===u?(0,p.t)("Ok"):u,s=e.onAcceptPress,v=e.editMode,f=void 0!==v&&v,x=e.canAccept,m=void 0!==x&&x,g=e.cancelButtonText,b=void 0===g?(0,p.t)("Cancel"):g,C=e.onCancelPress;return(0,P.jsxs)(h.ZP,{fxDirection:"row",justifyContent:"space-between",height:"max-content",alignItems:"center",children:[(0,P.jsx)(y.CellText,{$isTitle:!0,$size:13,style:{marginRight:"auto"},children:i}),l&&(0,P.jsx)(y.HeaderButton,{type:"button",onClick:l,children:o}),!f&&a&&(0,P.jsx)(y.HeaderButton,{type:"button",onClick:a,children:d}),f&&C&&(0,P.jsx)(y.HeaderButton,{type:"button",onClick:C,children:b}),f&&s&&(0,P.jsx)(y.HeaderButton,{type:"button",disabled:!m,onClick:s,children:c})]})},_=i(4942),k=i(9439),I=i(1251),O=i(163),B=i(1185),T=i(9953),D=i(6087),A=i(4886),L=i(710),R=i(1413),M=i(3772),E=i(7348),N=i(387),W=i(9069),V=i(870),$=function(e){var n=e.onSelect,i=e.withActions,t=(e.selected,e.types),o=(0,f.useState)(!1),l=(0,k.Z)(o,1)[0],r=(0,E.q$)(V.cA.CONTRACTORS).directory,d=(0,f.useMemo)((function(){return r.filter((function(e){return t&&t.includes(e.type)}))}),[r,t]),a=(0,f.useMemo)((function(){return{tableData:d,tableTitles:W.PU,onRowClick:function(e){if(n){if(null!==e&&void 0!==e&&e.rowData)return void n((0,N.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e._id&&n({_id:null===e||void 0===e?void 0:e._id})}},actionsCreator:i?function(e){return[]}:void 0}}),[d,n,i]);return(0,P.jsx)(M.ZP,(0,R.Z)({isSearch:!1,isLoading:l},a))},z=function(e){return e.CUSTOMER="CUSTOMER",e.SUPPLIER="SUPPLIER",e.EMPLOYEE="EMPLOYEE",e.CONTRACTOR="CONTRACTOR",e.SUB_CONTRACTOR="SUB_CONTRACTOR",e.COMMISSION_AGENT="COMMISSION_AGENT",e.CONSIGNOR="CONSIGNOR",e.TRANSPORTER="TRANSPORTER",e.DELIVER="DELIVER",e}({}),H=i(758),F=i(1819),G=i(7578),U=function(e){var n,i=e.onSelect,t=e.selected,o=(e.withActions,(0,F.xc)().warehouses),l=(0,G.un)(),r=(0,E.eO)().warehouses,d=(0,f.useCallback)((function(){o.getAll({onLoading:l.onLoading("warehouses"),data:{refresh:!0}})}),[l,o]);(0,f.useEffect)((function(){d()}),[]);var a=(0,f.useMemo)((function(){return{tableData:r,tableTitles:H.A7,onRowClick:function(e){if(i){if(null!==e&&void 0!==e&&e.rowData)return void i((0,B.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e._id&&i({_id:null===e||void 0===e?void 0:e._id})}},actionsCreator:function(e){return[{icon:"refresh",onClick:d}]}}}),[d,i,r]);return(0,P.jsx)(M.ZP,(0,R.Z)((0,R.Z)({isSearch:!1},a),{},{isLoading:null===(n=l.isLoading)||void 0===n?void 0:n.warehouses,selectedRow:t}))},J=i(9541),q=function(e){return e.price="price",e.variation="variation",e.warehouse="warehouse",e.inventory="inventory",e.supplier="supplier",e}({}),Y=(0,B.H1)(q),K=v.ZP.form(c||(c=(0,m.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  flex: 1;\n\n  padding: 0 8px;\n\n  width: 480px;\n  max-width: 100%;\n\n  height: 100%;\n\n  background-color: ",";\n"])),(function(e){return e.theme.modalBackgroundColor})),X=(0,v.ZP)(h.ZP)(s||(s=(0,m.Z)(["\n  border-top: 1px solid ",";\n\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),Q=function(e){var n,i=e.onClose,t=(e.onSubmit,(0,J.J)()),o=null===(n=(0,O.Zx)())||void 0===n?void 0:n.offerId,l=(0,O.G2)({id:o}),r=(0,F.xc)()[F.EJ.products],d=(0,f.useState)(0),a=(0,k.Z)(d,2),u=a[0],c=a[1],s=(0,O.hN)(),v=s.setValue,h=s.formValues,x=s.handleSubmit,m=(0,f.useCallback)((function(e){v(Y[u].value,e)}),[u,v]),g=(0,f.useMemo)((function(){var e,n,i;return null!==(n=(e={},(0,_.Z)(e,q.warehouse,(0,P.jsx)(U,{onSelect:m,selected:null===h||void 0===h?void 0:h.warehouse})),(0,_.Z)(e,q.price,(0,P.jsx)(D.Z,{withActions:!0,onSelect:m,selected:null===h||void 0===h?void 0:h.price})),(0,_.Z)(e,q.variation,(0,P.jsx)(A.Z,{withActions:!0,onSelect:m,selected:null===h||void 0===h?void 0:h.variation})),(0,_.Z)(e,q.inventory,(0,P.jsx)(L.Z,{withActions:!0,onSelect:m,selected:null===h||void 0===h?void 0:h.inventory})),(0,_.Z)(e,q.supplier,(0,P.jsx)($,{types:[z.SUPPLIER],withActions:!0,onSelect:m,selected:null===h||void 0===h?void 0:h.supplier})),e)[null===(i=Y[u])||void 0===i?void 0:i.value])&&void 0!==n?n:null}),[u,null===h||void 0===h?void 0:h.inventory,null===h||void 0===h?void 0:h.price,null===h||void 0===h?void 0:h.supplier,null===h||void 0===h?void 0:h.variation,null===h||void 0===h?void 0:h.warehouse,m]),b=(0,f.useMemo)((function(){var e,n,i,t,o,r,d,a=null===l||void 0===l?void 0:l.defaults,c=(0,_.Z)({},null!==(e=null===Y||void 0===Y||null===(n=Y[u])||void 0===n?void 0:n.value)&&void 0!==e?e:"",!0);return c.variation?h.variation&&h.variation._id!==(null===a||void 0===a||null===(i=a.variation)||void 0===i?void 0:i._id):c.price?h.price&&h.price._id!==(null===a||void 0===a||null===(t=a.price)||void 0===t?void 0:t._id):c.warehouse?h.warehouse&&h.warehouse._id!==(null===a||void 0===a||null===(o=a.warehouse)||void 0===o?void 0:o._id):c.inventory?h.inventory&&h.inventory._id!==(null===a||void 0===a||null===(r=a.inventory)||void 0===r?void 0:r._id):c.supplier?h.supplier&&h.supplier._id!==(null===a||void 0===a||null===(d=a.supplier)||void 0===d?void 0:d._id):void 0}),[null===l||void 0===l?void 0:l.defaults,u,h.inventory,h.price,h.supplier,h.variation,h.warehouse]);return(0,P.jsx)(G.f4,{value:t,children:(0,P.jsxs)(K,{onSubmit:x((function(e){(null===l||void 0===l?void 0:l._id)&&r.setDefaults({data:{_id:null===l||void 0===l?void 0:l._id,defaults:(0,B.vg)(e),updateCurrent:!0},onSuccess:function(e,n){console.log(e,n)},onLoading:t.onLoading("submiting")})})),children:[(0,P.jsx)(I.xB,{onBackPress:i,title:(0,p.t)("Default values"),canSubmit:b}),(0,P.jsx)(T.Z,{filterOptions:Y,currentIndex:u,onChangeIndex:c}),(0,P.jsx)(X,{flex:1,fillWidth:!0,overflow:"hidden",children:g}),(0,P.jsx)(I.AT,{loading:t.hasLoading,onCreatePress:function(){},canSubmit:b})]})})},ee=i(3299);var ne,ie,te,oe,le,re,de,ae=i(4717),ue=i(8790),ce=i(7121),se=v.ZP.form(ne||(ne=(0,m.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  max-width: 480px;\n\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.sideBarBackgroundColor})),ve=function(e){var n=e.onClose,i=(0,E.nr)().currentOffer,t=(0,F.xc)()[F.EJ.products],o=(0,f.useState)((null===i||void 0===i?void 0:i.images)||[]),l=(0,k.Z)(o,2),r=l[0],d=l[1],a=(0,f.useState)(!1),u=(0,k.Z)(a,2),c=u[0],s=u[1],p=(0,v.Fg)();return(0,P.jsx)(se,{onSubmit:function(e){e.preventDefault(),i&&t.updateById({data:(0,R.Z)((0,R.Z)({},(0,N.rE)(i)),{},{data:{images:r},refreshCurrent:!0}),onSuccess:function(){n&&n()},onLoading:s})},children:(0,P.jsx)(ue.Z,{initialData:r,onClose:n,onChangeState:d,contentContainerStyle:{flex:1,borderTop:"1px solid ".concat(p.sideBarBorderColor),borderBottom:"1px solid ".concat(p.sideBarBorderColor)},renderHeader:(0,P.jsx)(ce.iw,{title:"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",onBackPress:n,okButton:!0,canSubmit:r.length>0}),FooterComponent:function(e){return(0,P.jsx)(ce.AT,{onCreatePress:e.onAddNewImageSetPress,loading:c,canSubmit:r.length>0})}})})},fe=i(4436),pe=i(3433),he=i(4109),xe=i(6785),me=function e(n){var i,t,o=n.item,l=(n.index,n.lvl),r=void 0===l?0:l,d=n.selectedIds,a=n.onRemove,u=void 0===a?function(){console.log("onRemove not passed",r)}:a,c=(0,f.useMemo)((function(){var n;return null===o||void 0===o||null===(n=o.childrenList)||void 0===n?void 0:n.map((function(n,i){return(0,P.jsx)(e,{item:n,index:i,onRemove:u,lvl:r+1,selectedIds:d},"item_lvl_".concat(r,"_").concat(n._id))}))}),[null===o||void 0===o?void 0:o.childrenList,r,u,d]),s=(0,f.useMemo)((function(){return d.includes(o._id)}),[o._id,d]);return(0,P.jsxs)(P.Fragment,{children:[s&&(0,P.jsxs)(ge,{fxDirection:"row",alignItems:"center",padding:"0 2px 0 12px",gap:2,children:[(null===o||void 0===o||null===(i=o.parent)||void 0===i?void 0:i.label)&&"".concat(null===o||void 0===o||null===(t=o.parent)||void 0===t?void 0:t.label,"/"),"".concat(null===o||void 0===o?void 0:o.label),(0,P.jsx)(he.Z,{variant:"onlyIcon",endIcon:"close",size:"24px",endIconSize:"80%",onClick:function(){return u&&u(o._id)}})]}),c]})},ge=(0,v.ZP)(h.ZP)(ie||(ie=(0,m.Z)(["\n  font-weight: 500;\n  font-size: 12px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  border: 1px solid ",";\n"])),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.accentColor.base})),be=function(e){var n=e.options,i=e.onSelect,t=e.onChange,o=e.defaultData,l=(0,f.useState)([]),r=(0,k.Z)(l,2),d=r[0],a=r[1],u=(0,f.useCallback)((function(e){a((function(n){var o=e?n.includes(null===e||void 0===e?void 0:e._id)?n.filter((function(n){return n!==(null===e||void 0===e?void 0:e._id)})):[].concat((0,pe.Z)(n),[e._id]):n;return i&&(null===e||void 0===e?void 0:e._id)&&i(null===e||void 0===e?void 0:e._id),t&&t(o),o}))}),[t,i]),c=(0,f.useCallback)((function(e){a((function(n){var i=n.filter((function(n){return n!==e}));return t&&t(i),i}))}),[t]),s=(0,f.useMemo)((function(){return null===n||void 0===n?void 0:n.map((function(e,n){return(0,P.jsx)(me,{item:e,index:n,selectedIds:d,onRemove:c},"item_lvl_0_".concat(e._id))}))}),[c,n,d]);return(0,f.useEffect)((function(){o&&a(o)}),[o]),(0,P.jsxs)(h.ZP,{fillWidth:!0,gap:6,children:[(0,P.jsx)(xe.Z,{treeMode:!0,dropDownIsAbsolute:!0,defaultValue:o,label:(0,p.ZP)("categories"),placeholder:(0,p.ZP)("categories"),required:!0,options:n,onSelect:u}),(0,P.jsx)(h.ZP,{fxDirection:"row",flexWrap:"wrap",gap:8,children:s})]})},Ce=(0,v.ZP)(h.ZP)(te||(te=(0,m.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),Ze=function(e){var n=e.onClose,i=(0,E.nr)().currentOffer,t=(0,E.q$)(V.cA.CATEGORIES_PROD).directory,o=(0,F.xc)()[F.EJ.products],l=(0,f.useState)([]),r=(0,k.Z)(l,2),d=r[0],a=r[1],u=(0,f.useMemo)((function(){var e,n;return(null===i||void 0===i||null===(e=i.categories)||void 0===e||null===(n=e.map((function(e){return e._id})))||void 0===n?void 0:n.toString())!==d.toString()}),[null===i||void 0===i?void 0:i.categories,d]);return(0,f.useEffect)((function(){null!==i&&void 0!==i&&i.categories&&a(null===i||void 0===i?void 0:i.categories.map((function(e){return e._id})))}),[null===i||void 0===i?void 0:i.categories]),(0,P.jsxs)(ce.dF,{onSubmit:function(e){e.preventDefault(),i&&o.updateById({data:(0,R.Z)((0,R.Z)({},(0,N.rE)(i)),{},{data:{categories:d},refreshCurrent:!0}),onSuccess:function(e,i){n&&n()}})},children:[(0,P.jsx)(ce.iw,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457",onBackPress:n,canSubmit:u,okButton:!0}),(0,P.jsx)(Ce,{padding:"0 0 8px 0",flex:1,children:(0,P.jsx)(be,{onChange:a,options:t,defaultData:d})}),(0,P.jsx)(ce.AT,{canSubmit:u})]})},je=function e(n){var i,t,o=n.item,l=n.lvl,r=void 0===l?0:l,d=n.selectedIds,a=(0,f.useMemo)((function(){var n;return null===o||void 0===o||null===(n=o.childrenList)||void 0===n?void 0:n.map((function(n,i){return(0,P.jsx)(e,{item:n,index:i,lvl:r+1,selectedIds:d},"item_lvl_".concat(r,"_").concat(n._id))}))}),[null===o||void 0===o?void 0:o.childrenList,r,d]),u=(0,f.useMemo)((function(){return d.includes(o._id)}),[o._id,d]);return(0,P.jsxs)(P.Fragment,{children:[u&&(0,P.jsxs)(y.CategoryItem,{fxDirection:"row",alignItems:"center",padding:"0 2px 0 12px",gap:2,children:[(null===o||void 0===o||null===(i=o.parent)||void 0===i?void 0:i.label)&&"".concat(null===o||void 0===o||null===(t=o.parent)||void 0===t?void 0:t.label,"/"),"".concat(null===o||void 0===o?void 0:o.label)]}),a]})},we=i(5481),ye=i(8828),Pe=i(1383),Se=function(e){var n=e.options,i=void 0===n?[]:n,t=e.colorIndicator,o=void 0===t||t,l=e.onChange,r=e.currentOption,d=e.currentIndex,a=e.disabled,u=(e.name,(0,f.useState)(0)),c=(0,k.Z)(u,2),s=c[0],p=c[1],m=(0,f.useMemo)((function(){return i?i[s]:null}),[s,i]),g=(0,v.Fg)();(0,f.useEffect)((function(){B.sr.isFun(l)&&B.sr.isUnd(null!==r&&void 0!==r?r:d)&&console.warn("Changer",'You try to use uncontrolled "Changer" component\n',"You need to pass option or index")}),[l,r,d]);var b=function(e){return function(){if(B.sr.isFun(l)){var n,t=s+e;l({index:t,value:null===(n=i[t])||void 0===n?void 0:n.value,option:i[t]})}else s>=0&&s+1<=(null===i||void 0===i?void 0:i.length)&&p((function(n){return n+e}))}};return(0,f.useEffect)((function(){!B.sr.isUnd(d)&&s>=0&&s+1<=i.length&&p(d)}),[d]),(0,f.useEffect)((function(){if(!B.sr.isUnd(r)){var e=i.findIndex((function(e){return null!==r&&void 0!==r&&r.value?(null===e||void 0===e?void 0:e.value)===(null===r||void 0===r?void 0:r.value):!(null===r||void 0===r||!r._id)&&(null===e||void 0===e?void 0:e._id)===(null===r||void 0===r?void 0:r._id)}));e>=0&&e!==s&&p(e)}}),[r]),(0,P.jsxs)(h.ZP,{fxDirection:"row",fillWidth:!0,height:"28px",alignItems:"center",gap:8,children:[(0,P.jsx)(he.Z,{variant:"onlyIconNoEffects",icon:"SmallArrowLeft",iconSize:"28px",disabled:a||0===s,onClick:b(-1)}),(0,P.jsxs)(h.ZP,{flex:1,alignItems:"stretch",justifyContent:"center",overflow:"hidden",style:{borderRadius:2,backgroundColor:g.fieldBackgroundColor,color:g.fontColorSidebar,height:"100%"},children:[(0,P.jsx)(h.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"center",alignItems:"center",flex:1,children:(0,P.jsx)(x.x,{$size:15,$weight:600,className:"inner",$ellipsisMode:!0,children:null===m||void 0===m?void 0:m.label})}),o&&(null===m||void 0===m?void 0:m.color)&&(0,P.jsx)(h.ZP,{fillWidth:!0,height:"4px",style:{backgroundColor:null===m||void 0===m?void 0:m.backgroundColor}})]}),(0,P.jsx)(he.Z,{variant:"onlyIconNoEffects",icon:"SmallArrowRight",iconSize:"28px",disabled:a||s+1===i.length,onClick:b(1)})]})},_e=i(2930),ke=i(4925),Ie=["onClose","title","defaultState","onSubmit","update","offer","template","onSelect","onChange"],Oe=(0,v.ZP)(h.ZP)(oe||(oe=(0,m.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n  padding-bottom: 8px;\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),Be=(0,v.ZP)(h.ZP)(le||(le=(0,m.Z)(["\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(e){return e.theme.sideBarBorderColor})),Te=(0,v.ZP)(h.ZP)(re||(re=(0,m.Z)(["\n  //display: grid;\n  //grid-template-columns: repeat(auto-fill, 25%);\n  //\n  //@media screen and (max-width: 480px) {\n  //  grid-template-columns: repeat(auto-fill, 50%);\n  //}\n"]))),De=(0,v.ZP)(he.Z)(de||(de=(0,m.Z)(["\n  flex-basis: 100px;\n  min-width: max-content;\n\n  //width: 100%;\n  //min-width: unset;\n\n  // border-radius: 2px;\n  // border: 2px solid ",";\n  //\n  // &:hover {\n  //   border: 2px solid ",";\n  // }\n"])),(function(e){return e.theme.accentColor.light}),(function(e){return e.theme.accentColor.base})),Ae=function(e){var n,i,t=e.onClose,o=e.title,l=(e.defaultState,e.onSubmit),r=e.update,d=e.offer,a=(e.template,e.onSelect),u=e.onChange,c=(0,ke.Z)(e,Ie),s=d,v=(0,F.xc)()[F.EJ.products],h=(0,E.WS)(),m=(0,f.useState)(null===(n=h[0])||void 0===n?void 0:n._id),g=(0,k.Z)(m,2),b=g[0],C=g[1],Z=(0,f.useState)(!1),j=(0,k.Z)(Z,2),w=j[0],y=j[1],S=(0,f.useState)([]),_=(0,k.Z)(S,2),I=_[0],O=_[1],B=(0,f.useMemo)((function(){return h.find((function(e){return e._id===b}))}),[b,h]),T=(0,f.useMemo)((function(){var e;return(null===s||void 0===s||null===(e=s.properties)||void 0===e?void 0:e.map((function(e){return e._id})).join(","))!==I.join(",")}),[null===s||void 0===s?void 0:s.properties,I]),D=(0,f.useCallback)((function(e){e.preventDefault();var n=null!==r&&void 0!==r?r:null===s||void 0===s?void 0:s._id;n?v.updateById({data:{_id:n,data:{properties:I}},onLoading:y,onSuccess:function(e,n){Pe.kl.success("Product updated"),t&&t()}}):console.debug("selectedIds",I),l&&l(I)}),[null===s||void 0===s?void 0:s._id,t,l,I,v,r]),A=(0,f.useCallback)((function(e,n){O((function(n){var i=n.includes(e)?n.filter((function(n){return n!==e})):[].concat((0,pe.Z)(n),[e]);return u&&u(i),a&&a(e),i}))}),[u,a]),L=(0,f.useMemo)((function(){var e;return null===B||void 0===B||null===(e=B.childrenList)||void 0===e?void 0:e.filter((function(e){return!(null!==e&&void 0!==e&&e.isSelectable)})).map((function(e){var n;return(0,P.jsxs)(Be,{gap:8,fillWidth:!0,padding:"8px 0 0",children:[(0,P.jsx)(x.x,{style:{flex:1,paddingLeft:12},$weight:500,children:e.label}),(0,P.jsx)(Te,{fillWidth:!0,padding:"8px 0",gap:6,flexWrap:"wrap",fxDirection:"row",children:null===(n=e.childrenList)||void 0===n?void 0:n.map((function(n){var i=I.includes(n._id);return(0,P.jsx)(De,{variant:i?"filledSmall":"outlinedSmall",padding:"6px 8px",fontWeight:500,onClick:function(){return A(n._id,e._id)},children:n.label},"prop-value-".concat(n._id))}))})]},"property-".concat(e._id))}))}),[A,I,null===B||void 0===B?void 0:B.childrenList]);return(0,f.useEffect)((function(){null!==s&&void 0!==s&&s.properties&&O(null===s||void 0===s?void 0:s.properties.map((function(e){return e._id})))}),[null===s||void 0===s?void 0:s.properties]),(0,P.jsxs)(ce.dF,(0,R.Z)((0,R.Z)({onSubmit:D},c),{},{children:[(0,P.jsx)(ce.iw,{onBackPress:t,canSubmit:T,title:null!==(i=o||(null===B||void 0===B?void 0:B.label))&&void 0!==i?i:"",okButton:!0}),(0,P.jsx)(xe.Z,{label:(0,p.t)("Available templates"),options:h,selectedValue:b,onSelect:function(e){C(null===e||void 0===e?void 0:e._id)}}),(0,P.jsx)(Oe,{flex:1,overflow:"auto",children:L}),(0,P.jsx)(ce.AT,{canSubmit:T,loading:w,submitButtonText:w?"Loading...":"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]}))},Le=function(e){var n=e.item,i=e.selectedItems,t=(0,f.useMemo)((function(){var e,t;return null===(e=n.childrenList)||void 0===e||null===(t=e.filter((function(e){return null===i||void 0===i?void 0:i.includes(e._id)})))||void 0===t?void 0:t.map((function(e,n){return(0,P.jsx)(y.CategoryItem,{className:"PROP_VALUE",maxWidth:"130px",children:e.label},"prop-v-".concat(e._id))}))}),[n.childrenList,i]);return(0,P.jsxs)(h.ZP,{className:"PROPERTY",gap:8,alignItems:"flex-end",children:[(0,P.jsx)(h.ZP,{alignItems:"center",fxDirection:"row",fillWidth:!0,gap:8,children:(0,P.jsx)(y.CellText,{$size:13,$weight:600,children:null===n||void 0===n?void 0:n.label})}),(0,P.jsx)(h.ZP,{fxDirection:"row",flexWrap:"wrap",fillWidth:!0,gap:6,children:t&&(null===t||void 0===t?void 0:t.length)>0?t:(0,P.jsx)(x.x,{$size:12,children:"---"})})]})},Re={Text:function(e){var n=e.cell,i=e.data,t=(0,f.useMemo)((function(){return n.getValue?n.getValue(i):null}),[n,i]);return(0,P.jsxs)(y.Cell,{children:[(0,P.jsx)(y.CellText,{$isTitle:!0,$size:12,children:null===n||void 0===n?void 0:n.title}),(0,P.jsx)(h.ZP,{fillWidth:!0,flex:1,fxDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",overflow:"hidden",style:{minHeight:24},children:(0,P.jsx)(y.CellText,{$isTitle:!t,$weight:500,children:t||(0,p.t)("undefined")})})]})},OfferStatusChanger:function(e){var n=e.cell,i=e.data,t=(0,_e.useOfferOverviewLoaders)(),o=(0,f.useState)(!1),l=(0,k.Z)(o,2),r=l[0],d=l[1],a=(0,f.useState)(null===i||void 0===i?void 0:i.approved),u=(0,k.Z)(a,2),c=u[0],s=u[1],v=(0,F.xc)()[F.EJ.products],x=(0,f.useMemo)((function(){return(0,we.g_)(c)}),[c]),m=(0,f.useMemo)((function(){return c!==(null===i||void 0===i?void 0:i.approved)}),[c,null===i||void 0===i?void 0:i.approved]),g=function(){var e;s(null!==(e=null===i||void 0===i?void 0:i.approved)&&void 0!==e?e:ye.iA[0].value),d(!1)};return(0,f.useEffect)((function(){null!==i&&void 0!==i&&i.approved&&s(i.approved)}),[]),(0,P.jsxs)(y.Cell,{children:[(0,P.jsx)(S,{title:null===n||void 0===n?void 0:n.title,onCancelPress:g,onEditPress:function(){return d(!0)},editMode:r}),(0,P.jsx)(h.ZP,{fillWidth:!0,flex:1,justifyContent:"flex-end",alignItems:"stretch",overflow:"hidden",style:{minHeight:24},gap:8,children:r?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Se,{disabled:!r,options:ye.iA,currentOption:{value:c},onChange:function(e){return s(null===e||void 0===e?void 0:e.value)}}),(0,P.jsxs)(h.ZP,{fxDirection:"row",gap:8,fillWidth:!0,children:[(0,P.jsx)(he.Z,{variant:"outlinedSmall",disabled:!m,onClick:g,children:(0,p.t)("Cancel")}),(0,P.jsx)(he.Z,{variant:"filledSmall",disabled:!m,onClick:function(){v.updateById({data:{_id:null===i||void 0===i?void 0:i._id,data:{approved:c},refreshCurrent:!0},onSuccess:function(){d(!1),Pe.kl.success("Product updated")},onLoading:null===t||void 0===t?void 0:t.onLoading("offer")})},children:(0,p.t)("Ok")})]})]}):(0,P.jsx)(y.Tag,{style:{alignSelf:"flex-end",borderColor:null===x||void 0===x?void 0:x.colorSecondary,backgroundColor:null===x||void 0===x?void 0:x.colorSecondary},children:(0,P.jsx)(y.CellText,{$isTitle:!c,$weight:600,$align:"right",children:(0,p.t)(c||"undefined")})})})]})},OfferDefaults:function(e){var n=e.data,i=e.cell,t=e.overlayHandler,o=(0,v.Fg)(),l=null===n||void 0===n?void 0:n.warehouse,r=null===n||void 0===n?void 0:n.supplier,d=null===n||void 0===n?void 0:n.price,a=(0,f.useMemo)((function(){var e,i=null===n||void 0===n?void 0:n.variation;return[{title:(0,p.t)("Label"),value:null===i||void 0===i?void 0:i.label},{title:(0,p.t)("Bar-code"),value:null===i||void 0===i?void 0:i.barCode},{title:(0,p.t)("SKU"),value:null===i||void 0===i?void 0:i.sku},{title:(0,p.t)("Props q-ty"),value:null===i||void 0===i||null===(e=i.properties)||void 0===e?void 0:e.length}].map((function(e,n){var i;return(0,P.jsxs)(h.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,P.jsx)(x.x,{$size:14,children:"".concat(null===e||void 0===e?void 0:e.title,": ")}),(0,P.jsx)(x.x,{$size:14,$weight:600,$align:"right",children:null!==(i=null===e||void 0===e?void 0:e.value)&&void 0!==i?i:"---"})]},null===e||void 0===e?void 0:e.title)}))}),[null===n||void 0===n?void 0:n.variation]),u=(0,f.useMemo)((function(){return function(e){var n,i,t,o,l,r;return[{title:(0,p.t)("Input"),amount:(0,ee.pU)(null===e||void 0===e?void 0:e.in)},{title:(0,p.t)("Output"),amount:(0,ee.pU)(null===e||void 0===e?void 0:e.out)},{title:(0,p.t)("Commission"),amount:(0,ee.pU)(null===e||void 0===e||null===(n=e.commission)||void 0===n?void 0:n.amount),percentage:null!==e&&void 0!==e&&null!==(i=e.commission)&&void 0!==i&&i.percentage?(0,ee.pU)(null===e||void 0===e||null===(t=e.commission)||void 0===t?void 0:t.percentage):void 0},{title:(0,p.t)("Markup"),amount:(0,ee.pU)(null===e||void 0===e||null===(o=e.markup)||void 0===o?void 0:o.amount),percentage:null!==e&&void 0!==e&&null!==(l=e.markup)&&void 0!==l&&l.percentage?(0,ee.pU)(null===e||void 0===e||null===(r=e.markup)||void 0===r?void 0:r.percentage):void 0}]}(d).map((function(e,n){return(0,P.jsxs)(h.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,P.jsx)(x.x,{children:"".concat(null===e||void 0===e?void 0:e.title,": ")}),(0,P.jsxs)(x.x,{$weight:600,children:[null===e||void 0===e?void 0:e.amount,(null===e||void 0===e?void 0:e.percentage)&&" | ".concat(null===e||void 0===e?void 0:e.percentage,"%")]})]},null===e||void 0===e?void 0:e.title)}))}),[d]);return(0,P.jsxs)(y.Cell,{style:{minHeight:"max-content"},children:[(0,P.jsx)(S,{title:null===i||void 0===i?void 0:i.title,onOpenOverlayPress:function(){t({RenderComponent:Q})}}),(0,P.jsxs)(h.ZP,{fillWidth:!0,children:[(0,P.jsx)(y.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,p.t)("warehouse")}),(0,P.jsx)(h.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",children:[{label:(0,p.t)("Label"),value:null===l||void 0===l?void 0:l.label},{label:(0,p.t)("Code"),value:null===l||void 0===l?void 0:l.code}].map((function(e){return(0,P.jsxs)(h.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,P.jsx)(x.x,{children:"".concat(e.label)}),(0,P.jsx)(x.x,{$weight:600,children:(null===e||void 0===e?void 0:e.value)||"---"})]},e.label)}))})]}),(0,P.jsxs)(h.ZP,{fillWidth:!0,children:[(0,P.jsx)(y.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,p.t)("supplier")}),[{label:(0,p.t)("Label"),value:null===r||void 0===r?void 0:r.label},{label:(0,p.t)("Code"),value:null===r||void 0===r?void 0:r.code}].map((function(e){return(0,P.jsxs)(h.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,P.jsx)(x.x,{children:"".concat(e.label)}),(0,P.jsx)(x.x,{$weight:600,children:(null===e||void 0===e?void 0:e.value)||"---"})]},e.label)}))]}),(0,P.jsxs)(h.ZP,{fillWidth:!0,gap:6,children:[(0,P.jsx)(y.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,p.t)("variation")}),(0,P.jsx)(h.ZP,{fillWidth:!0,children:a})]}),(0,P.jsxs)(h.ZP,{fillWidth:!0,gap:6,children:[(0,P.jsx)(y.CellText,{$weight:600,style:{color:null===o||void 0===o?void 0:o.fontColorHeader},children:(0,p.t)("price")}),(0,P.jsx)(h.ZP,{fillWidth:!0,children:u})]})]})},OfferImages:function(e){var n=e.data,i=e.cell,t=e.overlayHandler,o=(0,f.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.images)||void 0===e?void 0:e.map((function(e,n){return(0,P.jsx)(y.ImagesSetBox,{fxDirection:"row",gap:2,overflow:"auto",children:fe.E_.map((function(n){return(0,P.jsx)(ae.Z,{src:e[n.value]||"",disabled:!0},"img_".concat(n.value))}))},"set_".concat((null===e||void 0===e?void 0:e._id)||n))}))}),[null===n||void 0===n?void 0:n.images]);return(0,P.jsxs)(y.Cell,{style:{minHeight:"max-content",padding:"4px 0"},children:[(0,P.jsx)(S,{title:null===i||void 0===i?void 0:i.title,onOpenOverlayPress:function(){t({RenderComponent:ve})}}),(0,P.jsx)(h.ZP,{gap:2,height:"max-content",padding:"8px 0",style:{minHeight:26},children:o})]})},OfferCategories:function(e){var n=e.cell,i=e.overlayHandler,t=e.data,o=(0,E.q$)(V.cA.CATEGORIES_PROD).directory,l=(0,f.useMemo)((function(){var e,n;return null!==(e=null===t||void 0===t||null===(n=t.categories)||void 0===n?void 0:n.map((function(e){return e._id})))&&void 0!==e?e:[]}),[null===t||void 0===t?void 0:t.categories]),r=(0,f.useMemo)((function(){return o.map((function(e,n){return(0,P.jsx)(je,{selectedIds:l,item:e},"cat_".concat(e._id))}))}),[o,l]);return(0,P.jsxs)(y.Cell,{style:{minHeight:"max-content"},children:[(0,P.jsx)(S,{title:null===n||void 0===n?void 0:n.title,openOverlayButtonTitle:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",onOpenOverlayPress:function(){i({RenderComponent:Ze})}}),(0,P.jsx)(h.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"flex-end",flexWrap:"wrap",gap:8,style:{height:"max-content",minHeight:26},children:r})]})},OfferStaticProperties:function(e){var n,i=e.cell,t=e.overlayHandler,o=e.data,l=(0,E.nr)().properties,r=(0,f.useState)(null===(n=l[0])||void 0===n?void 0:n._id),d=(0,k.Z)(r,1)[0],a=(0,f.useMemo)((function(){return l.find((function(e){return e._id===d}))}),[d,l]),u=(0,f.useMemo)((function(){var e;return null===a||void 0===a||null===(e=a.childrenList)||void 0===e?void 0:e.filter((function(e){return!e.isSelectable}))}),[null===a||void 0===a?void 0:a.childrenList]),c=(0,f.useMemo)((function(){var e;return null===o||void 0===o||null===(e=o.properties)||void 0===e?void 0:e.map((function(e){return e._id}))}),[null===o||void 0===o?void 0:o.properties]),s=(0,f.useMemo)((function(){return null===u||void 0===u?void 0:u.map((function(e,n){return(0,P.jsx)(Le,{index:n,overlayHandler:t,item:e,selectedItems:c,data:o},"prop-".concat(null===e||void 0===e?void 0:e._id))}))}),[u,t,c,o]);return(0,P.jsxs)(y.Cell,{padding:"4px 4px 8px",gap:8,className:"PROPERTIES_LIST_CELL",style:{minHeight:s&&(null===s||void 0===s?void 0:s.length)>0?"max-content":50},children:[(0,P.jsx)(S,{title:null===i||void 0===i?void 0:i.title,onOpenOverlayPress:function(){t({RenderComponent:Ae,props:{offer:o}})}}),(0,P.jsx)(h.ZP,{fillWidth:!0,gap:8,alignItems:s&&(null===s||void 0===s?void 0:s.length)>0?"stretch":"flex-end",children:s&&(null===s||void 0===s?void 0:s.length)>0?s:(0,P.jsx)(y.CellText,{$weight:500,children:(0,p.t)("undefined")})})]})},OrderGroupInfo:function(e){var n,i,t=e.cell,o=(e.overlayHandler,e.data);return(0,P.jsxs)(y.Cell,{children:[(0,P.jsx)(S,{title:null===t||void 0===t?void 0:t.title}),null!==o&&void 0!==o&&null!==(n=o.group)&&void 0!==n&&n.magicLink?(0,P.jsx)(x.x,{children:null===o||void 0===o||null===(i=o.group)||void 0===i?void 0:i.magicLink}):(0,P.jsx)(y.CellText,{children:(0,p.t)("undefined")})]})},OrderCustomerInfo:function(e){var n=e.cell,i=e.data,t=(0,f.useMemo)((function(){var e,n,t,o,l,r=null===i||void 0===i?void 0:i.customer;return[{label:(0,p.t)("First name"),value:null===r||void 0===r||null===(e=r.name)||void 0===e?void 0:e.first,visible:"company"!==(null===r||void 0===r?void 0:r.businessType)},{label:(0,p.t)("Second name"),value:null===r||void 0===r||null===(n=r.name)||void 0===n?void 0:n.second,visible:"company"!==(null===r||void 0===r?void 0:r.businessType)},{label:(0,p.t)("Middle name"),value:null===r||void 0===r||null===(t=r.name)||void 0===t?void 0:t.middle,visible:"company"!==(null===r||void 0===r?void 0:r.businessType)},{label:(0,p.t)("Base label"),value:null===r||void 0===r||null===(o=r.name)||void 0===o?void 0:o.first,visible:"person"!==(null===r||void 0===r?void 0:r.businessType)},{label:(0,p.t)("Print"),value:null===r||void 0===r||null===(l=r.name)||void 0===l?void 0:l.second,visible:"person"!==(null===r||void 0===r?void 0:r.businessType)},{label:(0,p.t)("Email"),value:null===r||void 0===r?void 0:r.email,visible:!0},{label:(0,p.t)("Phone"),value:null===r||void 0===r?void 0:r.phone,visible:!0},{label:(0,p.t)("Business type"),value:null===r||void 0===r?void 0:r.businessType,visible:!0},{label:(0,p.t)("Sex type"),value:null===r||void 0===r?void 0:r.sexType,visible:!0},{label:(0,p.t)("Engagement type"),value:null===r||void 0===r?void 0:r.engagementSource,visible:!0},{label:(0,p.t)("Age"),value:null===r||void 0===r?void 0:r.age,visible:!0},{label:(0,p.t)("Tags"),value:null,visible:!0}].map((function(e){var n;return e.visible&&(0,P.jsxs)(h.ZP,{fxDirection:"row",padding:"6px",gap:8,alignItems:"center",justifyContent:"space-between",children:[(0,P.jsx)(x.x,{$size:11,children:null===e||void 0===e?void 0:e.label}),(0,P.jsx)(x.x,{$size:13,$weight:500,children:null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:(0,p.t)("undefined")})]},e.label)}))}),[null===i||void 0===i?void 0:i.customer]);return(0,P.jsxs)(y.Cell,{children:[(null===n||void 0===n?void 0:n.title)&&(0,P.jsx)(S,{title:null===n||void 0===n?void 0:n.title}),t]})},OrderInvoicing:function(e){e.cell;var n,i=e.data,t=(0,f.useMemo)((function(){var e;return[{label:(0,p.t)("Count"),value:null===i||void 0===i||null===(e=i.deliveries)||void 0===e?void 0:e.length}].map((function(e){var n;return(0,P.jsxs)(h.ZP,{fxDirection:"row",padding:"6px",gap:8,alignItems:"center",justifyContent:"space-between",children:[(0,P.jsx)(x.x,{$size:11,children:null===e||void 0===e?void 0:e.label}),(0,P.jsx)(x.x,{$size:13,$weight:500,children:null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:(0,p.t)("undefined")})]},e.label)}))}),[null===i||void 0===i||null===(n=i.deliveries)||void 0===n?void 0:n.length]);return(0,P.jsxs)(y.Cell,{children:[(0,P.jsx)(S,{title:(0,p.t)("General info")}),t]})},OrderDelivery:function(e){e.cell;var n,i=e.data,t=(0,f.useMemo)((function(){var e;return[{label:(0,p.t)("Count"),value:null===i||void 0===i||null===(e=i.deliveries)||void 0===e?void 0:e.length}].map((function(e){var n;return(0,P.jsxs)(h.ZP,{fxDirection:"row",padding:"6px",gap:8,alignItems:"center",justifyContent:"space-between",children:[(0,P.jsx)(x.x,{$size:11,children:null===e||void 0===e?void 0:e.label}),(0,P.jsx)(x.x,{$size:13,$weight:500,children:null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:(0,p.t)("undefined")})]},e.label)}))}),[null===i||void 0===i||null===(n=i.deliveries)||void 0===n?void 0:n.length]);return(0,P.jsxs)(y.Cell,{children:[(0,P.jsx)(S,{title:(0,p.t)("General info")}),t]})},OrderTotals:function(e){var n,i,t=e.data,o=e.cell,l=(0,f.useMemo)((function(){var e,n;return[{label:(0,p.t)("Amount"),value:(0,B.__)(null===t||void 0===t||null===(e=t.total)||void 0===e?void 0:e.amount)},{label:(0,p.t)("Items count"),value:null===t||void 0===t||null===(n=t.total)||void 0===n?void 0:n.items}].map((function(e){return(0,P.jsxs)(h.ZP,{fxDirection:"row",padding:"6px",justifyContent:"space-between",fillWidth:!0,gap:8,children:[(0,P.jsx)(x.x,{$size:11,children:e.label}),(0,P.jsx)(y.CellText,{$weight:600,children:null===e||void 0===e?void 0:e.value})]})}))}),[null===t||void 0===t||null===(n=t.total)||void 0===n?void 0:n.amount,null===t||void 0===t||null===(i=t.total)||void 0===i?void 0:i.items]);return(0,P.jsxs)(y.Cell,{children:[(0,P.jsx)(S,{title:o.title}),l]})}}},4235:function(e,n,i){var t=i(6522),o=i(2791),l=i(8553),r=i(9964),d=i(3329);n.Z=function(e){var n=e.onChange,i=e.disabled,a=(0,o.useMemo)((function(){return(0,l.H1)(t.bp)}),[]);return(0,d.jsx)(r.Z,{disabled:i,options:a,onSelect:function(e){return n&&n(e.value)}})}},758:function(e,n,i){i.d(n,{A7:function(){return l},QX:function(){return r},fK:function(){return a}});var t=i(6522),o=i(1185),l=[{top:{name:(0,t.t)("label"),getData:function(e){return e.label}},bottom:{name:(0,t.t)("code"),getData:function(e){return e.code}},width:"220px",action:"valueByPath"},{top:{name:(0,t.t)("type"),getData:function(e){return null===e||void 0===e?void 0:e.type}},width:"125px",action:"valueByPath"},{top:{name:(0,t.t)("email")},bottom:{name:(0,t.t)("phone")},width:"180px",action:"contacts"},{top:{name:(0,t.t)("Address"),getData:function(e){return e.address||"\u043d\u0435 \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"}},bottom:{name:"".concat((0,t.t)("longitude"),"/").concat((0,t.t)("latitude")),getData:function(e){var n,i;return"".concat(((null===(n=e.location)||void 0===n?void 0:n.longitude)||"---")+", "+((null===(i=e.location)||void 0===i?void 0:i.latitude)||"---"))}},width:"175px",action:"valueByPath"},{top:{name:(0,t.t)("Manager"),getData:function(e){var n,i;return"".concat((null===(n=e.manager)||void 0===n||null===(i=n.user)||void 0===i?void 0:i.name)||"---")}},bottom:{name:(0,t.t)("email"),getData:function(e){var n,i;return"".concat((null===(n=e.manager)||void 0===n||null===(i=n.user)||void 0===i?void 0:i.email)||"---")}},width:"150px",action:"valueByPath"},{top:{name:(0,t.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,t.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}],r=[{top:{name:(0,t.t)("variationLabel"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.label}},getImgPreview:function(e){var n,i,t;return null!==(n=e.offer)&&void 0!==n&&n.images?null===(i=e.offer)||void 0===i||null===(t=i.images[0])||void 0===t?void 0:t.img_preview:""},width:"270px",action:"doubleDataWithAvatar"},{top:{name:(0,t.t)("sku"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.sku}},bottom:{name:(0,t.t)("barCode"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,t.t)("type"),path:"type"},bottom:{name:(0,t.t)("status"),path:"status"},width:"120px",action:"status"},{top:{name:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c",align:"end",getData:function(e){return e.stock||0}},bottom:{name:"\u0420\u0435\u0437\u0435\u0440\u0432",align:"end",getData:function(e){return e.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f",align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.awaiting)||0}},bottom:{name:"\u0412\u0442\u0440\u0430\u0447\u0435\u043d\u043e",align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,t.t)("warehouse"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,t.t)("code"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",path:"description"},width:"190px",action:"valueByPath"},{top:{name:"\u0410\u0432\u0442\u043e\u0440",path:"author.name"},bottom:{name:"\u0415\u043c\u0435\u0439\u043b",path:"author.email"},width:"190px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}],d=[{top:{name:(0,t.t)("Price OUT"),align:"end",getData:function(e){var n;return(0,o.__)(Number((null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.in)||0))}},bottom:{name:(0,t.t)("Price IN"),align:"end",getData:function(e){var n;return(0,o.__)(Number((null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.out)||0))}},width:"170px",action:"valueByPath"},{top:{name:(0,t.t)("comment"),align:"start",path:"description"},width:"150px",action:"valueByPath"}],a=[{top:{name:(0,t.t)("batch")},width:"150px",action:"valueByPath"},{top:{name:(0,t.t)("warehouse"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,t.t)("code"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:(0,t.t)("Stock"),align:"end",getData:function(e){return e.stock||0}},bottom:{name:(0,t.t)("Reserved"),align:"end",getData:function(e){return e.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:(0,t.t)("Awaiting"),align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.awaiting)||0}},bottom:{name:(0,t.t)("Lost"),align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,t.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,t.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}].concat(d)}}]);
//# sourceMappingURL=953.e6e94f9e.chunk.js.map