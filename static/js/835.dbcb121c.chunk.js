"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[835],{9184:function(e,t,n){var a,i,o,r,l=n(168),d=n(4165),u=n(4942),c=n(1413),s=n(5861),v=n(3433),h=n(9439),p=n(2791),f=n(8095),m=n(3350),g=n(870),b=n(3855),x=n(6492),Z=n(7348),P=n(2928),w=n(3329);t.Z=function(e){var t=e.onChangeIds,n=e.onChange,a=e.offer,i=(0,Z.q$)(g.cA.CATEGORIES_PROD).directory,o=(0,p.useState)({}),r=(0,h.Z)(o,2),l=r[0],m=r[1],b=(0,p.useMemo)((function(){var e;if(null!==a&&void 0!==a&&a.categories){var t={};return null===a||void 0===a||null===(e=a.categories)||void 0===e||e.forEach((function(e){var n,a=null===(n=e.parent)||void 0===n?void 0:n._id,i=null===e||void 0===e?void 0:e._id;i&&(a&&(t[a]=t[a]?[].concat((0,v.Z)(t[a]),[i]):[i]),t[i]=t[i]?[].concat((0,v.Z)(t[i]),[i]):[i])})),Object.entries(t).forEach((function(e){var n,a=(0,h.Z)(e,2),i=a[0],o=a[1];(null===(n=t[i])||void 0===n?void 0:n.length)>1&&(t[i]=Array.from(new Set(o)))})),t}}),[null===a||void 0===a?void 0:a.categories]);(0,p.useEffect)((function(){b&&m(b)}),[]);var x=(0,p.useCallback)(function(){var e=(0,s.Z)((0,d.Z)().mark((function e(a){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&n(a._id),m((function(e){var n,i=a.checked?(0,c.Z)((0,c.Z)({},e),{},(0,u.Z)({},a._id,[a._id])):(0,c.Z)((0,c.Z)({},e),{},(0,u.Z)({},a._id,[]));if(a.checked){var o=a.pathIds;a.pathIds.forEach((function(e,t){var n;(o=o.slice(1,o.length),e===a._id)?i[e]=[e]:i[e]=(0,v.Z)(new Set([].concat((0,v.Z)(null!==(n=i[e])&&void 0!==n?n:[]),(0,v.Z)(o))))}))}else{var r;null===e||void 0===e||null===(r=e[a._id])||void 0===r||r.forEach((function(e){i[e]=[]})),i[a._id]=[]}return t&&t((n=i,Object.keys(n).filter((function(e){var t;return null===n||void 0===n||null===(t=n[e])||void 0===t?void 0:t.length})))),i}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,t]),P=(0,p.useMemo)((function(){var e=function(e){var t;return!(null===l||void 0===l||null===(t=l[e])||void 0===t||!t.length)};return i.map((function(t){return(0,w.jsx)(y,{children:(0,w.jsx)(S,{item:t,depth:0,pathIds:[],isChecked:e,onChange:x})},t._id)}))}),[l,x,i]);return(0,w.jsx)(f.ZP,{minWidth:"max-content",children:P})};var y=(0,m.ZP)(f.ZP)(a||(a=(0,l.Z)(["\n  //padding: 8px 0;\n  // &:not(:first-child) {\n  //   border-top: 1px solid ",";\n  // }\n"])),(function(e){return e.theme.sideBarBorderColor})),C=(0,m.ZP)(f.j6)(i||(i=(0,l.Z)([""]))),D=(0,m.ZP)(f.Ov)(o||(o=(0,l.Z)(["\n  &:not(:last-child) {\n  }\n\n  min-width: max-content;\n"]))),j=(0,m.ZP)(f.ZP)(r||(r=(0,l.Z)(["\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor})),S=function e(t){var n,a,i,o,r=t.pathIds,l=t.item,d=t.depth,u=void 0===d?0:d,c=t.onChange,s=t.isChecked,m=(0,p.useState)(!(null===l||void 0===l||null===(n=l.childrenList)||void 0===n||!n.length)),g=(0,h.Z)(m,2),Z=g[0],y=g[1],S=null!==(a=null===l||void 0===l?void 0:l._id)&&void 0!==a?a:"",_=[].concat((0,v.Z)(r),[S]);return(0,w.jsxs)(D,{padding:u?"0 0 0 16px":"",children:[(0,w.jsxs)(j,{gap:12,fxDirection:"row",alignItems:"center",padding:"8px 0",children:[(0,w.jsx)(P.ZP,{variant:"onlyIconNoEffects",iconSize:"22px",disabled:!(null!==l&&void 0!==l&&null!==(i=l.childrenList)&&void 0!==i&&i.length),icon:Z?"SmallArrowDown":"SmallArrowRight",onClick:function(){y((function(e){return!e}))}}),(0,w.jsxs)(f.HN,{flex:1,fxDirection:"row",alignItems:"center",gap:12,padding:"4px 6px",children:[(0,w.jsx)(b.Z,{size:"22px",checked:!!s&&s(S),onChange:function(e){c&&c({pathIds:_,_id:S,checked:e.checked})}}),(0,w.jsx)(x.x,{$size:14,$weight:500,children:l.label})]})]}),Z&&(0,w.jsx)(C,{children:null===(o=l.childrenList)||void 0===o?void 0:o.map((function(t){return(0,w.jsx)(e,{depth:u+1,item:t,onChange:c,isChecked:s,pathIds:_},t._id)}))})]},"cate-value-".concat(S))}},713:function(e,t,n){n.d(t,{Z:function(){return z}});var a,i,o,r,l=n(168),d=n(4942),u=n(1413),c=n(3433),s=n(9439),v=n(8095),h=n(2791),p=n(3350),f=n(6492),m=n(3665),g=n(4925),b=n(9656),x=n(4652),Z=n(4990),P=n(6681),w=n(9964),y=n(2928),C=n(4897),D=n(3329),j=["title","fillHeight","onSubmit","onClose","defaultState","type"],S=p.ZP.div(a||(a=(0,l.Z)(["\n  flex: 1;\n\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 1fr min-content min-content;\n  gap: 6px;\n\n  padding: 8px;\n  overflow: hidden;\n"]))),_=p.ZP.label(i||(i=(0,l.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  height: 100%;\n  width: 100%;\n  max-height: 100%;\n\n  fill: ",";\n\n  border-radius: 2px;\n  border: 2px solid ",";\n\n  transition: ",";\n\n  pointer-events: ",";\n  &:hover {\n    fill: ",";\n    border-color: ",";\n  }\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.globals.timingFnMui}),(function(e){return e.disabled?"none":"all"}),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.accentColor.light})),B=p.ZP.img(o||(o=(0,l.Z)(["\n  //min-width: 100px;\n  //max-width: 100px;\n  //\n  //height: 145px;\n\n  max-height: 100%;\n"]))),k=function(e){var t,n=e.title,a=e.fillHeight,i=void 0===a||a,o=e.onSubmit,r=e.onClose,l=e.defaultState,c=(e.type,(0,g.Z)(e,j)),p=(0,h.useState)(C.E_[0]),f=(0,s.Z)(p,2),m=f[0],k=f[1],I=(0,h.useState)(l||{}),M=(0,s.Z)(I,2),A=M[0],W=M[1],E=(0,h.useRef)(null);return(0,D.jsx)(b.Z,(0,u.Z)((0,u.Z)({title:n||"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0438\u0439 \u0441\u0435\u0442 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u044c",fillHeight:i},c),{},{width:"360px",onClose:r,onSubmit:function(){o&&o(A),r&&r()},children:(0,D.jsxs)(S,{children:[(0,D.jsx)(v.ZP,{fillWidth:!0,fillHeight:!0,alignItems:"center",overflow:"hidden",children:null!==m&&void 0!==m&&m.value&&A[null===m||void 0===m?void 0:m.value]?(0,D.jsx)(B,{src:A[null===m||void 0===m?void 0:m.value]}):(0,D.jsxs)(_,{disabled:!0,children:[(0,D.jsx)(x.Z,{icon:"plus",size:"56px"}),(0,D.jsx)("input",{name:"img_preview",type:"file",className:"visually-hidden",disabled:!0})]})}),(null===m||void 0===m?void 0:m.value)&&(0,D.jsxs)(v.ZP,{fxDirection:"row",gap:6,alignItems:"flex-end",children:[(0,D.jsx)(Z.Z,{label:null===m||void 0===m||null===(t=m.label)||void 0===t?void 0:t.replace("img_","image ").toUpperCase(),required:null===m||void 0===m?void 0:m.required,children:(0,D.jsx)(P.ZP,{ref:E,name:null===m||void 0===m?void 0:m.value,value:A[null===m||void 0===m?void 0:m.value]||"",onChange:function(e){var t=e.target,n=t.name,a=t.value;W((function(e){return(0,u.Z)((0,u.Z)({},e),{},(0,d.Z)({},n,a))}))},placeholder:"\u0412\u043f\u0438\u0448\u0456\u0442\u044c \u0430\u0431\u043e \u0432\u0441\u0442\u0430\u0432\u0442\u0435 \u043f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f \u043d\u0430 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",required:null===m||void 0===m?void 0:m.required,autoFocus:!0})}),(0,D.jsx)(y.ZP,{variant:"onlyIcon",icon:"close",size:"28px",iconSize:"100%",onClick:function(){var e=null===m||void 0===m?void 0:m.value;e&&W((function(t){return(0,u.Z)((0,u.Z)({},t),{},(0,d.Z)({},e,""))}))}})]}),(0,D.jsx)(v.ZP,{padding:"8px 0",children:(0,D.jsx)(w.Z,{options:C.E_,currentOption:m,onSelect:function(e){k(e.option)}})})]})}))},I=n(4717),M=n(6522),A=n(755),W=n(763),E=(0,p.ZP)(v.ZP)(r||(r=(0,l.Z)(["\n  & .scrollBox {\n    &::-webkit-scrollbar {\n      width: 0;\n      height: 0;\n    }\n  }\n"]))),$=function(e){var t=e.onMoveUpPress,n=e.onMoveDownPress,a=e.currentOrder,i=e.canMoveDown,o=e.canMoveUp;return(0,D.jsxs)(v.ZP,{style:{minWidth:"fit-content"},fillHeight:!0,gap:6,justifyContent:"space-between",overflow:"hidden",children:[(0,D.jsx)(y.ZP,{variant:"onlyIcon",icon:"SmallArrowUp",disabled:!o,onClick:t}),(0,D.jsx)(f.x,{$align:"center",$weight:600,children:a||0}),(0,D.jsx)(y.ZP,{variant:"onlyIcon",icon:"SmallArrowDown",disabled:!i,onClick:n})]})},z=function(e){var t=e.onChangeState,n=e.renderHeader,a=e.initialData,i=e.canEditOrder,o=void 0===i||i,r=e.onClose,l=e.FooterComponent,p=e.contentContainerStyle,g=e.hideLabel,b=e.onlyPreviews,x=void 0===b||b,Z=(0,m.kw)(),P=(0,h.useState)([]),w=(0,s.Z)(P,2),j=w[0],S=w[1];(0,h.useEffect)((function(){a&&S(a)}),[a]);var _=(0,h.useCallback)((function(e,t){S((function(n){var a=e+t;return n.map((function(t,n){return a>j.length||a<1?t:t.order===a?(0,u.Z)((0,u.Z)({},t),{},{order:e}):t.order===e?(0,u.Z)((0,u.Z)({},t),{},{order:a}):t}))}))}),[j.length]),B=(0,h.useCallback)((function(e){var n=e.setIndex,i=e.type,o=e.uri;if(t&&a){var r=null===a||void 0===a?void 0:a.map((function(e,t){return n===t?(0,u.Z)((0,u.Z)({},e),{},(0,d.Z)({},i,o)):e}));t(r)}else S((function(e){return e.map((function(e,t){return n===t?(0,u.Z)((0,u.Z)({},e),{},(0,d.Z)({},i,o)):e}))}))}),[a,t]),z=(0,h.useCallback)((function(e){e.setId;var n=e.setIndex,a=e.type;(a!==A.Q.img_preview||window.confirm("\u0411\u0443\u0434\u0435 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e \u0446\u0456\u043b\u0438\u0439 \u0441\u0435\u0442 \u0444\u043e\u0442\u043e.\n\u041f\u0440\u043e\u0434\u043e\u0432\u0436\u0438\u0442\u0438?"))&&S((function(e){var i=e.map((function(e,t){return n===t?(0,u.Z)((0,u.Z)({},e),{},(0,d.Z)({},a,"")):e})).filter((function(e){return e.img_preview})).map((function(e,t){return(0,u.Z)((0,u.Z)({},e),{},{order:t+1})}));return t&&t(i),i}))}),[t]),L=function(){Z.open({ModalChildren:k,modalChildrenProps:{onSubmit:function(e){!function(e){if(t){var n=[].concat((0,c.Z)(null!==a&&void 0!==a?a:[]),[(0,u.Z)((0,u.Z)({},e),{},{order:j.length+1})]);t(n)}else S((function(t){return[].concat((0,c.Z)(t),[(0,u.Z)((0,u.Z)({},e),{},{order:j.length+1})])}))}(e)}}})},R=(0,h.useMemo)((function(){var e,t=j;try{t=(0,c.Z)(j).sort((function(e,t){var n,a;return(null!==(n=null===e||void 0===e?void 0:e.order)&&void 0!==n?n:0)-(null!==(a=null===t||void 0===t?void 0:t.order)&&void 0!==a?a:0)}))}catch(n){t=j}return null===(e=t)||void 0===e?void 0:e.map((function(e,n){var a,i,r,l=(x?C.E_.slice(0,1):C.E_).map((function(t,a){var i;return(0,D.jsx)(I.Z,{src:e[null===t||void 0===t?void 0:t.value],title:null!==(i=t.label)&&void 0!==i?i:"",onEditPress:function(){Z.open({ModalChildren:k,modalChildrenProps:{defaultState:e,type:t.value,onSubmit:function(a){t.value&&a[t.value]&&B({setId:null===e||void 0===e?void 0:e._id,setIndex:n,uri:a[t.value],type:t.value})}}})},onDeletePress:function(){z({setId:"",setIndex:n,type:t.value})}},"small-prev_".concat(a))}));return(0,D.jsxs)(E,{gap:6,fxDirection:"row",maxWidth:"100%",overflow:"hidden",children:[(null===(a=t)||void 0===a?void 0:a.length)>1&&o&&!x&&(0,D.jsx)($,{currentOrder:null===e||void 0===e?void 0:e.order,canMoveUp:(null!==(i=null===e||void 0===e?void 0:e.order)&&void 0!==i?i:0)>1,onMoveUpPress:function(){(0,W.isNumber)(e.order)&&_(e.order,-1)},canMoveDown:(null!==(r=null===e||void 0===e?void 0:e.order)&&void 0!==r?r:0)<j.length,onMoveDownPress:function(){(0,W.isNumber)(e.order)&&_(e.order,1)}}),(0,D.jsx)(v.ZP,{className:"scrollBox",overflow:"auto",gap:6,fxDirection:"row",children:l})]},"images-set_".concat((null===e||void 0===e?void 0:e._id)||n))}))}),[o,j,B,_,z,Z,x]);return(0,h.useEffect)((function(){a&&S(a)}),[]),(0,D.jsxs)(v.ZP,{maxWidth:"100%",overflow:"hidden",flex:1,children:[n||(0,D.jsxs)(v.ZP,{padding:"4px 8px",height:"32px",fxDirection:"row",gap:2,alignItems:"center",justifyContent:"space-between",children:[(0,D.jsx)(f.x,{$weight:600,$size:14,children:!g&&(0,M.t)("Images")}),(0,D.jsx)(y.ZP,{type:"button",variant:"textExtraSmall",onClick:r||L,children:r?(0,M.t)("Close"):(0,M.t)("Add")})]}),(0,D.jsx)(v.ZP,{gap:6,padding:"8px 0",style:p,fxDirection:x?"row":"column",flexWrap:x?"wrap":"unset",children:R}),l&&(0,D.jsx)(l,{onAddNewImageSetPress:L})]})}},4809:function(e,t,n){var a,i,o,r=n(168),l=n(7762),d=n(9439),u=n(4942),c=n(7533),s=n(2791),v=n(6492),h=n(3350),p=n(2928),f=n(8095),m=n(7348),g=n(6522),b=n(7802),x=n(4652),Z=n(3329),P=(a={},(0,u.Z)(a,c.b2.size,{numColumns:4}),(0,u.Z)(a,c.b2.color,{numColumns:2}),(0,u.Z)(a,c.b2.style,{numColumns:2}),(0,u.Z)(a,c.b2.care,{numColumns:1}),a),w=(0,h.ZP)(f.ZP)(i||(i=(0,r.Z)(["\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n\n  //padding-bottom: 8px;\n\n  &:last-child {\n    border-bottom: 1px solid ",";\n  }\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),y=(0,h.ZP)(f.ZP)(o||(o=(0,r.Z)(["\n  border-top: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}));t.Z=function(e){var t,n,a,i,o=e.item,r=e.selectedIds,u=e.onSelect,c=e.isOpen,h=e.multiple,C=e.onChangeIds,D=(0,m.i7)(),j=(0,s.useState)(null!==c&&void 0!==c&&c),S=(0,d.Z)(j,2),_=S[0],B=S[1],k=(0,s.useMemo)((function(){var e,t,n;if(null!==(e=o.childrenList)&&void 0!==e&&e.length)return o.childrenList;var a,i=null===o||void 0===o?void 0:o._id,r=[],d=null!==(t=null===(n=D.propertiesKeysMap)||void 0===n?void 0:n[i])&&void 0!==t?t:[],u=(0,l.Z)(d);try{for(u.s();!(a=u.n()).done;){var c,s=a.value,v=null===(c=D.propertiesDataMap)||void 0===c?void 0:c[s];v&&r.push(v)}}catch(h){u.e(h)}finally{u.f()}return r}),[null===o||void 0===o?void 0:o._id,o.childrenList,D.propertiesDataMap,D.propertiesKeysMap]);(0,s.useEffect)((function(){null!==k&&void 0!==k&&k.length&&B(!0)}),[null===k||void 0===k?void 0:k.length]);var I=null!==(t=o.cmsConfigs)&&void 0!==t&&t.type?null===P||void 0===P?void 0:P[null===(n=o.cmsConfigs)||void 0===n?void 0:n.type]:void 0;return(0,Z.jsxs)(w,{fillWidth:!0,children:[(0,Z.jsxs)(p.ZP,{gap:8,fxDirection:"row",padding:"6px 0",justifyContent:"space-between",alignItems:"center",onClick:function(){B((function(e){return!e}))},children:[(0,Z.jsx)(v.x,{$weight:500,$padding:"0 8px",children:o.label}),(0,Z.jsx)(x.Z,{size:"28px",icon:_?"SmallArrowDown":"SmallArrowLeft"})]}),_&&(0,Z.jsxs)(y,{padding:"8px 0",children:[(null===(a=o.cmsConfigs)||void 0===a?void 0:a.type)&&(0,Z.jsx)(f.ZP,{gap:6,padding:"6px",justifyContent:"center",alignItems:"center",children:(0,Z.jsxs)(v.x,{$size:11,$weight:400,children:[(0,g.t)("Cms type:")," ",'"'.concat(null===(i=o.cmsConfigs)||void 0===i?void 0:i.type,'"')]})}),(0,Z.jsx)(b.Z,{numColumns:null===I||void 0===I?void 0:I.numColumns,name:o._id,multiple:h,value:r,options:k,onSelectValue:function(e){u&&u(e.name,e.value)},onChange:function(e){C&&C(o._id,e)}})]})]},"property-box-".concat(o._id))}},4717:function(e,t,n){var a,i,o,r=n(168),l=n(2928),d=n(6492),u=n(3350),c=n(8095),s=(n(2791),n(4652)),v=n(3329),h=(0,u.ZP)(c.ZP)(a||(a=(0,r.Z)(["\n  min-width: 112px;\n  //width: 90px;\n\n  aspect-ratio: 1/1.35;\n\n  object-position: center;\n  object-fit: contain;\n\n  pointer-events: ",";\n\n  &:hover {\n    & .top {\n      min-height: 36px;\n    }\n  }\n"])),(function(e){return e.disabled?"none":"all"})),p=(0,u.ZP)(c.ZP)(i||(i=(0,r.Z)(["\n  //position: absolute;\n  //top: 0;\n  //left: 0;\n  //z-index: 5;\n\n  height: 0;\n  min-height: 0;\n  padding: 0 6px;\n  overflow: hidden;\n\n  //background-color: rgba(26, 26, 26, 0.2);\n  //backdrop-filter: blur(3px);\n\n  transition: min-height ",";\n"])),(function(e){return e.theme.globals.timingFnMain})),f=(0,u.ZP)(c.ZP)(o||(o=(0,r.Z)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 5;\n\n  background-color: rgba(26, 26, 26, 0.2);\n  backdrop-filter: blur(3px);\n"])));t.Z=function(e){var t=e.title,n=e.src,a=e.onDeletePress,i=e.onEditPress,o=e.disabled;e.maxWidth,e.maxHeight;return(0,v.jsxs)(h,{className:"ImagePreview_".concat(t),fillWidth:!0,overflow:"hidden",alignItems:"center",justifyContent:"center",gap:4,height:"115px",border:"1px solid lightgrey",borderRadius:"2px",style:{position:"relative"},disabled:o,children:[n?(0,v.jsx)("img",{src:n,alt:t,style:{width:"100%"}}):(0,v.jsx)(s.Z,{icon:"gallery",size:"28px",fill:"lightgrey"}),(0,v.jsxs)(f,{fillWidth:!0,children:[t&&(0,v.jsx)(c.ZP,{padding:"4px",children:(0,v.jsx)(d.x,{$size:12,$weight:500,color:"#fff",children:t})}),(0,v.jsxs)(p,{className:"top",fxDirection:"row",gap:6,style:{fill:"#fff"},alignItems:"center",justifyContent:"space-between",fillWidth:!0,children:[(0,v.jsx)(l.ZP,{variant:"onlyIcon",icon:"edit",iconSize:"28px",disabled:!i,onClick:i}),(0,v.jsx)(l.ZP,{variant:"onlyIcon",icon:"delete",iconSize:"28px",disabled:!a,onClick:a})]})]})]})}},2825:function(e,t,n){n.d(t,{c:function(){return Z}});var a=n(7762),i=n(1413),o=n(9439),r=n(3691),l=n(7348),d=n(2791),u=n(8095),c=n(4990),s=n(6522),v=n(9964),h=n(3383),p=n(9953),f=n(6492),m=n(9541),g=n(1819),b=n(2928),x=n(3329),Z=function(e){var t=e.selected,n=e.onSelect,Z=e.filterValue,P=e.hasFilter,w=void 0!==P&&P,y=e.defaultValue,C=(0,l.i7)(),D=(0,d.useState)((0,i.Z)({type:r.iv.GOODS,isSelectable:!0},Z)),j=(0,o.Z)(D,2),S=j[0],_=j[1],B=(0,d.useState)(y),k=(0,o.Z)(B,2),I=k[0],M=k[1],A=(0,m.J)(),W=(0,g.xc)().get(g.EJ.offers),E=(0,d.useMemo)((function(){var e;if(null!==(e=C.properties)&&void 0!==e&&e.length)return C.properties.filter((function(e){return!e.parent}));var t,n=C.propertiesByTypeKeysMap[S.type],i=[],o=(0,a.Z)(n);try{for(o.s();!(t=o.n()).done;){var r,l=t.value,d=null===(r=C.propertiesDataMap)||void 0===r?void 0:r[l];(null===d||void 0===d||!d.parent)&&d&&i.push(d)}}catch(u){o.e(u)}finally{o.f()}return i}),[S.type,C.properties,C.propertiesByTypeKeysMap,C.propertiesDataMap]);return(0,d.useEffect)((function(){t&&M(t)}),[t]),(0,d.useEffect)((function(){if(null!==E&&void 0!==E&&E.length&&!t){var e=E.find((function(e){return e._id===(null===I||void 0===I?void 0:I._id)}));n&&e?n(e):M(e)}}),[null===I||void 0===I?void 0:I._id,n,E,t]),(0,x.jsxs)(u.ZP,{gap:8,children:[(0,x.jsxs)(u.ZP,{padding:"4px 8px",fxDirection:"row",gap:12,alignItems:"center",fillWidth:!0,justifyContent:"space-between",children:[(0,x.jsx)(b.ZP,{variant:"text",sizeType:"extraSmall",isLoading:A.isLoading.refreshTree,onClick:function(){W.getAllProperties({params:{dataView:"tree",depth:3},onLoading:A.onLoading("refreshTree")})},children:(0,s.t)("Refresh")}),(0,x.jsx)(b.ZP,{variant:"text",sizeType:"extraSmall",children:(0,s.t)("Add")})]}),w&&(0,x.jsx)(c.Z,{label:(0,s.t)("Select type"),children:(0,x.jsx)(v.Z,{options:h.LC,value:S.type,onSelect:function(e){var t=e.value;_((function(e){return(0,i.Z)((0,i.Z)({},e),{},{type:t})}))}})}),null!==y&&void 0!==y&&y._id?(0,x.jsxs)(u.ZP,{padding:"8px",gap:8,fxDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,x.jsx)(f.x,{$align:"center",$size:15,$weight:500,children:(0,s.t)("Current")}),(0,x.jsx)(f.x,{$align:"center",$size:15,$weight:600,children:null===t||void 0===t?void 0:t.label})]}):(0,x.jsx)(c.Z,{label:(0,s.t)("Select properties group"),children:(0,x.jsx)(p.Z,{options:E,onOptSelect:function(e){n&&e?n(e):M(e)},defaultFilterValue:(null===t||void 0===t?void 0:t._id)||(null===I||void 0===I?void 0:I._id)})})]})}},4897:function(e,t,n){n.d(t,{SQ:function(){return u},E_:function(){return c},Dr:function(){return h},Cs:function(){return v},Y5:function(){return s},$4:function(){return p.$4},qo:function(){return p.qo},Qc:function(){return p.Qc},ni:function(){return p.ni},KS:function(){return p.KS}});var a=n(6522),i=n(3691),o=n(5481),r=n(3306),l=n(755),d=n(3299),u=((0,o.Gg)(i.Hb),(0,r.H1)(i.Hb)),c=[{label:"Preview",value:l.Q.img_preview,required:!0},{label:"1x",value:l.Q.img_1x},{label:"2x",value:l.Q.img_2x},{label:"Webp",value:l.Q.webp}],s=[{top:{name:(0,a.t)("label"),getData:function(e){return null===e||void 0===e?void 0:e.label}},getImgPreview:function(e){var t,n;return e.images?null===(t=e.images)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.img_preview:void 0},width:"270px",action:"dataWithAvatar"},{top:{name:(0,a.t)("sku"),getData:function(e){return null===e||void 0===e?void 0:e.sku}},bottom:{name:(0,a.t)("barCode"),getData:function(e){return null===e||void 0===e?void 0:e.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,a.t)("type"),path:"type"},width:"100px",action:"status"},{bottom:{name:(0,a.t)("status"),getData:function(e){return e.approved}},top:{name:(0,a.t)("Visibility"),getData:function(e){return e.visible?"visible":"hidden"}},width:"120px",action:"status"},{top:{name:(0,a.t)("Price OUT"),align:"end",getData:function(e){var t,n;return null!==(t=e.price)&&void 0!==t&&t.out?(0,d.pU)(null===(n=e.price)||void 0===n?void 0:n.out):"--.--"}},bottom:{name:(0,a.t)("Price IN"),align:"end",getData:function(e){var t,n;return null!==(t=e.price)&&void 0!==t&&t.in?(0,d.pU)(null===(n=e.price)||void 0===n?void 0:n.in):"--.--"}},width:"150px",action:"valueByPath"},{top:{name:(0,a.t)("Variation label"),getData:function(e){var t;return(null===(t=e.variation)||void 0===t?void 0:t.label)||"---"}},bottom:{name:(0,a.t)("SKU"),getData:function(e){var t;return(null===(t=e.variation)||void 0===t?void 0:t.sku)||"---"}},width:"190px",action:"valueByPath"},{top:{name:(0,a.t)("Warehouse"),getData:function(e){var t;return null===(t=e.warehouse)||void 0===t?void 0:t.label}},bottom:{name:(0,a.t)("Code"),getData:function(e){var t;return null===(t=e.warehouse)||void 0===t?void 0:t.code}},width:"150px",action:"valueByPath"},{top:{name:"\u0411\u0440\u0435\u043d\u0434",getData:function(e){var t;return null===(t=e.brand)||void 0===t?void 0:t.label}},bottom:{name:"\u0412\u0438\u0440\u043e\u0431\u043d\u0438\u043a",getData:function(e){var t;return null===(t=e.brand)||void 0===t?void 0:t.manufacturer}},width:"180px",action:"doubleDataWithAvatar"},{top:{name:"\u041e\u043d\u043e\u0432\u0438\u0432",getData:function(e){var t,n,a;return null!==(t=null===e||void 0===e||null===(n=e.editor)||void 0===n||null===(a=n.user)||void 0===a?void 0:a.email)&&void 0!==t?t:"---"}},bottom:{name:"\u0410\u0432\u0442\u043e\u0440",getData:function(e){var t,n,a;return null!==(t=null===e||void 0===e||null===(n=e.author)||void 0===n||null===(a=n.user)||void 0===a?void 0:a.email)&&void 0!==t?t:"---"}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},bottom:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},width:"150px",action:"dateDbl"}];var v=[{dataPath:"sku",label:"SKU"},{dataPath:"label",label:(0,a.t)("Label")},{dataPath:"barCode",label:(0,a.t)("Bar-code")},{dataPath:"approved",label:(0,a.t)("Status")},{dataPath:"price.out",label:(0,a.t)("Price")},{dataPath:"createdAt",label:(0,a.t)("Created at")},{dataPath:"updatedAt",label:(0,a.t)("Updated at")},{dataPath:"deletedAt",label:(0,a.t)("Deleted at")},{dataPath:"brand.label",label:(0,a.t)("Brand label")},{dataPath:"warehouse.code",label:(0,a.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,a.t)("Warehouse label")}],h=[{dataPath:"sku",label:"SKU"},{dataPath:"label",label:(0,a.t)("Label")},{dataPath:"barCode",label:(0,a.t)("Bar-code")},{dataPath:"warehouse.code",label:(0,a.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,a.t)("Warehouse label")},{dataPath:"brand.label",label:(0,a.t)("Brand label")}],p=(n(4683),n(2517))},2517:function(e,t,n){n.d(t,{$4:function(){return v},KS:function(){return h},Qc:function(){return p},ni:function(){return c},qo:function(){return f}});var a=n(3433),i=n(2973),o=n(6522),r=n(5481),l=n(6981),d=n(3299),u={top:{name:(0,o.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,o.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateDbl"},c=((0,r.Gg)(i.D),i.D.new,(0,o.t)(i.D.new),i.D.inWork,(0,o.t)(i.D.inWork),i.D.rejectedByCustomer,(0,o.t)(i.D.rejectedByCustomer),i.D.rejectedByManager,(0,o.t)(i.D.rejectedByManager),i.D.active,(0,o.t)(i.D.active),i.D.fulfilled,(0,o.t)(i.D.fulfilled),i.D.fulfilledWithRefund,(0,o.t)(i.D.fulfilledWithRefund),i.D.archived,(0,o.t)(i.D.archived),i.D.expired,(0,o.t)(i.D.expired),[{top:{name:"".concat((0,o.t)("Status")),getData:function(e){return e.status}},bottom:{name:(0,o.t)("Priority"),getData:function(e){return(0,o.t)("undefined")}},width:"150px",action:"status"},{top:{name:(0,o.t)("Total amount"),align:"end",getData:function(e){var t,n;return(0,d.pU)(null!==(t=null===(n=e.summary)||void 0===n?void 0:n.netto)&&void 0!==t?t:0)}},bottom:{name:(0,o.t)("Slots count"),align:"end",getData:function(e){var t,n;return(null===(t=e.slots)||void 0===t?void 0:t.length)||(null===(n=e.summary)||void 0===n?void 0:n.slotsCount)}},width:"120px",action:"numberWithSpaces"},{top:{name:(0,o.t)("Reference / Internal"),getData:function(e){var t;return null===e||void 0===e||null===(t=e.reference)||void 0===t?void 0:t.internal}},bottom:{name:(0,o.t)("Reference / External"),getData:function(e){var t;return null===e||void 0===e||null===(t=e.reference)||void 0===t?void 0:t.external}},width:"190px",action:"valueByPath"},{top:{name:(0,o.t)("Group"),getData:function(e){var t,n;return null===e||void 0===e||null===(t=e.group)||void 0===t||null===(n=t.reference)||void 0===n?void 0:n.internal}},bottom:{name:(0,o.t)("Strategy"),getData:function(e){var t;return null===e||void 0===e||null===(t=e.group)||void 0===t?void 0:t.strategy}},width:"180px",action:"valueByPath"},{top:{name:(0,o.t)("Customer"),getData:function(e){var t,n,a,i,o,r,l;return(null===(t=e.customer)||void 0===t?void 0:t.name)&&(null===(n=e.customer)||void 0===n||null===(a=n.name)||void 0===a?void 0:a.first)+" "+(null===(i=e.customer)||void 0===i||null===(o=i.name)||void 0===o?void 0:o.second)||(null===(r=e.customer)||void 0===r?void 0:r.label)&&(null===(l=e.customer)||void 0===l?void 0:l.label.base)||"--- ---"}},bottom:{name:(0,o.t)("Phone"),path:"customer.phone"},width:"180px",action:"valueByPath"},{top:{name:(0,o.t)("Receiver"),getData:function(e){var t,n,a,i,o,r,l;return(null===(t=e.receiver)||void 0===t?void 0:t.name)&&(null===(n=e.receiver)||void 0===n||null===(a=n.name)||void 0===a?void 0:a.first)+" "+(null===(i=e.receiver)||void 0===i||null===(o=i.name)||void 0===o?void 0:o.second)||(null===(r=e.receiver)||void 0===r?void 0:r.label)&&(null===(l=e.receiver)||void 0===l?void 0:l.label.base)||"--- ---"}},bottom:{name:(0,o.t)("Phone"),path:"receiver.phone"},width:"180px",action:"valueByPath"},{top:{name:(0,o.t)("Invoices")},width:"200px",action:"tags"},{top:{name:(0,o.t)("Payments")},width:"200px",action:"valueByPath"},{top:{name:(0,o.t)("Deliveries")},width:"200px",action:"valueByPath"},{top:{name:(0,o.t)("comment"),path:"comment"},width:"170px",action:"valueByPath"},{top:{name:(0,o.t)("Refunds")},width:"200px",action:"valueByPath"},{top:{name:(0,o.t)("Manager"),path:"manager.name"},bottom:{name:(0,o.t)("email"),path:"manager.email"},width:"180px",action:"valueByPath"},u]),s=["cashback","bonus","discount"];var v=[{top:{name:(0,o.t)("Offer label"),getData:function(e){var t;return null===(t=e.offer)||void 0===t?void 0:t.label}},bottom:{name:(0,o.t)("Variation label"),getData:function(e){var t;return null===(t=e.variation)||void 0===t?void 0:t.label}},action:"valueByPath",width:"210px"},{top:{name:(0,o.t)("Total amount"),getData:function(e){return e.netto}},bottom:{name:(0,o.t)("Total q-ty"),getData:function(e){return e.quantity}},action:"valueByPath",width:"125px"}].concat((0,a.Z)((0,l.yL)()),(0,a.Z)(s.map((function(e){return{top:{name:(0,o.t)(e),align:"end",getData:function(t){var n;return(0,d.pU)(null===t||void 0===t||null===(n=t[e])||void 0===n?void 0:n.amount)}},bottom:{name:(0,o.t)(e),align:"end",getData:function(t){var n;return(0,d.pU)(null===t||void 0===t||null===(n=t[e])||void 0===n?void 0:n.percentage)}},action:"valueByPath",width:"90px"}}))),[{top:{name:(0,o.t)("Offer sku"),getData:function(e){var t;return null===(t=e.offer)||void 0===t?void 0:t.sku}},bottom:{name:(0,o.t)("Variation sku"),getData:function(e){var t;return null===(t=e.variation)||void 0===t?void 0:t.sku}},action:"valueByPath",width:"150px"},{top:{name:(0,o.t)("Offer bar-code"),getData:function(e){var t;return null===(t=e.offer)||void 0===t?void 0:t.barCode}},bottom:{name:(0,o.t)("Variation bar-code"),getData:function(e){var t;return null===(t=e.variation)||void 0===t?void 0:t.barCode}},action:"valueByPath",width:"150px"},u]),h=v,p=[{dataPath:"reference.internal",label:(0,o.t)("Reference / Internal")},{dataPath:"reference.external",label:(0,o.t)("Reference / External")},{dataPath:"group.reference.internal",label:(0,o.t)("Reference / Internal")+" / ".concat((0,o.t)("Group").toLowerCase())},{dataPath:"group.reference.external",label:(0,o.t)("Reference / External")+" / ".concat((0,o.t)("Group").toLowerCase())},{dataPath:"barCode",label:(0,o.t)("Bar-code")},{dataPath:"status",label:(0,o.t)("Status")},{dataPath:"manager.email",label:(0,o.t)("Manager email")},{dataPath:"manager.code",label:(0,o.t)("Manager code")},{dataPath:"managers.email",label:(0,o.t)("Any managers email")},{dataPath:"managers.code",label:(0,o.t)("Any managers code")},{dataPath:"customer.email",label:(0,o.t)("Customer email")},{dataPath:"customer.phone",label:(0,o.t)("Customer phone")},{dataPath:"customer.name.first",label:(0,o.t)("Customer first name")},{dataPath:"customer.name.second",label:(0,o.t)("Customer second name")},{dataPath:"customer.reference",label:(0,o.t)("Customer reference")},{dataPath:"receiver.email",label:(0,o.t)("Customer email")},{dataPath:"receiver.phone",label:(0,o.t)("Customer phone")},{dataPath:"receiver.name.first",label:(0,o.t)("Customer first name")},{dataPath:"receiver.name.second",label:(0,o.t)("Customer second name")},{dataPath:"receiver.reference",label:(0,o.t)("Customer reference")},{dataPath:"warehouse.code",label:(0,o.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,o.t)("Warehouse label")},{dataPath:"createdAt",label:(0,o.t)("Created at")},{dataPath:"updatedAt",label:(0,o.t)("Updated at")},{dataPath:"deletedAt",label:(0,o.t)("Deleted at")}],f=[{dataPath:"reference.internal",label:(0,o.t)("Reference / Internal")},{dataPath:"reference.external",label:(0,o.t)("Reference / External")},{dataPath:"barCode",label:(0,o.t)("Bar-code")},{dataPath:"warehouse.code",label:(0,o.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,o.t)("Warehouse label")},{dataPath:"manager.email",label:(0,o.t)("Manager email")},{dataPath:"manager.code",label:(0,o.t)("Manager code")},{dataPath:"managers.email",label:(0,o.t)("Any managers email")},{dataPath:"managers.code",label:(0,o.t)("Any managers code")}]},755:function(e,t,n){n.d(t,{Q:function(){return a}});var a=function(e){return e.img_preview="img_preview",e.img_1x="img_1x",e.img_2x="img_2x",e.webp="webp",e}({})}}]);
//# sourceMappingURL=835.dbcb121c.chunk.js.map