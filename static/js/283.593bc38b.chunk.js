"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[283],{6283:function(e,t,n){n.r(t);var o,u=n(168),l=n(1413),r=n(9439),i=n(4925),a=n(2791),c=n(2242),d=n(2360),s=n(4990),Z=n(6681),p=n(6727),v=n(4343),b=n(6785),h=n(7870),m=n(256),y=n(8095),f=n(6522),C=n(870),g=n(7805),x=n(4695),S=n(6757),O=n(3329),_=["edit","onSubmit","copy","defaultState","addInputs"],j=p.Ry().shape({_id:p.Z_(),label:p.Z_()}).nullable().optional(),A=p.Ry().shape({_id:p.Z_(),label:p.Z_()}).required(),I=d.ZP.div(o||(o=(0,u.Z)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 12px;\n"])),(function(e){return e.gridTemplateColumns||"1fr 120px"}));t.default=function(e){e.edit;var t,n,o,u,d=e.onSubmit,E=(e.copy,e.defaultState),N=(e.addInputs,(0,i.Z)(e,_)),R=(0,m.CG)().directories.directories,T=(0,a.useState)(null===E||void 0===E?void 0:E.type),F=(0,r.Z)(T,2),P=F[0],q=F[1],M=(0,g.hN)({defaultValues:(0,l.Z)((0,l.Z)({currency:"UAH"},E),{},{eventDate:(0,h._1)(null===E||void 0===E?void 0:E.eventDate)}),resolver:(0,x.X)((u=P,p.Ry().shape({amount:p.Rx().required(),type:p.Z_().required(),eventDate:p.Z_().required(),comment:p.Z_().optional(),countIn:u&&["INCOME","TRANSFER"].includes(u)?A:j,subCountIn:j,countOut:u&&["EXPENSE","TRANSFER"].includes(u)?A:j,subCountOut:j,category:A,subCategory:j}))),reValidateMode:"onSubmit"}),V=M.formState,L=V.errors,k=V.isValid,D=M.formValues,X=M.register,w=M.setValue,U=M.registerSelect,G=M.handleSubmit,H=M.toggleAfterSubmitOption,J=M.closeAfterSave,W=M.clearAfterSave;var z=(0,a.useMemo)((function(){var e,t=R[C.cA.COUNTS],n=t.find((function(e){var t;return e._id===(null===(t=D.countIn)||void 0===t?void 0:t._id)}));return D.type&&["INCOME","TRANSFER"].includes(D.type)?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(b.Z,(0,l.Z)({},U("countIn",{label:(0,f.Z)("countIn"),placeholder:(0,f.Z)("countIn"),required:!0,options:t},{childName:"subCountIn"}))),(null===n||void 0===n?void 0:n.childrenList)&&(null===n||void 0===n||null===(e=n.childrenList)||void 0===e?void 0:e.length)>0&&(0,O.jsx)(b.Z,(0,l.Z)({label:(0,f.Z)("subCountIn"),placeholder:(0,f.Z)("subCountIn")},U("subCountIn",{options:null===n||void 0===n?void 0:n.childrenList})))]}):null}),[R,null===(t=D.countIn)||void 0===t?void 0:t._id,D.type,U]),B=(0,a.useMemo)((function(){var e,t=R[C.cA.COUNTS],n=null===(e=t.find((function(e){var t;return e._id===(null===(t=D.countOut)||void 0===t?void 0:t._id)})))||void 0===e?void 0:e.childrenList;return D.type&&["EXPENSE","TRANSFER"].includes(D.type)?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(b.Z,(0,l.Z)({},U("countOut",{label:(0,f.Z)("countOut"),placeholder:(0,f.Z)("countOut"),required:!0,options:t,error:L.countOut},{childName:"subCountOut"}))),n&&n.length>0&&(0,O.jsx)(b.Z,(0,l.Z)({label:(0,f.Z)("subCountOut"),placeholder:(0,f.Z)("subCountOut")},U("subCountOut",{options:n,error:L.subCountOut})))]}):null}),[R,L.countOut,L.subCountOut,null===(n=D.countOut)||void 0===n?void 0:n._id,D.type,U]),K=(0,a.useMemo)((function(){var e,t=R[C.cA.CATEGORIES_TR].filter((function(e){return e.type===D.type})),n=null===(e=t.find((function(e){var t;return e._id===(null===(t=D.category)||void 0===t?void 0:t._id)})))||void 0===e?void 0:e.childrenList;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(b.Z,(0,l.Z)({},U("category",{label:(0,f.Z)("category"),placeholder:(0,f.Z)("category"),required:!0,options:t},{childName:"subCategory"}))),n&&n.length>0&&(0,O.jsx)(b.Z,(0,l.Z)({label:(0,f.Z)("subCategory"),placeholder:(0,f.Z)("subCategory")},U("subCategory",{options:n})))]})}),[R,null===(o=D.category)||void 0===o?void 0:o._id,D.type,U]);return(0,O.jsx)(c.Z,(0,l.Z)((0,l.Z)({isValid:k,onSubmit:G((function(e){var t="INCOME"===D.type&&["countOut","subCountOut"]||"EXPENSE"===D.type&&["countIn","subCountIn"]||[],n=(0,h.hJ)(e,t,"","amount");d&&d({_id:"",data:n},{closeAfterSave:J,clearAfterSave:W})}),(function(e){return console.log(e)})),onOptSelect:function(e){var t=e.value;t&&(q(t),w("type",t))}},N),{},{extraFooter:(0,O.jsx)(S.Z,{toggleOption:H,closeAfterSave:J,clearAfterSave:W}),children:(0,O.jsxs)(y.ZP,{className:"inputs",flex:"1",fillWidth:!0,maxHeight:"100%",padding:"12px",overflow:"auto",children:[(0,O.jsx)(s.Z,{label:(0,f.Z)("dateAndTime"),direction:"vertical",children:(0,O.jsx)(Z.ZP,(0,l.Z)({placeholder:(0,f.Z)("dateAndTime"),type:"datetime-local"},X("eventDate")))}),(0,O.jsxs)(I,{children:[(0,O.jsx)(s.Z,{label:(0,f.Z)("amount"),direction:"vertical",children:(0,O.jsx)(Z.ZP,(0,l.Z)({placeholder:(0,f.Z)("amount"),type:"number"},X("amount")))}),(0,O.jsx)(s.Z,{label:(0,f.Z)("currency"),direction:"vertical",children:(0,O.jsx)(Z.ZP,(0,l.Z)((0,l.Z)({placeholder:(0,f.Z)("currency")},X("currency")),{},{disabled:!0}))})]}),B,z,K,(0,O.jsx)(b.Z,(0,l.Z)({label:(0,f.Z)("contractor"),placeholder:(0,f.Z)("contractor")},U("contractor",{options:R[C.cA.CONTRACTORS]}))),(0,O.jsx)(s.Z,{label:(0,f.Z)("comment"),direction:"vertical",children:(0,O.jsx)(v.Z,(0,l.Z)({placeholder:(0,f.Z)("comment")},X("comment")))})]})}))}}}]);
//# sourceMappingURL=283.593bc38b.chunk.js.map