"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[993],{4993:function(n,e,i){i.r(e),i.d(e,{default:function(){return hn}});var t=i(168),r=i(9439),o=i(2791),l=i(2360),d=i(8495),a=i(6146),s=i(163),u=i(4781),c=i(8095),v=i(7348),f=i(1819),x=i(2483),p=i(1251),h=i(7689),m=i(4109),g=i(6522),Z=i(6272),C=i(9953),b=i(4925),j=i(119),P=function(n){return n.General="General",n.Customer="Customer",n.Invoicing="Invoicing",n.Delivery="Delivery",n.Additional="Additional",n}({}),y=(0,Z.Dl)(P),S=[{title:(0,g.t)("Manager"),getValue:function(n){var e,i;return null===n||void 0===n||null===(e=n.manager)||void 0===e||null===(i=e.user)||void 0===i?void 0:i.email},tab:P.General},{title:(0,g.t)("Reference"),getValue:function(n){var e;return null===n||void 0===n||null===(e=n.reference)||void 0===e?void 0:e.internal},tab:P.General},{title:(0,g.t)("Group reference"),getValue:function(n){var e,i;return null===n||void 0===n||null===(e=n.group)||void 0===e||null===(i=e.reference)||void 0===i?void 0:i.internal},tab:P.General},{title:(0,g.t)("Group strategy"),getValue:function(n){var e;return null===n||void 0===n||null===(e=n.group)||void 0===e?void 0:e.strategy},tab:P.General},{title:(0,g.t)("Totals"),CellComponent:j.N.OrderTotals,tab:P.General},{title:(0,g.t)("Status"),getValue:function(n){return null===n||void 0===n?void 0:n.status},tab:P.General},{CellComponent:j.N.OrderCustomerInfo,tab:P.Customer},{title:(0,g.t)("Invoicing"),CellComponent:j.N.OrderInvoicing,tab:P.Invoicing},{title:(0,g.t)("Delivery"),CellComponent:j.N.OrderDelivery,tab:P.Delivery},{title:(0,g.t)("Receiver"),CellComponent:j.N.OrderCustomerInfo,tab:P.Delivery},{title:(0,g.t)("Additional"),tab:P.Additional}],I={};S.forEach((function(n){var e=n.tab;e&&(I[e]?I[e].push(n):I[e]=[n])}));var w,O,k,V,B,D,A,_,z,E,G=i(3329),R=["CellComponent"],L=(0,l.ZP)(c.ZP)(w||(w=(0,t.Z)([""]))),M=function(n){var e=(0,u.on)(),i=(0,v.xA)().currentOrder,t=(0,o.useState)(P.General),l=(0,r.Z)(t,2),d=l[0],a=l[1],s=(0,o.useMemo)((function(){return I[d].map((function(n){var t=n.CellComponent,r=(0,b.Z)(n,R);return t?(0,G.jsx)(t,{overlayHandler:e.open,cell:r,data:i},r.title):(0,G.jsx)(j.N.Text,{overlayHandler:e.open,cell:r,data:i},r.title)}))}),[d,e.open,i]);return(0,G.jsxs)(L,{fillWidth:!0,flex:1,overflow:"auto",children:[(0,G.jsx)(C.Z,{optionProps:{fitContentH:!0},filterOptions:y,onOptSelect:function(n){a(null===n||void 0===n?void 0:n.value)}}),s]})},H=function(n){return n.info="Info",n.chat="Chat",n.statuses="Statuses",n.comments="Comments",n.tasks="tasks",n}({}),N=(0,Z.H1)(H),T=(0,l.ZP)(c.ZP)(O||(O=(0,t.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(n){return n.theme.sideBarBackgroundColor})),W=(0,l.ZP)(c.ZP)(k||(k=(0,t.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),F=(0,l.ZP)(c.ZP)(V||(V=(0,t.Z)([""]))),$=(0,l.ZP)(m.Z)(B||(B=(0,t.Z)(["\n  fill: ",";\n"])),(function(n){return n.theme.globals.colors.error})),U=(0,l.ZP)(m.Z)(D||(D=(0,t.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),X=function(n){var e,i=(0,o.useState)(0),t=(0,r.Z)(i,2),l=t[0],d=t[1],a=null===(e=(0,s.Zx)())||void 0===e?void 0:e.orderId,u=(0,v.xA)().currentOrder,f=(0,h.s0)(),x=(0,h.TH)(),Z=(0,o.useMemo)((function(){return N[l].value===H.info?(0,G.jsx)(M,{}):null}),[l]);return(0,G.jsxs)(T,{flex:1,fillWidth:!0,padding:"0 8px",children:[(0,G.jsx)(p.xB,{title:(0,g.t)("Order overview"),onBackPress:function(){if(null!==x&&void 0!==x&&x.pathname){var n,e=null===x||void 0===x||null===(n=x.pathname)||void 0===n?void 0:n.replace("/".concat((null===u||void 0===u?void 0:u._id)||a),"");e&&f(e)}}}),(0,G.jsxs)(W,{flex:1,fillWidth:!0,overflow:"auto",children:[(0,G.jsx)(C.Z,{filterOptions:N,optionProps:{fitContentH:!0},onOptSelect:function(n,e,i){return d(i)}}),Z]}),(0,G.jsxs)(F,{fxDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"8px 0",children:[(0,G.jsx)(m.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==n&&void 0!==n&&n.onEdit),onClick:null===n||void 0===n?void 0:n.onEdit}),(0,G.jsx)($,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==n&&void 0!==n&&n.onDelete),onClick:null===n||void 0===n?void 0:n.onDelete}),(0,G.jsxs)(c.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,G.jsx)(m.Z,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",isLoading:null===n||void 0===n?void 0:n.isRefresh,disabled:!(null!==n&&void 0!==n&&n.onRefresh),onClick:null===n||void 0===n?void 0:n.onRefresh}),(0,G.jsx)(U,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==n&&void 0!==n&&n.onOpenRightSide),onClick:null===n||void 0===n?void 0:n.onOpenRightSide})]})]})]})},q=(0,l.ZP)(c.ZP)(A||(A=(0,t.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor})),J=function(n){var e=n.toggleRightSideVisibility,i=(0,v.xA)().currentOrder,t=(0,o.useState)(!1)[1],r=(0,f.xc)().orders;return(0,G.jsxs)(q,{children:[(0,G.jsx)(X,{order:i,onRefresh:function(){(null===i||void 0===i?void 0:i._id)&&r.getById({data:{_id:null===i||void 0===i?void 0:i._id,options:{refreshCurrent:!0}},onLoading:t})},onOpenRightSide:e}),(0,G.jsx)(x.j,{})]})},K=i(6492),Q=i(1413),Y=i(400),nn=i(2517),en=i(3383),tn=i(7824),rn=function(n){var e=(0,f.xc)()[tn.d.orders],i=(0,o.useState)(!1),t=(0,r.Z)(i,2),l=t[0],d=t[1],a=(0,o.useState)(0),s=(0,r.Z)(a,2),u=s[0],x=s[1],p=(0,v.xA)().currentOrder,h=(0,o.useMemo)((function(){var n;return null===p||void 0===p||null===(n=p.slots)||void 0===n?void 0:n.filter((function(n){var e,i;return(null===(e=n.product)||void 0===e?void 0:e.type)===(null===(i=en.jI[u])||void 0===i?void 0:i.value)}))}),[null===p||void 0===p?void 0:p.slots,u]),m=(0,o.useMemo)((function(){return{actionsCreator:function(n){return[{icon:"refresh",name:"refresh",onClick:function(){null!==p&&void 0!==p&&p._id&&e.getSlots({data:{params:{order:(0,Z.rE)(p)}},onLoading:d})}}]}}}),[p,e]);return(0,o.useEffect)((function(){null!==p&&void 0!==p&&p._id&&e.getSlots({data:{params:{order:(0,Z.rE)(p)}}})}),[]),(0,G.jsxs)(c.ZP,{fillWidth:!0,overflow:"hidden",flex:1,children:[(0,G.jsx)(c.ZP,{fillWidth:!0,children:(0,G.jsx)(C.Z,{filterOptions:en.jI,currentIndex:u,onOptSelect:function(n,e,i){x(i)}})}),(0,G.jsx)(Y.ZP,(0,Q.Z)((0,Q.Z)({isSearch:!1,isFilter:!1},m),{},{tableData:h,isLoading:l,tableTitles:nn.$4}))]})},on=i(7946),ln=function(n){var e=n.order,i=(0,v.xA)(),t=null!==e&&void 0!==e?e:null===i||void 0===i?void 0:i.currentOrder,l=(0,f.xc)().get(tn.d.orders),d=(0,o.useState)(!1),a=(0,r.Z)(d,2),s=a[0],u=a[1],c=(0,o.useMemo)((function(){return{actionsCreator:function(n){return[{name:"refresh",icon:"refresh",onClick:function(){null!==t&&void 0!==t&&t._id&&l.getInvoicesByOrderId({data:{params:{order:(0,Z.rE)(t)}}})}}]}}}),[t,l]);return(0,o.useEffect)((function(){null!==t&&void 0!==t&&t._id&&l.getInvoicesByOrderId({data:{params:{order:(0,Z.rE)(t)}},onLoading:u})}),[]),(0,G.jsx)(Y.ZP,(0,Q.Z)((0,Q.Z)({},c),{},{isSearch:!1,isFilter:!1,isLoading:s,tableData:null===t||void 0===t?void 0:t.invoices,tableTitles:on.x}))},dn=function(){return(0,G.jsx)(Y.ZP,{isSearch:!1,isFilter:!1})},an=function(n){return n.Content="Content",n.Invoices="Invoices",n.Payments="Payments",n}(an||{}),sn=(0,Z.H1)(an),un=(0,l.ZP)(c.ZP)(_||(_=(0,t.Z)(["\n  overflow: auto;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);\n  }\n"])),(function(n){return n.theme.globals.timingFunctionMain}),(function(n){return n.theme.backgroundColorLight}),(function(n){return n.isVisible?0:100})),cn=(0,l.ZP)(c.ZP)(z||(z=(0,t.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor})),vn=function(n){var e,i=n.toggleVisibility,t=n.isVisible,l=null===(e=(0,s.Zx)())||void 0===e?void 0:e.orderId,d=(0,v.xA)().currentOrder,a=(0,o.useState)(an.Content),u=(0,r.Z)(a,2),f=u[0],x=u[1],p=(0,o.useMemo)((function(){return f===an.Content?(0,G.jsx)(rn,{}):f===an.Invoices?(0,G.jsx)(ln,{}):f===an.Payments?(0,G.jsx)(dn,{}):void 0}),[f]);return(0,G.jsxs)(un,{overflow:"hidden",fillHeight:!0,isVisible:t,children:[(0,G.jsxs)(cn,{fillWidth:!0,gap:4,isVisible:t,fxDirection:"row",justifyContent:"space-between",children:[(0,G.jsx)(m.Z,{variant:"textExtraSmall",icon:"SmallArrowLeft",style:{padding:6},onClick:i,children:"Back"}),(0,G.jsxs)(c.ZP,{padding:"0 8px",children:[(0,G.jsx)(K.x,{$weight:600,$size:14,children:null===d||void 0===d?void 0:d.code}),(0,G.jsx)(K.x,{$size:10,children:l})]})]}),(0,G.jsx)(c.ZP,{children:(0,G.jsx)(C.Z,{filterOptions:sn,defaultValue:f,onOptSelect:function(n,e,i){x(e)},preventFilter:!0})}),p]})},fn=(0,o.createContext)({}),xn=function(n){var e=n.children,i=(0,v.xA)().currentOrder,t=(0,o.useMemo)((function(){return{currentOrder:i}}),[i]);return(0,G.jsx)(fn.Provider,{value:t,children:e})},pn=l.ZP.div(E||(E=(0,t.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),d.VU),hn=function(n){var e=n.path,i=(0,f.xc)()[tn.d.orders],t=(0,o.useState)(!1),l=(0,r.Z)(t,2),d=l[0],c=l[1],v=(0,s.Zx)().orderId,x=(0,o.useCallback)((function(){c((function(n){return!n}))}),[]);return(0,o.useEffect)((function(){v&&i.getById({data:{_id:v,options:{refreshCurrent:!0}}})}),[v,i]),(0,G.jsx)(a.vI,{path:e,children:(0,G.jsx)(xn,{children:(0,G.jsx)(u.ZP,{children:(0,G.jsxs)(pn,{children:[(0,G.jsx)(J,{toggleRightSideVisibility:x}),(0,G.jsx)(vn,{toggleVisibility:x,isVisible:d})]})})})})}}}]);
//# sourceMappingURL=993.0965f407.chunk.js.map