"use strict";(self.webpackChunkcounter_app_ts=self.webpackChunkcounter_app_ts||[]).push([[556],{2397:function(n,e,i){i.d(e,{E_:function(){return P},QK:function(){return j}});var t,o,r,l=i(168),d=i(4942),a=i(1413),u=i(9439),c=i(4925),s=i(9656),v=i(2791),f=i(8095),p=i(8449),x=i(4990),h=i(6681),m=i(9964),g=i(2360),Z=i(4109),b=i(3329),w=["title","fillHeight","onSubmit","onClose","defaultState","type"],j=function(n){return n.img_preview="img_preview",n.img_1x="img_1x",n.img_2x="img_2x",n.webp="webp",n}({}),P=[{label:"Preview",value:j.img_preview,required:!0},{label:"1x",value:j.img_1x},{label:"2x",value:j.img_2x},{label:"Webp",value:j.webp}],_=g.ZP.div(t||(t=(0,l.Z)(["\n  flex: 1;\n\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 1fr min-content min-content;\n  gap: 6px;\n\n  padding: 8px;\n  overflow: hidden;\n"]))),C=g.ZP.label(o||(o=(0,l.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  height: 100%;\n  width: 100%;\n  max-height: 100%;\n\n  fill: ",";\n\n  border-radius: 2px;\n  border: 2px solid ",";\n\n  transition: ",";\n\n  pointer-events: ",";\n  &:hover {\n    fill: ",";\n    border-color: ",";\n  }\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.globals.timingFnMui}),(function(n){return n.disabled?"none":"all"}),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.accentColor.light})),y=g.ZP.img(r||(r=(0,l.Z)(["\n  //min-width: 100px;\n  //max-width: 100px;\n  //\n  //height: 145px;\n\n  max-height: 100%;\n"])));e.ZP=function(n){var e,i=n.title,t=n.fillHeight,o=void 0===t||t,r=n.onSubmit,l=n.onClose,g=n.defaultState,j=n.type,I=(0,c.Z)(n,w),S=(0,v.useState)(P[0]),k=(0,u.Z)(S,2),M=k[0],D=k[1],z=(0,v.useState)(g||{}),W=(0,u.Z)(z,2),E=W[0],H=W[1],q=(0,v.useRef)(null);return(0,b.jsx)(s.Z,(0,a.Z)((0,a.Z)({title:i||"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0438\u0439 \u0441\u0435\u0442 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u044c",fillHeight:o},I),{},{onClose:l,onSubmit:function(){r&&r(E),l&&l()},children:(0,b.jsxs)(_,{children:[(0,b.jsx)(f.ZP,{fillWidth:!0,fillHeight:!0,alignItems:"center",overflow:"hidden",children:null!==M&&void 0!==M&&M.value&&E[null===M||void 0===M?void 0:M.value]?(0,b.jsx)(y,{src:E[null===M||void 0===M?void 0:M.value]}):(0,b.jsxs)(C,{disabled:!0,children:[(0,b.jsx)(p.Z,{icon:"plus",size:"56px"}),(0,b.jsx)("input",{name:"img_preview",type:"file",className:"visually-hidden",disabled:!0})]})}),(null===M||void 0===M?void 0:M.value)&&(0,b.jsxs)(f.ZP,{fxDirection:"row",gap:6,alignItems:"flex-end",children:[(0,b.jsx)(x.Z,{label:null===M||void 0===M||null===(e=M.label)||void 0===e?void 0:e.replace("img_","image ").toUpperCase(),required:null===M||void 0===M?void 0:M.required,children:(0,b.jsx)(h.ZP,{ref:q,name:null===M||void 0===M?void 0:M.value,value:E[null===M||void 0===M?void 0:M.value]||"",onChange:function(n){var e=n.target,i=e.name,t=e.value;H((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,d.Z)({},i,t))}))},placeholder:"\u0412\u043f\u0438\u0448\u0456\u0442\u044c \u0430\u0431\u043e \u0432\u0441\u0442\u0430\u0432\u0442\u0435 \u043f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f \u043d\u0430 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",required:null===M||void 0===M?void 0:M.required,autoFocus:!0})}),(0,b.jsx)(Z.Z,{variant:"onlyIcon",icon:"close",size:"28px",iconSize:"100%",onClick:function(){(null===M||void 0===M?void 0:M.value)&&H((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,d.Z)({},null===M||void 0===M?void 0:M.value,""))}))}})]}),(0,b.jsx)(f.ZP,{padding:"8px 0",children:(0,b.jsx)(m.Z,{options:P,defaultIndex:j?P.findIndex((function(n){return n.value===j})):0,onSelect:function(n){D(n.option)}})})]})}))}},1771:function(n,e,i){var t,o=i(168),r=i(3433),l=i(9439),d=i(2791),a=i(8095),u=i(6522),c=i(4109),s=i(6785),v=i(2360),f=i(3329),p=function n(e){var i,t,o=e.item,r=(e.index,e.lvl),l=void 0===r?0:r,a=e.selectedIds,u=e.onRemove,s=void 0===u?function(){console.log("onRemove not passed",l)}:u,v=(0,d.useMemo)((function(){var e;return null===o||void 0===o||null===(e=o.childrenList)||void 0===e?void 0:e.map((function(e,i){return(0,f.jsx)(n,{item:e,index:i,onRemove:s,lvl:l+1,selectedIds:a},"item_lvl_".concat(l,"_").concat(e._id))}))}),[null===o||void 0===o?void 0:o.childrenList,l,s,a]),p=(0,d.useMemo)((function(){return a.includes(o._id)}),[o._id,a]);return(0,f.jsxs)(f.Fragment,{children:[p&&(0,f.jsxs)(x,{fxDirection:"row",alignItems:"center",padding:"0 2px 0 12px",gap:2,children:[(null===o||void 0===o||null===(i=o.parent)||void 0===i?void 0:i.label)&&"".concat(null===o||void 0===o||null===(t=o.parent)||void 0===t?void 0:t.label,"/"),"".concat(null===o||void 0===o?void 0:o.label),(0,f.jsx)(c.Z,{variant:"onlyIcon",endIcon:"close",size:"24px",endIconSize:"80%",onClick:function(){return s&&s(o._id)}})]}),v]})},x=(0,v.ZP)(a.ZP)(t||(t=(0,o.Z)(["\n  font-weight: 500;\n  font-size: 12px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  border: 1px solid ",";\n"])),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.accentColor.base}));e.Z=function(n){var e=n.options,i=n.onSelect,t=n.onChange,o=n.defaultData,c=(0,d.useState)([]),v=(0,l.Z)(c,2),x=v[0],h=v[1],m=(0,d.useCallback)((function(n){h((function(e){var o=n?e.includes(null===n||void 0===n?void 0:n._id)?e.filter((function(e){return e!==(null===n||void 0===n?void 0:n._id)})):[].concat((0,r.Z)(e),[n._id]):e;return i&&(null===n||void 0===n?void 0:n._id)&&i(null===n||void 0===n?void 0:n._id),t&&t(o),o}))}),[t,i]),g=(0,d.useCallback)((function(n){h((function(e){var i=e.filter((function(e){return e!==n}));return t&&t(i),i}))}),[t]),Z=(0,d.useMemo)((function(){return null===e||void 0===e?void 0:e.map((function(n,e){return(0,f.jsx)(p,{item:n,index:e,selectedIds:x,onRemove:g},"item_lvl_0_".concat(n._id))}))}),[g,e,x]);return(0,d.useEffect)((function(){o&&h(o)}),[o]),(0,f.jsxs)(a.ZP,{fillWidth:!0,gap:6,children:[(0,f.jsx)(s.Z,{treeMode:!0,dropDownIsAbsolute:!0,defaultValue:o,label:(0,u.ZP)("categories"),placeholder:(0,u.ZP)("categories"),required:!0,options:e,onSelect:m}),(0,f.jsx)(a.ZP,{fxDirection:"row",flexWrap:"wrap",gap:8,children:Z})]})}},8961:function(n,e,i){var t,o,r=i(168),l=i(4942),d=i(1413),a=i(3433),u=i(9439),c=i(8095),s=i(2791),v=i(2360),f=i(6492),p=i(5188),x=i(2397),h=i(4717),m=i(4109),g=i(7220),Z=i(3329),b=v.ZP.button(t||(t=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  color: ",";\n  font-family: inherit;\n  font-size: 12px;\n  font-weight: 600;\n  padding: 2px 6px;\n\n  background-color: transparent;\n  border: 0;\n\n  cursor: pointer;\n"])),(function(n){return n.theme.accentColor.base})),w=(0,v.ZP)(c.ZP)(o||(o=(0,r.Z)(["\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n"]))),j=function(n){var e=n.onMoveUpPress,i=n.onMoveDownPress,t=n.currentOrder,o=n.canMoveDown,r=n.canMoveUp;return(0,Z.jsxs)(c.ZP,{style:{minWidth:"fit-content"},fillHeight:!0,gap:6,justifyContent:"space-between",overflow:"hidden",children:[(0,Z.jsx)(m.Z,{variant:"onlyIcon",icon:"SmallArrowUp",disabled:!r,onClick:e}),(0,Z.jsx)(f.x,{$align:"center",$weight:600,children:t||0}),(0,Z.jsx)(m.Z,{variant:"onlyIcon",icon:"SmallArrowDown",disabled:!o,onClick:i})]})};e.Z=function(n){var e=n.onChangeState,i=n.renderHeader,t=n.initialData,o=n.canEditOrder,r=void 0===o||o,v=n.onClose,m=n.FooterComponent,P=n.contentContainerStyle,_=(0,p.kw)(),C=(0,s.useState)([]),y=(0,u.Z)(C,2),I=y[0],S=y[1],k=(0,s.useCallback)((function(n,e){S((function(i){var t=n+e;return i.map((function(e,i){return t>I.length||t<1?e:e.order===t?(0,d.Z)((0,d.Z)({},e),{},{order:n}):e.order===n?(0,d.Z)((0,d.Z)({},e),{},{order:t}):e}))}))}),[I.length]),M=(0,s.useCallback)((function(n){n.setId;var i=n.setIndex,t=n.type,o=n.uri;S((function(n){var r=n.map((function(n,e){return i===e?(0,d.Z)((0,d.Z)({},n),{},(0,l.Z)({},t,o)):n}));return e&&e(r),r}))}),[e]),D=(0,s.useCallback)((function(n){n.setId;var i=n.setIndex,t=n.type;(t!==x.QK.img_preview||window.confirm("\u0411\u0443\u0434\u0435 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e \u0446\u0456\u043b\u0438\u0439 \u0441\u0435\u0442 \u0444\u043e\u0442\u043e.\n\u041f\u0440\u043e\u0434\u043e\u0432\u0436\u0438\u0442\u0438?"))&&S((function(n){var o=n.map((function(n,e){return i===e?(0,d.Z)((0,d.Z)({},n),{},(0,l.Z)({},t,"")):n})).filter((function(n){return n.img_preview})).map((function(n,e){return(0,d.Z)((0,d.Z)({},n),{},{order:e+1})}));return e&&e(o),o}))}),[e]),z=function(){_.open({ModalChildren:x.ZP,modalChildrenProps:{onSubmit:function(n){var i;i=n,S((function(n){var t=[].concat((0,a.Z)(n),[(0,d.Z)((0,d.Z)({},i),{},{order:I.length+1})]);return e&&e(t),t}))}}})},W=(0,s.useMemo)((function(){var n,e=I;try{e=I.sort((function(n,e){return(null===n||void 0===n?void 0:n.order)-(null===e||void 0===e?void 0:e.order)}))}catch(i){}return null===(n=e)||void 0===n?void 0:n.map((function(n,e){var i=x.E_.map((function(i){return(0,Z.jsx)(h.Z,{src:n[i.value],title:i.label,onEditPress:function(){_.open({ModalChildren:x.ZP,modalChildrenProps:{defaultState:n,type:i.value,onSubmit:function(t){i.value&&t[i.value]&&M({setId:null===n||void 0===n?void 0:n._id,setIndex:e,uri:t[i.value],type:i.value})}}})},onDeletePress:function(){D({setId:"",setIndex:e,type:i.value})}},"small-prev_".concat(i.value))}));return(0,Z.jsxs)(w,{gap:2,fxDirection:"row",fillWidth:!0,overflow:"auto",children:[r&&(0,Z.jsx)(j,{currentOrder:null===n||void 0===n?void 0:n.order,canMoveUp:(null===n||void 0===n?void 0:n.order)>1,onMoveUpPress:function(){g.sr.isNum(n.order)&&k(n.order,-1)},canMoveDown:(null===n||void 0===n?void 0:n.order)<I.length,onMoveDownPress:function(){g.sr.isNum(n.order)&&k(n.order,1)}}),i]},"images-set_".concat((null===n||void 0===n?void 0:n._id)||e))}))}),[r,I,M,k,D,_]);return(0,s.useEffect)((function(){t&&S(t)}),[]),(0,Z.jsxs)(Z.Fragment,{children:[i||(0,Z.jsxs)(c.ZP,{padding:"4px 8px",height:"32px",fxDirection:"row",gap:2,alignItems:"center",justifyContent:"space-between",children:[(0,Z.jsx)(f.x,{$weight:600,$size:14,children:"\u0424\u043e\u0442\u043e"}),(0,Z.jsx)(b,{type:"button",onClick:v||z,children:v?"\u0417\u0430\u043a\u0440\u0438\u0442\u0438":"\u0414\u043e\u0434\u0430\u0442\u0438"})]}),(0,Z.jsx)(c.ZP,{gap:2,padding:"8px 0",style:P,children:W}),m&&(0,Z.jsx)(m,{onAddNewImageSetPress:z})]})}},4717:function(n,e,i){var t,o,r,l=i(168),d=i(4109),a=i(6492),u=i(2360),c=i(8095),s=(i(2791),i(3329)),v=(0,u.ZP)(c.ZP)(t||(t=(0,l.Z)(["\n  min-width: 90px;\n  width: 90px;\n\n  pointer-events: ",";\n\n  &:hover {\n    & .top {\n      min-height: 36px;\n    }\n  }\n"])),(function(n){return n.disabled?"none":"all"})),f=(0,u.ZP)(c.ZP)(o||(o=(0,l.Z)(["\n  //position: absolute;\n  //top: 0;\n  //left: 0;\n  //z-index: 5;\n\n  height: 0;\n  min-height: 0;\n  padding: 0 6px;\n  overflow: hidden;\n\n  //background-color: rgba(26, 26, 26, 0.2);\n  //backdrop-filter: blur(3px);\n\n  transition: min-height ",";\n"])),(function(n){return n.theme.globals.timingFnMain})),p=(0,u.ZP)(c.ZP)(r||(r=(0,l.Z)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 5;\n\n  background-color: rgba(26, 26, 26, 0.2);\n  backdrop-filter: blur(3px);\n"])));e.Z=function(n){var e=n.title,i=n.src,t=n.onDeletePress,o=n.onEditPress,r=n.disabled;n.maxWidth,n.maxHeight;return(0,s.jsxs)(v,{className:"ImagePreview_".concat(e),fillWidth:!0,overflow:"hidden",gap:4,height:"115px",border:"1px solid lightgrey",borderRadius:"2px",style:{position:"relative"},disabled:r,children:[i&&(0,s.jsx)("img",{src:i,alt:e,style:{width:"100%"}}),(0,s.jsxs)(p,{fillWidth:!0,children:[(0,s.jsx)(c.ZP,{padding:"4px",children:(0,s.jsx)(a.x,{$size:12,$weight:500,color:"#fff",children:e})}),(0,s.jsxs)(f,{className:"top",fxDirection:"row",gap:6,style:{fill:"#fff"},alignItems:"center",justifyContent:"space-between",fillWidth:!0,children:[(0,s.jsx)(d.Z,{variant:"onlyIcon",icon:"edit",iconSize:"28px",disabled:!o,onClick:o}),(0,s.jsx)(d.Z,{variant:"onlyIcon",icon:"delete",iconSize:"28px",disabled:!t,onClick:t})]})]})]})}}}]);
//# sourceMappingURL=556.35b2023d.chunk.js.map